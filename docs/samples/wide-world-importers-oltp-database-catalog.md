---
title: Каталог базы данных WideWorldImporters OLTP - SQL | Документация Майкрософт
ms.prod: sql
ms.prod_service: sql
ms.technology: samples
ms.custom: ''
ms.date: 04/04/2018
ms.reviewer: ''
ms.topic: conceptual
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 7e9d8fe2dba82e83594c73e442a2e52260900ba9
ms.sourcegitcommit: b2464064c0566590e486a3aafae6d67ce2645cef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/15/2019
ms.locfileid: "68091256"
---
# <a name="wideworldimporters-database-catalog"></a>Каталог базы данных WideWorldImporters
[!INCLUDE[appliesto-ss-asdb-xxxx-xxx-md](../includes/appliesto-ss-asdb-xxxx-xxx-md.md)]
База данных WideWorldImporters содержит все сведения о транзакциях и ежедневные данные для продажи и покупки, а также данные датчиков для автомобилей и "холодных" комнаты.

## <a name="schemas"></a>Схемы

WideWorldImporters использует схемы для различных целей, таких как хранение данных, определение того, как доступ к данным для пользователей и предоставление объектов для интеграции и разработки для хранилища данных.

### <a name="data-schemas"></a>Схемы данных

Эти схемы содержат данные. Несколько таблиц требуются другие схемы и находятся в схеме приложения.

|схема|Описание|
|-----------------------------|---------------------|
|Приложение|Пользователи уровня приложения, контакты и параметры. Он также содержит ссылочные таблицы с данными, который используется несколькими схемами|
|Purchasing|Элемент акции приобретает у поставщиков, а также сведения о поставщиках.|  
|Sales|Биржевая элемента продажи, розничные клиенты и сведения о клиентах и потенциальных пользователей. |  
|Warehouse|Элемент акции инвентаризации и транзакций.|  

### <a name="secure-access-schemas"></a>Защита доступа к схемам

Эти схемы используются для внешних приложений, которые не допускаются для прямого доступа к таблицам данных. Они содержат представлений и хранимых процедур, используемых внешними приложениями.

|схема|Описание|
|-----------------------------|---------------------|
|Веб-сайт|Весь доступ к базе данных на веб-сайте компании осуществляется через эту схему.|
|Отчеты|Весь доступ к базе данных из отчетов служб Reporting Services осуществляется через эту схему.|
|PowerBI|Весь доступ к базе данных, панелей мониторинга Power BI через корпоративный шлюз осуществляется через эту схему.|

Обратите внимание, что отчеты и PowerBI схемы не используются в первоначальной версии образца базы данных. Тем не менее все службы Reporting Services и Power BI примерами, созданными на основе этой базы данных, рекомендуется использовать эти схемы.

### <a name="development-schemas"></a>Разработка схемы

Специальная схемы

|схема|Описание|
|-----------------------------|---------------------|
|Интеграция|Объекты и процедуры, необходимые для интеграции хранилища данных (т. е. Перемещение данных в базу данных WideWorldImportersDW).|
|Последовательности;|Содержит последовательности, используемого всеми таблицами в приложении.|

## <a name="tables"></a>Таблицы

Все таблицы в базе данных — в схем данных.

### <a name="application-schema"></a>Схема приложения

Сведения о параметров и люди (пользователи и контакты), а также общие ссылочные таблицы (общие для нескольких схем).

|Таблица|Описание|
|-----------------------------|---------------------|
|SystemParameters|Содержит настраиваемые параметры для всей системы.|
|Люди|Содержит имена пользователей, контактные данные для всех, кто использовать приложение, а также для людей, посвящена Wide World Importers в организации клиентов. Это включает персонала, клиентами, поставщиками и все другие контакты. Для тех, кто было предоставлено разрешение на использование системы или веб-сайта информация включает сведения для входа.|
|Города|Существует много адресов, которые хранятся в системе, для людей, адреса доставки для клиентов организации, раскладки адреса в поставщики и т. д. Всякий раз, когда хранится адрес, является ссылкой на Город в этой таблице. Есть также пространственных расположение для каждого города.|
|StateProvinces|Города являются частью штатов или провинций. Эта таблица содержит сведения о них, включая пространственных данных, описывающих границы каждого штата или провинции.|
|Странах|Являются частью стран, штатов или провинций. Эта таблица содержит сведения о них, включая пространственных данных, описывающих границы каждой страны.|
|DeliveryMethods|Варианты для предоставления биржевых элементы (например, грузовик/van, post, pickup, courier т. д.)|
|PaymentMethods|Варианты для платежи (например, денежных средств, проверка, электронных ПЛАТЕЖЕЙ, и т.д.)|
|TransactionTypes|Типы клиентов, поставщика или биржевых операций (например, счет, кредит-ноты т. д.)|

### <a name="purchasing-schema"></a>Приобретение схемы

Сведения, поставщиков и элемент акции покупок.

|Таблица|Описание|
|-----------------------------|---------------------|
|Suppliers|Основной сущности таблицы для поставщиков (организаций)|
|SupplierCategories|Категории для поставщиков (например, novelties, toys, одежда, упаковки и т. д.)|
|SupplierTransactions|Всех финансовых операций, связанных с поставщиком (счета, платежи)|
|PurchaseOrders|Сведения поставщика заказов на покупку|
|PurchaseOrderLines|Заказы на покупку строки подробных данных от поставщика|

 
### <a name="sales-schema"></a>Продажи схемы

Сведения клиентов, сотрудников отдела продаж и элемент акции продаж.

|Таблица|Описание|
|-----------------------------|---------------------|
|Заказчики|Основной сущности таблицы для клиентов (организаций или отдельных пользователей)|
|CustomerCategories|Категории для клиентов (т. е нестандартные хранилищ, супермаркетах т. д.)|
|BuyingGroups|Организаций-клиентов может быть частью группы, которые точный степень покупки|
|CustomerTransactions|Всех финансовых операций, связанных с клиентами (счета, платежи)|
|SpecialDeals|Специальные цены. Это можно включать предопределенной цены, скидки в долларах или процент скидки.|
|Orders|Подробности заказов клиентов|
|OrderLines|Строки детализации из заказов клиента|
|Счета-фактуры|Сведения о счетов клиента|
|InvoiceLines|Строки подробных данных из счетов клиента|

### <a name="warehouse-schema"></a>Схема хранилища

Сведения о стандартных элементов, их holdings и транзакций.

|Таблица|Описание|
|-----------------------------|---------------------|
|StockItems|Таблица основной сущности для стандартных элементов|
|StockItemHoldings|Non темпоральные столбцы для стандартных элементов. Это часто обновляемые столбцы.|
|StockGroups|Группы для упорядочивания элементов акций (например, novelties, toys, пищевые novelties т. д.)|
|StockItemStockGroups|Биржевые элементы, которые, в котором stock группирует (многие ко многим)|
|Цвета|Биржевые элементов (при необходимости) может иметь цвета|
|PackageTypes|Можно упаковать на складе способы (например, поле, упаковке, палитра, кг, и т.д.|
|StockItemTransactions|Транзакции, охватывающие все перемещения всех стандартных элементов (приемки, продажи, списания)|
|VehicleTemperatures|Регулярно записанные температуру холодильник автомобиля|
|ColdRoomTemperatures|Регулярно записываются температуру холодильник "холодных" комнаты|


## <a name="design-considerations"></a>Рекомендации по проектированию

Разработка базы данных является субъективным и нет правильного или неправильного способа для создания базы данных. Показать идеи о том, как разработать собственную базу данных, схемы и таблицы в этой базе данных.

### <a name="schema-design"></a>Структура схемы

WideWorldImporters использует небольшое количество схем, так как это простым для понимания системы баз данных и продемонстрировать принципы базы данных.  

По возможности базы данных выравнивает таблицы, которые часто запрашиваются в ту же схему, чтобы свести к минимуму сложности соединения друг с другом.

Схемы базы данных была в код создан на основе ряда таблиц метаданных в другой базе данных WWI_Preparation. Это дает WideWorldImporters очень высокая степень согласованности проектирования, именования согласованность и полноту. Дополнительные сведения о том, как был создан схемы см. исходный код: [wide-world-importers/wwi скрипты базы данных](https://github.com/Microsoft/sql-server-samples/tree/master/samples/databases/wide-world-importers/sample-scripts)

### <a name="table-design"></a>Конструктору таблиц

- Все таблицы имеют один столбец первичного ключа для простоты соединения.
- Все схемы, таблицы, столбцы, индексы и проверочные ограничения имеют описание расширенное свойство, которое можно использовать для определения назначения объект или столбец. Оптимизированные для памяти таблицы являются исключением это, так как они не поддерживают в настоящее время расширенные свойства.
- Все внешние ключи индексируются автоматически, если не используется другой некластеризованный индекс, имеющий один и тот же компонент слева.
- Автоматическая нумерация таблиц основано на последовательности. Эти последовательности гораздо проще работать с связанных серверов и подобных средах от столбцов ИДЕНТИФИКАТОРОВ. Оптимизированные для памяти таблицы используйте столбцы ИДЕНТИФИКАТОРОВ, так как они не поддерживают в SQL Server 2016.
- Одну последовательность (TransactionID) используется для этих таблиц: CustomerTransactions SupplierTransactions и StockItemTransactions. Это показывает, как набор таблиц могут иметь одну последовательность.
- Некоторые столбцы имеют соответствующие значения по умолчанию.

### <a name="security-schemas"></a>Безопасность схемы

Для обеспечения безопасности WideWorldImporters не поддерживает внешние приложения прямой доступ к схем данных. Чтобы изолировать доступ, WideWorldImporters использует схемы доступа, которые не содержат данных, но содержат представлений и хранимых процедур. Внешним приложениям использовать эти схемы безопасности для получения данных, они могут просматривать.  Таким образом, пользователи могут запускать только представлений и хранимых процедур в схемах безопасного доступа

Например этот пример включает панели мониторинга Power BI. Внешнее приложение обращается к эти панели мониторинга Power BI из шлюза Power BI как пользователь с разрешением только для чтения на схему PowerBI.  Для разрешения только для чтения пользователь должен только разрешения SELECT и EXECUTE на схему, PowerBI. Администратор базы данных в WWI назначает эти разрешения, при необходимости.

## <a name="stored-procedures"></a>Хранимые процедуры

Хранимые процедуры, упорядочены в схемах. Большая часть схемы используются для настройки или целей пример.

`Website` Схема содержит хранимые процедуры, которые могут использоваться веб-интерфейса.

`Reports` И `PowerBI` схемы предназначены для служб reporting services и целей PowerBI. Любые расширения примера, рекомендуется использовать эти схемы для составления отчетов.

### <a name="website-schema"></a>Схемы веб-сайта

Ниже приведены процедуры, используемые клиентским приложением, например веб-интерфейса.

|Процедура|Цель|
|-----------------------------|---------------------|
|ActivateWebsiteLogon|Позволяет человека (из `Application.People`) доступ к веб-сайта.|
|Изменение пароля|Изменяет пароль пользователя (для пользователей, которые не используют механизмы внешней проверки подлинности).|
|InsertCustomerOrders|Позволяет вставить один или несколько заказов клиента (в том числе строки заказов).|
|InvoiceCustomerOrders|Принимает список для выставления счетов и обрабатывает накладных.|
|RecordColdRoomTemperatures|Принимает список данных датчика, в качестве параметра возвращающих табличные значения (TVP) и применяет данные к `Warehouse.ColdRoomTemperatures` темпоральной таблицы.|
|RecordVehicleTemperature|Принимает массив JSON и использует его для обновления `Warehouse.VehicleTemperatures`.|
|SearchForCustomers|Поиск клиентов по имени или части имени (название организации или имя).|
|SearchForPeople|Выполняет поиск людей по имени или части имени.|
|SearchForStockItems|Выполняет поиск стандартных элементов по имени или часть имени или маркетинговые комментарии.|
|SearchForStockItemsByTags|Выполняет поиск стандартных элементов по тегам.|
|SearchForSuppliers|Поиск поставщиков по имени или части имени (название организации или имя).|

### <a name="integration-schema"></a>Интеграция схемы

Хранимые процедуры в этой схеме используются в процессе ETL. Они получают данные, необходимые из различных таблиц в течение промежутка времени, требующегося [ETL-пакета](wide-world-importers-perform-etl.md).

### <a name="dataloadsimulation-schema"></a>DataLoadSimulation схемы

Имитирует рабочей нагрузки, которая вставляет продажи и покупки. Главная хранимая процедура является `PopulateDataToCurrentDate`, который используется для вставки демонстрационные данные до текущей даты.

|Процедура|Цель|
|-----------------------------|---------------------|
|Configuration_ApplyDataLoadSimulationProcedures|Воссоздает процедуры требуется для данных моделирование нагрузки. Это необходимо для переноса данных до текущей даты.|
|Configuration_RemoveDataLoadSimulationProcedures|При этом удаляются процедуры снова после завершения моделирования данных.|
|DeactivateTemporalTablesBeforeDataLoad|Удаляет временные характер всем темпоральным таблицам и там, где это применимо, применяется триггер таким образом, можно внести изменения, как если бы, если они применялись на более раннюю, чем sys темпоральных таблиц.|
|PopulateDataToCurrentDate|Использовать для переноса данных до текущей даты. Должны быть выполнены перед другие параметры конфигурации после восстановления базы данных из начальной резервной копии.|
|ReactivateTemporalTablesAfterDataLoad|Вновь устанавливает темпоральных таблиц, включая проверку согласованности данных. (Удаление триггеров).|


### <a name="application-schema"></a>Схема приложения

Эти процедуры используются для настройки примера. Они используются для применения функции выпуска enterprise до версии выпуска standard edition образца, а также для добавления аудит и полнотекстового индексирования.

|Процедура|Цель|
|-----------------------------|---------------------|
|AddRoleMemberIfNonexistant|Добавляет элемент в роли, если элемент уже не находится в роли|
|Configuration_ApplyAuditing|Аудит ADDS. Аудит сервера применяется для баз данных standard edition; Аудит дополнительные базы данных добавляется для выпуска enterprise edition.|
|Configuration_ApplyColumnstoreIndexing|Применяется для индексирования columnstore `Sales.OrderLines` и `Sales.InvoiceLines` и повторно индексирует соответствующим образом.|
|Configuration_ApplyFullTextIndexing|Применяет полнотекстовых индексов для `Application.People`, `Sales.Customers`, `Purchasing.Suppliers`, и `Warehouse.StockItems`. Заменяет `Website.SearchForPeople`, `Website.SearchForSuppliers`, `Website.SearchForCustomers`, `Website.SearchForStockItems`, `Website.SearchForStockItemsByTags` с замены процедур, использующих полнотекстового индексирования.|
|Configuration_ApplyPartitioning|Применяется для секционирования таблиц `Sales.CustomerTransactions` и `Purchasing.SupplierTransactions`и повторно упорядочивает индексов в соответствии с.|
|Configuration_ApplyRowLevelSecurity|Применяет безопасность на уровне строк клиенты фильтруются по продажам «Территория», связанные с ролями.|
|Configuration_ConfigureForEnterpriseEdition|Применяет индексирования columnstore, полнотекстового поиска, в памяти, polybase и секционирование.|
|Configuration_EnableInMemory|Добавляет файловую группу оптимизированной для памяти (когда не работает в Azure), заменяет `Warehouse.ColdRoomTemperatures`, `Warehouse.VehicleTemperatures` эквиваленты в памяти и переносит данные, повторно создает `Website.OrderIDList`, `Website.OrderList`, `Website.OrderLineList`, `Website.SensorDataList` табличных типов с эквиваленты, оптимизированных для памяти, удаляет и воссоздает процедуры `Website.InvoiceCustomerOrders`, `Website.InsertCustomerOrders`, и `Website.RecordColdRoomTemperatures` , использующий эти табличные типы.|
|Configuration_RemoveAuditing|Удаляет конфигурацию аудита.|
|Configuration_RemoveRowLevelSecurity|Удаляет конфигурацию безопасности на уровне строк (это требуется для изменения в связанных таблицах).|
|CreateRoleIfNonExistant|Создает роль базы данных, если он еще не существует.|


### <a name="sequences-schema"></a>Схемы последовательностей

Процедуры настройки последовательности в базе данных.

|Процедура|Цель|
|-----------------------------|---------------------|
|ReseedAllSequences|Вызывает процедуру ReseedSequenceBeyondTableValue для всех последовательностей.|
|ReseedSequenceBeyondTableValue|Используется для изменения положения следующего значения из последовательности за пределами значения в таблице, которая использует ту же последовательность. (Например, DBCC CHECKIDENT для идентификаторов столбцов эквивалент для последовательностей, но потенциально нескольким таблицам).|
