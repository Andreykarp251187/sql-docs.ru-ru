---
title: Запуск записных книжек. Azure Data Studio
titleSuffix: SQL Server Big Data Clusters
description: В этой статье содержатся сведения о запуске Jupyter Notebook в средстве Azure Data Studio, подключенном к кластеру больших данных SQL Server 2019.
author: MikeRayMSFT
ms.author: mikeray
ms.reviewer: mihaelab
ms.metadata: seo-lt-2019
ms.date: 12/13/2019
ms.topic: conceptual
ms.prod: sql
ms.technology: big-data-cluster
ms.openlocfilehash: ff3f569761b7ba95a64f693f1726df589ce7e579
ms.sourcegitcommit: ff82f3260ff79ed860a7a58f54ff7f0594851e6b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2020
ms.locfileid: "75244095"
---
# <a name="how-to-use-notebooks-in-sql-server"></a>Использование записных книжек в SQL Server

[!INCLUDE[tsql-appliesto-ssver15-xxxx-xxxx-xxx](../includes/tsql-appliesto-ssver15-xxxx-xxxx-xxx.md)]

В этой статье содержатся сведения о запуске записных книжек в последнем выпуске [**Azure Data Studio**](../azure-data-studio/download.md) и создании собственных записных книжек. Здесь также приводятся инструкции по созданию записных книжек с помощью разных ядер.

Просмотрите это короткое пятиминутное видео, чтобы ознакомиться с записными книжками в Azure Data Studio:

> [!VIDEO https://channel9.msdn.com/Shows/Data-Exposed/Introduction-to-Azure-Data-Studio-Notebooks/player?WT.mc_id=dataexposed-c9-niner]


## <a name="connect-to-sql-server"></a>Подключение к SQL Server

В Azure Data Studio в поле "Тип подключения" выберите "Microsoft SQL Server".
Кроме того, можно нажать клавишу F1, выбрать **Создать подключение**  и подключиться к SQL Server.

![Сведения о подключении](media/notebooks-guidance/connection-info.png)

## <a name="launch-notebooks"></a>Запуск записных книжек

Запустить новую записную книжку можно разными способами.

- В Azure Data Studio откройте меню **Файл** и щелкните **Создать записную книжку**.

    ![Создание записной книжки](media/notebooks-guidance/file-new-notebook.png)

- Щелкните правой кнопкой мыши подключение **SQL Server**, а затем выберите **Создать записную книжку**.

    ![Создание записной книжки](media/notebooks-guidance/server-new-notebook.png)

- Откройте палитру команд (**CTRL+SHIFT+P**) и введите **Новая записная книжка**. Откроется новый файл с именем `Notebook-1.ipynb`.

## <a name="supported-kernels-and-attach-to-context"></a>Поддерживаемые ядра и подключение к контексту

При установке записной книжки в Azure Data Studio изначально поддерживается ядро SQL. Разработчики SQL, создающие записные книжки, будут использовать именно его. 

Ядро SQL также можно применять для подключения к экземплярам сервера PostgreSQL. Разработчики PostgreSQL, которым требуется подключить записные книжки к серверу PostgreSQL, должны скачать [**расширение PostgreSQL**](../azure-data-studio/postgres-extension.md) в магазине расширений Azure Data Studio и затем запустить **Новую записную книжку**, чтобы открыть экземпляр записной книжки для подключения к серверу PostgreSQL.

![Подключение к PostgreSQL](media/notebooks-guidance/sql-kernel-dropdown.png)

### <a name="sql-kernel"></a>Ядро SQL

В ячейках кода в записной книжке (так же как и в редакторе запросов) поддерживаются современные возможности написания кода SQL, которые упрощают выполнение повседневных задач за счет встроенных функций, таких как расширенный редактор SQL, технология IntelliSense и встроенные фрагменты кода. Фрагменты кода позволяют формировать правильный синтаксис SQL для создания баз данных, таблиц, представлений, хранимых процедур и т. д., а также для обновления существующих объектов базы данных. С помощью фрагментов кода можно быстро создавать копии базы данных для разработки или тестирования, а также генерировать и выполнять сценарии.

Нажмите кнопку **Выполнить**, чтобы выполнить каждую ячейку.

Ядро SQL для подключения к экземпляру SQL Server

![Ядро SQL](media/notebooks-guidance/intellisense-code-cell.png)

Результаты запроса

![Результаты запроса](media/notebooks-guidance/sql-cell-results.png)

Ядро SQL для подключения к экземпляру сервера PostgreSQL 

![Подключение к PostgreSQL](media/notebooks-guidance/pgsql-code-cell.png)

Результаты запроса

![Результаты запроса](media/notebooks-guidance/pgsql-cell-results.png)

Чтобы добавить текстовые ячейки в существующую записную книжку, подключенную к ядру SQL, щелкните команду **+Текст** на панели инструментов.

![Панель инструментов записной книжки](media/notebooks-guidance/notebook-toolbar.png)

Ячейка перейдет в режим правки, и по мере ввода текста с разметкой Markdown вам будет доступна возможность предпросмотра.

![Ячейка с разметкой Markdown](media/notebooks-guidance/notebook-markdown-cell.png)

Щелкните вне текстовой ячейки, чтобы отобразить текст с разметкой Markdown.

![Текст с разметкой Markdown](media/notebooks-guidance/notebook-markdown-preview.png)


### <a name="configure-python-for-notebooks"></a>Настройка Python для записных книжек

При выборе в раскрывающемся списке ядра, отличного от ядра SQL, вам будет предложено **настроить Python для записных книжек**. Зависимости записной книжки устанавливаются в заданном расположении, но вы можете принять решение о необходимости указания расположения установки. Установка может занять некоторое время, поэтому не рекомендуется закрывать приложение до ее завершения. После окончания установки можно приступить к написанию кода на поддерживаемом языке.

![Настройка Python](media/notebooks-guidance/configure-python.png)

После установки в журнале задач появится уведомление, а в терминале выходных данных будут отображены сведения о расположении запущенного внутреннего сервера Jupyter.

![Внутренний сервер Jupyter](media/notebooks-guidance/jupyter-backend.png)

|Ядро|Описание
|:-----|:-----
| Ядро SQL | Написание кода SQL, предназначенного для реляционной базы данных.
|Ядро PySpark3 и PySpark| Написание кода Python с использованием вычислительных ресурсов Spark из кластера.
|Ядро Spark|Написание кода Scala и R с использованием вычислительных ресурсов Spark из кластера.
|Ядро Python|Написание кода Python для локальной разработки.

`Attach to` предоставляет контекст для присоединения ядра. Если вы используете ядро SQL, то можете `Attach to` любой из экземпляров SQL Server.

Если используется ядро Python3, то `Attach to` имеет значение `localhost`. Это ядро можно использовать для локальной разработки на Python.

Если вы подключились к кластеру больших данных SQL Server 2019, значением `Attach to` по умолчанию является эта конечная точка кластера, и вы можете отправлять код Python, Scala и R с помощью вычислительного ресурса Spark кластера.

### <a name="code-cells-and-markdown-cells"></a>Ячейки кода и ячейки с разметкой Markdown

Добавьте новую ячейку кода, щелкнув команду **+Код** на панели инструментов.

Добавьте новую текстовую ячейку, щелкнув команду **+Текст** на панели инструментов.

![Панель инструментов записной книжки](media/notebooks-guidance/notebook-toolbar.png)

Ячейка перейдет в режим правки, и по мере ввода текста с разметкой Markdown вам будет доступна возможность предпросмотра.

![Ячейка с разметкой Markdown](media/notebooks-guidance/notebook-markdown-cell.png)

Щелкните вне текстовой ячейки, чтобы отобразить текст с разметкой Markdown.

![Текст с разметкой Markdown](media/notebooks-guidance/notebook-markdown-preview.png)

### <a name="trusted-and-non-trusted"></a>Доверенные и недоверенные

Записные книжки, открытые в Azure Data Studio, являются **доверенными** по умолчанию.

Записная книжка, открываемая из другого источника, откроется в **недоверенном** режиме, после чего ее можно сделать **доверенной**.

### <a name="run-cells"></a>Выполнение ячеек
Чтобы выполнить все ячейки в записной книжке, нажмите кнопку **Выполнить ячейки** на панели инструментов.

![Текст с разметкой Markdown](media/notebooks-guidance/run-cell.png)


### <a name="clear-results"></a>Очистить результаты

Для очистки результатов всех выполненных ячеек в записной книжке нажмите кнопку **Очистить результаты** на панели инструментов.

![Текст с разметкой Markdown](media/notebooks-guidance/clear-results.png)

### <a name="save"></a>Сохранять

Чтобы сохранить записную книжку, выполните одно из следующих действий.

- Нажмите сочетание клавиш CTRL+S.
- Выберите **Файл** > **Сохранить**.
- Выберите **Файл** > **Сохранить как**.
- Выберите **Файл** > **Сохранить все**. 
- В палитре команд введите **File: Save** (Файл: сохранить). 

### <a name="pyspark3pyspark-kernel"></a>Ядро Pyspark3 и PySpark

Выберите `PySpark Kernel` и введите приведенный ниже код в ячейке.

Нажмите кнопку **Запустить**.

Запустится приложение Spark, которое вернет следующие выходные данные:

![Приложение Spark](media/notebooks-guidance/pyspark.png)

### <a name="spark-kernel--scala-language"></a>Ядро Spark | Язык Scala

Выберите `Spark|Scala Kernel` и введите приведенный ниже код в ячейке.

![Spark Scala](media/notebooks-guidance/spark-scala.png)

Чтобы просмотреть параметры ячейки, щелкните значок параметров.

![Параметры ячейки](media/notebooks-guidance/scala-cell-options.png)

### <a name="spark-kernel--r-language"></a>Ядро Spark | Язык R

В раскрывающемся списке ядер выберите "Spark | R". Введите или вставьте код в ячейку. Нажмите кнопку **Выполнить**, чтобы получить и просмотреть следующие выходные данные.

![Spark R](media/notebooks-guidance/spark-r.png)

### <a name="local-python-kernel"></a>Локальное ядро Python

Выберите локальное ядро Python и в ячейке введите следующее:

![Локальная разработка на Python](media/notebooks-guidance/local-python.png)

## <a name="manage-packages"></a>Управление пакетами

Локальная разработка на Python была оптимизирована, и теперь вам доступна возможность установки пакетов, которые потребуются клиентам в их сценариях. По умолчанию включены такие распространенные пакеты, как `pandas`, `numpy` и т. д., но если вам нужен пакет, который отсутствует, напишите в ячейке записной книжки следующий код: 

```python
import <package-name>
```

После выполнения этой команды возвращается `Module not found`. Если пакет существует, ошибка не возникнет.

Если возвращается ошибка `Module not Found`, щелкните **Управление пакетами**, чтобы запустить терминал. Теперь пакеты можно установить локально. Для установки пакетов используйте следующие команды:

```bash
./pip install <package-name>
```

   > [!Tip]
   > На компьютере Mac следуйте приведенным в окне терминала инструкциям по установке пакетов. 

После установки пакета вы сможете перейти в ячейку записной книжки и ввести следующую команду:

```python
import <package-name>
```

Чтобы удалить пакет, выполните следующую команду в окне терминала:

```bash
./pip uninstall <package-name>
```

## <a name="next-steps"></a>Дальнейшие действия

Сведения о работе с существующей записной книжкой см. в статье об [ управлении записными книжками в Azure Data Studio](notebooks-how-to-manage.md).