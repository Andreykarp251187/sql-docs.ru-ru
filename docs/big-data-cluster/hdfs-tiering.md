---
title: Настроить распределение по уровням HDFS
titleSuffix: SQL Server big data clusters
description: В этой статье описывается настройка HDFS, распределение по уровням для монтажа внешней системы хранилище Azure Data Lake файл в HDFS в кластере SQL Server 2019 больших данных (Предварительная версия).
author: nelgson
ms.author: negust
ms.reviewer: jroth
manager: craigg
ms.date: 04/23/2019
ms.topic: conceptual
ms.prod: sql
ms.technology: big-data-cluster
ms.openlocfilehash: ccafa7914d09971e33d60fc9d25c7b812983aa98
ms.sourcegitcommit: d5cd4a5271df96804e9b1a27e440fb6fbfac1220
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64775007"
---
# <a name="configure-hdfs-tiering-on-sql-server-big-data-clusters"></a>Настройка HDFS, распределение по уровням в кластерах больших данных в SQL Server

[!INCLUDE[tsql-appliesto-ssver15-xxxx-xxxx-xxx](../includes/tsql-appliesto-ssver15-xxxx-xxxx-xxx.md)]

Распределение по уровням HDFS позволяет подключать внешние, HDFS-совместимой файловой системы в HDFS. В этой статье описывается настройка HDFS, распределение по уровням для кластеров SQL Server 2019 больших данных (Предварительная версия). В настоящее время мы поддерживаем подключение к Gen2 хранилища Озера данных Azure и Amazon S3. 

## <a name="hdfs-tiering-overview"></a>Обзор распределения по уровням HDFS

С уровнями, приложения могут легко обращаться к данным в различных внешних хранилищ как если бы, если данные находятся в локальной системе HDFS. Подключение — это операция с метаданными, где метаданные, описывающие пространство имен внешней файловой системе, копируются в вашей локальной системе HDFS. К метаданным относятся сведения о внешних каталогов и файлов вместе с их разрешениями и списками ACL. Соответствующие данные — только скопированный по запросу, при обращении к самим данным через например запрос. Данные внешней файловой системы, теперь может осуществляться из больших данных кластера SQL Server. Можно запустить Spark задания и запросы SQL, на основе этих данных таким же образом, необходимо выполнить их на все локальные данные, хранящиеся в файловой системе HDFS в кластере.

### <a name="caching"></a>Caching
В настоящее время по умолчанию 1% от общего хранилища HDFS будет зарезервирован для кэширования данных на подключенный. Кэширование — это глобальный параметр через подключение.

> [!NOTE]
> Распределение по уровням HDFS — это функция, разработанная корпорацией Майкрософт и более ранняя версия была выпущена в виде части распространения Apache Hadoop 3.1. Дополнительные сведения см. в разделе [ https://issues.apache.org/jira/browse/HDFS-9806 ](https://issues.apache.org/jira/browse/HDFS-9806) сведения.

Следующие разделы содержат пример, демонстрирующий настройку HDFS, распределение по уровням с источником данных Gen2 хранилища Озера данных Azure.

## <a name="prerequisites"></a>предварительные требования

- [Развернутые больших данных кластера](deployment-guidance.md)
- [Средства работы с большими данными](deploy-big-data-tools.md)
  - **mssqlctl**
  - **kubectl**

## <a name="mounting-instructions"></a>Монтаже

Мы поддерживаем подключение к Gen2 хранилища Озера данных Azure и Amazon S3. Инструкции о том, как подключить от подобных хранилища можно найти в следующих статьях:

- [Как Gen2 ADLS подключения для HDFS, распределение по уровням в кластере больших данных](hdfs-tiering-mount-adlsgen2.md)
- [Как S3 подключения для HDFS, распределение по уровням в кластере больших данных](hdfs-tiering-mount-s3.md)

## <a id="issues"></a> Известные проблемы и ограничения

В следующем списке приведены известные проблемы и текущие ограничения при использовании HDFS, распределение по уровням в кластеры большие данные SQL Server:

- Если подключение зависла в `CREATING` состоянии в течение длительного времени, скорее она выдавала сбой. В этом случае отмена команды и при необходимости удалить подключения. Проверьте параметры и учетные данные перед повторной попыткой.

- Подключение невозможно создать в существующих каталогах.

- Подключение невозможно создать в существующих подключений.

- Если любой из предков точке подключения не существуют, они будут созданы с разрешениями по умолчанию r-xr-xr-x (555).

- Создание подключения может занять некоторое время в зависимости от того, количество и размер файлов, которому выполняется подключение. В ходе этого процесса файлы в папке mount не видны пользователям. В процессе подключения все файлы будут добавляться временный путь, по умолчанию — `/_temporary/_mounts/<mount-location>`.

- Команда создания подключения является асинхронным. После выполнения команды можно проверить состояние подключения для оценки состояния подключения.

- При создании подключения, аргумент используются для **--путь подключения** — по сути это уникальный идентификатор подключения. В последующих командах необходимо использовать ту же строку (в том числе «/» в конце концов, если он имеется).

- Подключение доступны только для чтения. Не удается создать любой каталогов или файлов в разделе подключения.

- Мы не рекомендуем подключения каталогов и файлов, которые можно изменить. После создания подключения любые изменения или обновления в удаленное расположение не отражаются в подключения в HDFS. Если изменения происходят в удаленном расположении, можно удалять и повторно создавать подключения в соответствии с обновленное состояние.

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о кластерах SQL Server 2019 большие данные см. в разделе [Каковы кластеров SQL Server 2019 больших данных?](big-data-cluster-overview.md).
