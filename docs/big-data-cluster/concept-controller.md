---
title: Что такое контроллер
titleSuffix: SQL Server big data clusters
description: В этой статье описывается контроллер в кластере больших данных SQL Server 2019 (предварительная версия).
author: mihaelablendea
ms.author: mihaelab
ms.reviewer: mikeray
ms.date: 07/24/2019
ms.topic: conceptual
ms.prod: sql
ms.technology: big-data-cluster
ms.openlocfilehash: e984c3dced4bde713ac98d67c22481e54491cd68
ms.sourcegitcommit: db9bed6214f9dca82dccb4ccd4a2417c62e4f1bd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/25/2019
ms.locfileid: "68419534"
---
# <a name="what-is-the-controller-on-a-sql-server-big-data-cluster"></a>Что такое контроллер в кластере больших данных SQL Server

[!INCLUDE[tsql-appliesto-ssver15-xxxx-xxxx-xxx](../includes/tsql-appliesto-ssver15-xxxx-xxxx-xxx.md)]

Контроллер содержит основную логику для развертывания кластера больших данных и управления им. Он отвечает за все взаимодействие с Kubernetes, экземплярами SQL Server, входящими в кластер, и другими компонентами, такими как HDFS и Spark.

Служба контроллера предоставляет следующие основные возможности:

- управление жизненным циклом кластера: конфигурации начальной загрузки, удаления и обновления кластера;
- управление главными экземплярами SQL Server;
- управление пулами вычислительных ресурсов, данных и носителей;
- предоставление средств мониторинга для наблюдения за состоянием кластера;
- предоставление средств устранения неполадок для выявления и устранения непредвиденных проблем;
- управление безопасностью кластера:
  - защита конечных точек кластера;
  - управление пользователями и ролями;
  - настройка учетных данных для обмена данными внутри кластера.

## <a name="deploying-the-controller-service"></a>Развертывание службы контроллера

Контроллер разворачивается и размещается в том же пространстве имен Kubernetes, в котором клиент создает кластер больших данных. Эта служба устанавливается администратором Kubernetes во время начальной загрузки кластера с помощью программы командной строки **azdata**. Дополнительные сведения см. в статье [Начало работы с кластерами больших данных SQL Server](deploy-get-started.md).

В результате рабочего процесса создания на основе Kubernetes развертывается полнофункциональный кластер больших данных SQL Server, который включает в себя все компоненты, описанные в [обзорной статье](big-data-cluster-overview.md). Рабочий процесс начальной загрузки сначала создает службу контроллера, которая после развертывания будет координировать установку и настройку остальных служб, входящих в состав главного пула, пулов вычислительных ресурсов, данных и носителей.

## <a name="managing-the-cluster-through-the-controller-service"></a>Управление кластером с помощью службы контроллера

Вы можете управлять кластером посредством службы контроллера с помощью команд **azdata**. Если в том же пространстве имен развертываются дополнительные объекты Kubernetes, например pod, служба контроллера не управляет ими и не отслеживает их. Для управления кластером на уровне Kubernetes можно также использовать команды **kubectl**. Дополнительные сведения см. в статье [Мониторинг и устранение неполадок кластеров больших данных SQL Server](cluster-troubleshooting-commands.md).

Контроллер и объекты Kubernetes (наборы с отслеживанием состояния, объекты pod, секреты и т. д.), создаваемые для кластера больших данных, размещаются в выделенном пространстве имен Kubernetes. Администратор кластера Kubernetes предоставляет службе контроллера разрешение на управление всеми ресурсами в этом пространстве имен.  Политика RBAC для этого сценария настраивается автоматически в процессе начального развертывания кластера с помощью **azdata**.

### <a name="azdata"></a>azdata

**azdata** — это служебная программа командной строки на языке Python, которая позволяет администраторам кластера провести начальную загрузку и управлять кластером больших данных с помощью интерфейсов REST API, предоставляемых службой контроллера.

## <a name="controller-service-security"></a>Безопасность службы контроллера

Весь обмена данными со службой контроллера осуществляется через REST API по протоколу HTTPS. Самозаверяющий сертификат создается автоматически во время начальной загрузки. 

Проверка подлинности в конечной точке службы контроллера производится на основе имени пользователя и пароля. Эти учетные данные подготавливаются во время начальной загрузки кластера с использованием входных данных для переменных среды `CONTROLLER_USERNAME` и `CONTROLLER_PASSWORD`.

> [!NOTE]
> Пароль должен соответствовать [требованиям к сложности пароля для SQL Server](https://docs.microsoft.com/sql/relational-databases/security/password-policy?view=sql-server-2017).

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о кластерах больших данных SQL Server см. в следующих статьях:

- [Что такое кластеры больших данных SQL Server 2019?](big-data-cluster-overview.md)
- [Семинар. Архитектура кластеров больших данных Microsoft SQL Server](https://github.com/Microsoft/sqlworkshops/tree/master/sqlserver2019bigdataclusters)
