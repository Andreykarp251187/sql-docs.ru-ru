---
title: Обновление до нового выпуска
titleSuffix: SQL Server big data clusters
description: Узнайте, как обновить кластеры больших данных SQL Server 2019 (Предварительная версия) в новом выпуске.
author: MikeRayMSFT
ms.author: mikeray
ms.reviewer: mihaelab
ms.date: 07/24/2019
ms.topic: conceptual
ms.prod: sql
ms.technology: big-data-cluster
ms.openlocfilehash: 7bdb1eb59fd36d065df9dba0f6d6879c1a294914
ms.sourcegitcommit: 1f222ef903e6aa0bd1b14d3df031eb04ce775154
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/23/2019
ms.locfileid: "68419392"
---
# <a name="how-to-upgrade-sql-server-big-data-clusters"></a>Обновление SQL Server кластеров больших данных

[!INCLUDE[tsql-appliesto-ssver15-xxxx-xxxx-xxx](../includes/tsql-appliesto-ssver15-xxxx-xxxx-xxx.md)]

В этой статье содержатся рекомендации по обновлению SQL Server кластера больших данных до нового выпуска. Действия, описанные в этой статье, особенно применимы к обновлению между выпусками предварительной версии.

## <a name="backup-and-delete-the-old-cluster"></a>Резервное копирование и удаление старого кластера

В настоящее время единственным способом обновления кластера больших данных до нового выпуска является ручное удаление и повторное создание кластера. Каждый выпуск имеет уникальную версию **аздата** , которая не совместима с предыдущей версией. Кроме того, если старому кластеру пришлось скачивать образ на новом узле, последний образ может быть несовместим с более старыми образами в кластере. Чтобы выполнить обновление до последнего выпуска, выполните следующие действия.

1. Перед удалением старого кластера выполните резервное копирование данных на экземпляре SQL Server master и в HDFS. Для экземпляра SQL Server master можно использовать [SQL Server резервное копирование и восстановление](data-ingestion-restore-database.md). Для HDFS [можно скопировать данные с помощью **фигурного скобки**](data-ingestion-curl.md).

1. Удалите старый кластер с помощью `azdata delete cluster` команды.

   ```bash
    azdata bdc delete --name <old-cluster-name>
   ```

   > [!Important]
   > Используйте версию **аздата** , соответствующую кластеру. Не удаляйте старый кластер с более новой версией **аздата**.

1. До выпуска CTP 3,2 **аздата** назывался **мссклктл**. При наличии предыдущих выпусков **мссклктл** или **аздата** перед установкой последней версии **аздата**необходимо сначала удалить.

   Для CTP-версии 2,3 или более поздней выполните следующую команду. Замените `ctp3.1` в команде на версию **мссклктл** , которую вы удаляете. Если версия до CTP-версии 3,1, добавьте тире перед номером версии (например, `ctp-2.5`).

   ```powershell
   pip3 uninstall -r https://mcr.microsoft.com/python/ctp3.1/mssqlctl/requirements.txt
   ```

1. Установите последнюю версию **аздата**. Следующие команды устанавливают **аздата** для CTP-версии 3,2:

   **Windows**

   ```powershell
   pip3 install -r https://aka.ms/azdata
   ```

   **Linux**

   ```bash
   pip3 install -r https://aka.ms/azdata --user
   ```

   > [!IMPORTANT]
   > В каждом выпуске путь к **аздата** изменяется. Даже если вы ранее устанавливали **аздата** или **мссклктл**, перед созданием нового кластера необходимо переустановить из последнего пути.

## <a id="azdataversion"></a>Проверка версии аздата

Перед развертыванием нового кластера больших данных убедитесь, что вы используете последнюю версию **аздата** с `--version` параметром:

```bash
azdata --version
```

## <a name="install-the-new-release"></a>Установка нового выпуска

После удаления предыдущего кластера больших данных и установки последней версии **аздата**разверните новый кластер больших данных с помощью текущих инструкций по развертыванию. Дополнительные сведения см. в статье [развертывание SQL Server кластеров больших данных в Kubernetes](deployment-guidance.md). Затем восстановите все необходимые базы данных или файлы.

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о кластерах больших данных см. в разделе [что такое SQL Server кластерами больших данных](big-data-cluster-overview.md).
