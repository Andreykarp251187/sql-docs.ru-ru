---
title: Основные понятия безопасности
titleSuffix: SQL Server big data clusters
description: В этой статье рассматриваются основные понятия безопасности для работы с кластерами больших данных SQL Server. Здесь описываются конечные точки кластера и процесс проверки подлинности кластера.
author: nelgson
ms.author: negust
ms.reviewer: mikeray
ms.date: 10/23/2019
ms.topic: conceptual
ms.prod: sql
ms.technology: big-data-cluster
ms.openlocfilehash: 35eb5e0a3236d8f016ed5ca99b769d628a4d81ed
ms.sourcegitcommit: 830149bdd6419b2299aec3f60d59e80ce4f3eb80
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73532377"
---
# <a name="security-concepts-for-includebig-data-clusters-2019includesssbigdataclusters-ss-novermd"></a>Основные понятия безопасности для работы с [!INCLUDE[big-data-clusters-2019](../includes/ssbigdataclusters-ss-nover.md)]

[!INCLUDE[tsql-appliesto-ssver15-xxxx-xxxx-xxx](../includes/tsql-appliesto-ssver15-xxxx-xxxx-xxx.md)]

В этой статье рассматриваются основные понятия, связанные с обеспечением безопасности в кластере больших данных.

[!INCLUDE[big-data-clusters-2019](../includes/ssbigdataclusters-ss-nover.md)] обеспечивают согласованную и последовательную процедуру авторизации и проверки подлинности. Кластер больших данных можно интегрировать с Active Directory путем полностью автоматизированного развертывания, которое настраивает интеграцию доменных служб Active Directory с существующим доменом. После настройки в кластере больших данных интеграции с доменными службами Active Directory можно использовать существующие удостоверения и группы пользователей для единого доступа во всех конечных точках. Кроме того, после создания внешних таблиц в SQL Server можно управлять доступом к источникам данных путем предоставления доступа к внешним таблицам пользователям и группам Active Directory, что позволяет централизовать политики доступа к данным в одном расположении.

## <a name="authentication"></a>Проверка подлинности

Конечные точки внешнего кластера поддерживают проверку подлинности Active Directory. Это означает, что можно использовать удостоверения AD для проверки подлинности в кластере больших данных.

### <a name="cluster-endpoints"></a>Конечные точки кластера

В кластере больших данных имеется пять точек входа.

* Главный экземпляр — конечная точка TDS для доступа к главному экземпляру SQL Server в кластере, используемая приложениями и инструментами баз данных, такими как SSMS или Azure Data Studio. При использовании команд SQL Server или HDFS из azdata средство будет подключаться к другим конечным точкам в зависимости от операции.

* Шлюз для доступа к файлам HDFS, Spark (Knox) — это конечная точка на основе HTTPS. Данная конечная точка используется для доступа к таким службам, как webHDFS и Spark.

* Конечная точка службы управления кластером (контроллера) — служба управления кластером больших данных, которая предоставляет REST API для управления кластером. Инструменту azdata требуется подключение к этой конечной точке.

* Прокси-сервер управления — для доступа к панели мониторинга поиска по журналам и панели мониторинга метрик.

* Прокси-сервер приложений — конечная точка для управления приложениями, развернутыми в кластере больших данных.

![Конечные точки кластера](media/concept-security/cluster_endpoints.png)

В настоящее время невозможно открыть дополнительные порты для доступа к кластеру извне.

## <a name="authorization"></a>Авторизация

Интегрированная система безопасности между различными компонентами во всем кластере позволяет передавать удостоверение исходного пользователя при выдаче запросов из Spark и SQL Server вплоть до HDFS. Как упоминалось выше, различные конечные точки внешнего кластера поддерживают проверку подлинности Active Directory.

Существует два уровня проверки авторизации в кластере для управления доступом к данным. Авторизация в контексте больших данных выполняется в SQL Server с использованием традиционных разрешений SQL Server для объектов и в HDFS с использованием списков управления доступом (ACL), которые связывают удостоверения пользователей с конкретными разрешениями.

Защищенный кластер больших данных свидетельствует о согласованной поддержке сценариев проверки подлинности и авторизации как в SQL Server, так и в HDFS/Spark. Проверка подлинности — это процесс проверки удостоверения пользователя или службы и гарантия того, кем или чем они являются в действительности. Авторизация используется для предоставления или запрета доступа к определенным ресурсам на основе удостоверения запрашивающего доступ пользователя. Она выполняется после идентификации пользователя с помощью проверки подлинности.

Авторизация в контексте больших данных обычно проводится на основе списков управления доступом (ACL), которые связывают удостоверения пользователей с конкретными разрешениями. HDFS поддерживает авторизацию, ограничивая доступ к API-интерфейсам служб, файлам HDFS и выполнению заданий.

## <a name="encryption-and-other-security-mechanisms"></a>Шифрование и другие механизмы обеспечения безопасности

Шифрование взаимодействия между клиентами и внешними конечными точками, а также между компонентами внутри кластера обеспечивается с помощью TLS/SSL с использованием сертификатов.

Все взаимодействие SQL Server с SQL Server, такое как взаимодействие главного экземпляра SQL с пулом данных, защищается с помощью учетных данных SQL.

## <a name="basic-administrator-login"></a>Базовые учетные данные администратора

Кластер можно развернуть либо в режиме Active Directory, либо с использованием только базовых учетных данных администратора. Режим безопасности с использованием только базовых учетных данных администратора не поддерживается в рабочей среде и в основном предназначен для ознакомления с продуктом.

Даже если выбран режим Active Directory, для администратора кластера будут созданы базовые учетные данные. Это обеспечивает "черный вход" на случай сбоя подключения AD.

При развертывании этим базовым учетным данным будут предоставлены разрешения администратора в кластере. Это означает, что данный пользователь будет системным администратором в главном экземпляре SQL Server и администратором в контроллере кластера.
Компоненты Hadoop не поддерживают смешанный режим проверки подлинности. Это означает, что базовые учетные данные администратора нельзя использовать для проверки подлинности в шлюзе (Knox).


Это учетные данные для входа, которые необходимо определить при развертывании.

Имя пользователя администратора кластера:
 + `AZDATA_USERNAME=<username>`

Пароль администратора кластера:  
 + `AZDATA_PASSWORD=<password>`

> [!NOTE]
> Обратите внимание, что в режиме, отличном от AD, для проверки подлинности в шлюзе для доступа к HDFS/Spark необходимо указывать имя пользователя "root" в сочетании с приведенным выше паролем.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о [!INCLUDE[big-data-clusters-2019](../includes/ssbigdataclusters-ss-nover.md)] см. в следующих ресурсах.

- [Что такое [!INCLUDE[big-data-clusters-2019](../includes/ssbigdataclusters-ver15.md)]?](big-data-cluster-overview.md)
- [Семинар. Архитектура [!INCLUDE[big-data-clusters-2019](../includes/ssbigdataclusters-ss-nover.md)] Майкрософт](https://github.com/Microsoft/sqlworkshops/tree/master/sqlserver2019bigdataclusters)
