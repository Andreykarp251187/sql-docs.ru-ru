---
title: Основные понятия безопасности
titleSuffix: SQL Server big data clusters
description: В этой статье описываются основные понятия [!INCLUDE[big-data-clusters-2019](../includes/ssbigdataclusters-ver15.md)]безопасности для. Здесь описываются конечные точки кластера и процесс проверки подлинности кластера.
author: nelgson
ms.author: negust
ms.reviewer: mikeray
ms.date: 08/21/2019
ms.topic: conceptual
ms.prod: sql
ms.technology: big-data-cluster
ms.openlocfilehash: 4e4441f0cc4f19d4784019408bfc5309a5734285
ms.sourcegitcommit: 5e838bdf705136f34d4d8b622740b0e643cb8d96
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2019
ms.locfileid: "69652256"
---
# <a name="security-concepts-for-includebig-data-clusters-2019includesssbigdataclusters-ss-novermd"></a>Основные понятия безопасности для[!INCLUDE[big-data-clusters-2019](../includes/ssbigdataclusters-ss-nover.md)]

[!INCLUDE[tsql-appliesto-ssver15-xxxx-xxxx-xxx](../includes/tsql-appliesto-ssver15-xxxx-xxxx-xxx.md)]

Защищенный кластер больших данных свидетельствует о согласованной поддержке сценариев проверки подлинности и авторизации как в SQL Server, так и в HDFS/Spark. Проверка подлинности — это процесс проверки удостоверения пользователя или службы и гарантия того, кем или чем они являются в действительности. Авторизация используется для предоставления или запрета доступа к определенным ресурсам на основе удостоверения запрашивающего доступ пользователя. Она выполняется после идентификации пользователя с помощью проверки подлинности.

Авторизация в контексте больших данных обычно проводится на основе списков управления доступом (ACL), которые связывают удостоверения пользователей с конкретными разрешениями. HDFS поддерживает авторизацию, ограничивая доступ к API-интерфейсам служб, файлам HDFS и выполнению заданий.

В этой статье рассматриваются основные понятия, связанные с безопасностью в кластере больших данных.

## <a name="cluster-endpoints"></a>Конечные точки кластера

В кластере больших данных доступны три точки входа.

* Шлюз HDFS/Spark (Knox) — это конечная точка на основе HTTPS. Другие конечные точки доступны через прокси-сервер. Шлюз HDFS/Spark используется для доступа к таким службам, как HDFS и Livy. Когда вы встречаете ссылки на Knox, знайте, что это конечная точка.

* Конечная точка контроллера — служба управления кластером больших данных, которая предоставляет REST API для управления кластером. Доступ к некоторым средствам также осуществляется через эту конечную точку.

* Главный экземпляр — конечная точка TDS для средств баз данных и приложений для подключения к главному экземпляру SQL Server в кластере.

![Конечные точки кластера](media/concept-security/cluster_endpoints.png)

В настоящее время невозможно открыть дополнительные порты для доступа к кластеру извне.

### <a name="how-endpoints-are-secured"></a>Защита конечных точек

Для защиты конечных точек в кластере больших данных используются пароли, которые можно задать или обновить с помощью переменных среды или команд CLI. Все внутренние пароли кластера хранятся в виде секретов Kubernetes.  

## <a name="authentication"></a>Проверка подлинности

При подготовке кластера создается несколько имен входа.

Некоторые из них предназначены для взаимодействия между службами, а другие — для доступа конечных пользователей к кластеру.

### <a name="end-user-authentication"></a>Проверка подлинности конечных пользователей
При подготовке кластера необходимо задать ряд паролей для пользователей с использованием переменных среды. С помощью этих паролей администраторы SQL и администраторы кластера получают доступ к службам.

Имя пользователя контроллера:
 + CONTROLLER_USERNAME=<controller_username>

Пароль контроллера:  
 + CONTROLLER_PASSWORD=<controller_password>

Пароль системного администратора SQL: 
 + MSSQL_SA_PASSWORD=<controller_sa_password>

Пароль для доступа к конечной точке HDFS/Spark:
 + KNOX_PASSWORD=<knox_password>

### <a name="intra-cluster-authentication"></a>Проверка подлинности внутри кластера

При развертывании кластера создается несколько имен входа SQL.

* В экземпляре контроллера SQL, управляемом системой, создается специальное имя входа SQL с ролью sysadmin. Пароль для этого имени входа записывается как секрет K8s.

* Во всех экземплярах SQL в кластере, которыми владеет и управляет этот контроллер, создается имя входа sysadmin. Оно требуется контроллеру для выполнения задач администрирования, таких как настройка или обновление высокого уровня доступности, на этих экземплярах. Эти имена входа также применяются для взаимодействия между экземплярами SQL внутри кластера, например для взаимодействия главного экземпляра SQL с пулом данных.

> [!NOTE]
> В текущем выпуске поддерживается только обычная проверка подлинности. Детальное управление доступом к объектам HDFS и пулам данных и вычислительных ресурсов кластера больших данных SQL пока недоступно.

## <a name="intra-cluster-communication"></a>Взаимодействие внутри кластера

Взаимодействие со службами, отличными от служб SQL, в кластере больших данных, например Livy со Spark или Spark с пулом носителей, защищено с помощью сертификатов. Все взаимодействия между экземплярами SQL Server защищены с помощью имен входа SQL.

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о [!INCLUDE[big-data-clusters-2019](../includes/ssbigdataclusters-ss-nover.md)]см. в следующих ресурсах:

- [[!INCLUDE[big-data-clusters-2019](../includes/ssbigdataclusters-ver15.md)]Что?](big-data-cluster-overview.md)
- [Семинар. Архитектура [!INCLUDE[big-data-clusters-2019](../includes/ssbigdataclusters-ss-nover.md)] Майкрософт](https://github.com/Microsoft/sqlworkshops/tree/master/sqlserver2019bigdataclusters)
