---
title: StructureColumn (расширения интеллектуального анализа данных) | Документация Майкрософт
ms.date: 06/07/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: dmx
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
ms.openlocfilehash: 7b6b436527aa36fb8f048a3b3c8fc55b970ef284
ms.sourcegitcommit: e042272a38fb646df05152c676e5cbeae3f9cd13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2020
ms.locfileid: "68065386"
---
# <a name="structurecolumn-dmx"></a>StructureColumn (расширения интеллектуального анализа данных)
[!INCLUDE[ssas-appliesto-sqlas](../includes/ssas-appliesto-sqlas.md)]

  Возвращает значение столбца структуры, соответствующего указанному варианту, либо табличное значение для вложенной таблицы в указанном варианте.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
  
StructureColumn('structure column name')  
```  
  
## <a name="arguments"></a>Аргументы  
 structure column name  
 Имя варианта или вложенной таблицы в столбце структуры интеллектуального анализа данных.  
  
## <a name="result-type"></a>Тип результата  
 Возвращаемый тип зависит от типа столбца, на который указывает ссылка в имени столбца \<Structure> параметра. Например, если указанный столбец структуры интеллектуального анализа данных содержит скалярное значение, то функция возвращает скалярное значение.  
  
 Если же столбец структуры интеллектуального анализа данных содержит вложенную таблицу, то функция возвращает табличное значение. Затем его можно указать в предложении FROM вложенной инструкции SELECT.  
  
## <a name="remarks"></a>Remarks  
 Эта функция полиморфна и может использоваться в любом месте инструкции, где допустимы выражения, в том числе список выражений инструкции SELECT, выражение WHERE или ORDER BY.  
  
 Имя столбца в структуре интеллектуального анализа данных представляет собой строковое значение, которое должно быть заключено в одинарные кавычки: например, `StructureColumn('` **столбец 1**`')`. Если несколько столбцов имеют одинаковые имена, то имя определяется в контексте содержащей его инструкции SELECT.  
  
 Результаты, возвращаемые запросом с помощью функции **StructureColumn** , зависят от наличия каких-либо фильтров в модели. Иными словами, фильтр модели определяет, какие из вариантов будут включены в модель интеллектуального анализа данных. Таким образом, запрос для столбца структуры способен возвращать только те варианты, которые использовались в модели интеллектуального анализа данных. Образец кода, показывающего влияние фильтров для модели интеллектуального анализа данных на таблицы вариантов и вложенные таблицы, см. в подразделе «Примеры» данного раздела.  
  
 Дополнительные сведения о том, как использовать эту функцию в инструкции SELECT расширений интеллектуального анализа данных, см. в разделе [Выбор из &#60;модели&#62;. В случаях &#40;расширений интеллектуального анализа данных&#41;](../dmx/select-from-model-cases-dmx.md) или [выберите &#60;структура&#62;. ВАРИАНТОВ](../dmx/select-from-structure-cases.md).  
  
## <a name="error-messages"></a>Сообщения об ошибках  
 Следующая ошибка безопасности возникает в том случае, если пользователь не имеет разрешения на детализацию родительской структуры интеллектуального анализа данных.  
  
 Пользователь "% {User/}" не имеет разрешения на детализацию до родительской структуры интеллектуального анализа данных в модели интеллектуального анализа "% {Model/}".  
  
 Следующее сообщение об ошибке возникает в том случае, если указано недопустимое имя столбца структуры.  
  
 Столбец структуры интеллектуального анализа данных "% {Structure-column-name/}" не найден в родительской структуре интеллектуального анализа данных "% {Structure/}" в текущем контексте (строка% {Line/}, столбец% {Column/}).  
  
## <a name="examples"></a>Примеры  
 В приведенных ниже примерах используется следующая структура интеллектуального анализа данных. Обратите внимание, что она содержит столбцы вложенных таблиц `Products` и `Hobbies`. Вложенная таблица в столбце `Hobbies` содержит единственный столбец, который используется в качестве ключа для вложенной таблицы. Вложенная таблица в столбце `Products` имеет сложную структуру и состоит из ключевого столбца и других столбцов для ввода. Следующие примеры иллюстрируют, каким образом в структуре интеллектуального анализа данных можно создать множество различных столбцов, даже если все они моделью не используются. Некоторые из этих столбцов могут не пригодиться для выявления закономерностей на уровне модели, но могут оказаться весьма удобными для детализации.  
  
```  
CREATE MINING STRUCTURE [MyStructure]   
(  
CustomerName TEXT KEY,  
Occupation TEXT DISCRETE,  
Age LONG CONTINUOUS,  
MaritalStatus TEXT DISCRETE,  
Income LONG CONTINUOUS,  
Products  TABLE  
 (  
    ProductNameTEXT KEY,  
    Quantity LONG CONTINUOUS,  
    OnSale BOOLEAN  DISCRETE  
)  
 Hobbies  TABLE  
 (  
    Hobby KEY  
 ))  
```  
  
 Затем на основе созданной структуры создадим модель интеллектуального анализа данных с использованием следующего примера кода.  
  
```  
ALTER MINING STRUCTURE [MyStructure] ADD MINING MODEL [MyModel] (  
CustomerName,  
Age,  
MaritalStatus,  
Income PREDICT,  
Products   
(  
ProductName  
) WITH FILTER(NOT OnSale)  
) USING Microsoft_Decision_Trees   
WITH FILTER(EXISTS (Products))  
```  
  
### <a name="sample-query-1-returning-a-column-from-the-mining-structure"></a>Образец запроса 1. Возврат столбца из структуры интеллектуального анализа данных  
 Следующий образец запроса возвращает столбцы `CustomerName` и `Age`, которые определены как часть модели интеллектуального анализа данных. Однако запрос возвращает также столбец `Age`, который является частью структуры, но не входит в модель интеллектуального анализа данных.  
  
```  
SELECT CustomerName, Age, StructureColumn('Occupation') FROM MyModel.CASES   
WHERE Age > 30  
```  
  
 Обратите внимание, что фильтрация строк для ограничения числа вариантов до заказчиков возрастом более 30 лет выполняется на уровне модели. Поэтому данное выражение не будет возвращать те варианты, которые включены в данные структуры, но не используются в модели. Поскольку условие фильтра, используемого при создании модели (`EXISTS (Products)`), ограничивает число вариантов теми заказчиками, которые уже приобретали продукты, в структуре могут оказаться варианты, которые не будут возвращены этим запросом.  
  
### <a name="sample-query-2-applying-a-filter-to-the-structure-column"></a>Образец запроса 2. Применение фильтра к столбцу структуры  
 Следующий образец запроса возвращает не только столбцы модели `CustomerName` и `Age` и вложенную таблицу `Products`, но и значение столбца `Quantity` вложенной таблицы, которая не является частью модели.  
  
```  
SELECT CustomerName, Age,  
(SELECT ProductName, StructureColumn('Quantity') FROM Products) FROM MA.CASES   
WHERE StructureColumn('Occupation') = 'Architect'  
```  
  
 Обратите внимание, что в этом примере фильтр применяется к столбцу структуры, чтобы ограничить варианты для клиентов, профессией которых является "архитектор"`WHERE StructureColumn('Occupation') = 'Architect'`(). Поскольку условие фильтра модели всегда применяется к вариантам при создании модели, в модель попадут только те варианты, которые содержат в таблице `Products` как минимум одну строку, включенную в число вариантов модели. Таким образом, применяется как фильтр для вложенной таблицы `Products`, так и фильтр для варианта `('Occupation')`.  
  
### <a name="sample-query-3-selecting-columns-from-a-nested-table"></a>Образец запроса 3. Выбор столбцов из вложенной таблицы  
 Следующий образец запроса возвращает имена заказчиков, которые были использованы в модели в качестве обучающих вариантов. Для каждого из заказчиков запрос возвращает также вложенную таблицу с подробными сведениями о заказах. Хотя модель включает `ProductName` столбец, она не использует значение этого `ProductName` столбца. Модель проверяет, был ли продукт приобретен по обычной цене (`NOT``OnSale`). Этот запрос возвращает не только название продукта, но и размер приобретенной партии, который не указан в модели.  
  
```  
SELECT CustomerName,    
(SELECT ProductName, StructureColumn('Quantity')FROM Products)   
FROM MyModel.CASES  
```  
  
 Обратите внимание, что столбец `ProductName` или `Quantity` может быть возвращен, только если для модели интеллектуального анализа данных включена детализация.  
  
### <a name="sample-query-4-filtering-on-and-returning-nested-table-columns"></a>Пример запроса 4. Фильтрация и возврат столбцов вложенной таблицы  
 Три следующих образца запросов возвращают вариант и столбцы вложенной таблицы, включенные в структуру интеллектуального анализа данных, но не являющиеся частью модели. К модели уже применен фильтр по наличию продуктов `OnSale`, но данный запрос добавит еще один фильтр по столбцу структуры интеллектуального анализа данных `Quantity`.  
  
```  
SELECT CustomerName, Age, StructureColumn('Occupation'),   
(SELECT ProductName, StructureColumn('Quantity') FROM Products)   
FROM MyModel.CASES   
WHERE EXISTS (SELECT * FROM Products WHERE StructureColumn('Quantity')>1)  
```  
  
## <a name="see-also"></a>См. также:  
 [Расширения интеллектуального анализа данных &#40;Справочник по функциям DMX&#41;](../dmx/data-mining-extensions-dmx-function-reference.md)   
 [Функции &#40;&#41;расширений интеллектуального анализа данных](../dmx/functions-dmx.md)   
 [Общие прогнозирующие функции &#40;&#41;расширений интеллектуального анализа данных](../dmx/general-prediction-functions-dmx.md)  
  
  
