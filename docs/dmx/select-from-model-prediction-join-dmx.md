---
description: ВЫБОР из &lt; &gt; прогнозного объединения модели (расширения интеллектуального анализа данных)
title: ВЫБОР из &lt; &gt; прогнозного подключения модели (расширения интеллектуального анализа данных) | Документация Майкрософт
ms.date: 06/07/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: dmx
ms.topic: reference
ms.author: owend
ms.reviewer: owend
author: minewiskan
ms.openlocfilehash: 033b610da29267cd07076c01157744441c4450d9
ms.sourcegitcommit: e700497f962e4c2274df16d9e651059b42ff1a10
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "88413300"
---
# <a name="select-from-ltmodelgt-prediction-join-dmx"></a>ВЫБОР из &lt; &gt; прогнозного объединения модели (расширения интеллектуального анализа данных)
[!INCLUDE[ssas](../includes/applies-to-version/ssas.md)]

  Использует модель интеллектуального анализа данных для прогнозирования состояний столбцов внешнего источника данных. Инструкция **PREDICTION JOIN** сопоставляет каждый вариант из исходного запроса с моделью.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
  
SELECT [FLATTENED] [TOP <n>] <select expression list>   
FROM <model> | <sub select> [NATURAL] PREDICTION JOIN   
<source data query> [ON <join mapping list>]   
[WHERE <condition expression>]  
[ORDER BY <expression> [DESC|ASC]]  
```  
  
## <a name="arguments"></a>Аргументы  
 *n*  
 Необязательный параметр. Целое число, указывающее количество возвращаемых строк.  
  
 *Выбор списка выражений*  
 Разделенный запятыми список идентификаторов столбцов и выражений, производных от модели интеллектуального анализа данных.  
  
 *model*  
 Идентификатор модели.  
  
 *подзапрос выборки*  
 Внедренная инструкция SELECT.  
  
 *запрос источника данных*  
 Исходный запрос.  
  
 *Присоединение списка сопоставлений*  
 Необязательный параметр. Логическое выражение сравнения столбцов модели со столбцами исходного запроса.  
  
 *выражение условия*  
 Необязательный параметр. Условие ограничения значений, возвращаемых из списка столбцов.  
  
 *expression*  
 Необязательный параметр. Выражение, возвращающее скалярное значение.  
  
## <a name="remarks"></a>Remarks  
 Предложение ON определяет сопоставление столбцов исходного запроса со столбцами модели интеллектуального анализа данных. Такое сопоставление используется для того, чтобы направить столбцы из исходного запроса в столбцы модели интеллектуального анализа данных и чтобы при создании прогнозов можно было использовать эти столбцы в качестве входных. Столбцы в связаны с \<*join mapping list*> помощью знака равенства (=), как показано в следующем примере:  
  
```  
[MiningModel].ColumnA = [source data query].Column1 AND   
[MiningModel].ColumnB = [source data query].Column2 AND  
...  
```  
  
 Привязывая вложенную таблицу в предложении ON, удостоверьтесь в том, что ключевой столбец привязан к каким-либо неключевым столбцам, чтобы алгоритм мог верно идентифицировать вариант, которому принадлежит запись вложенного столбца.  
  
 Исходный запрос для прогнозируемого соединения может представлять собой таблицу или одноэлементный запрос.  
  
 Можно указать прогнозирующие функции, которые не возвращают табличное выражение в \<*select expression list*> и \<*condition expression*> .  
  
 **Естественное прогнозируемое соединение** автоматически сопоставляет имена столбцов из исходного запроса, которые соответствуют именам столбцов в модели. При использовании **естественного прогноза**можно ОПУСТИТЬ предложение ON.  
  
 Условие WHERE можно применять только к прогнозируемым столбцам или к связанным столбцам.  
  
 Предложение ORDER BY может принять в качестве аргумента только один столбец, т. е. нельзя сортировать по нескольким столбцам.  
  
## <a name="example-1-singleton-query"></a>Пример 1. одноэлементный запрос  
 В следующем примере показывается, как создать запрос, прогнозирующий вероятность приобретения указанным лицом велосипеда в реальном времени. В этом запросе данные не хранятся в таблице или в другом источнике данных; они вводятся непосредственно в запрос. Человек в запросе обладает следующими характеристиками:  
  
-   Возраст 35 лет  
  
-   Владеет домом  
  
-   Владеет двумя автомобилями  
  
-   У него дома живут двое детей  
  
 Используя модель интеллектуального анализа данных TM для дерева принятия решений и известные характеристики субъекта, запрос возвращает логическое значение, которое описывает, приобрел ли пользователь велосипед и набор табличных значений, возвращаемых функцией [PredictHistogram &#40;DMX&#41;](../dmx/predicthistogram-dmx.md) , которая описывает, как был сделан прогноз.  
  
```  
SELECT  
  [TM Decision Tree].[Bike Buyer],  
  PredictHistogram([Bike Buyer])  
FROM  
  [TM Decision Tree]  
NATURAL PREDICTION JOIN  
(SELECT 35 AS [Age],  
  '5-10 Miles' AS [Commute Distance],  
  '1' AS [House Owner Flag],  
  2 AS [Number Cars Owned],  
  2 AS [Total Children]) AS t  
```  
  
## <a name="example-2-using-openquery"></a>Пример 2. Использование OPENQUERY  
 В следующем примере показано, как создать пакетный прогнозирующий запрос с помощью списка потенциальных клиентов, который хранится во внешнем наборе данных. Поскольку таблица является частью представления источника данных, определенного в экземпляре [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] , запрос может использовать [OPENQUERY](../dmx/source-data-query-openquery.md) для получения данных. Поскольку имена столбцов в таблице отличаются от имен в модели интеллектуального анализа данных, для соответствия столбцов в таблице со столбцами модели необходимо использовать предложение **On** .  
  
 Запрос возвращает список имен и фамилий каждого человека в таблице наряду с логическим столбцом, указывающим на вероятность покупки им велосипеда, где 0 означает «вероятно, не будет покупать велосипед», а 1 означает «вероятно, купит велосипед». Последний столбец содержит значение вероятности прогнозируемого результата.  
  
```  
SELECT  
  t.[LastName],  
  t.[FirstName],  
  [TM Decision Tree].[Bike Buyer],  
  PredictProbability([Bike Buyer])  
From  
  [TM Decision Tree]  
PREDICTION JOIN  
  OPENQUERY([Adventure Works DW Multidimensional 2012],  
    'SELECT  
      [LastName],  
      [FirstName],  
      [MaritalStatus],  
      [Gender],  
      [YearlyIncome],  
      [TotalChildren],  
      [NumberChildrenAtHome],  
      [Education],  
      [Occupation],  
      [HouseOwnerFlag],  
      [NumberCarsOwned]  
    FROM  
      [dbo].[ProspectiveBuyer]  
    ') AS t  
ON  
  [TM Decision Tree].[Marital Status] = t.[MaritalStatus] AND  
  [TM Decision Tree].[Gender] = t.[Gender] AND  
  [TM Decision Tree].[Yearly Income] = t.[YearlyIncome] AND  
  [TM Decision Tree].[Total Children] = t.[TotalChildren] AND  
  [TM Decision Tree].[Number Children At Home] = t.[NumberChildrenAtHome] AND  
  [TM Decision Tree].[Education] = t.[Education] AND  
  [TM Decision Tree].[Occupation] = t.[Occupation] AND  
  [TM Decision Tree].[House Owner Flag] = t.[HouseOwnerFlag] AND  
  [TM Decision Tree].[Number Cars Owned] = t.[NumberCarsOwned]  
```  
  
 Чтобы ограничить набор данных только теми клиентами, которые по прогнозу приобретут велосипед, а затем отсортировать список по имени клиентов, можно к предыдущему примеру добавить предложения WHERE и ORDER BY.  
  
```  
WHERE [BIKE Buyer]  
ORDER BY [LastName] ASC  
```  
  
## <a name="example-3-predicting-associations"></a>Пример 3. Прогнозирование взаимосвязей  
 В следующем примере показано, как создать прогноз с помощью модели, построенной на основе [!INCLUDE[msCoName](../includes/msconame-md.md)] алгоритма взаимосвязей. Прогнозы на основе модели взаимосвязей можно использовать для рекомендации связанных продуктов. Например, следующий запрос возвращает три продукта, которые, скорее всего, будут приобретены вместе:  
  
-   Держатель фляги для велосипеда Mountain  
  
-   Камера шины для велосипеда Mountain  
  
-   Велосипед Mountain-200  
  
 Функция [прогнозирования &#40;расширений интеллектуального анализа данных&#41;](../dmx/predict-dmx.md) является полиморфизмом и может использоваться со всеми типами моделей. Значение value3 используется в качестве аргумента функции, чтобы ограничить число элементов, возвращаемых запросом. Список **выбора** , следующий за ПРЕДЛОЖЕНИЕм ЕСТЕСТВЕННОго прогнозируемого объединения, предоставляет значения для использования в качестве входных данных для прогноза.  
  
```  
SELECT FLATTENED  
  PREDICT([Association].[v Assoc Seq Line Items], 3)  
FROM  
  [Association]  
NATURAL PREDICTION JOIN  
(SELECT (SELECT 'Mountain Bottle Cage' AS [Model]  
  UNION SELECT 'Mountain Tire Tube' AS [Model]  
  UNION SELECT 'Mountain-200' AS [Model]) AS [v Assoc Seq Line Items ]) AS t  
```  
  
 Пример результатов:  
  
|Expression.Model|  
|----------------------|  
|Шина для велосипеда HL Mountain|  
|Фляга для воды|  
|Набор крыльев для велосипеда Mountain|  
  
 Поскольку столбец, содержащий прогнозируемый атрибут `[v Assoc Seq Line Items]`, представляет собой столбец таблицы, запрос возвращает один столбец, который содержит вложенную таблицу. По умолчанию этот столбец с вложенной таблицей имеет имя `Expression`. Если поставщик не поддерживает иерархические наборы строк, можно использовать ключевое слово « **плоский** », как показано в этом примере, чтобы упростить просмотр результатов.  
  
## <a name="see-also"></a>См. также:  
 [ВЫБОР &#40;&#41;РАСШИРЕНИЙ ИНТЕЛЛЕКТУАЛЬНОГО АНАЛИЗА ДАННЫХ ](../dmx/select-dmx.md)   
 [Расширения интеллектуального анализа данных &#40;инструкции расширений интеллектуального анализа данных&#41; DDL](../dmx/dmx-statements-data-definition.md)   
 [Расширения интеллектуального анализа данных &#40;инструкции расширений интеллектуального анализа данных&#41;](../dmx/dmx-statements-data-manipulation.md)   
 [Справочник по расширениям интеллектуального анализа данных (расширения интеллектуального анализа данных)](../dmx/data-mining-extensions-dmx-statements.md)  
  
  
