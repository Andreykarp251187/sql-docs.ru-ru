---
title: 'Занятие 6: Добавление группирования и итогов (службы Reporting Services) | Документация Майкрософт'
description: Сведения о том, как добавить группирование и итоги к отчету Reporting Services для организации и суммирования данных.
ms.date: 04/18/2019
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: reporting-services
ms.topic: conceptual
ms.assetid: e3d61228-2aa4-42cc-955e-602dbf3406a7
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 5d149bb85834ae9c775e414e405889631a81f288
ms.sourcegitcommit: 216f377451e53874718ae1645a2611cdb198808a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/28/2020
ms.locfileid: "87243268"
---
# <a name="lesson-6-adding-grouping-and-totals-reporting-services"></a>Занятие 6: Добавление группирования и итогов (Reporting Services)

В этом заключительном уроке вы добавите группирование и итоги к уже созданному отчету [!INCLUDE[ssRSnoversion](../includes/ssrsnoversion-md.md)], которые помогут упорядочивать и анализировать данные.  

## <a name="to-group-data-in-a-report"></a>Группирование данных в отчете

1. Выберите вкладку **Конструктор**.
2. Если панель **Группы строк** не отображается, щелкните правой кнопкой мыши область конструктора и выберите **Вид** >**Группирование**.
3. Из области **Данные отчета** перетащите поле `[Date]` на панель **Группы строк**. Поместите это поле над строкой **=(Сведения)** .

    > [!NOTE]
    > Обратите внимание на то, что теперь на маркере строк отображается квадратная скобка, которая обозначает наличие группы. В таблице теперь содержатся два столбца с выражением `[Date]`, по одному с обеих сторон от вертикальной пунктирной линии.
    >
    >![Добавленная группа дат](media/rs-basictablegroups1design.png "Добавленная группа дат")
4. Из области **Данные отчета** перетащите поле `[Order]` на панель **Группы строк**. Поместите это поле под обозначением **Дата** и над обозначением **=(Сведения)** .

    ![ssrs_ssdt_addorderfield](media/ssrs-ssdt-addorderfield.png)

    > [!NOTE]
    > Обратите внимание, что дескриптор строки теперь включает две скобки ![ssrs_ssdt_rowgroupdoublehandles](media/ssrs-ssdt-rowgroupdoublehandles.png), что указывает на наличие двух групп. Таблица теперь также содержит два столбцы выражений `[Order]`.

5. Удалите исходные столбцы выражений `[Date]` и `[Order]` справа от двойной линии. Выберите маркеры двух столбцов, щелкните их правой кнопкой мыши и выберите **Удалить столбцы**. Конструктор отчетов удаляет выражения отдельных строк, поэтому отображаются только выражения группы.

    ![Выбор столбцов для удаления](media/rs-basictablegroupsdeletecols.gif "Выбор столбцов для удаления")

6. Чтобы отформатировать новый столбец `[Date]`, щелкните правой кнопкой мыши ячейку региона данных, которая содержит выражение `[Date]` и выберите **Свойства текстового поля**.
7. Выберите **Число** в крайнем левом поле со списком, а затем значение **Дата** в поле со списком **Категория**.
8. В поле **Тип** выберите **31 января 2000 года**.
9. Щелкните **ОК**, чтобы применить форматирование.
10. Снова откройте предварительный просмотр отчета. Он должен выглядеть примерно так:

    ![rs_BasicTableGroupsPreview](media/rs-basictablegroupspreview.png)

## <a name="adding-totals-to-a-report"></a>Добавление итогов к отчету

1. Переключитесь в режим **конструктора**.
2. Щелкните правой кнопкой мыши ячейку области данных, которая содержит выражение `[LineTotal]`, и щелкните **Добавить итог**. Конструктор отчетов добавит строку с суммарной стоимостью каждого заказа в долларах.
3. Щелкните правой кнопкой мыши ячейку, которая содержит поле `[Qty]`, и выберите пункт **Добавить итог**. Конструктор отчетов добавит в строку итогов сумму значений количества по каждому заказу.
4. В пустой ячейке слева от ячейки `Sum[Qty]` введите метку Order Total.
5. К строке итогов можно добавить цвет фона. Выберите две ячейки суммы и ячейку метки.  
6. В меню **Формат** выберите **Цвет фона** >  и квадрат **светло-серого** цвета.
7. Щелкните **ОК**, чтобы применить форматирование.

   ![Режим конструктора: базовая таблица с итоговой суммой заказов](media/rs-basictablesumlinetotaldesign.gif "Представление конструирования: базовая таблица с итоговой суммой заказов")

## <a name="add-the-daily-total-to-the-report"></a>Добавление ежедневного итога к отчету

1. Щелкните правой кнопкой мыши ячейку с выражением `[Order]` и выберите **Добавить итог** > **После**. Конструктор отчетов добавит новую строку, которая содержит суммы значений `[Qty]` и `[Linetotal]` за каждый день и метку "Total" (Итог) в нижней части столбца выражения `[Order]`.
2. Введите слово "ежедневный" перед словом "итог" в той же ячейке, чтобы в ней оказалась надпись "ежедневный итог".
3. Выберите эту ячейку, две соседние ячейки итогов справа и пустую ячейку между ними.
4. В меню **Формат** выберите **Цвет фона** >  и квадрат **оранжевого** цвета.
5. Щелкните **ОК**, чтобы применить форматирование.

   ![Выбор оранжевого цвета фона](media/rs-basictablesumdaytotaldesign.gif "rs_BasicTableSumDayTotalDesign")

## <a name="add-the-grand-total-to-the-report"></a>Добавление общего итога к отчету

1. Щелкните правой кнопкой мыши ячейку с выражением `[Date]` и выберите **Добавить итог** > **После**. Конструктор отчетов добавит новую строку, которая содержит суммы значений `[Qty]` и `[LineTotal]` по отчету в целом и метку "Total" (Итог) в нижней части столбца выражения `[Date]`.
2. Введите слово "общий" перед словом "итог" в той же ячейке, чтобы в ней появилась надпись "общий итог".
3. Выберите ячейку "Общий итог", две ячейки выражений `Sum()` и пустые ячейки между ними.
4. В меню **Формат** выберите **Цвет фона** >  и квадрат **светло-голубого** цвета.
5. Щелкните **ОК**, чтобы применить форматирование.

    ![Режим конструктора: итоговое значение в базовой таблице](media/rs-basictablesumgrandtotaldesign.gif "Представление конструирования: итоговое значение в базовой таблице")

## <a name="preview-the-report"></a>Предварительный просмотр отчета

Откройте вкладку **Просмотр**, чтобы оценить изменения форматирования в отчете. На панели инструментов **Предварительный просмотр** нажмите кнопку **Последняя страница** которая выглядит так: ![ssrs_ssdt_viewertoolbar_lastpage](media/ssrs-ssdt-viewertoolbar-lastpage.png). Отобразится примерно следующий результат:

   ![Предварительный просмотр: базовая таблица с итоговым значением](media/rs-basictablesumgrandtotalpreview.gif "Предварительный просмотр: базовая таблица с итоговым значением")

## <a name="publishing-the-report-to-the-report-server-optional"></a>Публикация отчета на *сервере отчетов* (необязательно)

Если требуется, вы можете выполнить публикацию готового отчета на сервере отчетов, чтобы просматривать его на веб-портале.

1. Выберите пункт меню **Проект** > **Свойства...**
2. В поле **TargetServerURL** введите имя сервера отчетов, например:
    - `http:/<servername>/reportserver` или
    - `https://localhost/reportserver` работает, если отчет создается на сервере отчетов.

3. **TargetReportFolder** получает имя Tutorial (Руководство) по имени соответствующего проекта. Конструктор отчетов разворачивает отчет в эту папку.
4. Щелкните **ОК**.
5. В меню **Сборка** выберите пункт **Развернуть Tutorial**.

    Если в окне **вывода** появится сообщение, которое представлено ниже, это означает, что развертывание прошло успешно.

    > ------ Build started: проект: учебник, Конфигурация: отладка ------  
    > Пропускается "Sales Orders.rdl". Элемент имеет актуальную версию.  
    > Построение завершено — 0 ошибок, 0 предупреждений  
    > ------ Развертывание начато: проект: учебник, Конфигурация: отладка ------  
    > Развертывание на `https://[server name]/reportserver`  
    > Развертывание отчета "/tutorial/Sales Orders".  
    > Развертывание завершено -- 0 ошибок, 0 предупреждений  
    > ========== Номер сборки: успешно и без изменений: 1, с ошибками: 0, пропущено: 0 ==========  
    > ========== Развертывание: 1 succeeded, 0 failed, 0 skipped ==========  

    Если же появится сообщение об ошибке, похожее на представленное ниже, проверьте наличие разрешений на сервере отчетов и убедитесь, что запускаете [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)] с правами администратора.
    >
    > "Предоставленные пользователю "XXXXXXXX\\[имя пользователя]" разрешения недостаточны для выполнения данной операции"

6. Откройте окно браузера с правами администратора. Например, щелкните значок Internet Explorer правой кнопкой мыши и выберите команду **Запуск от имени администратора**.
7. Перейдите по URL-адресу веб-портала.
   - `https://<server name>/reports`.
   - `https://localhost/reports` работает, если отчет создается на сервере отчетов.

8. Выберите папку Tutorial, а затем отчет Sales Orders, чтобы просмотреть этот отчет.

    ![ssrs_tutorial_tutorialfolder](media/ssrs-tutorial-tutorialfolder.png)  

Итак, вы успешно завершили **руководство по созданию базового табличного отчета**.

## <a name="see-also"></a>См. также раздел

[Фильтрация, группирование и сортировка данных (построитель отчетов и службы SSRS)](report-design/filter-group-and-sort-data-report-builder-and-ssrs.md)
