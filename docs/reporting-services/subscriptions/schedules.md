---
title: Расписания | Документы Майкрософт
description: Этот обзор описывает, как использовать общие расписания и расписания отчетов, чтобы управлять обработкой и распространением отчетов.
ms.date: 07/01/2016
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: subscriptions
ms.topic: conceptual
helpviewer_keywords:
- schedules [Reporting Services]
- schedules [Reporting Services], about schedules
- published reports [Reporting Services], schedules
- reports [Reporting Services], scheduling
- subscriptions [Reporting Services], scheduling
- automatic report processing
ms.assetid: ecccd16b-eba9-4e95-b55d-f15c621e003f
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 503396c71b1f3795177d7a6e1e23032f4833beba
ms.sourcegitcommit: c6a2efe551e37883c1749bdd9e3c06eb54ccedc9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80742160"
---
# <a name="schedules"></a>Расписания
  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] предоставляют **общие расписания** и **расписания отчетов** , что позволяет управлять обработкой и распространением отчетов. Различие между двумя типами расписаний состоит в том, как они определяются, хранятся и управляются. Внутреннее строение обоих типов расписаний одинаково. В каждом расписании указывается тип повторения: ежемесячно, еженедельно или ежедневно. В пределах одного типа повторений можно указать интервалы и диапазон, определяющий частоту повторения события. Шаблон типа повторения и способ его задания одинаков при создании как общих расписаний, так и расписаний для отчетов.
  
  -   Общие расписания создаются в виде отдельных элементов. После их создания можно ссылаться на них при определении подписки или какой-либо другой отложенной операции.  
  
-   Расписания отчета создаются при определении подписки или установке свойств выполнения отчета. Заполнение расписания является неотъемлемой частью обоих этих действий. Для определения расписания отчета откройте отчет или подписку, которая его использует.  
  
 Общее расписание содержит расписание и шаблон повторений, которые могут использоваться любым числом опубликованных отчетов и подписок, выполняющихся на сервере отчетов служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] . Если одновременно выполняется много отчетов и подписок, то для них можно создать общее расписание. Если в дальнейшем будет необходимо изменить шаблон повторений или дату окончания, то это можно будет сделать всего в одном месте.  
  
 Общие расписания проще в обслуживании и обеспечивают большую гибкость при управлении запланированными операциями. Например, выполнение общего расписания можно приостанавливать и возобновлять. Кроме того, если обнаружится, что одновременно выполняется слишком много запланированных операций, можно создать несколько общих расписаний, которые могут выполняться в разное время, а затем настроить их таким образом, чтобы распределить нагрузку на сервер отчетов.  
  
  
##  <a name="what-you-can-do-with-schedules"></a><a name="bkmk_whatyoucando"></a> Возможные действия с расписаниями  
 С помощью веб-портала [!INCLUDE[ssRSnoversion_md](../../includes/ssrsnoversion-md.md)] , [!INCLUDE[ssManStudioFull_md](../../includes/ssmanstudiofull-md.md)] в основном режиме и страниц администрирования сайта SharePoint в режиме интеграции с SharePoint можно создавать расписания и управлять ими. Вы можете:  
  
-   запланировать доставку отчета в стандартной или управляемой данными подписке;  
  
-   запланировать создание журнала отчета так, что новые моментальные снимки будут добавляться к журналу отчета через регулярные промежутки времени;  
  
-   запланировать время обновления данных о моментальном снимке отчета;  
  
-   запланировать время обновления данных общего набора данных;  
  
-   запланировать истечение срока действия кэшированного отчета или общего набора данных в стандартное время, чтобы впоследствии его можно было обновить.  
  
 Можно создать общее расписание, если желательно использовать одни и те же данные расписания для нескольких отчетов или подписок. Общие расписания определяются по отдельности, после чего ссылки на них добавляются в отчеты, общие наборы данных и подписки, которым требуются сведения о расписании.  
  
 При создании расписания отчет сохраняет информацию в базе данных сервера отчетов или в режиме интеграции с SharePoint в базе данных приложения службы. Сервер отчетов также создает задание агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , которое используется для запуска расписания. Расписания обрабатываются на основе местного времени сервера отчетов, на котором они содержатся. Формат времени соответствует стандарту операционной системы [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows.  
  
 Подробные сведения о том, как создавать расписания и управлять ими, см. в разделе [Create, Modify, and Delete Schedules](../../reporting-services/subscriptions/create-modify-and-delete-schedules.md).  
  
> [!NOTE]  
>  Операции планирования доступны не во всех выпусках [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Список функций, поддерживаемых различными выпусками [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], см. в статье [Выпуски и поддерживаемые функции SQL Server 2017](../../sql-server/editions-and-components-of-sql-server-2017.md).  
  
##  <a name="comparing-shared-and-report-specific-schedules"></a><a name="bkmk_compare"></a> Сравнение общих расписаний и расписаний для отчетов  
 Оба типа расписаний формируют одинаковый вывод:  
  
-   **Общие расписания** являются переносимыми многоцелевыми элементами, которые содержат готовые к использованию сведения о расписании. Поскольку общие расписания являются элементами системного уровня, создание общего расписания требует наличия прав системного уровня. По этой причине общие расписания, доступные на сервере отчетов, обычно создает администратор сервера отчетов или диспетчер содержимого. Общие расписания хранятся на сервере отчетов и управляются с помощью веб-портала или параметров сайта SharePoint.  
  
     В отличие от расписаний, определяемых через свойства отчета, общего набора данных или подписки, общие расписания проще управляются и обслуживаются по следующим причинам.  
  
    -   Общими расписаниями можно управлять с центрального узла, что упрощает сравнение свойств расписаний и настройку частоты повторений и закономерности выполнения, если запланированные операции совершаются слишком близко друг к другу или конфликтуют с другими процессами на сервере.  
  
    -   Они позволяют быстро применить изменения в вычислительной среде. Предположим, существует набор отчетов, выполняемых в 4:00. после обновления хранилища данных. Если операция обновления данных отложена или расписание изменено, то легко учесть изменение, обновив сведения в одном общем расписании.  
  
    -   Если используются только общие расписания, то точно известно время выполнения запланированных операций. В результате проще прогнозировать и распределять рабочую нагрузку сервера, чтобы избежать проблем производительности. Например, если резервное копирование компьютера запланировано на определенное время, то можно скорректировать общие расписания для запуска в другое время.  
  
-   **Расписания отчетов** определяются в контексте отдельного отчета, подписки или операции выполнения отчета для определения момента истечения срока действия кэша или обновления моментальных снимков. Эти расписания создаются как встроенные при определении подписки или при установке свойств выполнения отчета. Можно создать расписание отчета, если общее расписание не обеспечивает необходимую частоту повторений или схему выполнения. Чтобы предотвратить запуск отчета, необходимо отредактировать расписание отчета вручную. Расписания отчетов могут быть созданы индивидуальным пользователем.  
  
##  <a name="configure-the-data-sources"></a><a name="bkmk_configuredatasources"></a> Настройка источников данных  
 Перед заданием расписания обработки данных или подписок необходимо настроить источник данных отчета для использования сохраненных учетных данных или учетной записи автоматической обработки отчета. При использовании сохраненных учетных данных можно сохранить только один набор учетных данных, и они будут использоваться всеми пользователями, которые выполняют отчет. Учетные данные могут быть или учетной записью Windows, или учетной записью базы данных.  
  
 Учетная запись автоматической обработки отчета — это специальная учетная запись, настроенная для сервера отчетов. Ее использует сервер отчетов для соединения с удаленными компьютерами, если запланированная операция требует получения внешнего файла или обработки. Если настроить учетную запись, можно использовать ее для соединения с внешними источниками данных, которые предоставляют данные в отчет.  
  
 Чтобы указать сохраненные учетные данные или учетную запись автоматической обработки отчета, измените свойства источника данных отчета. Если в отчете используется общий источник данных, то измените внешний источник данных.  
  
##  <a name="store-credentials-and-processing-accounts"></a><a name="bkmk_credentials"></a> Хранение учетных данных и обработка учетных записей  
 Как именно производится работа с расписанием, зависит от того, какие задачи входят в назначение ролей. Если используются стандартные роли, пользователи, являющиеся диспетчерами содержимого и системными администраторами, могут создавать любые расписания и управлять ими. Если используется пользовательское назначение ролей, то оно должно включать задачи, поддерживающие отложенные операции.  
  
|Требуемое действие|Включите следующую задачу|Стандартные роли собственного режима|Группы для режима интеграции с SharePoint|  
|----------------|-----------------------|----------------------------------|----------------------------|  
|Создать, изменить или удалить общее расписание|Управление общими расписаниями|Системный администратор|Владельцы|  
|Выбрать общее расписание|Просмотр общих расписаний|пользователь системы|Члены|  
|Создать, изменить или удалить расписание отчета в пользовательской подписке|Управление отдельными подписками|браузер, построитель отчетов, «Мои отчеты», диспетчер содержимого|Посетители, участники|  
|Создать, изменить или удалить расписание отчета для всех остальных отложенных операций|Управление журналом отчета, управление всеми подписками, управление отчетами|Диспетчер содержимого|Владельцы|  
  
 Дополнительные сведения о безопасности в службах [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]в основном режиме см. в разделах [Стандартные роли](../../reporting-services/security/role-definitions-predefined-roles.md), [Предоставление разрешений на сервер отчетов в собственном режиме](../../reporting-services/security/granting-permissions-on-a-native-mode-report-server.md) и [Задачи и разрешения](../../reporting-services/security/tasks-and-permissions.md). Описание режима интеграции с SharePoint см. в разделе [Сравнение ролей и задач служб Reporting Services с группами и разрешениями SharePoint](../../reporting-services/security/reporting-services-roles-tasks-vs-sharepoint-groups-permissions.md)  
  
##  <a name="how-scheduling-and-delivery-processing-works"></a><a name="bkmk_how_scheduling_works"></a> Принцип работы обработчика планирования и доставки  
 Обработчик планирования и доставки выполняет следующие функции.  
  
-   Обслуживает очередь событий и уведомлений в базе данных сервера отчетов. В масштабном развертывании очередь является общей для всех серверов отчетов конфигурации.  
  
-   Обращается к обработчику отчетов для выполнения отчетов, обработки подписок или удаления кэшированных отчетов. Вся обработка процессов, проводимая в результате запланированного события, выполняется как фоновый процесс. Режим интеграции с SharePoint использует задания таймера.  
  
-   Вызывает модуль доставки, указанный в подписке, чтобы доставить отчет.  
  
 Другие аспекты расписаний и операций доставки обрабатываются другими компонентами и службами, которые взаимодействуют с обработчиком планирования и доставки отчетов. Обработчик планирования и доставки запускается службой сервера отчетов и использует агент SQL Server, как таймер, формирующий запланированные события. В следующем пошаговом описании объясняется, как запланированные операции работают в развертывании служб Reporting Services.  
  
1.  Запланированная операция определяется, когда пользователь создает расписание. Расписание определяет дату и время, когда будет запущена подписка на доставку отчета, обновлен моментальный список или истечет срок действия кэша.  
  
2.  Сервер отчетов сохраняет информацию расписания в базе данных сервера отчетов.  
  
3.  Сервер отчетов создает соответствующее задание агента SQL Server, включающее предоставленные сведения о расписании. Задания создаются с помощью хранимых процедур, используя существующее открытое соединение с базой данных сервера отчетов.  
  
4.  Агент SQL Server запускает задание в указанные в расписании день и время. Задание создает событие, которое добавляется в очередь, поддерживаемую службой Reporting Services.  
  
5.  Событие вызывает обработку отчета или подписки. События обрабатываются, когда они обнаружены в очереди, соответственно обрабатывается и доставляется отчет.  
  
     Перед обработкой событий обработчик планирования и доставки выполняет проверку подлинности, чтобы удостовериться, что владелец подписки имеет разрешение для просмотра отчета.  
  
 Службы Reporting Services поддерживают очередь событий для всех запланированных операций. Через регулярные интервалы времени производится опрос очереди для обнаружения новых событий. По умолчанию очередь просматривается с интервалом в 10 секунд. Можно изменить этот интервал, изменив параметры конфигурации **PollingInterval**, **IsNotificationService**и **IsEventService** в файле RSReportServer.config. В режиме интеграции с SharePoint файл RSreporserver.config также используется для этих параметров, а значения применяются ко всем приложениям службы [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] . Дополнительные сведения см. в разделе [Файл конфигурации RsReportServer.config](../../reporting-services/report-server/rsreportserver-config-configuration-file.md).  
  
##  <a name="server-dependencies"></a><a name="bkmk_serverdependencies"></a> Серверные зависимости  
 Обработчик планирования и доставки требует, чтобы была запущена служба сервера отчетов и агент SQL Server. Функции обработчика расписания и доставки должны быть активированы через свойство **ScheduleEventsAndReportDeliveryEnabled** аспекта **Настройка контактной зоны для служб Reporting Services** в управлении на основе политик. Для формирования запланированных действий должны быть запущены как агент SQL Server, так и служба сервера отчетов.  
  
> [!NOTE]  
>  Для временной или полной остановки формирования запланированных действий можно использовать аспект **Настройка контактной зоны для служб Reporting Services** . Можно создать и развернуть пользовательские модули доставки, но сам обработчик планирования и доставки не является расширяемым. Нельзя изменить его способ управления событиями и уведомлениями. Дополнительные сведения об отключении функций см. в подразделе **Запланированные события и доставка** раздела [Turn Reporting Services Features On or Off](../../reporting-services/report-server/turn-reporting-services-features-on-or-off.md).  
  
###  <a name="effects-of-stopping-the-sql-server-agent"></a><a name="bkmk_stoppingagent"></a> Последствия остановки работы агента SQL Server  
 Агент SQL Server используется по умолчанию для обработки запланированного отчета. При остановке службы никакие новые запросы обработки в очередь не добавятся, если только они не будут добавляться программно вызовом метода <xref:ReportService2010.ReportingService2010.FireEvent%2A> . При перезагрузке службы возобновляются задания, создающие требования на обработку отчета. Сервер отчетов не пытается воссоздать задания обработки отчета, которые могли возникнуть, когда агент SQL Server находился в режиме «вне сети». Если агент SQL Server не будет работать неделю, то все запланированные на эту неделю действия будут утеряны.  
  
> [!NOTE]  
>  Функции, которые выполняет агент SQL Server для служб Reporting Services, могут быть заменены на пользовательский код, который вызывает метод <xref:ReportService2010.ReportingService2010.FireEvent%2A> для добавления событий в очередь.  
  
###  <a name="effects-of-stopping-the-report-server-service"></a><a name="bkmk_stoppingservice"></a> Последствия остановки службы сервера отчетов  
 При остановке службы сервера отчетов агент SQL Server продолжает добавлять запросы на обработку отчета в очередь. Сведения о состоянии от агента SQL Server указывают на то, что задание успешно завершилось. Однако из-за того, что служба сервера отчетов была остановлена, фактически обработка отчета не выполнялась. Запросы будут накапливаться в очереди до тех пор, пока служба сервера отчетов не будет перезапущена. Как только служба сервера отчетов будет перезапущена, все запросы на обработку отчета, находящиеся в очереди, начнут обрабатываться по очереди.  
  
## <a name="see-also"></a>См. также:  
 [Создание, изменение и удаление моментальных снимков в журнале отчетов](../../reporting-services/report-server/create-modify-and-delete-snapshots-in-report-history.md)   
 [Подписки и доставка (службы Reporting Services)](../../reporting-services/subscriptions/subscriptions-and-delivery-reporting-services.md)   
 [Data-Driven Subscriptions](../../reporting-services/subscriptions/data-driven-subscriptions.md)   
 [Кэширование отчетов (службы SSRS)](../../reporting-services/report-server/caching-reports-ssrs.md)   
 [Управление содержимым сервера отчетов (службы Reporting Services в основном режиме)](../../reporting-services/report-server/report-server-content-management-ssrs-native-mode.md)   
 [Общие наборы данных в кэше (службы SSRS)](../../reporting-services/report-server/cache-shared-datasets-ssrs.md)  
  
  
