---
title: Занятие 4. Определение подключения к данным и таблицы данных для дочернего отчета | Документы Майкрософт
ms.date: 05/18/2016
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: reporting-services
ms.topic: conceptual
ms.assetid: a6aa2c56-227c-43c5-a28e-c7104131ac5e
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 9d9be825b53cfab3601dc755b9122039669ce758
ms.sourcegitcommit: ff82f3260ff79ed860a7a58f54ff7f0594851e6b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2020
ms.locfileid: "62651364"
---
# <a name="lesson-4-define-a-data-connection-and-data-table-for-child-report"></a>Занятие 4. Определение подключения к данным и таблицы данных для родительского отчета
После проектирования родительского отчета далее необходимо создать подключение к данным и таблицу данных для дочернего отчета. В этом учебнике в качестве источника подключения к данным используется база данных AdventureWorks2014.  
  
### <a name="to-define-a-data-connection-and-datatable-by-adding-a-dataset-for-child-report"></a>Определение подключения к данным и таблицы данных путем добавления набора данных (для дочернего отчета)  
  
1.  В меню **Веб-сайт** выберите команду **Добавить новый элемент**.  
  
2.  В диалоговом окне **Добавление нового элемента** выберите **Набор данных** и нажмите кнопку **Добавить**. После получения соответствующего запроса необходимо добавить элемент в папку **App_Code** , нажав кнопку **Да**.  
  
    В результате произойдет добавление нового XSD-файла **DataSet2.xsd** к проекту и откроется конструктор набора данных.  
  
3.  Из окна "Панель элементов" перетащите элемент управления **TableAdapter** в рабочую область конструирования. Запустится мастер настройки **TableAdapter** .  
  
4.  На странице **Выбор подключения к данным** можно выбрать подключение, созданное на занятии 2. В этом случае нажмите кнопку **Далее** и перейдите к шагу 8. В противном случае нажмите кнопку **Создать соединение**.  
  
5.  В диалоговом окне **Добавление подключения** выполните указанные ниже действия.  
  
    1.  В поле **Имя сервера** укажите сервер, на котором расположена база данных **AdventureWorks2014** .  
  
        Экземпляром SQL Server Express по умолчанию является **(local)\sqlexpress**.  
  
    2.  В разделе **Вход на сервер** выберите параметр, который предоставляет доступ к данным. По умолчанию установлен параметр**Использовать проверку подлинности Windows** .  
  
    3.  В раскрывающемся списке **Выберите или введите имя базы данных** выберите элемент **AdventureWorks2014**.  
  
    4.  Нажмите кнопку **ОК**, а затем кнопку **Далее**.  
  
6.  Если в шаге 5 (b) был выбран вариант **Использовать проверку подлинности SQL Server** , выберите включение конфиденциальных данных в строку или задание этих сведений в коде приложения.  
  
7.  На странице **Сохранение подключения в файле конфигурации приложения** введите имя для строки подключения или примите значение по умолчанию **AdventureWorks2014ConnectionString**. Выберите **Далее**.  
  
8.  На странице **Выбор типа команды** выберите **Использовать инструкции SQL**, а затем нажмите кнопку **Далее**.  
  
9. На странице **Ввод инструкции SQL** введите приведенный ниже запрос Transact-SQL для извлечения данных из базы данных **AdventureWorks2014** , а затем нажмите кнопку **Далее**.  
  
    ```  
    SELECT PurchaseOrderID, PurchaseOrderDetailID, OrderQty, ProductID, ReceivedQty, RejectedQty, StockedQty FROM Purchasing.PurchaseOrderDetail  
    ```  
  
    Для создания запроса также можно щелкнуть **Построитель запросов**, а затем проверить запрос, нажав кнопку **Выполнить запрос** . Если запрос не возвращает ожидаемые данные, возможно, используется более ранняя версия AdventureWorks. Дополнительные сведения о получении образца базы данных **AdventureWorks2014** см. на странице [Образцы баз данных AdventureWorks](https://github.com/Microsoft/sql-server-samples/releases).  
  
10. На странице **Выбор методов для автоматического создания** снимите флажок **Создать методы для отправки обновлений непосредственно в базу данных (GenerateDBDirectMethods)** , а затем нажмите кнопку **Готово**.  
  
    > [!WARNING]  
    > Обязательно снимите флажок **Создать методы для отправки обновлений непосредственно в базу данных (GenerateDBDirectMethods)** .  
  
    На этом настройка объекта [DataTable](https://msdn.microsoft.com/library/system.data.datatable.aspx) ADO.NET в качестве источника данных для отчета завершена. На странице конструктора набора данных в Visual Studio появится добавленный объект **DataTable** со списком столбцов, указанных в запросе. Набор данных DataSet2 содержит данные таблицы PurhcaseOrderDetail, указанные в запросе.  
  
11. Сохраните файл.  
  
12. Для предварительного просмотра данных выберите пункт **Предварительный просмотр данных** в меню **Данные** , а затем щелкните **Предварительный просмотр**.  
  
## <a name="next-task"></a>Следующая задача  
Тем самым были успешно созданы подключение к данным и таблица данных для дочернего отчета. Затем необходимо спроектировать дочерний отчет с использованием мастера отчетов. См. [Занятие 5. Проектирование родительского отчета с использованием мастера отчетов](../reporting-services/lesson-5-design-the-child-report-using-the-report-wizard.md).  
  

