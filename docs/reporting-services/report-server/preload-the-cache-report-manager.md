---
title: Предварительная загрузка кэша (SSRS) | Документация Майкрософт
ms.date: 05/14/2019
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: report-server
ms.topic: conceptual
helpviewer_keywords:
- cache [Reporting Services]
- preloading cache
ms.assetid: 152a1051-8aa5-4c01-bc85-f8be8971b0cd
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 6b2be1e020354f47aa21dc83f17ff6169bcf2d72
ms.sourcegitcommit: 982a1dad0b58315cff7b54445f998499ef80e68d
ms.translationtype: MTE75
ms.contentlocale: ru-RU
ms.lasthandoff: 05/23/2019
ms.locfileid: "66175001"
---
# <a name="preload-the-cache"></a>Предварительная загрузка кэша  
  Можно предварительно загрузить кэш для общего набора данных путем создания плана обновления кэша для общего набора данных.  
  
 Предварительно загрузить кэш для отчета можно двумя способами.  
  
1.  Создать плана обновления кэша для отчета. Этот метод является предпочтительным.  
  
2.  Используйте управляемую данными подписку для предварительной загрузки в кэш экземпляров параметризованных отчетов. В версиях служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] , предшествующих [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], это был единственный способ предварительной загрузки кэша. Дополнительные сведения см. в разделе [Кэширование отчетов (службы SSRS)](../../reporting-services/report-server/caching-reports-ssrs.md), это был единственный способ предварительной загрузки кэша.  
  
 Прежде чем появится возможность кэшировать отчет или общий набор данных, должны быть выполнены следующие условия.  
  
-   Для общего набора данных или отчета должно быть включено кэширование.  
  
-   Общие источники данных для общего набора данных или отчета должны быть настроены для использования сохраненных учетных данных или на работу без учетных данных.  
  
-   Должна быть запущена служба агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
## <a name="to-preload-the-cache-by-creating-a-cache-refresh-plan"></a>Предварительная загрузка кэша путем создания плана обновления кэша  
  
1. Откройте [веб-портал сервера отчетов](../../reporting-services/web-portal-ssrs-native-mode.md "The web portal of a report server").  
  
2. На главном экране выберите **Обзор** и, перемещаясь по иерархии папок, перейдите к элементу, который необходимо кэшировать.  
  
3. Нажмите кнопку с многоточием в правом верхнем углу элемента, а затем выберите пункт **Управление** в раскрывающемся меню.  
  
4. Выберите вкладку **Кэширование** в вертикальном меню слева.  
  
5. Чтобы активировать кэширование для набора данных, щелкните переключатель **Кэшировать копии этого набора данных и использовать их при доступности**. После этого под переключателем появится раздел **Окончание срока действия кэша**. Щелкните один из следующих переключателей:

    - **Срок действия кэша истекает через x мин** (введите нужное количество минут вместо x).
    - **Срок действия кэша истекает по расписанию**.  В Reporting Services предусмотрены общие расписания и расписания отчетов, которые позволяют управлять обработкой, согласованностью содержимого и производительностью при распространении отчетов. Дополнительные сведения см. в статье [Create, Modify, and Delete Schedules](../../reporting-services/subscriptions/create-modify-and-delete-schedules.md "Create, Modify, and Delete Schedules") (Создание, изменение и удаление расписаний). Существует несколько вариантов создания расписания. В нашем случае это расписание срока действия кэша. Выберите один из следующих вариантов:  
      - Щелкните переключатель **Общее расписание** и выберите расписание в раскрывающемся списке в текстовом поле **Выберите общее расписание**. Дополнительные сведения см. в статье о [расписаниях](../../reporting-services/subscriptions/schedules.md "Schedules").  
      - Щелкните переключатель **Расписание отчета** и ссылку **Изменить расписание**, если нужно открыть страницу *Сведения о расписании*.  

         ![Страница веб-портала со сведениями о расписании срока действия кэша](../../reporting-services/report-server/media/preload-the-cache/web-portal-dataset-cache-schedule-details.png "Dataset cache schedule details page")

          На этой странице можно выбрать следующие параметры:
         - Тип расписания.
           - **Час** (Запускать расписание кажд.) — укажите часы и минуты, а также время начала.
           - **День** — выберите один из следующих трех вариантов:  
              - **В следующие дни** — вс, пн, вт, ср, чт, пт или сб.
              - **Каждый будний день**.
              - **Повторить через следующее число дней** — укажите число.  
           - **Неделя** — укажите значения для следующих двух элементов:
              - **Повторить через следующее число недель:**  — укажите число.  
              - **В дни** — выберите дни недели для запуска.  
           - **Месяц** — укажите месяцы и следующие значения:
              - **Неделя месяца**:  
                 - в раскрывающемся списке выберите "1-я", "2-я", "3-я", "4-я" или "Последняя".  
                 - Укажите значение для параметра **День недели** для запуска. Установите один или несколько флажков (вс, пн, вт, ср, чт, вт, сб).  
                 - **По календарным дням** — укажите через запятую определенные числа дней месяца, диапазон дней через дефис или любое сочетание этих вариантов (например 1, 3-5).  
           - **Однократно** — выполняется один раз.  
         - **Время начала** — время суток для начала расписания.  
         - **Даты начала и окончания** — укажите дату начала и при необходимости дату окончания для расписания.
         - Чтобы сохранить расписание, нажмите кнопку **Применить**.  
           > [!NOTE]
           > Если для элемента не включено кэширование, то появится приглашение включить кэширование. Чтобы включить кэширование, нажмите кнопку **ОК**.  

         - Чтобы создать или сохранить план, нажмите кнопку **Создать план обновления кэша**.  
         На экране откроется страница **Планы обновления кэша**. Здесь вы можете сделать следующее:
           - добавить новый план обновления кэша;
           - создать план обновления кэша на основе существующего плана;
           - обновить страницу "Планы обновления кэша";
           - удалить план;
           - найти план по имени.

         Если нет сохраненных планов обновления кэша, список будет пустым и будет доступен только элемент "Добавить". Чтобы добавить новый план, выберите **+Новый план обновления кэша**, после чего откроется страница **Создание плана обновления кэша**.  
           - В первом текстовом поле **Описание** укажите описательное имя плана обновления.  
           - В разделе **Обновлять кэш по следующему расписанию** щелкните один из следующих переключателей:  
             - **Общее расписание** — выберите общее расписание в смежном раскрывающемся списке. 
             - **Расписание отчета** — измените расписание, как в описанном выше шаге 2.2. Для этого щелкните ссылку **Изменить расписание**, если нужно открыть страницу *Сведения о расписании*. 
             - Если вы добавляете план, выберите **Создать план обновления кэша**, чтобы сохранить его. Либо нажмите кнопку **Применить**, если вы изменили план.  
      Вы вернетесь на обновленную страницу **Планы обновления кэша**.
  
## <a name="to-preload-the-cache-with-a-user-specific-report-by-using-a-data-driven-subscription"></a>Предварительная загрузка в кэш отчета для конкретного пользователя с использованием управляемой данными подписки

1. Откройте [веб-портал сервера отчетов](../../reporting-services/web-portal-ssrs-native-mode.md "The web portal of a report server").  
2. На главном экране выберите **Обзор** и, перемещаясь по иерархии папок, перейдите к отчету, на который необходимо подписаться.  
3. Щелкните отчет правой кнопкой мыши и выберите **Подписаться** в раскрывающемся меню. Откроется страница **Новые подписки**.  
4. Введите описание подписки в текстовом поле **Описание**.  
5. Если щелкнуть переключатель **Тип подписки**, отобразится два параметра:  
   - **Стандартная подписка** — создание и доставка одного отчета;
   - **Управляемая данными подписка** — создание и доставка одного отчета для каждой строки в наборе данных. Для предварительной загрузки кэша нужно выбрать этот вариант.
6. В разделе **Расписание** щелкните один из следующих переключателей:
   - **Общее расписание** — выберите общее расписание в раскрывающемся списке.  
   - **Расписание отчета** — измените расписание, как в описанном выше шаге 2.2. Для этого щелкните ссылку **Изменить расписание**, если нужно открыть страницу *Сведения о расписании*.  
7. В разделе **Назначение** в раскрывающемся списке отображаются такие варианты:
    - **Общая папка Windows**;
    - **Электронная почта**;
    - **Отсутствует поставщик доставки**. Выберите этот вариант для нашей задачи.  
8. В разделе **Набор данных** измените или создайте набор данных для этой подписки на отчет. Для этого нажмите кнопку **Изменить набор данных**.  
9. На странице **Изменение набора данных** в разделе **Источник данных** выберите источник данных, содержащий значения параметров отчета, и укажите варианты доставки. Доступны такие варианты:  
   - **Общий источник данных** — нажмите кнопку с многоточием и выберите общий источник данных из папки *Общий источник данных*.
   - **Пользовательский источник данных** — скорее всего, нужно будет выбрать этот вариант, если вы или другой пользователь не выполнили приведенные ниже шаги по созданию общего источника данных.  
     - Укажите тип соединения, строку соединения и учетные данные для доступа к источнику данных, который содержит данные подписчика. В следующем примере показана строка подключения, которая используется для соединения с базой данных SQL Server с именем Subscribers.  
  
   ```T-SQL
   data source=<servername>;initial catalog=Subscribers  
   ```
  
10. В разделе **Запрос** укажите запрос для получения данных об определенном подписчике.  Пример:  
  
    ```T-SQL  
    Select * from RptSubscribers  
    ```
  
    При необходимости увеличьте время ожидания для запросов, обработка которых занимает значительный период времени.  
  
11. Выберите **Проверить**. Перед продолжением необходимо выполнить проверку запроса. Когда появится сообщение **Проверка прошла успешно**, отобразится список полей набора данных под кнопкой **Проверить**. Выберите **Применить**, чтобы создать пользовательский источник данных.  
  
12. Вы вернетесь на страницу **Новая подписка**.  В разделе **Параметры отчета** укажите значения для параметров отчета, если такие параметры отображаются.  

13. Выберите **Создать подписку**.  
  
14. Отобразится страница **Подписки** со сведениями о новой управляемой данными подпиской. На этой странице можно включить подписку, когда все будет готово. Для этого установите флажок слева от подписки и нажмите кнопку **Включить**. ![Кнопка "Включить" на странице "Подписки"](../../reporting-services/report-server/media/preload-the-cache/subscriptions-page-enable-button.png "The enable button on the subscriptions page")

15. Укажите время обработки подписки. Не выбирайте параметр **При обновлении данных отчета на сервере отчетов**. Этот параметр используется только для моментальных снимков. Если нужно использовать существующее расписание, выберите **По общему расписанию**.  
  
     Или щелкните **По расписанию, созданному для этой подписки** для создания пользовательского расписания, а затем нажмите кнопку **Далее**. Настройте расписание и нажмите кнопку **Готово**.  
  
    > [!NOTE]  
    > Чтобы подписчики получили самый новый отчет, настраиваемое расписание должно быть согласовано с расписанием доставки отчета, которое определено для подписчиков. Дополнительные сведения см. в статье о [веб-портале сервера отчетов](../../reporting-services/web-portal-ssrs-native-mode.md  "The web portal of a report server").  
  
16. Настройте параметры выполнения отчета следующим образом. На странице отчета перейдите на вкладку **Свойства**.  
  
17. В левом окне перейдите на вкладку **Выполнение**.  
  
18. На этой странице выберите **Подготовить отчет с применением самых последних данных**.  
  
19. Выберите один из следующих двух режимов кэша и настройте время истечения следующим образом:  
  
    - Чтобы срок действия кэшированной копии истек через определенное время, выберите **Кэшировать временную копию отчета. Срок действия копии отчета заканчивается через несколько минут.** Введите срок действия отчета (в минутах).  
  
    - Чтобы срок действия кэшированной копии истек в соответствии с расписанием, выберите **Кэшировать временную копию отчета. Срок действия копии отчета истекает в соответствии со следующим расписанием.** Нажмите кнопку **Настроить** или выберите общее расписание для настройки истечения срока действия отчета.  
  
20. Нажмите кнопку **Применить**.
  
## <a name="see-also"></a>См. также раздел  

 [Подписки, управляемые данными](../../reporting-services/subscriptions/data-driven-subscriptions.md)  
 [Создание управляемой данными подписки (учебник по службам SSRS)](../../reporting-services/create-a-data-driven-subscription-ssrs-tutorial.md)  
 [Performance, Snapshots, Caching (Reporting Services)](../../reporting-services/report-server/performance-snapshots-caching-reporting-services.md) (Производительность, моментальные снимки, кэширование (Reporting Services)  
 [Определение свойств обработки отчетов](../../reporting-services/report-server/set-report-processing-properties.md)  
 [Кэширование отчетов (службы SSRS)](../../reporting-services/report-server/caching-reports-ssrs.md)  
 [Работа с общими наборами данных](../../reporting-services/work-with-shared-datasets-web-portal.md)  
  
