---
title: Фильтрование вложенной таблицы в модели интеллектуального анализа данных (учебник по интеллектуальному анализу интеллектуальному анализу данных) | Документация Майкрософт
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 0a3ae0e5-897b-4898-a60d-5455eec3d305
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: f57d691587d658e968cd79cf4f4ab4731db29915
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63267482"
---
# <a name="filtering-a-nested-table-in-a-mining-model-intermediate-data-mining-tutorial"></a>Фильтрование вложенной таблицы в модели интеллектуального анализа данных (учебник по интеллектуальному анализу данных — средний уровень)
  После создания и изучения модели принимается решение сосредоточить внимание на подмножестве данных о клиентах. Например, можно выполнить анализ только тех потребительских корзин, которые содержат конкретный элемент, или проанализировать демографические данных клиентов, которые ничего не купили в течение определенного периода времени.  
  
 Службы [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] предоставляют возможность фильтрации данных, которые используются в модели интеллектуального анализа данных. Эта функция полезна в тех случаях, так как вам не нужно настроить новое представление источника данных для использования других данных. В учебнике по интеллектуальному анализу данных (начальный уровень) рассматривалось, как фильтровать данные из плоской таблицы путем применения условий к таблице вариантов. В этой задаче создается фильтр для применения к вложенной таблице.  
  
## <a name="filters-on-nested-vs-case-tables"></a>Фильтры для вложенных таблиц и. Таблиц вариантов  
 Если представление источника данных содержит таблицу вариантов и вложенную таблицу (подобно представлению источника данных, которое используется в модели взаимосвязей), фильтр можно использовать на основании значений из таблицы вариантов, наличия или отсутствия определенного значения во вложенной таблице либо сочетания тех и других.  
  
 В этой задаче сначала создается копия модели взаимосвязей, а затем к новой связанной модели добавляются атрибуты IncomeGroup и Region, чтобы можно было выполнить фильтрация по этим атрибутам в таблице вариантов.  
  
#### <a name="to-create-and-modify-a-copy-of-the-association-model"></a>Создание и изменение копии модели «Взаимосвязь»  
  
1.  В **модели интеллектуального анализа данных** вкладке [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)], щелкните правой кнопкой мыши `Association` модели и выберите **новой модели интеллектуального анализа данных**.  
  
2.  Для **Имя_модели**, тип `Association Filtered`. Для **имя алгоритма**выберите **правил взаимосвязей Майкрософт**. Нажмите кнопку **ОК**.  
  
3.  В столбце модели фильтруемые взаимосвязи, щелкните строку IncomeGroup и измените значение с **пропустить** для **ввода**.  
  
 После этого следует создать фильтр для таблицы вариантов в новой модели взаимосвязей. Этот фильтр передаст модели только тех заказчиков, которые находятся в целевом регионе или имеют определенный уровень дохода. Затем нужно добавить второй набор условий фильтра, чтобы указать, что модель использует только клиентов, в чьих корзинах заказов содержался по крайней мере один элемент.  
  
#### <a name="to-add-a-filter-to-a-mining-model"></a>Добавление фильтра в модель интеллектуального анализа данных  
  
1.  В **модели интеллектуального анализа данных** , щелкните правой кнопкой мыши модель, фильтруемые взаимосвязи и выберите **установить фильтр моделей**.  
  
2.  В диалоговом окне **Фильтр модели** щелкните верхнюю строку сетки в текстовом поле **Столбец структуры интеллектуального анализа данных** .  
  
3.  В **столбец структуры интеллектуального анализа данных** текстовое поле, выберите IncomeGroup.  
  
     Значок слева от текстового поля изменится, указывая, что выбранным элементом является столбец.  
  
4.  Нажмите кнопку **оператор** текстовое поле и выберите **=** оператор из списка.  
  
5.  Нажмите кнопку **значение** текстовое поле и введите `High` в поле.  
  
6.  Щелкните следующую строку сетки.  
  
7.  Нажмите кнопку **и/или** текстового поля в следующей строке сетки и выберите **или**.  
  
8.  В **столбец структуры интеллектуального анализа данных** текстовое поле, выберите IncomeGroup. В **значение** текстовое поле, тип `Moderate`.  
  
     Созданное условие фильтра автоматически добавляется **выражение** текстовое поле и выглядит следующим образом:  
  
     `[IncomeGroup] = 'High' OR [IncomeGroup] = 'Moderate'`  
  
9. Щелкните следующую строку в сетке, исходящие из оператора по умолчанию **AND**.  
  
10. Для **оператор**, оставьте значение по умолчанию, **Contains**. Нажмите кнопку **значение** текстовое поле.  
  
11. В **фильтра** диалоговое окно, в первую строку под **столбец структуры интеллектуального анализа данных**выберите `Model`.  
  
12. Для **оператор**выберите **IS NOT NULL**. Оставьте **значение** пустое текстовое поле. Нажмите кнопку **ОК**.  
  
     Условие фильтра в **выражение** текстовое поле **фильтр модели** диалоговое окно автоматически обновляется для включения нового условия для вложенной таблицы. Законченное выражение выглядит следующим образом:  
  
     `[IncomeGroup] = 'High' OR [IncomeGroup] = 'Moderate' AND EXISTS SELECT * FROM [vAssocSeqLineItems] WHERE [Model] <> NULL).`  
  
13. [!INCLUDE[clickOK](../includes/clickok-md.md)] ``  
  
#### <a name="to-enable-drillthrough-and-to-process-the-filtered-model"></a>Включение детализации и обработка отфильтрованной модели  
  
1.  В **модели интеллектуального анализа данных** щелкните правой кнопкой мыши вкладку `Association Filtered` модели и выберите **свойства**.  
  
2.  Изменение **AllowDrillThrough** свойства **True**.  
  
3.  Щелкните правой кнопкой мыши `Association Filtered` модель интеллектуального анализа данных и выберите **модель процесса**.  
  
4.  Нажмите кнопку **Да** в сообщении об ошибке для развертывания новой модели, чтобы [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] базы данных.  
  
5.  В **обработать структуру интеллектуального анализа данных** диалоговом окне щелкните **запуска**.  
  
6.  После завершения обработки нажмите кнопку **закрыть** для выхода из **ход обработки** диалоговое окно и нажмите кнопку **закрыть** еще раз, чтобы выйти из **обработать структуру интеллектуального анализа данных**  диалоговое окно.  
  
 Чтобы убедиться в том, что отфильтрованная модель содержит меньше вариантов, чем исходная модель, проверьте значение параметра NODE_SUPPORT в средстве просмотра деревьев содержимого общего вида (Майкрософт).  
  
## <a name="remarks"></a>Примечания  
 Только что созданный фильтр вложенной таблицы проверяет лишь наличие по крайней мере одной строки во вложенной таблице. Также можно создать условия фильтра для проверки наличия конкретных продуктов.  Например, можно создать следующий фильтр:  
  
```  
[IncomeGroup] = 'High' AND  
 EXISTS (SELECT * FROM [<nested table name>] WHERE [Model] = 'Water Bottle' )   
```  
  
 Данная инструкция означает, что клиенты из таблицы вариантов будут ограничены лишь теми клиентами, которые приобрели флягу для воды. Количество атрибутов вложенной таблицы потенциально может быть неограниченным, поэтому службы [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] не предоставляют список возможных значений для выбора. Вместо этого необходимо вводить точное значение.  
  
 Можно щелкнуть **изменить запрос** и вручную изменить критерий фильтра. Однако если какая-либо часть критерия фильтра изменяется вручную, сетка становится недоступной и работать с выражением фильтра в дальнейшем можно только в режиме изменения текста. Чтобы снова перейти в режим изменения с помощью сетки, необходимо очистить критерий фильтра и начать сначала.  
  
> [!WARNING]  
>  В фильтре для вложенной таблицы нельзя использовать оператор LIKE.  
  
## <a name="next-task-in-lesson"></a>Следующая задача занятия  
 [Прогноз взаимосвязей &#40;средний уровень учебник по интеллектуальному анализу данных&#41;](../../2014/tutorials/predicting-associations-intermediate-data-mining-tutorial.md)  
  
## <a name="see-also"></a>См. также  
 [Синтаксис и примеры фильтра модели (службы Analysis Services — интеллектуальный анализ данных)](../../2014/analysis-services/data-mining/model-filter-syntax-and-examples-analysis-services-data-mining.md)   
 [Фильтры для моделей интеллектуального анализа данных (службы Analysis Services — интеллектуальный анализ данных)](../../2014/analysis-services/data-mining/filters-for-mining-models-analysis-services-data-mining.md)  
  
  
