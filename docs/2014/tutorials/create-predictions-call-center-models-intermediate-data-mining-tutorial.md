---
title: Создание прогнозов для моделей Call Center (учебник по интеллектуальному анализу интеллектуальному анализу данных) | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 5be0cec7-f639-4eeb-835e-e3204ae619e9
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: 30f24ab457669f572189d2eb13deca3f672f5e18
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "63217870"
---
# <a name="creating-predictions-for-the-call-center-models-intermediate-data-mining-tutorial"></a>Создание прогнозов для моделей Call Center (учебник по интеллектуальному анализу данных — средний уровень)
  Когда выявлены некоторые взаимосвязи между сменами, числом операторов, звонками и качеством обслуживания, можно создавать прогнозирующие запросы, которые будут использоваться в бизнес-аналитике и планировании. Вначале будут созданы прогнозы на исследовательской модели, чтобы проверить некоторые предположения. Затем с помощью модели логистической регрессии будут созданы массовые прогнозы.  
  
 На этом занятии предполагается, что пользователю уже известно, что такое прогнозирующий запрос.  
  
## <a name="creating-predictions-using-the-neural-network-model"></a>Создание прогнозов с помощью модели нейронной сети  
 В следующем примере показано, как создать одноэлементный прогноз с помощью модели нейронной сети, созданной для исследования. Одноэлементные прогнозы служат хорошим способом проверить различные значения, чтобы оценить их воздействие на модель. В этом сценарии будет прогнозироваться уровень обслуживания для полуночной смены (без указания дня недели), если на дежурстве находятся шесть опытных операторов.  
  
#### <a name="to-create-a-singleton-query-by-using-the-neural-network-model"></a>Создание одноэлементного запроса с помощью модели нейронной сети  
  
1.  В среде [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)] откройте решение с моделью, которую вы хотите использовать.  
  
2.  В конструкторе интеллектуального анализа данных щелкните **модель интеллектуального анализа данных** вкладки.  
  
3.  В **модель интеллектуального анализа данных** панели щелкните **Выбор модели**.  
  
4.  **Выбор модели интеллектуального анализа данных** диалоговое окно показывает список структур интеллектуального анализа данных. Разверните структуру интеллектуального анализа данных, чтобы просмотреть список моделей интеллектуального анализа данных, связанных с этой структурой.  
  
5.  Разверните структуру интеллектуального анализа данных Call Center Default и выберите модель нейронной сети — Call Center-LR.  
  
6.  В меню **Модель интеллектуального анализа данных** выберите пункт **Одноэлементный запрос**.  
  
     **Одноэлементного запроса** появится диалоговое окно, в котором столбцы сопоставлены со столбцами в модели интеллектуального анализа данных.  
  
7.  В **одноэлементного запроса** диалоговое окно, щелкните строку для атрибута Shift и выберите *полуночи*.  
  
8.  Щелкните строку для атрибута Lvl 2 Operators и введите `6`.  
  
9. В нижней половине **модель интеллектуального анализа данных** вкладке, щелкните первую строку в сетке.  
  
10. В **источника** столбец, щелкните стрелку вниз и выберите **Прогнозирующая функция**. В **поле** столбец, выберите **PredictHistogram**.  
  
     Список аргументов, которые можно использовать с этой прогнозирующей функцией автоматически отображается в **критерий или аргумент** поле.  
  
11. Перетащите столбец ServiceGrade из списка столбцов в **модель интеллектуального анализа данных** панели **критерий или аргумент** поле.  
  
     Имя столбца автоматически вставляется в качестве аргумента. В это текстовое поле можно перетащить любой прогнозируемый атрибут.  
  
12. Нажмите кнопку **переключиться в режим запроса представления результатов**, в верхнем углу построителя прогнозирующих запросов.  
  
 Ожидаемые результаты содержат возможные прогнозируемые значения для каждого уровня обслуживания при заданных входных данных, а также значения несущего множества и вероятности для каждого прогноза. В любой момент можно вернуться в режим конструктора, чтобы изменить входные данные или добавить дополнительные входные данные.  
  
## <a name="creating-predictions-by-using-a-logistic-regression-model"></a>Создание прогнозов с помощью модели логистической регрессии  
 Если уже известны атрибуты, относящиеся к бизнес-задаче, можно использовать модель логистической регрессии для прогнозирования эффекта изменения определенных независимых переменных. Логистическая Регрессия представляет собой статистический метод, который широко применяется для создания прогнозов на основе изменений в независимых переменных: например, он используется в сценариях финансовой оценки, чтобы прогнозировать поведение покупателей на основании демографических данных клиента.  
  
 В этой задаче вы узнаете, как создать источник данных, который будет использоваться для прогнозов, и сделать прогнозы, которые помогут ответить на несколько вопросов для бизнеса.  
  
### <a name="generating-data-used-for-bulk-prediction"></a>Создание данных, используемых для массового прогноза  
 Существует много способов предоставить входные данные: например, можно импортировать кадровые показатели из электронной таблицы и запустить эти данные через модель, чтобы спрогнозировать качество обслуживания на следующий месяц.  
  
 На этом занятии вы будете использовать конструктор представлений источников данных для создания именованного запроса. Этот именованный запрос представляет собой нестандартную инструкцию Transact-SQL, которая вычисляет для каждой смены в графике максимальное число операторов, минимальное количество принятых звонков и среднее количество возникших проблем. Затем эти данные будут присоединены к модели интеллектуального анализа данных для получения прогнозов на ближайшее время.  
  
##### <a name="to-generate-input-data-for-a-bulk-prediction-query"></a>Создание входных данных для массового прогнозирующего запроса  
  
1.  В обозревателе решений щелкните правой кнопкой мыши **представления источников данных**, а затем выберите **новое представление источника данных**.  
  
2.  В мастере представлений источников данных, выберите [!INCLUDE[ssAWDWsp](../includes/ssawdwsp-md.md)] как источник данных и нажмите кнопку **Далее**.  
  
3.  На **Выбор таблиц и представлений** щелкните **Далее** не выбирая таблиц.  
  
4.  На **завершение работы мастера** введите имя, `Shifts`.  
  
     Это имя будет выводиться в обозревателе решений в качестве имени для представления источников данных.  
  
5.  Щелкните правой кнопкой мыши пустую панель конструктора, а затем выберите **новым именованным запросом**.  
  
6.  В **Создание именованного запроса** диалоговом окне для **имя**, тип `Shifts for Call Center`.  
  
     Это имя будет выводиться в качестве имени для именованного запроса только в конструкторе представлений источников данных.  
  
7.  Вставьте следующую инструкцию запроса в текстовую панель SQL в нижней половине диалогового окна.  
  
    ```  
    SELECT DISTINCT WageType, Shift,   
    AVG(Orders) as AvgOrders, MIN(Orders) as MinOrders, MAX(Orders) as MaxOrders,  
    AVG(Calls) as AvgCalls, MIN(Calls) as MinCalls, MAX(Calls) as MaxCalls,  
    AVG(LevelTwoOperators) as AvgOperators, MIN(LevelTwoOperators) as MinOperators, MAX(LevelTwoOperators) as MaxOperators,  
    AVG(IssuesRaised) as AvgIssues, MIN(IssuesRaised) as MinIssues, MAX(IssuesRaised) as MaxIssues  
    FROM dbo.FactCallCenter  
    GROUP BY Shift, WageType  
    ```  
  
8.  В области конструктора щелкните правой кнопкой мыши таблицу, Shifts for Call Center и выберите **Просмотр данных** можно просмотреть данные, возвращаемые запросом T-SQL.  
  
9. Щелкните правой кнопкой мыши по вкладке **Shifts.dsv (конструктор),** и нажмите кнопку **Сохранить** сохранить новое определение представления источника данных.  
  
### <a name="predicting-service-metrics-for-each-shift"></a>Прогнозирование метрик обслуживания для каждой смены  
 Теперь, когда для каждой смены создано несколько значений, эти значения будут использоваться в качестве входных данных для вашей модели логистической регрессии для получения некоторых прогнозов, необходимых для планирования.  
  
##### <a name="to-use-the-new-dsv-as-input-to-a-prediction-query"></a>Использование нового представления источников данных в качестве входных данных для прогнозирующего запроса  
  
1.  В конструкторе интеллектуального анализа данных щелкните **модель интеллектуального анализа данных** вкладки.  
  
2.  В **модель интеллектуального анализа данных** панели щелкните **Выбор модели**и выберите Call Center - LR из списка доступных моделей.  
  
3.  Из **модель интеллектуального анализа данных** меню, снимите флажок, **одноэлементный запрос**. Появится предупреждение о том, что входные данные одноэлементного запроса будут утеряны. Нажмите кнопку **ОК**.  
  
     **Одноэлементного запроса** диалоговое окно заменяется **Выбор входных таблиц** диалоговое окно.  
  
4.  Щелкните **Выбор таблицы вариантов**.  
  
5.  В **Выбор таблицы** диалоговом окне selectShifts из списка источников данных. В **имя таблицы или представления** выберите Shifts for Call Center (он может определяться автоматически), а затем щелкните **ОК.**  
  
     **Модель интеллектуального анализа данных** конструктора обновляется для отображения сопоставления, созданные на основе на имена и типы данных столбцов во входных данных и модели.  
  
6.  Щелкните правой кнопкой мыши одну из строк соединения, а затем выберите **изменить соединения**.  
  
     В этом диалоговом окне можно точно определить, какие столбцы сопоставлены, а какие — нет. Модель интеллектуального анализа данных содержит столбцы Calls, Orders, IssuesRaised и LvlTwoOperators, которые можно сопоставить с любым статистическим выражением, созданным на основе этих столбцов в исходных данных. В этом сценарии сопоставление будет выполняться со средними значениями.  
  
7.  Щелкните пустую ячейку рядом с LevelTwoOperators и выберите **Shifts for Call Center.AvgOperators**.  
  
8.  Щелкните пустую ячейку рядом с Calls и выберите **Shifts for Call Center.AvgCalls**. а затем нажмите кнопку **ОК**.  
  
##### <a name="to-create-the-predictions-for-each-shift"></a>Создание прогнозов для каждой смены  
  
1.  В сетке в нижней половине **построителя прогнозирующих запросов**, щелкните пустую ячейку под **источника,** , а затем выберите Shifts for Call Center.  
  
2.  В пустой ячейке под **поле**, выберите значение Shift.  
  
3.  Щелкните следующую пустую линию в сетке и повторите описанную выше процедуру, чтобы добавить другую строку для WageType.  
  
4.  Щелкните следующую пустую строку в сетке. В **источника** столбец, выберите **Прогнозирующая функция**. В **поле** столбец, выберите **Predict**.  
  
5.  Перетащите столбец ServiceGrade из **модель интеллектуального анализа данных** панели сетки, а также в **критерий или аргумент** ячейки. В **псевдоним** введите **прогнозируемый уровень обслуживания**.  
  
6.  Щелкните следующую пустую строку в сетке. В **источника** столбец, выберите **Прогнозирующая функция**. В **поле** столбец, выберите **PredictProbability**.  
  
7.  Перетащите столбец ServiceGrade из **модель интеллектуального анализа данных** панели сетки, а также в **критерий или аргумент** ячейки. В **псевдоним** введите **вероятность**.  
  
8.  Нажмите кнопку **переключиться в режим просмотра результата запроса** Чтобы просмотреть прогнозы.  
  
 В следующей таблице показан образец результатов для каждой смены.  
  
|Shift|WageType|Прогнозируемый уровень обслуживания|Вероятность|  
|-----------|--------------|-----------------------------|-----------------|  
|AM|выходной|0.165|0.377520666|  
|midnight|выходной|0.105|0.364105573|  
|PM1|выходной|0.165|0.40056055|  
|PM2|выходной|0.165|0.338532973|  
|AM|weekday|0.165|0.370847617|  
|midnight|weekday|0.08|0.352999173|  
|PM1|weekday|0.165|0.317419177|  
|PM2|weekday|0.105|0.311672027|  
  
### <a name="predicting-the-effect-of-reduced-response-time-on-service-grade"></a>Прогнозирование влияния уменьшения времени ответа на уровень обслуживания  
 Для каждой смены были созданы некоторые средние значения, использующиеся в качестве входных данных для модели логистической регрессии. Но учитывая то, что бизнес-задачей является поддержание показателя прекращенных вызовов в диапазоне 0,00–0,05, результаты не впечатляют.  
  
 Поэтому на основе исходной модели, которая показала сильное влияние времени ответа на уровень обслуживания, команда операторов принимает решение сделать несколько прогнозов, чтобы определить, может ли уменьшение среднего времени ответа на звонок повысить качество обслуживания. Например, что произойдет с уровнями обслуживания, если снизить время ответа на звонок до 90 процентов или даже до 80 процентов от текущего?  
  
 Легко создать представление источника данных, которое вычисляет среднее время ответа для каждой смены, а затем добавить столбцы, которые вычисляют 80 или 90 процентов среднего времени ответа. Затем представление источника данных можно использовать в качестве входных данных для модели.  
  
 Хотя конкретные шаги здесь не показаны, в следующей таблице сравниваются изменения в уровне обслуживания в случае уменьшения времени ответа до 80 и 90 процентов от текущего.  
  
 Из этих результатов можно сделать вывод, что для повышения качества обслуживания следует уменьшить время ответа для конкретных смен до 90 процентов от текущего.  
  
|Смена, ставка и день|Прогнозируемое качество обслуживания с текущим средним временем ответа.|Прогнозируемое качество обслуживания с 90 процентов сокращение времени ответа|Прогнозируемое качество обслуживания при уменьшении времени ответа до 80 процентов от текущего.|  
|--------------------------|------------------------------------------------------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|  
|Выходной до полудня|0.165|0,05|0,05|  
|Выходной после полудня 1|0,05|0,05|0,05|  
|Полночь выходного|0.165|0,05|0,05|  
  
 На основе этой модели можно создать множество других прогнозирующих запросов. Например, можно спрогнозировать количество операторов, требуемое для достижения определенного уровня обслуживания или для ответа на заданное число входящих звонков. Поскольку в модель логистической регрессии можно включить несколько выходных значений, можно легко экспериментировать с различными независимыми переменными и результатами без необходимости создавать множество отдельных моделей.  
  
## <a name="remarks"></a>Примечания  
 В надстройках интеллектуального анализа данных для Excel 2007 имеются мастера логистической регрессии, которые помогают получить ответы на сложные вопросы, например определение числа операторов второго уровня, требуемого для повышения показателя обслуживания до заданного уровня для определенной смены. Надстройки интеллектуального анализа данных загружаются бесплатно и содержат мастера на базе алгоритмов нейронной сети или логистической регрессии. Дополнительные сведения см. в следующих разделах.  
  
-   [SQL Server 2005 Data Mining Add-Ins для Office 2007](https://www.microsoft.com/sql/technologies/dm/addins.mspx): Поиск решения и что делать, если анализ сценария  
  
-   [SQL Server 2008 Data Mining Add-Ins для Office 2007](https://go.microsoft.com/fwlink/?LinkID=117790): Что делать, если анализ сценария поиска решения анализ сценария и калькулятор прогнозов  
  
## <a name="conclusion"></a>Заключение  
 Рассмотрены создание, настройка и интерпретация моделей интеллектуального анализа данных, основанных на алгоритме нейронной сети (Майкрософт) и алгоритме логистической регрессии (Майкрософт). Эти типы моделей являются сложными и дают практически безграничное разнообразие возможностей анализа, поэтому могут оказаться трудны в освоении.  
  
 Однако эти алгоритмы позволяют выполнять итерации с множеством комбинаций факторов и автоматически выявляют сильные корреляции, обеспечивая важную статистическую поддержку, которую было бы трудно получить, исследуя данные вручную с помощью Transact-SQL и даже PowerPivot.  
  
## <a name="see-also"></a>См. также  
 [Примеры запросов модели логистической регрессии](../../2014/analysis-services/data-mining/logistic-regression-model-query-examples.md)   
 [Алгоритм логистической регрессии (Майкрософт)](../../2014/analysis-services/data-mining/microsoft-logistic-regression-algorithm.md)   
 [Microsoft Neural Network Algorithm](../../2014/analysis-services/data-mining/microsoft-neural-network-algorithm.md)   
 [Примеры запросов к модели нейронной сети](../../2014/analysis-services/data-mining/neural-network-model-query-examples.md)  
  
  
