---
title: Создание структуры нейронной сети и модели (учебник по интеллектуальному анализу интеллектуальному анализу данных) | Документация Майкрософт
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- discretization [Analysis Services]
- DISCRETIZED column
- DiscretizationBuckets property
- DiscretizationMethod property
- EQUAL_AREAS method
ms.assetid: 3f16215c-531e-4ecf-a11f-ee7c6a764463
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: 6787db165770f944838a312ecd3e0386d161da38
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62856335"
---
# <a name="creating-a-neural-network-structure-and-model-intermediate-data-mining-tutorial"></a>Создание структуры и модели нейронной сети (учебник по интеллектуальному анализу данных — средний уровень)
  Чтобы создать модель интеллектуального анализа данных, сначала необходимо воспользоваться мастером интеллектуального анализа данных, чтобы создать новую структуру интеллектуального анализа, основанную на новом представлении источника данных. В этой задаче будет использовать мастер для создания структуры интеллектуального анализа данных и в то же время создания связанных с ней модели на основе [!INCLUDE[msCoName](../includes/msconame-md.md)] алгоритма нейронной сети.  
  
 Так как нейронные сети чрезвычайно гибки и могут анализировать много сочетаний входных и выходных данных, для достижения наилучших результатов необходимо поэкспериментировать с несколькими способами обработки данных. Например, может потребоваться указать способ, которым является числового показателя качества обслуживания *binned*, или группирования, в соответствии с определенным бизнес-требованиям. Для этого в структуру интеллектуального анализа данных добавляется новый столбец, который группирует числовые данные другим образом, а затем создается модель, которая использует новый столбец. С помощью этих моделей интеллектуального анализа данных будет проводиться исследование.  
  
 Наконец, когда из модели нейронной сети определены факторы, которые сильнее всего влияют на бизнес-задачу, будет построена отдельная модель для прогнозирования и оценки. Вы воспользуетесь [!INCLUDE[msCoName](../includes/msconame-md.md)] алгоритм логистической регрессии, который основан на модели нейронных сетей, но оптимизирован для поиска решения, основанного на заданных входных данных.  
  
 **Шаги**  
  
 [Создание структуры интеллектуального анализа данных по умолчанию и модели](#bkmk_defaul)  
  
 [Используйте дискретизацию для прогнозируемого столбца](#bkmk_ColumnCopy)  
  
 [Скопируйте столбец и измените метод дискретизации для другой модели](#bkmk_Alias)  
  
 [Создать псевдоним для прогнозируемого столбца, чтобы можно было сравнить модели](#bkmk_Alias2)  
  
 [Обработка всех моделей](#bkmk_SeedProcess)  
  
## Создание структуры центра обработки вызовов по умолчанию  <a name="bkmk_defaul"></a>  
  
1.  В обозревателе решений в [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)], щелкните правой кнопкой мыши **структуры интеллектуального анализа данных** и выберите **создать структуру интеллектуального анализа**.  
  
2.  На странице **Вас приветствует мастер интеллектуального анализа данных** нажмите кнопку **Далее**.  
  
3.  На **Выбор метода определения** странице, убедитесь, что **из существующей реляционной базы данных или хранилища данных** выбран, а затем нажмите кнопку **Далее**.  
  
4.  На **создать структуру интеллектуального анализа данных** странице, убедитесь, что параметр **Создание структуры интеллектуального анализа данных с моделью интеллектуального анализа данных** выбран.  
  
5.  Щелкните раскрывающийся список для параметра **какой метод интеллектуального анализа данных вы хотите использовать?**, а затем выберите **нейронных сетей Майкрософт**.  
  
     Так как модели логистической регрессии основаны на нейронных сетях, можно повторно использовать ту же структуру и добавить новую модель интеллектуального анализа данных.  
  
6.  Нажмите кнопку **Далее**.  
  
     **Выбор представления источников данных** появится страница.  
  
7.  В разделе **доступные представления источников данных**выберите `Call Center`и нажмите кнопку **Далее**.  
  
8.  На **определение типов таблиц** выберите **случай** флажок рядом с полем **FactCallCenter** таблицы. Не выбирайте ничего для **DimDate**. Нажмите кнопку **Далее**.  
  
9. На **Определение обучающих данных** выберите **ключ** рядом со столбцом **FactCallCenterID.**  
  
10. Выберите `Predict` и **ввода** флажки.  
  
11. Выберите **ключ**, **ввода**, и `Predict` флажки, как показано в следующей таблице:  
  
    |Таблицы и столбцы|Ключ/Входные данные/Прогноз|  
    |---------------------|-------------------------|  
    |AutomaticResponses|Ввод|  
    |AverageTimePerIssue|Входные данные/Прогноз|  
    |Вызовы|Ввод|  
    |DateKey|Не использовать|  
    |DayOfWeek|Ввод|  
    |FactCallCenterID|Ключ|  
    |IssuesRaised|Ввод|  
    |LevelOneOperators|Входные данные/Прогноз|  
    |LevelTwoOperators|Ввод|  
    |Orders|Входные данные/Прогноз|  
    |ServiceGrade|Входные данные/Прогноз|  
    |Shift|Ввод|  
    |TotalOperators|Не использовать|  
    |WageType|Ввод|  
  
     Заметьте, что выбрано несколько прогнозируемых столбцов. Одним из преимуществ алгоритма нейронной сети является возможность анализа всех возможных сочетаний входных и выходных атрибутов. Вы не захотите это сделать для большого набора данных, так как он может экспоненциально увеличивает время обработки...  
  
12. На **содержимого и типа данных столбцов укажите** странице, убедитесь, что в сетке содержатся столбцы, типы содержимого и типы данных, как показано в следующей таблице и нажмите кнопку **Далее**.  
  
    |Столбцы|Тип содержимого|Типы данных|  
    |-------------|------------------|----------------|  
    |AutomaticResponses|Непрерывный|Long|  
    |AverageTimePerIssue|Непрерывный|Long|  
    |Вызовы|Непрерывный|Long|  
    |DayOfWeek|Discrete|Text|  
    |FactCallCenterID|Ключ|Long|  
    |IssuesRaised|Непрерывный|Long|  
    |LevelOneOperators|Непрерывный|Long|  
    |LevelTwoOperators|Непрерывный|Long|  
    |Orders|Непрерывный|Long|  
    |ServiceGrade|Непрерывный|Double|  
    |Shift|Discrete|Text|  
    |WageType|Discrete|Text|  
  
13. На **Create set тестирования** странице, очистите текстовое поле для параметра **процент проверочных данных**. Нажмите кнопку **Далее**.  
  
14. На **завершение работы мастера** странице для **имя структуры интеллектуального анализа данных**, тип `Call Center`.  
  
15. Для **имя модели интеллектуального анализа данных**, тип `Call Center Default NN`, а затем нажмите кнопку **Готово**.  
  
     **Разрешить детализацию** поле отключено, так как нельзя выполнять детализацию к данным с помощью модели нейронной сети.  
  
16. В обозревателе решений щелкните правой кнопкой мыши имя структуры интеллектуального анализа данных только что созданного и выберите **процесс**.  
  
## <a name="use-discretization-to-bin-the-target-column"></a>Используйте дискретизацию для секционирования целевого столбца  
 По умолчанию при создании модели нейронной сети, имеющей числовой прогнозируемый атрибут, алгоритм нейронной сети (Майкрософт) считает атрибут непрерывным числом. Например, атрибут ServiceGrade представляет собой число, теоретически из диапазона от 0,00 (все звонки обработаны) до 1,00 (все звонки отложены). В этом наборе данных значения имеют следующее распределение:  
  
 ![Распределение значений уровня обслуживания](../../2014/tutorials/media/skt-service-grade-valuesc.gif "распределение значений уровня обслуживания")  
  
 В результате при обработке модели выходные данные могут быть сгруппированы не так, как ожидалось. Например при использовании кластеризации для определения лучших групп значений, алгоритм делит значения в ServiceGrade на диапазоны, подобные следующему: 0.0748051948 - 0.09716216215. Такое группирование математически точно, однако подобные диапазоны могут представляться бизнес-пользователям мало осмысленными.  
  
 На этом шаге чтобы сделать результат более понятным, вы сгруппируете числовые значения по-разному, создание копии столбца с числовыми данными.  
  
### <a name="how-discretization-works"></a>Как работает дискретизация  
 Службы Analysis Services предоставляют разнообразные методы для сегментирования числовых данных и их обработки. В следующей таблице показаны различия в результатах обработки выходного атрибута ServiceGrade тремя способами.  
  
-   Обрабатывать атрибут как непрерывное число.  
  
-   Использовать в алгоритме кластеризацию для определения наилучшего распределения значений.  
  
-   Указать, что числа сегментируются с помощью метода равных областей.  
  
 Модель по умолчанию (продолжение)  
  
|Value|Псевдоним|  
|-----------|-------------|  
|Missing|0|  
|0.09875|120|  
  
 Сегментирование кластеризацией  
  
|Value|Псевдоним|  
|-----------|-------------|  
|\< 0.0748051948|34|  
|0.0748051948 - 0.09716216215|27|  
|0.09716216215 - 0.13297297295|39|  
|0.13297297295 - 0.167499999975|10|  
|>= 0.167499999975|10|  
  
 Сегментирование на равные области  
  
|Value|Псевдоним|  
|-----------|-------------|  
|\< 0.07|26|  
|0.07 - 0.00|22|  
|0.09 - 0.11|36|  
|>= 0.12|36|  
  
> [!NOTE]  
>  Эту статистику можно получить из узла граничной статистики модели после обработки всех данных. Дополнительные сведения об узле граничной статистики см. в разделе [интеллектуального анализа данных модели содержимого для моделей нейронных сетей &#40;службы Analysis Services — Интеллектуальный анализ данных&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-neural-network-models-analysis-services-data-mining.md).  
  
 В этой таблице столбец VALUE показывает, как обрабатывалось число для ServiceGrade. Столбец SUPPORT показывает, сколько вариантов пришлось на данное значение или попало в данный диапазон.  
  
-   **Использовать непрерывные числа (по умолчанию)**  
  
     Если использовался метод по умолчанию, то алгоритм вычислил результаты для 120 уникальных значений. Среднее значение равно 0,09875. Также можно просмотреть число отсутствующих значений.  
  
-   **Сегментирование кластеризацией**  
  
     Если оптимальное группирование значений определяется алгоритмом кластеризации (Майкрософт), то алгоритм группирует значения для ServiceGrade на пять (5) диапазонов. Варианты распределяются по диапазонам неравномерно, о чем сообщает столбец SUPPORT.  
  
-   **Сегментирование на равные области**  
  
     Если выбран этот метод, то алгоритм принудительно разделяет значения на контейнеры одинакового размера, что в свою очередь приводит к изменению верхней и нижней границы каждого диапазона. Можно задать число контейнеров, но следует избегать ситуации, когда в одном контейнере оказывается слишком мало значений.  
  
 Дополнительные сведения о параметрах сегментирования см. в разделе [методы дискретизации &#40;интеллектуального анализа данных&#41;](../../2014/analysis-services/data-mining/discretization-methods-data-mining.md).  
  
 Кроме того, вместо использования числовых значений, также можно добавить отдельный производный столбец, в который классифицирует уровни обслуживания по стандартным целевым диапазонам, например **рекомендации** (ServiceGrade \<= 0,05),  **Допустимые** (0,10 > ServiceGrade > 0,05), и **низкой** (ServiceGrade > = 0,10).  
  
###  <a name="bkmk_newColumn"></a> Создание копии столбца и измените метод дискретизации  
 Можно создать копию столбца интеллектуального анализа данных, который содержит целевой атрибут ServiceGrade и изменить способ группировки чисел. Можно создать несколько копий любого столбца в структуре интеллектуального анализа данных, включая прогнозируемый атрибут.  
  
 Для этого учебника будет использоваться метод дискретизации с равными областями с указанием четырех контейнеров. Группирования, получаемые этим методом, довольно близки к целевым значениям, представляющим интерес для бизнес-пользователей.  
  
####  <a name="bkmk_ColumnCopy"></a> Создание настраиваемой копии столбца в структуре интеллектуального анализа данных  
  
1.  В обозревателе решений дважды щелкните созданную структуру интеллектуального анализа данных.  
  
2.  На вкладке «Структура интеллектуального анализа данных» щелкните **добавить столбец структуры интеллектуального анализа данных**.  
  
3.  В **выберите столбец** диалоговом окне выберите ServiceGrade из списка в **исходный столбец**, затем нажмите кнопку **ОК**.  
  
     Новый столбец будет добавлен в список столбцов структуры интеллектуального анализа данных. По умолчанию новый столбец интеллектуального анализа данных имеет имя, совпадающее с именем существующего столбца, с добавлением числового постфикса: например, ServiceGrade 1. Имя этого столбца можно заменить на более описательное.  
  
     Также будет указан метод дискретизации.  
  
4.  Щелкните правой кнопкой мыши ServiceGrade 1 и выберите **свойства**.  
  
5.  В **свойства** окна, найдите **имя** свойство и измените имя на **Service Grade Binned** .  
  
6.  Откроется диалоговое окно с предложением внести это изменение в имена всех связанных столбцов модели интеллектуального анализа данных. Нажмите кнопку **Нет**.  
  
7.  В **свойства** окна, найдите раздел **тип данных** и разверните его при необходимости.  
  
8.  Измените значение свойства `Content` с `Continuous` на `Discretized`.  
  
     Доступны следующие свойства. Измените значения свойств в соответствии со следующей таблицей.  
  
    |Свойство|Значение по умолчанию|Новое значение|  
    |--------------|-------------------|---------------|  
    |`DiscretizationMethod`|`Continuous`|`EqualAreas`|  
    |`DiscretizationBucketCount`|Без значения|4|  
  
    > [!NOTE]  
    >  По умолчанию свойство <xref:Microsoft.AnalysisServices.ScalarMiningStructureColumn.DiscretizationBucketCount%2A> имеет значение 0, что означает, что алгоритм автоматически определяет оптимальное число контейнеров. Поэтому, если необходимо изменить значение этого свойства на значение по умолчанию, введите 0.  
  
9. В конструкторе интеллектуального анализа данных щелкните **модели интеллектуального анализа данных** вкладки.  
  
     Обратите внимание, что во время добавления копии столбца структуры интеллектуального анализа данных флаг использования для копии автоматически получает значение `Ignore`. Обычно во время добавления копии столбца к структуре интеллектуального анализа данных копия не используется для анализа совместно с исходным столбцом. В противном случае алгоритм обнаружит между двумя столбцами сильную корреляцию, которая может скрыть остальные связи.  
  
##  <a name="bkmk_NewModel"></a> Добавить новую модель интеллектуального анализа данных к структуре интеллектуального анализа данных  
 После создания нового группирования для целевого атрибута необходимо добавить новую модель интеллектуального анализа данных, которая использует дискретизированный столбец. После этого в структуре интеллектуального анализа данных CallCenter окажется две модели интеллектуального анализа данных:  
  
-   модель Call Center Default NN обрабатывает значения ServiceGrade в виде непрерывного диапазона;  
  
-   Вы создадите новые модели интеллектуального анализа данных Call Center Binned NN, который использует в качестве результатов значения столбца ServiceGrade, распределенные по четырем контейнерам одинакового размера.  
  
#### <a name="to-add-a-mining-model-based-on-the-new-discretized-column"></a>Добавление модели интеллектуального анализа данных на основе нового дискретизированного столбца  
  
1.  В обозревателе решений щелкните правой кнопкой мыши структуру интеллектуального анализа данных, только что созданного и выберите **откройте**.  
  
2.  Перейдите на вкладку **Модели интеллектуального анализа данных** .  
  
3.  Нажмите кнопку **Создание соответствующей модели интеллектуального анализа**.  
  
4.  В **новой модели интеллектуального анализа данных** диалоговом окне для **имя_модели**, тип `Call Center Binned NN`. В **имя алгоритма** раскрывающемся списке выберите **нейронной сети**.  
  
5.  В списке столбцов, содержащихся в новой модели интеллектуального анализа данных, выберите ServiceGrade и измените для него флаг использования с `Predict` на `Ignore`.  
  
6.  Аналогичным образом выберите столбец ServiceGrade Binned и измените для него флаг использования с `Ignore` на `Predict`.  
  
##  <a name="bkmk_Alias2"></a> Создать псевдоним для целевого столбца  
 Обычно невозможно сравнивать модели интеллектуального анализа данных, в которых используются различные прогнозируемые атрибуты. Однако для столбца модели интеллектуального анализа данных можно создать псевдоним. То есть столбца, ServiceGrade Binned, в модели интеллектуального анализа данных можно переименовать, чтобы его имя, совпадающее с именем исходного столбца. Затем можно непосредственно сравнить эти две модели по диаграмме точности, несмотря на то, что данные дискретизируются различным образом.  
  
###  <a name="bkmk_Alias"></a> Добавление псевдонима для столбца структуры интеллектуального анализа данных в модели интеллектуального анализа данных  
  
1.  В **модели интеллектуального анализа данных** в списке **структуры**, выберите столбец ServiceGrade Binned.  
  
     Обратите внимание, что **свойства** окно отображает свойства объекта — столбца ScalarMiningStructure.  
  
2.  Под столбцом для модели интеллектуального анализа данных ServiceGrade Binned NN щелкните ячейку, соответствующую столбцу ServiceGrade Binned.  
  
     Заметьте, что **свойства** окне отображаются свойства для объекта MiningModelColumn.  
  
3.  Найдите **имя** свойство и измените значение на `ServiceGrade`.  
  
4.  Найдите **описание** свойство и введите **временный псевдоним столбца**.  
  
     **Свойства** должно содержать следующие сведения:  
  
    |Свойство|Значение|  
    |--------------|-----------|  
    |**Описание**|Временный псевдоним столбца|  
    |**Идентификатор**|ServiceGrade Binned|  
    |**Флаги моделирования**||  
    |**Name**|Service Grade|  
    |**Идентификатор SourceColumn**|Service Grade 1|  
    |**Использование**|Predict|  
  
5.  Щелкните в любом месте **модель интеллектуального анализа данных** вкладки.  
  
     Сетка обновится, чтобы показать новый временный псевдоним столбца, `ServiceGrade`, рядом со столбцом. Сетка, содержащая структуру интеллектуального анализа данных и две модели интеллектуального анализа данных, должна иметь следующий вид:  
  
    |Структура|Call Center Default NN|Call Center Binned NN|  
    |---------------|----------------------------|---------------------------|  
    ||Алгоритм нейронной сети Майкрософт|Алгоритм нейронной сети Майкрософт|  
    |AutomaticResponses|Ввод|Ввод|  
    |AverageTimePerIssue|Predict|Predict|  
    |Вызовы|Ввод|Ввод|  
    |DayOfWeek|Ввод|Ввод|  
    |FactCallCenterID|Ключ|Ключ|  
    |IssuesRaised|Ввод|Ввод|  
    |LevelOneOperators|Ввод|Ввод|  
    |LevelTwoOperators|Ввод|Ввод|  
    |Orders|Ввод|Ввод|  
    |ServiceGrade Binned|Ignore|Прогноз (ServiceGrade)|  
    |ServiceGrade|Predict|Ignore|  
    |Shift|Ввод|Ввод|  
    |Total Operators|Ввод|Ввод|  
    |WageType|Ввод|Ввод|  
  
## <a name="process-all-models"></a>Обработайте все модели  
 Наконец, чтобы обеспечить возможность простого сравнения созданных моделей, будет установлен параметр начального значения для модели по умолчанию и модели с сегментированием. Установка начального значения гарантирует, что каждая модель начнет обработку данных с одной и той же точки.  
  
> [!NOTE]  
>  Если не указать числовое значение для параметра начального значения, службы SQL Server Analysis Services создадут начальное значение на основе имени модели. Поскольку модели всегда имеют разные имена, необходимо задать начальное значение, чтобы обеспечить одинаковый порядок обработки данных этими моделями.  
  
###  <a name="bkmk_SeedProcess"></a> Чтобы указать начальное значение и обработка моделей  
  
1.  В **модель интеллектуального анализа данных** , щелкните правой кнопкой мыши столбец для модели с именем Call Center - LR, а выберите **задать параметры алгоритма**.  
  
2.  В строке для параметра HOLDOUT_SEED щелкните пустую ячейку под **значение**и тип `1`. Нажмите кнопку **ОК**. Повторите этот шаг для каждой модели, связанной со структурой.  
  
    > [!NOTE]  
    >  Значение, выбираемое в качестве начального, не играет роли, но необходимо использовать одно и то же начальное значение для всех связанных моделей.  
  
3.  В **модели интеллектуального анализа данных** меню, выберите **обработать структуру интеллектуального анализа данных и все модели**. Нажмите кнопку **Да** для развертывания проекта интеллектуального анализа данных обновленных данных на сервер.  
  
4.  В **модель интеллектуального анализа данных процесса** диалоговом окне щелкните **запуска**.  
  
5.  Нажмите кнопку **закрыть** закрыть **ход обработки** диалоговое окно, а затем нажмите кнопку **закрыть** через **модель интеллектуального анализа данных процесса** диалоговое окно.  
  
 После создания двух связанных моделей интеллектуального анализа данных будет выполнено исследование данных с целью выявления содержащихся в них связей.  
  
## <a name="next-task-in-lesson"></a>Следующая задача занятия  
 [Изучение модели Call Center &#40;средний уровень учебник по интеллектуальному анализу данных&#41;](../../2014/tutorials/exploring-the-call-center-model-intermediate-data-mining-tutorial.md)  
  
## <a name="see-also"></a>См. также  
 [Структуры интеллектуального анализа данных (службы Analysis Services — интеллектуальный анализ данных)](../../2014/analysis-services/data-mining/mining-structures-analysis-services-data-mining.md)  
  
  
