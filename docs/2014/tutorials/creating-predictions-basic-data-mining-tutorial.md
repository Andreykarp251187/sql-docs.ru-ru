---
title: Создание прогнозов (учебник интеллектуального анализа данных) | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: a8410ed2-bb98-4d51-a9eb-b239be1201c2
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: b32ffb832baf12a72df6e32b07386f24448b3c35
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "63285691"
---
# <a name="creating-predictions-basic-data-mining-tutorial"></a>Создание прогнозов (учебник по интеллектуальному анализу данных — начальный уровень)
  После тестирования точности моделей интеллектуального анализа данных и решили, что вы удовлетворены результатами, то можно создавать прогнозы с помощью построителя прогнозирующих запросов на **Прогноз модели интеллектуального анализа данных** вкладку в интеллектуальном анализе данных Конструктор.  
  
 Построитель прогнозирующих запросов имеет три представления. С помощью **разработки** и **запроса** представления, можно создать и проверить запрос. Затем можно выполнить запрос и просмотреть результаты в **результат** представления.  
  
 Во всех прогнозирующих запросах используется DMX — язык расширений интеллектуального анализа данных. Синтаксис расширения интеллектуального анализа данных похож на синтаксис T-SQL, но служит для написания запросов к объектам интеллектуального анализа данных. Несмотря на то, что имеет несложный синтаксис расширений интеллектуального анализа данных, с помощью построителя запросов, подобного указанному, или в [SQL Server данных интеллектуального анализа данных надстроек для Office](../../2014/analysis-services/data-mining/sql-server-data-mining-add-ins-for-office.md), значительно упрощает для выбора входных данных и создавать выражения, поэтому мы настоятельно рекомендуем, вы узнаете основы.  
  
## <a name="creating-the-query"></a>Создание запроса  
 Первым шагом в создании прогнозирующего запроса является выбор модели интеллектуального анализа данных и входной таблицы.  
  
#### <a name="to-select-a-model-and-input-table"></a>Выбор модели и входной таблицы  
  
1.  На **модель интеллектуального анализа данных** конструкторе интеллектуального анализа данных в **модель интеллектуального анализа данных** выберите **Выбор модели**.  
  
2.  В **выберите модель интеллектуального анализа данных** диалоговом окне перейдите по дереву к **Прямая почтовая рассылка** структуры, разверните структуру, выберите `TM_Decision_Tree`и нажмите кнопку **ОК**.  
  
3.  В **Выбор входных таблиц** выберите **выбрать таблицу вариантов**.  
  
4.  В **Выбор таблицы** отображаемое в диалоговом окне **источника данных** выберите представление источника данных [!INCLUDE[ssAWDWsp](../includes/ssawdwsp-md.md)].  
  
5.  В **имя таблицы или представления**выберите **ProspectiveBuyer (dbo)** таблицы, а затем нажмите кнопку **ОК**.  
  
     `ProspectiveBuyer` Таблицы точнее всего соответствует **vTargetMail** таблицы вариантов.  
  
## <a name="mapping-the-columns"></a>Сопоставление столбцов  
 После выбора входной таблицы в построителе прогнозирующих запросов будет создано сопоставление по умолчанию между моделью интеллектуального анализа данных и таблицей входных данных на основе имен столбцов. По крайней мере один столбец структуры необходимо сопоставить со столбцом внешних данных.  
  
> [!IMPORTANT]  
>  Данные, которые используются для определения точности моделей, должны содержать столбец, который может быть сопоставлен с прогнозируемым столбцом. Если такой столбец не существует, то можно создать его с пустыми значениями, однако этот столбец должен иметь тот же тип данных, что и прогнозируемый.  
  
#### <a name="to-map-the-inputs-to-the-model"></a>Сопоставление входных данных с моделью  
  
1.  Щелкните правой кнопкой мыши линии, соединяющие **модель интеллектуального анализа данных** окно, чтобы **Выбор входной таблицы** затем выберите **изменить соединения**.  
  
     Обратите внимание, что сопоставляется не каждый столбец. Добавим сопоставления для нескольких **столбцы таблицы**. Кроме того, сформируем новый столбец с датой рождения, исходя из текущего столбца данных так, чтобы столбцы лучше совпадали.  
  
2.  В разделе **столбец таблицы**, нажмите кнопку `Bike Buyer` ячеек и в раскрывающемся списке выберите ProspectiveBuyer.Unknown.  
  
     При этом прогнозируемый столбец [Bike Buyer] сопоставляется со столбцом входной таблицы.  
  
3.  Нажмите кнопку **ОК**.  
  
4.  В **обозревателе решений**, щелкните правой кнопкой мыши **Прямая почтовая рассылка** представление источника данных и выберите **конструктор представлений**.  
  
5.  Щелкните правой кнопкой мыши на таблице ProspectiveBuyer и выберите **создать именованное вычисление**.  
  
6.  В **Создание именованного вычисления** диалоговом окне для **имя столбца**, тип `calcAge`.  
  
7.  Для **описание**, тип **расчета возраста, исходя из даты рождения**.  
  
8.  В **выражение** введите `DATEDIFF(YYYY,[BirthDate],getdate())` и нажмите кнопку **ОК**.  
  
     Так как во входной таблице нет **возраст** столбца, соответствующего столбцу в модели, это выражение можно использовать для расчета возраста заказчика из столбца BirthDate входной таблицы. Так как **возраст** был определен как наиболее важный столбец для прогнозирования покупок велосипедов, он должен присутствовать в модели и во входной таблице.  
  
9. В конструкторе интеллектуального анализа данных выберите **модель интеллектуального анализа данных** вкладку и снова откройте **изменить соединения** окна.  
  
10. В разделе **столбец таблицы**, нажмите кнопку **возраст** ячеек и в раскрывающемся списке выберите ProspectiveBuyer.calcAge.  
  
    > [!WARNING]  
    >  Если столбец не появился в списке, то может потребоваться обновить определение представления источников данных, загруженного в конструктор. Для этого из **файл** меню, выберите **сохранить все**, а затем закройте и снова откройте проект в конструкторе.  
  
11. Нажмите кнопку **ОК**.  
  
## <a name="designing-the-prediction-query"></a>Проектирование прогнозирующего запроса  
  
1.  Первая кнопка на панели инструментов **модель интеллектуального анализа данных** вкладка **перейдите в конструктор просмотр / переключиться в представление результатов / переключиться в режим запросов** кнопки. Щелкните стрелку вниз на кнопке и выберите **разработки**.  
  
2.  В сетке **модель интеллектуального анализа данных** , затем щелкните ячейку в первой пустой строке в **источника** столбец, а затем выберите **Прогнозирующая функция**.  
  
3.  В **Прогнозирующая функция** в строке **поле** столбец, выберите `PredictProbability`.  
  
     В **псевдоним** столбец той же строки, тип **вероятность результата**.  
  
4.  Из **модель интеллектуального анализа данных** окно выше, выберите и перетащите [Bike Buyer] в **критерий или аргумент** ячейки.  
  
     Когда вы отпускаете, [TM_Decision_Tree]. [Bike Buyer] появляется в **критерий или аргумент** ячейки.  
  
     Таким образом определяется целевой столбец для функции `PredictProbability`. Дополнительные сведения о функциях см. в разделе [расширения интеллектуального анализа данных &#40;расширений интеллектуального анализа данных&#41; Справочник по функциям](/sql/dmx/data-mining-extensions-dmx-function-reference).  
  
5.  Щелкните следующую пустую строку в **источника** столбец и затем выберите модель интеллектуального анализа данных TM_Decision_Tree **.**  
  
6.  В `TM_Decision_Tree` в строке **поле** столбец, выберите `Bike Buyer`.  
  
7.  В `TM_Decision_Tree` в строке **критерий или аргумент** столбец, тип `=1`.  
  
8.  Щелкните следующую пустую строку в **источника** столбец, а затем выберите **таблица ProspectiveBuyer**.  
  
9. В `ProspectiveBuyer` в строке **поле** столбец, выберите **ProspectiveBuyerKey**.  
  
     При этом к прогнозирующему запросу добавляется уникальный идентификатор, который позволяет определить, кто, скорее всего, будет или не будет покупать велосипед.  
  
10. Добавьте еще пять строк в сетку. Для каждой строки, установите **таблица ProspectiveBuyer** как **источника** и добавьте следующие столбцы в **поле** ячеек:  
  
    -   calcAge  
  
    -   LastName  
  
    -   FirstName  
  
    -   AddressLine1  
  
    -   AddressLine2  
  
 Наконец, выполните запрос и просмотрите результаты.  
  
 **Построителя прогнозирующих запросов** также включает эти элементы управления:  
  
-   **Показать** "флажок"  
  
     Позволяет удалять предложения из запроса без удаления их из конструктора. Это может потребоваться при работе со сложными запросами, когда возникает необходимость сохранять их синтаксис, не прибегая к копированию и вставке кода DMX в окне редактирования.  
  
-   **Группирование**  
  
     Вставляет открывающую (левую) скобку в начале выделенной строки или закрывающую (правую) скобку в конце текущей строки.  
  
-   **И (ИЛИ)**  
  
     Вставляет оператор `AND` или оператор `OR` непосредственно после текущей функции или столбца.  
  
#### <a name="to-run-the-query-and-view-results"></a>Выполнение запроса и просмотр результатов  
  
1.  В **модель интеллектуального анализа данных** выберите **результат** кнопки.  
  
2.  После выполнения запроса отображаются результаты для просмотра.  
  
     **Модель интеллектуального анализа данных** вкладке отображаются контактные данные для потенциальных клиентов, которые, скорее всего, для покупателей велосипедов. **Вероятность результата** столбца указывается вероятность получения точного прогноза. Эти результаты можно использовать, чтобы определить, для каких потенциальных заказчиков следует выполнить прямую почтовую рассылку.  
  
3.  На этом этапе можно сохранить результаты. Имеются три параметра.  
  
    -   Щелкните правой кнопкой мыши строку данных в результатах и выберите **копирования** сохранить только это значение (и заголовок столбца) в буфер обмена.  
  
    -   Щелкните правой кнопкой мыши любую строку в результатах и выберите **Копировать все** скопировать весь результирующий набор, включая заголовки столбцов, в буфер обмена.  
  
    -   Нажмите кнопку **сохранить результат запроса** для сохранения результатов непосредственно в базу данных следующим образом:  
  
        1.  В **сохранение результата запроса интеллектуального анализа** диалоговом окне выберите источник данных или определить новый источник данных.  
  
        2.  Введите имя таблицы, которая будет хранить результаты запроса.  
  
        3.  Используйте параметр **добавить к представлению источника данных**, чтобы создать таблицу и добавьте его в существующее представление источника данных. Это полезно, если вы хотите сохранить все связанные таблицы для модели, такие как обучающие данные, исходные данных прогноза и запроса результаты в представление источника данных.  
  
        4.  Используйте параметр **перезаписать, если существует**, чтобы обновить существующую таблицу с помощью последних результатов.  
  
             Необходимо использовать параметр перезаписи таблицы при добавлении любых столбцов к прогнозирующему запросу, изменении имен или типов данных любых столбцов в прогнозирующем запросе или при выполнении любых инструкций ALTER для целевой таблицы.  
  
             Кроме того Если несколько столбцов имеют тем же именем (например, имя столбца по умолчанию **выражение**) необходимо создать псевдоним для столбцов с повторяющимися именами или ошибка возникает при попытке конструктора сохранить результаты в SQL Сервер. Причина в том, что SQL Server не разрешает применять несколько столбцов с одинаковыми именами.  
  
             Дополнительные сведения см. в разделе [сохранения данных интеллектуального анализа данных запроса результат-диалоговое окно &#40;интеллектуального анализа данных представление прогноза модели&#41;](../../2014/analysis-services/save-data-mining-query-result-dialog-box-mining-model-prediction-view.md).  
  
## <a name="next-task-in-lesson"></a>Следующая задача занятия  
 [Использование детализации для данных структуры &#40;учебник интеллектуального анализа данных&#41;](../../2014/tutorials/using-drillthrough-on-structure-data-basic-data-mining-tutorial.md)  
  
## <a name="see-also"></a>См. также  
 [Создание прогнозирующего запроса с помощью построителя прогнозирующих запросов](../../2014/analysis-services/data-mining/create-a-prediction-query-using-the-prediction-query-builder.md)  
  
  
