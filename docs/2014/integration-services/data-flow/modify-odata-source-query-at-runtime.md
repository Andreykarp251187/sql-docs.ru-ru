---
title: Изменить запрос источника OData во время выполнения | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: bcbba7f4-6e5d-46e6-a73a-3f17d3ff376a
author: janinezhang
ms.author: janinez
manager: craigg
ms.openlocfilehash: f1fac598789c53f460ed5239f304de2a39acff81
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "62901191"
---
# <a name="modify-odata-source-query-at-runtime"></a>Изменение запроса источника OData во время выполнения
  Можно изменить запрос источника OData во время выполнения, добавив выражение в свойство **[OData Source].[Query]** задачи потока данных.  
  
 Обратите внимание, что столбцы должны оставаться такими же, что и во время разработки. В противном случае произойдет ошибка при выполнении пакета. Обязательно укажите те же столбцы (в том же порядке) при использовании параметра $select запроса. Более безопасная альтернатива применению параметра $select состоит в том, чтобы отменить выбор ненужных столбцов непосредственно в пользовательском интерфейсе исходного компонента.  
  
 Существует несколько способов для динамической установки значения запроса во время выполнения. Ниже перечислены некоторые из наиболее распространенных методов.  
  
## <a name="exposing-the-query-as-a-parameter"></a>Предоставление запроса в качестве параметра  
 Следующая процедура позволяет предоставить пакету доступ к запросу, используемому компонентом источника OData, в качестве параметра.  
  
1.  Щелкните правой кнопкой мыши **Задача потока данных** и выберите пункт **Параметризация…** .  
  
2.  В диалоговом окне **Параметризация** выберите **[\<имя исходного компонента OData>].[Query]** для параметра **Свойство**.  
  
3.  Выберите, следует ли значение **создать новый параметр** или **использовать существующий параметр**.  
  
4.  Если установлен флажок **Создать новый параметр**, выполните следующие действия.  
  
    1.  Введите **имя** и **описание** для параметра.  
  
    2.  Укажите **значение** по умолчанию для данного параметра.  
  
    3.  Укажите **область** (**пакет** или **проект**) для параметра.  
  
    4.  Укажите, является ли параметр **обязательным** или нет.  
  
5.  Чтобы закрыть диалоговое окно, нажмите кнопку **ОК** .  
  
## <a name="using-an-expression"></a>Использование выражения  
 Этот метод удобен для динамического построения строки запроса во время выполнения. В этом примере переменная MaxRows будет установлена с помощью других средств (скрипт, параметр и т. д.).  
  
1.  Выберите **задачу потока данных** , содержащую ваш **источник OData**.  
  
2.  В окне **Свойства** выделите свойство **Выражения** .  
  
3.  Нажмите кнопку... (многоточие), чтобы открыть **Редактор выражений свойств**.  
  
4.  Выберите свойство **[OData Source].[Query]** .  
  
5.  Нажмите кнопку... (многоточие) для **выражения**.  
  
6.  Введите **выражение**.  
  
7.  Нажмите кнопку **ОК**.  
  
> [!WARNING]  
>  Обратите внимание, что при использовании такого подхода необходимо убедиться, чтобы значения были правильно закодированы в URL-адресе. При получении значений из входных данных пользователя (например, установке отдельных значений параметра запроса из параметра) необходимо убедиться, что значения проверяются, чтобы избежать потенциальных атак путем инжекции кода SQL.  
  
  
