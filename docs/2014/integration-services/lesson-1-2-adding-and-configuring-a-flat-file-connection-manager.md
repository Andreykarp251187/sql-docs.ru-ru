---
title: Шаг 2. Добавление и настройка диспетчера соединений с неструктурированными файлами | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: 9a77dd32-d8c2-4961-ad37-2a971f9d6043
author: janinezhang
ms.author: janinez
manager: craigg
ms.openlocfilehash: 0c6cd41be722d80baf442db907d6fdab9f334859
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62891799"
---
# <a name="step-2-adding-and-configuring-a-flat-file-connection-manager"></a>Шаг 2. Добавление и настройка диспетчера соединений с неструктурированными файлами
  В этом задании к только что созданному пакету будет добавлен диспетчер соединений с неструктурированными файлами. Диспетчер соединений с неструктурированными файлами позволяет пакету извлекать данные из неструктурированных файлов. С помощью диспетчера соединений с неструктурированными файлами можно указать имя и расположение файла, локали и кодовую страницу, а также формат файла, включая разделители столбцов. Эти данные будут использованы при извлечении пакета из неструктурированного файла. Кроме того, можно вручную указать тип данных для каждого столбца или в диалоговом окне **Предлагаемые типы столбцов** указать автоматическое сопоставление столбцов извлекаемых данных с типами данных в службах [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .  
  
 Для каждого используемого формата файла необходимо создать отдельный диспетчер соединений с неструктурированными файлами. Так как в данном учебнике данные извлекаются из неструктурированных файлов одинакового формата, в пакет необходимо добавить только один диспетчер соединений с неструктурированными файлами.  
  
 В этом учебнике предстоит настроить следующие свойства диспетчера соединений с неструктурированными файлами:  
  
-   **Имена столбцов**. Так как в неструктурированном файле не указаны имена столбцов, диспетчер соединений с неструктурированными файлами создает имена по умолчанию столбец. Указанные имена по умолчанию не дают представления о содержащихся в столбцах данных. Чтобы сделать имена по умолчанию более понятными, следует заменить их именами, взятыми из таблицы фактов, в которую производится загрузка данных из неструктурированных файлов.  
  
-   **Сопоставление данных**. Сопоставление типов данных, указываемые для диспетчера соединений с неструктурированными файлами будет использоваться всеми компонентами источников данных неструктурированных файлов, которые обращаются к диспетчеру соединений. Можно сопоставить типы данных вручную с помощью диспетчера соединений с неструктурированными файлами или использовать диалоговое окно **Предлагаемые типы столбцов** . В этом учебнике предстоит просмотреть сопоставления, предложенные в диалоговом окне **Предлагаемые типы столбцов** , а затем вручную создать необходимые сопоставления в диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** .  
  
 Диспетчер соединений с неструктурированными файлами предоставляет сведения о локали файла данных. Если компьютер не настроен на использование региональных параметров "Русский (Россия)", нужно установить дополнительные свойства в диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** .  
  
### <a name="to-add-a-flat-file-connection-manager-to-the-ssis-package"></a>Добавление диспетчера соединений с неструктурированными файлами в пакет служб SSIS  
  
1.  Щелкните правой кнопкой мыши область **Диспетчеры соединений** и выберите команду **Создать соединение с неструктурированным файлом**.  
  
2.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** в поле **Имя диспетчера соединений**введите **Образец источника данных "неструктурированный файл"**.  
  
3.  Нажмите кнопку **Обзор**.  
  
4.  В диалоговом окне **Открыть** найдите файл SampleCurrencyData.txt на компьютере.  
  
     Образцы данных включаются в состав с пакетами занятий по службам [!INCLUDE[ssIS](../includes/ssis-md.md)] . Чтобы загрузить образцы данных и пакеты занятий выполните следующие действия.  
  
    1.  Перейдите к [образцам продуктов служб Integration Services](https://go.microsoft.com/fwlink/?LinkId=275027).  
  
    2.  Перейдите на вкладку **DOWNLOADS** .  
  
    3.  Щелкните файл SQL2012.Integration_Services.Create_Simple_ETL_Tutorial.Sample.zip.  
  
5.  Снимите флажок «Имена столбцов в первой строке данных».  
  
### <a name="to-set-locale-sensitive-properties"></a>Установка свойств, зависящих от локали и региональных стандартов  
  
1.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** перейдите на вкладку **Общие**.  
  
2.  Установите свойство **Локаль** в значение "Русский (Россия)", а свойство **Кодовая страница** в значение 1252.  
  
### <a name="to-rename-columns-in-the-flat-file-connection-manager"></a>Переименование столбцов диспетчера соединений с неструктурированными файлами  
  
1.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** перейдите на вкладку **Дополнительно**.  
  
2.  На панели свойств сделайте следующие изменения.  
  
    -   Изменение **столбец 0** имя свойства `AverageRate`.  
  
    -   Изменение **столбец 1** имя свойства `CurrencyID`.  
  
    -   Изменение **Column 2** имя свойства `CurrencyDate`.  
  
    -   Изменение **Column 3** имя свойства `EndOfDayRate`.  
  
    > [!NOTE]  
    >  По умолчанию для всех четырех столбцов указан строковый тип данных [DT_STR] со значением параметра `OutputColumnWidth`, равным 50.  
  
### <a name="to-remap-column-data-types"></a>Сопоставление типов данных столбцов  
  
1.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** нажмите кнопку **Предложить типы**.  
  
     [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] автоматически предлагают большинство соответствующих типов данных на основании первых 200 строк данных. Можно изменить параметры предложения по большему или меньшему количеству данных, чтобы указать тип данных по умолчанию для целочисленных и логических данных или чтобы добавить пробелы в дополнение к строковым столбцам.  
  
     На данный момент не изменяйте значения параметров в диалоговом окне **Предлагаемые типы столбцов** и нажмите кнопку **ОК** , чтобы службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] предложили типы данных для столбцов. Вы вернетесь на панель **Дополнительно** диалогового окна **Редактор диспетчера соединений с неструктурированными файлами** , где можно просмотреть типы данных столбцов, предложенные службами [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)]. (Если нажать кнопку **Отмена**, предложения в отношении метаданных столбца и используемого типа данных строки по умолчанию (DT_STR) сделаны не будут.)  
  
     В этом учебнике для данных из файла SampleCurrencyData.txt в службах [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] предлагаются типы данных, приведенные во втором столбце следующей ниже таблицы. Типы данных, требуемые для столбцов назначения, которые будут определены позже, приведены в последнем столбце следующей ниже таблицы.  
  
    |Столбец неструктурированных файлов|Предложенный тип|Целевой столбец|Тип назначения|  
    |----------------------|--------------------|------------------------|----------------------|  
    |AverageRate|float [DT_R4]|FactCurrency.AverageRate|FLOAT|  
    |CurrencyID|string [DT_STR]|DimCurrency.CurrencyAlternateKey|nchar(3)|  
    |CurrencyDate|date [DT_DATE]|DimDate.FullDateAlternateKey|date|  
    |EndOfDayRate|float [DT_R4]|FactCurrency.EndOfDayRate|FLOAT|  
  
     Тип данных, предложенный для `CurrencyID` столбца несовместим с типом данных поля в таблице назначения. Так как тип данных `DimCurrency.CurrencyAlternateKey` является nchar (3), `CurrencyID` смены со строкового [DT_STR] на строковый [DT_WSTR]. Кроме того, поле `DimDate.FullDateAlternateKey` определяется как тип даты; таким образом, `CurrencyDate` должен быть изменен с типа даты [DT_Date] на даты базы данных [DT_DBDATE].  
  
2.  В списке, выберите столбец CurrencyID и на панели свойств измените тип данных столбца `CurrencyID` со строкового [DT_STR] на Unicode string [DT_WSTR].  
  
3.  На панели свойств измените тип данных столбца `CurrencyDate` с типа даты [DT_DATE] на даты базы данных [DT_DBDATE].  
  
4.  Нажмите кнопку **ОК**.  
  
## <a name="next-task-in-lesson"></a>Следующая задача занятия  
 [Шаг 3. Добавление и настройка диспетчера соединений OLE DB](lesson-1-3-adding-and-configuring-an-ole-db-connection-manager.md)  
  
## <a name="see-also"></a>См. также  
 [Flat File Connection Manager](connection-manager/file-connection-manager.md)   
 [Типы данных служб Integration Services](data-flow/integration-services-data-types.md)  
  
  
