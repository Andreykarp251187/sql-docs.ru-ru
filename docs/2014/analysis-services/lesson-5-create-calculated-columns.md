---
title: 'Занятие 6: Создание вычисляемых столбцов | Документация Майкрософт'
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology:
- analysis-services
ms.topic: conceptual
ms.assetid: d126766a-5699-4e9f-8213-8c7eea0fc14e
author: minewiskan
ms.author: owend
manager: craigg
ms.openlocfilehash: adc7b7bf3335c8c9c7530d18f4d553492cfe9e1b
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62728655"
---
# <a name="lesson-6-create-calculated-columns"></a>Занятие 6: Создание вычисляемых столбцов
  На этом занятии мы создадим новые данные в модели путем добавления вычисляемых столбцов. Вычисляемый столбец основывается на данных, которые уже существуют в модели. Дополнительные сведения см. в разделе [Вычисляемые столбцы (табличные службы SSAS)](tabular-models/ssas-calculated-columns.md).  
  
 Мы создадим пять новых вычисляемых столбцов в трех разных таблицах. Шаги выполнения для каждой задачи могут немного отличаться друг от друга. Это сделано для того, чтобы продемонстрировать разные способы создания новых столбцов, переименовывания и размещения в разных местах в таблице.  
  
 Предполагаемое время для выполнения этого занятия: **15 минут**  
  
## <a name="prerequisites"></a>предварительные требования  
 Этот раздел является частью учебника по табличному моделированию, который необходимо изучать по порядку. Перед выполнением задач на этом занятии, необходимо завершить предыдущее занятие: [Занятие 5. Создание связей](lesson-4-create-relationships.md).  
  
## <a name="create-calculated-columns"></a>Создание вычисляемых столбцов  
  
#### <a name="create-a-month-calendar-calculated-column-in-the-date-table"></a>Создание вычисляемого столбца «Месячный календарь» в таблице «Дата»  
  
1.  В среде [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)] в меню **Модель** наведите указатель на пункт **Представление модели** и выберите пункт **Представление данных**.  
  
     Вычисляемые столбцы можно создавать только с помощью конструктора моделей в представлении данных.  
  
2.  В конструкторе моделей щелкните таблицу (вкладку) **Дата** .  
  
3.  Щелкните правой кнопкой мыши **Календарный квартал** столбец, а затем щелкните **вставить столбец**.  
  
     Новый столбец с именем **CalculatedColumn1** вставляется слева от **Календарный квартал** столбца.  
  
4.  В строке формул над таблицей введите следующую формулу. Автозаполнение помогает вводить полные имена столбцов и таблиц, а также выводит список доступных функций.  
  
     `=RIGHT(" " & FORMAT([Month],"#0"), 2) & " - " & [Month Name]`  
  
     Завершив построение формулы, нажмите клавишу ВВОД.  
  
     Все строки вычисляемого столбца будут заполнены значениями. При прокрутке таблицы вниз будет видно, что строки могут содержать различные значения для данного столбца, на основе данных, которые содержатся в каждой строке.  
  
    > [!NOTE]  
    >  Если произошла ошибка, проверьте имена столбцов в формуле соответствуют именам столбцов, изменены в [занятия 3: Переименование столбцов](rename-columns.md).  
  
5.  Переименуйте этот столбец в `Month Calendar`.  
  
 Вычисляемый столбец «Месячный календарь» содержит сортируемое имя для месяца.  
  
#### <a name="create-a-day-of-week-calculated-column-in-the-date-table"></a>Создание вычисляемого столбца «День недели» в таблице «Дата»  
  
1.  В активной таблице **Дата** щелкните меню **Столбец** и выберите команду **Добавить столбец**.  
  
     Новый столбец будет добавлен на самой правой стороне таблицы.  
  
2.  В строке формул введите следующую формулу:  
  
     `=RIGHT(" " & FORMAT([Day Number Of Week],"#0"), 2) & " - " & [Day Name]`  
  
     Завершив построение формулы, нажмите клавишу ВВОД.  
  
3.  Переименуйте столбец в `Day of Week`.  
  
4.  Щелкните заголовок столбца и перетащите столбец между столбцами **Название дня** и **День месяца** .  
  
    > [!TIP]  
    >  Перемещение столбцов в таблице облегчает навигацию.  
  
 Вычисляемый столбец «День недели» содержит сортируемое имя дня недели.  
  
#### <a name="create-a-product-subcategory-name-calculated-column-in-the-product-table"></a>Создание вычисляемого столбца «Имя подкатегории продуктов» в таблице «Продукт»  
  
1.  Выберите таблицу **Продукт** в конструкторе моделей.  
  
2.  Прокрутите до правого края таблицы. Обратите внимание на то, что крайний правый столбец имеет имя **Добавление столбца** (курсивом), и щелкните заголовок столбца.  
  
3.  В строке формул введите следующую формулу:  
  
     `=RELATED('Product Subcategory'[Product Subcategory Name])`  
  
     Завершив построение формулы, нажмите клавишу ВВОД.  
  
4.  Переименуйте столбец в `Product Subcategory Name`.  
  
 Вычисляемый столбец «Имя подкатегории продуктов» используется для создания иерархии в таблице «Продукт», которая включает данные из столбца «Имя подкатегории продуктов» в таблице «Подкатегория продуктов». Иерархии не могут охватывать более одной таблицы. Иерархии будут созданы позднее, в занятии 7.  
  
#### <a name="create-a-product-category-name-calculated-column-in-the-product-table"></a>Создание вычисляемого столбца «Имя категории продуктов» в таблице «Продукт»  
  
1.  При выбранной таблице **Продукт** откройте меню **Столбец** и выберите команду **Добавить столбец**.  
  
2.  В строке формул введите следующую формулу:  
  
     `=RELATED('Product Category'[Product Category Name])`  
  
     Завершив построение формулы, нажмите клавишу ВВОД.  
  
3.  Переименуйте столбец в `Product Category Name`.  
  
 Вычисляемый столбец «Имя категории продуктов» используется для создания иерархии в таблице «Продукт», которая включает данные из столбца «Имя категории продуктов» в таблице «Категория продуктов». Иерархии не могут охватывать более одной таблицы.  
  
#### <a name="create-a-margin-calculated-column-in-the-internet-sales-table"></a>Создание вычисляемого столбца «Маржа» в таблице «Интернет-продажи»  
  
1.  Выберите таблицу **Интернет-продажи** в конструкторе моделей.  
  
2.  Добавление нового столбца.  
  
3.  В строке формул введите следующую формулу:  
  
     `=[Sales Amount]-[Total Product Cost]`  
  
     Завершив построение формулы, нажмите клавишу ВВОД.  
  
4.  Переименуйте столбец в `Margin`.  
  
5.  Перетащите столбец между столбцами **Сумма продаж** и **Сумма налога** .  
  
 Вычисляемый столбец «Маржа» используется для анализа маржи для каждой строки (продукта).  
  
## <a name="next-step"></a>Следующий шаг  
 Чтобы продолжить изучение этого занятия, перейдите к следующему занятию: [Занятие 7. Создание мер](lesson-6-create-measures.md).  
  
  
