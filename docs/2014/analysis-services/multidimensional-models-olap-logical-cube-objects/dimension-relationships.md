---
title: Связи измерений | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- relationships [Analysis Services]
- member groups [Analysis Services]
- regular dimensions [Analysis Services]
- many-to-many relationships [Analysis Services]
- cubes [Analysis Services], relationships
- reference dimensions
- dimensions [Analysis Services], relationships
- fact dimensions [Analysis Services]
- relationships [Analysis Services], dimensions
ms.assetid: de54c059-cb0f-4f66-bd70-8605af05ec4f
author: minewiskan
ms.author: owend
manager: craigg
ms.openlocfilehash: ec3b57b08460b834868581ac8872ac3c78a38bbe
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62727815"
---
# <a name="dimension-relationships"></a>Связи измерений
  Использование измерений определяет связи между измерением куба и группами мер в нем. Измерение куба представляет собой экземпляр измерения базы данных, используемый в конкретном кубе. Куб может содержать (и часто содержит) измерения, которые не связаны непосредственно с группой мер, но которые могут быть косвенно связаны с ней через другое измерение или группу мер. При добавлении базы данных измерения или группы мер в кубе, [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] пытается определить использование измерения, анализируя связи между таблицами измерений и таблицами фактов в представлении источника данных куба, а связи между атрибутами в измерениях. Службы [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] автоматически устанавливают параметры использования измерений для связей, которые они смогли обнаружить.  
  
 Связь между измерением и группой мер состоит из таблиц измерений и фактов, участвующих в связи, и атрибута гранулярности, указывающего детализацию измерения в конкретной группе мер.  
  
## <a name="regular-dimension-relationships"></a>Связи обычного измерения  
 Связь обычного измерения между измерением куба и группой мер существует, когда ключевой столбец для измерения соединен непосредственно с таблицей фактов. Эта прямая связь основана на первичный ключ-связи по внешнему ключу в базовой реляционной базе данных, но также может быть основана на логической связи, определенные в представлении источника данных. Связь обычного измерения представляет связь между таблицами измерений и таблицей фактов в традиционной структуре схемы «звезда». Дополнительные сведения об обычных связях см. в разделе [определение обычной связи и ее свойств](../multidimensional-models/define-a-regular-relationship-and-regular-relationship-properties.md).  
  
## <a name="reference-dimension-relationships"></a>Связи ссылочного измерения  
 Связь ссылочного измерения между измерением куба и группой мер существует в том случае, когда ключевой столбец измерения косвенно соединен с таблицей фактов по ключу в другой таблице измерения, как показано на следующей схеме.  
  
 ![Логическая схема, связь ссылочного измерения](../../../2014/analysis-services/dev-guide/media/as-refdimension1.gif "логическая схема, связь ссылочного измерения")  
  
 Связь ссылочного измерения представляет связь между таблицами измерений и таблицей фактов в структуре схемы «снежинка». Когда таблицы измерений связаны по схеме «снежинка», можно определить либо одно измерение с использованием столбцов из нескольких таблиц, либо определить отдельные измерения на основе отдельных таблиц измерений, а затем задать связь между ними при помощи параметров связи ссылочного измерения. На следующем рисунке показана одна таблица фактов **InternetSales**, и две таблицы измерений **клиента** и **Geography**, в схеме «снежинка».  
  
 ![Логическая схема, связь ссылочного измерения](../../../2014/analysis-services/dev-guide/media/as-refdim-schema1.gif "логическую схему, ссылочная связь измерений")  
  
 Можно создать измерение с **клиента** таблицу в качестве главной таблицы измерения и **Geography** таблица, включенная в связанной таблице. После этого определяется обычная связь между измерением и группой мер «Интернет-продажи».  
  
 Кроме того, можно создать два измерения, связанные с группой мер InternetSales: измерение, основанное на **клиента** таблицы и измерение, основанное на **Geography** таблицы. После этого можно связать измерение «География» с группой мер «Интернет-продажи», используя связь ссылочного измерения, в которую входит измерение «Заказчик». В этом случае, когда факты в группе мер «Интернет-продажи» измеряются измерением «География», факты измеряются по заказчикам и по географии. Если куб содержит вторую группу мер «Товарооборот посредников», то измерить факты в группе мер «Товарооборот посредников» по таблице Geography невозможно, поскольку связи между группой мер «Товарооборот посредников» и Geography не существует.  
  
 Ограничения на количество ссылочных измерений, которые могут быть соединены друг с другом, нет, как показано на следующей схеме.  
  
 ![Логическая схема, связь ссылочного измерения](../../../2014/analysis-services/dev-guide/media/as-refdimension2.gif "логическая схема, связь ссылочного измерения")  
  
 Дополнительные сведения о ссылочных связях см. в разделе [Определение ссылочной связи и ссылочных свойств связи](../multidimensional-models/define-a-referenced-relationship-and-referenced-relationship-properties.md).  
  
## <a name="fact-dimension-relationships"></a>Связи измерения фактов  
 Измерения фактов, обычно называемые вырожденными измерениями, представляют собой стандартные измерения, составленные из столбцов атрибутов в таблицах фактов, а не из столбцов атрибутов в таблицах измерений. Полезные данные измерений иногда хранятся в таблице фактов с целью снижения дублирования. Например, на следующей диаграмме приведена **FactResellerSales** таблицы фактов из [!INCLUDE[ssAWDWsp](../../includes/ssawdwsp-md.md)] образца базы данных.  
  
 ![Столбцы в таблицы фактов, поддерживающие измерения](../../../2014/analysis-services/dev-guide/media/as-factdim.gif "столбцы в таблицы фактов, поддерживающие измерения")  
  
 Эта таблица содержит данные об атрибутах не только для каждой строки заказа, оформленного посредником, но и для самого заказа. Атрибуты, обведенные на предыдущей диаграмме, идентифицируют данные в **FactResellerSales** таблицу, которая может использоваться в качестве атрибутов в измерении. В этом случае два дополнительных элемента данных — сопроводительный номер перевозчика и номер заказа на покупку, оформленного посредником, представлены столбцами атрибутов CarrierTrackingNumber и CustomerPONumber. Эта информация представляет интерес-например, пользователи определенно будут заинтересованы в просмотре статистических сведений, например суммарной стоимости всех заказов, поставляемых по одному сопроводительному номеру продуктов. Однако без измерения данные по этим двум атрибутам не могут быть ни организованы, ни статистически обработаны.  
  
 Теоретически можно создать таблицу измерения, использующую те же самые ключевые данные, что и таблица FactResellerSales, и переместить два остальных столбца атрибутов, CarrierTrackingNumber и CustomerPONumber, в эту таблицу измерения. Однако при этом произойдет дублирование значительной части данных, а также излишнее усложнение хранилища данных с целью представления всего двух атрибутов в отдельном измерении.  
  
> [!NOTE]  
>  Измерения фактов часто используются для поддержки операций детализации. Дополнительные сведения о действиях см. в разделе [Действия (службы Analysis Services — многомерные данные)](../multidimensional-models/actions-analysis-services-multidimensional-data.md).  
  
> [!NOTE]  
>  Необходимо осуществлять добавочное обновление измерений фактов после каждого обновления группы мер, на которую ссылается связь фактов. Если измерение фактов является измерением ROLAP, то механизм обработки служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] очищает все кэши и осуществляет добавочную обработку группы мер.  
  
 Дополнительные сведения о связях фактов см. в разделе [Определение связей фактов и свойств связей фактов](../multidimensional-models/define-a-fact-relationship-and-fact-relationship-properties.md).  
  
## <a name="many-to-many-dimension-relationships"></a>Связи измерений «многие ко многим»  
 В большинстве измерений каждый факт соединяется с одним и только одним элементом измерения, а один элемент измерения может быть связан с несколькими фактами. В терминах реляционных баз данных такая связь имеет название «один ко многим». Однако часто полезно соединять один факт с несколькими элементами измерения. Например, клиент банка может иметь несколько счетов (чековый, сберегательный, кредитный и инвестиционный), в то время как счет также может иметь нескольких владельцев или совладельцев. Измерение «Клиент», построенное на основе таких связей, имело бы несколько элементов, относящихся к одной транзакции по счету.  
  
 ![Связь измерений логической схемы/многие ко многим](../../../2014/analysis-services/dev-guide/media/as-many-dimension1.gif "логической схемы/многие ко многим связь измерений")  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] позволяет определить связь «многие ко многим» между измерением и таблицей фактов.  
  
> [!NOTE]  
>  Для обеспечения поддержки связи измерений «многие ко многим» в представлении источника данных должна быть установлена связь по внешнему ключу между всеми участвующими таблицами, как показано на предыдущей диаграмме. В противном случае будет невозможно выбрать верную промежуточную группу мер, при установке связи на **Использование измерений** вкладке конструктора измерений.  
  
 Дополнительные сведения о связях многие ко многим, см. в разделе [определить многие ко многим связи "и" многие ко многим свойств связи](../multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).  
  
## <a name="see-also"></a>См. также  
 [Измерения (службы Analysis Services — многомерные данные)](../multidimensional-models-olap-logical-dimension-objects/dimensions-analysis-services-multidimensional-data.md)  
  
  
