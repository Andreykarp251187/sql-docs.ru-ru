---
title: Перекрестная проверка (SQL Server Data Mining Add-ins) | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology:
- analysis-services
ms.topic: conceptual
helpviewer_keywords:
- cross-validation
- partitioning data [data mining]
- mining models, testing
ms.assetid: bf9483b3-4099-41c4-bbc5-da7005e07bcd
author: minewiskan
ms.author: owend
manager: craigg
ms.openlocfilehash: 95d0a5e0f7d3d108543d6741dea84efde4280387
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62679844"
---
# <a name="cross-validation-sql-server-data-mining-add-ins"></a>Перекрестная проверка (надстройки интеллектуального анализа данных SQL Server)
  ![Кнопка перекрестной проверки, интеллектуального анализа данных](media/dmc-xvalid.gif "кнопка перекрестной проверки, интеллектуального анализа данных")  
  
 Перекрестная проверка — стандартное средство в аналитике, она очень важна при разработке и настройке моделей интеллектуального анализа данных. Перекрестная проверка используется после создания модели, чтобы проверить достоверность модели и сравнить ее результаты с результатами других, связанных моделей интеллектуального анализа данных.  
  
 Перекрестная проверка состоит из двух фаз: обучение и формирование отчета. Необходимо выполнить следующие шаги.  
  
-   Выбрать целевую структуру или модель интеллектуального анализа данных.  
  
-   Указать целевое значение (если применимо).  
  
-   Указать число разрезов, или *сверток*, в которые будут секционироваться данные структуры.  
  
 **Перекрестной проверки** Мастер затем создает новую модель для каждой свертки, проверит модель на других свертках и затем отчет о точности модели. По завершении **перекрестной проверки** мастер создает отчет, показывающий метрики для каждой свертки и предоставляет сводку по модели в агрегате. Эти сведения можно использовать, чтобы определить полезность базовых данных для модели или сравнить различные модели, построенные на одних и тех же данных.  
  
## <a name="using-the-cross-validation-wizard"></a>Использование мастера перекрестной проверки  
 Перекрестную проверку можно применять как к временным моделям, так и к моделям, хранимым в экземпляре служб [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)].  
  
#### <a name="to-create-a-cross-validation-report"></a>Создание отчета перекрестной проверки  
  
1.  В **точность и правильность** группе **интеллектуального анализа данных** ленты, нажмите кнопку **перекрестная проверка**.  
  
2.  В **Выбор структуры или модели** диалоговом окне выберите существующую структуру интеллектуального анализа данных или модели интеллектуального анализа данных. Если была выбрана структура, мастер применит перекрестную проверку ко всем моделям, основанным на этой структуре, в которых присутствует один и тот же прогнозируемый атрибут. Если была выбрана модель, мастер использует перекрестную проверку только для этой модели.  
  
3.  В **Указание параметров перекрестной проверки** отображаемое в диалоговом окне **количество сверток** выберите количество сверток, на которое следует разделить набор данных. Свертка — это случайно выбранный разрез данных.  
  
4.  При необходимости задайте максимальное количество строк, используемых в перекрестной проверке, введя число в **максимальное число строк** текстовое поле.  
  
    > [!NOTE]  
    >  Чем больше строк используется, тем точнее будут результаты. Однако время обработки также может значительно возрасти. Выбор числа зависит от данных, но обычно рекомендуется устанавливать наибольшее возможное число, не уменьшающее производительность. Чтобы увеличить производительность, также можно указать меньшее число сверток.  
  
5.  Выберите столбец из **целевой атрибут** раскрывающегося списка. В списке отображаются только столбцы, которые были заданы как прогнозируемые атрибуты при первоначальном создании модели. Модель может содержать несколько прогнозируемых атрибутов, но выбрать можно только один.  
  
6.  Выберите значение из **целевое состояние** раскрывающегося списка.  
  
     Если в прогнозируемом столбце содержатся непрерывные числовые данные, этот параметр будет недоступен.  
  
7.  При необходимости укажите значение для использования в качестве **целевой порог** в подсчет точных прогнозов. Это значение выражается в виде вероятности, представленной в виде числа между 0 и 1 (1 означает гарантированную точность, 0 означает нулевую вероятность, 0,5 означает случайный выбор).  
  
     Если в прогнозируемом столбце содержатся непрерывные числовые данные, этот параметр будет недоступен.  
  
8.  Нажмите кнопку **Готово**. Создается новый лист, с именем **перекрестной проверки**.  
  
    > [!NOTE]  
    >  Во время разбиения модели на свертки и проверки каждой свертки электронная таблица Microsoft Excel может перестать реагировать на команды.  
  
### <a name="requirements"></a>Требования  
 Чтобы создать отчет перекрестной проверки, необходимы уже созданная структура интеллектуального анализа данных и связанные с ней модели. Мастер предоставляет диалоговое окно, помогающее выбрать существующие структуры и модели.  
  
 Если была выбрана структура интеллектуального анализа данных, поддерживающая несколько моделей интеллектуального анализа данных, а в моделях используются различные прогнозируемые атрибуты, мастер перекрестной проверки выполнит проверку только тех моделей, которые имеют общий прогнозируемый атрибут.  
  
 Если была выбрана структура, поддерживающая и модели кластеризации, и другие виды моделей, модели кластеризации не будут проверяться.  
  
## <a name="understanding-cross-validation-results"></a>Основные сведения о результатах перекрестной проверки  
 Результаты перекрестной проверки отображаются в новом листе, под названием **отчет перекрестной проверки для \<имя атрибута >**. Новый лист содержит несколько разделов: первый раздел — это сводка, содержащая важные метаданные о модели, которое было проверено, вы узнаете, какие модели или структуры относятся результаты.  
  
 Во втором разделе отчета предоставляется статистическая сводка, показывающая, насколько хороша исходная модель. В этой сводке выполняется анализ различий между моделями, созданными для каждой свертки по трем основным мерам: *корень среднеквадратичной погрешности*, *Средняя абсолютная погрешность*, и *логарифм рейтинга*. Эти стандартные статистические меры используются не только в интеллектуальном анализе данных, но и в большинстве других видов статистического анализа.  
  
 Для каждой из этих мер мастер перекрестной проверки вычисляет среднее и стандартное отклонение для всей модели. Это показывает, насколько согласована модель при выполнении прогнозов для различных подмножеств данных. Например, если стандартное отклонение очень велико, это показывает, что модели, созданные для каждой свертки, имеют сильно отличающиеся результаты, и, следовательно, модель могла быть слишком сильно обучена на определенной группе данных и может быть неприменима к другим наборам данных.  
  
 В следующем разделе описываются меры, используемые для оценки моделей.  
  
### <a name="tests-and-measures"></a>Проверки и меры  
 Кроме некоторых основных сведений о количестве сверток данных и объеме данных в каждой свертке, на листе отображается набор метрик для каждой модели, распределенных по типу проверки. Например, точность модели кластеризации оценивается с помощью проверок, отличающихся от проверок, используемых для моделей прогнозирования.  
  
 Следующая таблица содержит проверки и метрики с объяснением значений каждой метрики.  
  
#### <a name="aggregates-and-general-statistical-measures"></a>Статистические обработки и общие статистические меры  
 Совокупные меры, предоставленные в отчете, показывают, насколько сильно созданные в данных свертки отличаются друг от друга.  
  
-   Среднее и стандартное отклонение.  
  
-   Среднее отклонение от среднего арифметического для конкретной меры, с учетом всех секций модели.  
  
#### <a name="classification-passfail"></a>Классификации: Совпадение или неудача  
 Эта мера используется в моделях классификации, если для прогнозируемого атрибута не было указано целевое значение. Например, если была создана модель, прогнозирующая различные вероятности, эта мера показывает, насколько хорошо модель прогнозировала все возможные значения.  
  
 Совпадение или неудача вычисляется подсчетом всех вариантов, которые отвечают следующим условиям: **передать** Если спрогнозированное состояние с наибольшей вероятностью совпадает с входным состоянием и вероятность больше значения, которое было указано для **Порога состояния**; в противном случае **ошибкой**.  
  
#### <a name="classification-true-or-false-positives-and-negatives"></a>Классификации: Истинные и ложные положительные и отрицательные результаты  
 Эта проверка используется для всех моделей классификации, имеющих указанную цель. Эта мера показывает, как классифицируются каждого варианта в ответ на следующие вопросы: что модели прогнозирования и какова фактический результат.  
  
|Measure|Описание|  
|-------------|-----------------|  
|Истинный положительный результат|Число вариантов, удовлетворяющих этим условиям.<br /><br /> Вариант содержит целевое значение.<br /><br /> Модель предсказала, что вариант содержит целевое значение.|  
|Ложный положительный результат|Число вариантов, удовлетворяющих этим условиям.<br /><br /> Фактическое значение равно целевому.<br /><br /> Модель предсказала, что вариант содержит целевое значение.|  
|Истинный отрицательный результат|Число вариантов, удовлетворяющих этим условиям.<br /><br /> Вариант не содержит целевого значения.<br /><br /> Модель предсказала, что вариант не содержит целевого значения.|  
|Ложный отрицательный результат|Число вариантов, удовлетворяющих этим условиям.<br /><br /> Фактическое значение не равно целевому.<br /><br /> Модель предсказала, что вариант не содержит целевого значения.|  
  
#### <a name="lift"></a>Точность прогноза  
 *Поднимите* — это мера, связанная с вероятностью. Если результат более вероятно при использовании модели, чем при внесении случайным предположением, модель говорят, что для предоставления *положительную точность прогнозов*. Тем не менее, если модель создает прогнозы, которые менее вероятны, чем случайный выбор, оценка точности прогнозов является *отрицательное*. Следовательно, эта метрика показывает улучшение, которое можно достичь при использовании модели, и чем выше оценка, тем лучше.  
  
 Точность прогноза рассчитывается как отношение фактической вероятности прогноза к граничной вероятности в проверочных вариантах.  
  
#### <a name="log-score"></a>Логарифмическая оценка  
 *Логарифмическая Оценка*, называемой *логарифмическая Оценка вероятности* прогноза представляет соотношение между двумя вероятностями, преобразованное в логарифмическую шкалу. Поскольку вероятность выражается десятичной дробью, логарифмическая оценка — это всегда отрицательное число. Чем ближе число к 0, тем выше оценка.  
  
 Тогда как необработанные оценки могут содержать очень нерегулярные и асимметричные распределения, логарифмическая оценка подобна процентной доле.  
  
#### <a name="root-mean-square-error"></a>Корень среднеквадратичной погрешности  
 *Корень среднеквадратичной погрешности* (RMSE) — это стандартный статистический метод для рассмотрения сравнения различных наборов данных и сглаживания различий, которые могут быть вызваны масштабом входных данных.  
  
 Корень среднеквадратичной погрешности представляет среднюю погрешность спрогнозированного значения относительно фактического значения. Оценка вычисляется как квадратный корень из средней погрешности для всех вариантов в секции к количеству вариантов, за исключением строк, в которых нет значения для целевых атрибутов.  
  
#### <a name="mean-absolute-error"></a>Средняя абсолютная погрешность  
 *Средняя абсолютная погрешность* — это средняя погрешность спрогнозированного значения относительно фактического значения. Она рассчитывается путем получения абсолютной суммы значений погрешностей и нахождения среднего значения этих погрешностей.  
  
 Данное значение помогает понять, насколько сильно оценки отклоняются от средних значений.  
  
#### <a name="case-likelihood"></a>Вероятность варианта  
 Эта мера используется только для моделей кластеризации и показывает вероятность принадлежности нового варианта к определенному кластеру.  
  
 В моделях кластеризации существует два вида членства в кластере, которые зависят от метода, использованного при создании модели. В некоторых моделях, созданных на основе алгоритма K-средние, ожидается, что новый вариант будет принадлежать только одному кластеру. Однако по умолчанию алгоритм кластеризации (Майкрософт) использует метод максимизации ожиданий, который предполагает, что новый вариант потенциально может принадлежать к любому кластеру. Следовательно, в данных моделях может содержаться несколько значений `CaseLikelihood`, но по умолчанию в отчет добавляется только одна вероятность принадлежности варианта кластеру — наиболее подходящая для нового варианта.  
  
## <a name="see-also"></a>См. также  
 [Проверка моделей и использование моделей для прогнозирования &#40;интеллектуального анализа данных надстройки для Excel&#41;](validating-models-and-using-models-for-prediction-data-mining-add-ins-for-excel.md)  
  
  
