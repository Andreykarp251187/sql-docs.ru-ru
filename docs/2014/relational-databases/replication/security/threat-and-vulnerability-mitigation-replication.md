---
title: Предотвращение угроз и уязвимости для безопасности (репликация) | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- attacks [SQL Server replication]
- threats [SQL Server replication security]
- security [SQL Server replication], threats
- security threats [SQL Server replication]
ms.assetid: 314fe497-56d8-4192-98e9-21b87cf8db04
author: MashaMSFT
ms.author: mathoma
manager: craigg
ms.openlocfilehash: 744cb46eeb18f5f5e76a8c7f94147a46d68e46d9
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "62676649"
---
# <a name="threat-and-vulnerability-mitigation-replication"></a>Предотвращение угроз и уязвимости для безопасности (репликация)
  В этом разделе приводятся методы снижения угроз для топологии репликации.  
  
## <a name="encryption"></a>Шифрование  
 Шифрование представляет собой процесс преобразования данных в форму, которую невозможно прочитать без специального ключа, поэтому прочитать данные могут только назначенные пользователи. Репликация не производит шифрование данных, хранящихся в таблицах или передаваемых через сетевые соединения. Это сделано намеренно, так как шифрование доступно на транспортном уровне в различных технологиях, включая следующие отраслевые стандартные технологии: виртуальные частные сети (VPN), протокол SSL и протокол IPSEC. Для соединений между компьютерами в топологии репликации рекомендуется использовать один из этих методов. Дополнительные сведения см. в разделе [Включение шифрования соединений в компоненте Database Engine (диспетчер конфигураций SQL Server)](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md). Сведения об использовании VPN и SSL для репликации данных через Интернет см. в разделе [Securing Replication Over the Internet](securing-replication-over-the-internet.md).  
  
 Если используется протокол SSL для защиты соединений между компьютерами в топологии репликации, задайте значение **1** или **2** для параметра **-EncryptionLevel** каждого агента репликации (рекомендуется значение **2** ). Значение **1** указывает, что шифрование будет использоваться, но агент не будет проверять, подписан ли SSL-сертификат сервера доверенным издателем; значение **2** указывает, что будет проверяться подпись сертификата. Параметры агента могут задаваться в профилях агента или в командной строке. Дополнительные сведения см. в разделе:  
  
-   [Работа с профилями агента репликации](../agents/replication-agent-profiles.md)  
  
-   [Просмотр и изменение параметров командной строки агента репликации (среда SQL Server Management Studio)](../agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
-   [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md)  
  
 Репликация взаимодействует с главными ключами базы данных, которые используются для шифрования данных, следующим образом.  
  
-   Если главный ключ находится в базе данных, участвующей в репликации (база данных публикации, база данных подписки или база данных распространителя), репликация шифрует и дешифрует пароли агентов в этой базе данных с помощью симметричного ключа базы данных [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] . Если используются главные ключи, то их необходимо создать во всех базах данных, участвующих в репликации. Дополнительные сведения о создании главных ключей см. в статье [CREATE MASTER KEY (Transact-SQL)](/sql/t-sql/statements/create-master-key-transact-sql).  
  
-   При репликации главные ключи не реплицируются. Если главный ключ требуется на подписчике, его необходимо экспортировать из базы данных публикации с помощью команды BACKUP MASTER KEY, а затем импортировать его в базу данных подписки с использованием команды RESTORE MASTER KEY. Дополнительные сведения см. в статьях [BACKUP MASTER KEY (Transact-SQL)](/sql/t-sql/statements/backup-master-key-transact-sql) и [RESTORE MASTER KEY (Transact-SQL)](/sql/t-sql/statements/restore-master-key-transact-sql).  
  
-   Если для присоединяемой базы данных подписки определен главный ключ, укажите пароль главного ключа с помощью **@db_master_key_password** параметра [sp_attachsubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql). Такое действие позволяет присоединять базу данных на подписчике.  
  
 Дополнительные сведения о шифровании и главных ключах см. в разделе [Encryption Hierarchy](../../security/encryption/encryption-hierarchy.md).  
  
 Репликация позволяет публиковать данные зашифрованных столбцов. Для расшифровки и использования этих данных на подписчике ключ, который был использован при шифровании данных на издателе, должен также располагаться и на подписчике. Репликация не предоставляет безопасного механизма для передачи ключей шифрования. Необходимо вручную повторно создать ключ шифрования на подписчике. Дополнительные сведения см. в статье [Репликация данных в зашифрованных столбцах (среда SQL Server Management Studio)](replicate-data-in-encrypted-columns-sql-server-management-studio.md).  
  
## <a name="see-also"></a>См. также:  
 [Управление удостоверениями и доступом &#40;репликация&#41;](identity-and-access-control-replication.md)   
 [Безопасное развертывание репликации](view-and-modify-replication-security-settings.md)  
  
  
