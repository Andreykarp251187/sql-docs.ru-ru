---
title: Регистрация базы данных в качестве приложения уровня данных | Документация Майкрософт
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
f1_keywords:
- sql12.swb.registerdacwizard.registerdac.f1
- sql12.swb.registerdacwizard.summary.f1
- sql12.swb.registerdacwizard.introduction.f1
- sql12.swb.registerdacwizard.setproperties.f1
helpviewer_keywords:
- wizard [DAC], register
- How to [DAC], register
- register DAC
- data-tier application [SQL Server], register
ms.assetid: 08e52aa6-12f3-41dd-a793-14b99a083fd5
author: stevestein
ms.author: sstein
manager: craigg
ms.openlocfilehash: 8ed991d65858d40b96013659caa2d83c479ca1d3
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "72782720"
---
# <a name="register-a-database-as-a-dac"></a>Регистрация базы данных в качестве приложения уровня данных
  Используйте **Мастер регистрации приложений уровня данных** или сценарий Windows PowerShell, чтобы создать определение приложения уровня данных (DAC), которое описывает объекты в существующей базе данных, и зарегистрируйте определение DAC в `msdb` системной базе данных (**master** в [!INCLUDE[ssSDSfull](../../includes/sssdsfull-md.md)]).  
  
-   **Перед началом:**  [ограничения](#LimitationsRestrictions), [разрешения](#Permissions)  
  
-   **Обновление DAC с помощью:**  [Мастер регистрации приложения уровня данных](#UsingRegisterDACWizard), [PowerShell](#RegisterDACPowerShell)  
  
## <a name="before-you-begin"></a>Перед началом  
 Процесс регистрации создает определение DAC, которое определяет объекты в базе данных. Сочетание определения DAC и базы данных образует экземпляр DAC. Если база данных регистрируется как DAC на управляемом экземпляре компонента Database Engine, зарегистрированный компонент DAC будет включен в служебную программу SQL Server при следующей передаче набора элементов сбора программы с экземпляра в точку управления служебной программой. После этого приложение уровня данных появится в узле **Развернутые приложения уровня данных** в окне [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] **Обозреватель программ** , а соответствующие сведения будут отображаться на странице сведений **Развернутые приложения уровня данных** .  
  
###  <a name="LimitationsRestrictions"></a> Ограничения  
 Регистрация приложения уровня данных может быть выполнена только для базы данных [!INCLUDE[ssSDS](../../includes/sssds-md.md)]или [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] с пакетом обновления 4 (SP4) или более поздней версии. Регистрация DAC не может быть выполнена, если приложение DAC уже зарегистрировано для базы данных. Например, если база данных создана при помощи развертывания DAC, нельзя запустить **Мастер регистрации приложения уровня данных**.  
  
 Приложение DAC нельзя зарегистрировать, если база данных содержит объекты, которые не поддерживаются в DAC, или содержат пользователей. Дополнительные сведения о типах объектов, поддерживаемых в DAC, см. в разделе [DAC Support For SQL Server Objects and Versions](dac-support-for-sql-server-objects-and-versions.md).  
  
###  <a name="Permissions"></a> Permissions  
 Для регистрации приложения уровня данных в экземпляре компонента [!INCLUDE[ssDE](../../includes/ssde-md.md)] требуются по меньшей мере разрешения ALTER ANY LOGIN, разрешения области базы данных VIEW DEFINITION, разрешения SELECT на представление каталога **sys.sql_expression_dependencies**и членство в предопределенной роли сервера **dbcreator** . Члены предопределенной роли сервера **sysadmin** и встроенной учетной записи системного администратора SQL Server (с именем **sa** ) также могут регистрировать приложения уровня данных. Для регистрации приложения уровня данных, не содержащего имен входа, в [!INCLUDE[ssSDS](../../includes/sssds-md.md)] требуется членство в ролях **dbmanager** или **serveradmin** . Для регистрации приложения уровня данных, содержащего имена входа, в [!INCLUDE[ssSDS](../../includes/sssds-md.md)] требуется членство в ролях **loginmanager** или **serveradmin** .  
  
##  <a name="UsingRegisterDACWizard"></a>Использование мастера регистрации приложения уровня данных  
 **Регистрация приложения уровня данных с помощью мастера**  
  
1.  В **обозревателе объектов**разверните узел экземпляра, содержащего базу данных, которую нужно зарегистрировать как DAC.  
  
2.  Разверните узел **Базы данных**.  
  
3.  Щелкните правой кнопкой мыши базу данных, подлежащую регистрации, выберите пункт **Задачи**, затем пункт **Регистрация приложения уровня данных…**  
  
4.  Выполните шаги в диалоговых окнах мастера.  
  
    1.  [Вводная страница](#Introduction)  
  
    2.  [Страница «Задание свойств»](#Set_properties)  
  
    3.  [Страница «Проверка и сводка»](#Summary)  
  
    4.  [Страница «Регистрация DAC»](#Register)  
  
##  <a name="Introduction"></a> Вводная страница  
 На этой странице описаны шаги регистрации приложения уровня данных.  
  
 **Больше не показывать эту страницу.** — щелкните этот флажок, чтобы предотвратить отображение этой страницы в будущем.  
  
 **Следующая >** — переход на страницу « **Установка свойств** ».  
  
 **Отмена** — работа мастера завершается без регистрации приложения уровня данных.  
  
##  <a name="Set_properties"></a>Страница «Задание свойств»  
 Используйте эту страницу, чтобы указать свойства уровня DAC, например имя и версию приложения.  
  
 **Имя приложения.** — Строка, указывающая имя, которое используется для идентификации определения DAC. В этом поле приводится имя базы данных.  
  
 **Версия.** — числовое значение, определяющее версию DAC. Версия DAC используется в среде Visual Studio для определения версии DAC, над которой работают разработчики. При развертывании DAC версия хранится в `msdb` базе данных и затем может быть просмотрена в узле **приложения уровня данных** в [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]среде.  
  
 **Nописание.** — необязательно. Текст, поясняющий назначение DAC. При развертывании DAC описание сохраняется в `msdb` базе данных и затем может быть просмотрено в узле **приложения уровня данных** в [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)]среде.  
  
 Назад — возврат на страницу **Введение** . ** \< **  
  
 **Next >** — проверяет возможность построения DAC из объектов в базе данных и отображает результаты на странице **Проверка и сводка** .  
  
 **Отмена** — работа мастера завершается без регистрации приложения уровня данных.  
  
##  <a name="Summary"></a>Страница «Проверка и сводка»  
 На этой странице можно просмотреть действия, которые будут выполнены мастером при регистрации DAC. Страница переходит через три состояния при проверке возможности построения DAC из объектов базы данных.  
  
### <a name="retrieving-objects"></a>Получение объектов  
 **Извлечение объектов базы данных и сервера.** — отображается индикатор развития процесса получения мастером всех необходимых объектов из базы данных и экземпляра компонента Database Engine.  
  
 Назад. Возврат на страницу " **Задание свойств** " для изменения записей. ** \< **  
  
 **Следующий >** — регистрирует приложение уровня данных и отображает результаты на странице **Регистрация приложения уровня** данных.  
  
 **Отмена** — работа мастера завершается без регистрации приложения уровня данных.  
  
### <a name="validating-objects"></a>Проверка объектов  
 **Проверка**  _SchemaName_ **.** _Objectname_ **.** — отображает индикатор выполнения по мере того, как мастер проверяет зависимости полученных объектов и допустимость этих объектов для DAC. _SchemaName_**.** _Имя_объекта_ определяет, какой объект проверяется в настоящее время.  
  
 Назад. Возврат на страницу " **Задание свойств** " для изменения записей. ** \< **  
  
 **Следующий >** — регистрирует приложение уровня данных и отображает результаты на странице **Регистрация приложения уровня** данных.  
  
 **Отмена** — работа мастера завершается без регистрации приложения уровня данных.  
  
### <a name="summary"></a>Сводка  
 **Для регистрации приложения уровня данных будет использоваться следующий параметр.** — отображает отчет о свойствах и объектах, которые будут включены в DAC.  
  
 **Сохранить отчет** — нажмите эту кнопку, чтобы сохранить копию отчета о проверке в HTML-файле. Папка по умолчанию является папкой **SQL Server Management Studio\DAC Packages** , вложенной в папки Documents рабочего каталога учетной записи пользователя Windows.  
  
 Назад. Возврат на страницу " **Задание свойств** " для изменения записей. ** \< **  
  
 **Следующий >** — регистрирует приложение уровня данных и отображает результаты на странице **Регистрация приложения уровня** данных.  
  
 **Отмена** — работа мастера завершается без регистрации приложения уровня данных.  
  
##  <a name="Register"></a>Страница «Регистрация DAC»  
 Эта страница сообщает об успешном или неуспешном завершении регистрации.  
  
 **Регистрация DAC** — сообщает об успешном или неуспешном завершении каждого действия, выполненного для регистрации DAC. Просмотрите эти сведения, чтобы выяснить результаты каждого действия. Для каждого действия, в котором обнаружена ошибка, предусмотрена ссылка в столбце **Результат** . Выберите эту ссылку, чтобы просмотреть отчет об ошибках, относящихся данному действию.  
  
 **Сохранить отчет** — нажмите эту кнопку, чтобы сохранить отчет о регистрации в HTML-файле. В этом файле содержится отчет о состоянии каждого из действий, в том числе все выданные сообщения об ошибках. Папка по умолчанию является папкой **SQL Server Management Studio\DAC Packages** , вложенной в папки Documents рабочего каталога учетной записи пользователя Windows. Имя этого файла представлено в формате \<DACPackageName>_RegisterDACReport_yyyymmdd.html, где \<*DACPackageName*> — имя развертываемого пакета, *yyyy* — текущий год, *mm* — текущий месяц, а *dd* — текущий день.  
  
 **Готово** — завершение работы мастера.  
  
##  <a name="RegisterDACPowerShell"></a>Регистрация приложения уровня данных с помощью PowerShell  
 **Регистрация базы данных в качестве DAC с помощью метода Register () в скрипте PowerShell**  
  
1.  Создайте объект SMO и настройте его на работу с экземпляром, содержащим базу данных, подлежащую регистрации как DAC.  
  
2.  Добавьте переменную, указывающую имя базы данных.  
  
3.  Укажите метаданные для приложения уровня данных, такие как имя, версия и описание приложения уровня данных.  
  
4.  Запустите метод Register с использованием указанных ранее данных.  
  
### <a name="example-powershell"></a>Пример (PowerShell)  
 В следующем примере база данных с именем MyDB регистрируется как DAC.  
  
```powershell
## Set a SMO Server object to the default instance on the local computer.  
CD SQLSERVER:\SQL\localhost\DEFAULT  
$srv = Get-Item .  
  
## Specify the database to register as a DAC.  
$dbname = "MyDB"  
  
## Specify the DAC metadata.  
$applicationname = "MyApplication"  
$version = "1.0.0.0"  
$description = "This DAC defines the database used by my application."  
  
## Register the DAC.  
$registerunit = New-Object Microsoft.SqlServer.Management.Dac.DacExtractionUnit($srv, $dbname, $applicationname, $version)  
$registerunit.Description = $description  
$registerunit.Register()  
```  
  
## <a name="see-also"></a>См. также:  
 [Приложения уровня данных](data-tier-applications.md)  
