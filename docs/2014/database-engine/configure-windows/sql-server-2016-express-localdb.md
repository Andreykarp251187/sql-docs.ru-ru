---
title: SQL Server 2014 Express LocalDB | Документация Майкрософт
ms.custom: ''
ms.date: 07/17/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- user instances
- LocalDB, described
- local database runtime
- file database
- LocalDB
ms.assetid: 5a641a46-7cfb-4d7b-a90d-6e4625719d74
author: MikeRayMSFT
ms.author: mikeray
manager: craigg
ms.openlocfilehash: 224facf54b0cde09f97010be472e3cc28754e94b
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62756990"
---
# <a name="sql-server-2014-express-localdb"></a>SQL Server 2014 Express LocalDB
  [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)] `LocalDB` — Это режим выполнения [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] предназначенный для разработчиков программ. `LocalDB` Программа установки копирует минимальный набор файлов, необходимых для запуска [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]. Один раз `LocalDB` — установлен, разработчики могут установить соединение с помощью специальной строки подключения. При соединении необходимая инфраструктура [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] создается и запускается автоматически, что позволяет приложению использовать базу данных без выполнения сложной настройки, занимающей много времени. Средства разработчика позволяют использовать [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] для написания и проверки кода [!INCLUDE[tsql](../../includes/tsql-md.md)] без необходимости управления полным экземпляром сервера [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Экземпляр [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] `LocalDB` осуществляется с помощью `SqlLocalDB.exe` служебной программы. [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]`LocalDB` следует использовать вместо [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] функции пользовательского экземпляра, который является устаревшим.  
  
## <a name="installing-localdb"></a>Установка LocalDB  
 Основной способ установки `LocalDB` — с помощью программы SqlLocalDB.msi. `LocalDB` можно использовать при установке номера SKU [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)]. Выберите `LocalDB` на **Выбор компонентов** страницы во время установки [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]. Может существовать только одна копия `LocalDB` двоичные файлы для каждой основной [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] версии. Можно запускать несколько процессов [!INCLUDE[ssDE](../../includes/ssde-md.md)] , которые будут использовать одни и те же двоичные файлы. Экземпляр [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] запущена как `LocalDB` имеет те же ограничения, что [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]  
  
## <a name="description"></a>Описание  
 `LocalDB` Программа установки использует программу SqlLocalDB.msi для установки необходимых файлов на компьютере. После установки `LocalDB` является экземпляром класса [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] , можно создавать и открывать [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] баз данных. Файлы системной базы данных, как правило, хранятся в каталоге AppData пользователя, который обычно скрыт. Например, **C:\Users\\<пользователь\>\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\LocalDBApp1\\**. Файлы пользовательской базы данных хранятся в месте, указанном пользователем, как правило, в папке **C:\Users\\<пользователь\>\Documents\\**.  
  
 Дополнительные сведения о включении `LocalDB` в приложении, см. в разделе [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] документации [Обзор локальных данных](https://msdn.microsoft.com/library/ms233817\(VS.110\).aspx), [Пошаговое руководство: Создание базы данных SQL Server LocalDB](https://msdn.microsoft.com/library/ms233763\(VS.110\).aspx), и [Пошаговое руководство: Подключение к данным в базе данных SQL Server LocalDB (Windows Forms)](https://msdn.microsoft.com/library/ms171890\(VS.110\).aspx).  
  
 Дополнительные сведения о `LocalDB` API, см. в разделе [SQL Server Express LocalDB Справочник по API экземпляра](https://msdn.microsoft.com/library/hh234692\(SQL.110\).aspx) и [функция LocalDBStartInstance](https://msdn.microsoft.com/library/hh217143\(SQL.110\).aspx).  
  
 Программа SqlLocalDb можно создавать новые экземпляры `LocalDB`, запускать и останавливать экземпляр `LocalDB`, а также включает параметры для управления `LocalDB`.  Дополнительные сведения о программе SqlLocalDb см. в разделе [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md).  
  
 Параметры сортировки экземпляра для `LocalDB` заданы в SQL_Latin1_General_CP1_CI_AS и не может быть изменено. Параметры сортировки на уровне базы данных, на уровне столбца и на уровне выражения поддерживаются обычным образом. Содержащиеся базы данных следуют правилам метаданных и параметрам сортировки tempdb, определенным [Contained Database Collations](../../relational-databases/databases/contained-database-collations.md).  
  
### <a name="restrictions"></a>Ограничения  
 `LocalDB` не может быть подписчиком в репликации слиянием.  
  
 `LocalDB` не поддерживает FILESTREAM.  
  
 `LocalDB` разрешены только локальные очереди компонента Service Broker.  
  
 Экземпляр `LocalDB` владельцем встроенных учетных записей, например NT AUTHORITY\SYSTEM может иметь проблемы с управляемостью из-за перенаправления файловой системы windows. Вместо этого используете обычную учетную запись windows в качестве владельца.  
  
### <a name="automatic-and-named-instances"></a>Автоматические и именованные экземпляры  
 `LocalDB` поддерживает два типа экземпляров: автоматические и именованные.  
  
-   Автоматические экземпляры `LocalDB` являются открытыми. Они создаются и обслуживаются автоматически и могут использоваться любым приложением. Один автоматический экземпляр `LocalDB` существует для каждой версии `LocalDB` установлен на компьютере пользователя. Автоматические экземпляры `LocalDB` обеспечивают удобное управление экземплярами. Нет необходимости создавать экземпляр. Он просто работает. Это упрощает установку приложения и его перенос на другой компьютер. Если на целевом компьютере установлена указанная версия `LocalDB`, то там также будет доступен автоматический экземпляр `LocalDB`. Автоматические экземпляры `LocalDB` именуются по специальному шаблону имени экземпляра, к которой принадлежит зарезервированному пространству имен. Это предотвращает конфликты имен с именованными экземплярами `LocalDB`. Автоматический экземпляр имеет имя **MSSQLLocalDB**.  
  
-   Именованные экземпляры служб `LocalDB` являются закрытыми. Они принадлежат одному приложению, которое отвечает за создание экземпляра и управление им. Именованные экземпляры обеспечивают изоляцию от других экземпляров и способствуют повышению производительности за счет снижения уровня конфликта за ресурсы с другими пользователями базы данных. Именованные экземпляры должны явно создаваться пользователем с помощью `LocalDB` API управления или неявно с помощью файла app.config файл управляемого приложения (несмотря на то, что управляемое приложение также может использовать API-интерфейса, при необходимости). Каждый именованный экземпляр `LocalDB` имеет связанный `LocalDB` версию, которая указывает на соответствующий набор `LocalDB` двоичные файлы. Имя экземпляра `LocalDB` является `sysname` данных введите и может содержать до 128 символов. (в отличие от обычных именованных экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], где допускается использование только обычных имен NetBIOS из 16 символов ASCII). Имя экземпляра `LocalDB` может содержать любые символы Юникода, допустимые в имени файла.  Именованный экземпляр, в котором используется имя автоматического экземпляра, становится автоматическим экземпляром.  
  
 Разные пользователи одного и того же компьютера могут иметь экземпляры с одинаковыми именами. Каждый экземпляр является отдельным процессом, который запускается от разных пользователей.  
  
## <a name="shared-instances-of-localdb"></a>Общие экземпляры LocalDB  
 Для поддержки сценариев, где нескольким пользователям компьютера требуется соединиться с единственным экземпляром `LocalDB`, `LocalDB` поддерживает общий доступ к экземплярам. Владелец экземпляра может разрешить другим пользователям компьютера соединяться со своим экземпляром. Автоматические и именованные экземпляры `LocalDB` могут совместно. Для организации общего доступа к экземпляру `LocalDB` пользователь должен его указать общее имя (псевдоним). Поскольку общее имя видно всем пользователям компьютера, то оно должно быть уникальным на этом компьютере. Общее имя экземпляра `LocalDB` имеет тот же формат, что и для именованного экземпляра `LocalDB`.  
  
 Только администратор на компьютере можно создавать общие экземпляры `LocalDB`. В общем экземпляре `LocalDB` может быть отменен, администратор или владелец общего экземпляра `LocalDB`. Для совместного использования и без предоставления общего доступа экземпляра `LocalDB`, использовать `LocalDBShareInstance` и `LocalDBUnShareInstance` методы `LocalDB` API, или общего ресурса и соответствующих параметров программы SqlLocalDb.  
  
## <a name="starting-localdb-and-connecting-to-localdb"></a>Запуск LocalDB и подключение к LocalDB  
  
### <a name="connecting-to-the-automatic-instance"></a>Подключение к автоматическому экземпляру  
 Самый простой способ использования `LocalDB` является подключение к автоматическому экземпляру, владельцем текущего пользователя с помощью строки подключения **«Server = (localdb) \MSSQLLocalDB;Integrated Security = true»**. Подключиться к определенной базе данных, используя имя файла, можно с помощью строки подключения, подобной следующей: **"Server=(LocalDB)\MSSQLLocalDB; Integrated Security=true; AttachDbFileName=D:\Data\MyDB1.mdf"**.  
  
> [!NOTE]  
>  В первый раз пользователь на компьютере пытается подключиться к `LocalDB`, автоматический экземпляр необходимо будет создать и запустить. Дополнительное время, необходимое для создания экземпляра, может стать причиной того, что попытка соединения завершится с ошибкой истечения времени ожидания. В этом случае подождите несколько секунд до завершения процесса создания экземпляра, а затем подключитесь снова.  
  
### <a name="creating-and-connecting-to-a-named-instances"></a>Создание и подключение к именованным экземплярам  
 Помимо автоматических экземпляров `LocalDB` также поддерживает именованные экземпляры. Используйте программу SqlLocalDB.exe для создания, запуска и остановки именованного экземпляра `LocalDB`. Дополнительные сведения об SqlLocalDB.exe см. в разделе [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md).  
  
```ms-dos  
REM Create an instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" create LocalDBApp1  
REM Start the instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" start LocalDBApp1  
REM Gather information about the instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" info LocalDBApp1  
```  
  
 Вышеуказанная последняя строка возвращает информацию, аналогичную следующей.  
  
|||  
|-|-|  
|Имя|«LocalDBApp1»|  
|Версия|\<текущая версия>|  
|Общее имя|""|  
|Владелец|"\<пользователь Windows>"|  
|Автоматическое создание|нет|  
|Состояние|запуск|  
|Время последнего запуска|\<дата и время>|  
|Имя канала экземпляра|np:\\\\.\pipe\LOCALDB#F365A78E\tsql\query|  
  
> [!NOTE]  
>  Если приложение использует версию .NET ранее 4.0.2 необходимо подключиться непосредственно к именованному каналу `LocalDB`. Значение имени канала экземпляра — это именованный канал, который экземпляр `LocalDB` прослушивает. Часть имени канала экземпляра после LOCALDB # будет изменяться при каждом запуске экземпляра `LocalDB` запущена. Для подключения к экземпляру `LocalDB` с помощью [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], введите имя канала экземпляра в **имя_сервера** поле **подключиться к [!INCLUDE[ssDE](../../includes/ssde-md.md)]**  диалоговое окно. Из пользовательской программы можно установить подключение к экземпляру `LocalDB` с помощью строки подключения, аналогичной `SqlConnection conn = new SqlConnection(@"Server=np:\\.\pipe\LOCALDB#F365A78E\tsql\query");`  
  
### <a name="connecting-to-a-shared-instance-of-localdb"></a>Соединение с общим экземпляром LocalDB  
 Чтобы соединиться с общим экземпляром `LocalDB` добавить **.\\**  (точка + обратная косая черта) в строку подключения для ссылки на пространство имен, зарезервированное для общих экземпляров. Например, чтобы соединиться с общим экземпляром `LocalDB` с именем `AppData` использовать строку подключения, такие как `(localdb)\.\AppData` как часть строки подключения. Пользователь, устанавливающий соединение с общим экземпляром `LocalDB` , они не принадлежит, должен иметь с проверкой подлинности Windows или [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] имя входа проверки подлинности.  
  
## <a name="troubleshooting"></a>Устранение неполадок  
 Сведения об устранении неполадок `LocalDB`, см. в разделе [Устранение неполадок SQL Server 2012 Express LocalDB](https://social.technet.microsoft.com/wiki/contents/articles/4609.aspx).  
  
## <a name="permissions"></a>Разрешения  
 Экземпляр [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)] `LocalDB` является экземпляром, созданным пользователем для собственного использования. Любой пользователь компьютера может создать базу данных с помощью экземпляра `LocalDB`, сохранив файлы в своем пользовательском профиле и запустив процесс со своими учетными. По умолчанию доступ к экземпляру `LocalDB` ограничен его владельцем. Данные, содержащиеся в `LocalDB` защищен средствами файловой системы к файлам базы данных. Если файлы пользовательской базы данных хранятся в общей папке, базы данных можно открыть любой пользователь, имеющий доступ к этому расположению с помощью экземпляра `LocalDB` они владеют. Если файлы базы данных хранятся в защищенном месте, например в папке пользовательских данных, то базу данных может открыть только сам пользователь, а также администратор, обладающий правами доступа к данной папке. `LocalDB` Файлы можно открывать только одним экземпляром `LocalDB` за раз.  
  
> [!NOTE]  
>  `LocalDB` всегда выполняется в контексте безопасности; то есть `LocalDB` никогда не будет запускаться с учетными данными группы локальных администраторов. Это означает, что все базы данных файлы, используемые `LocalDB` должны быть доступны с помощью учетной записи Windows пользователя-владельца, не подразумевает членства в группе локальных администраторов.  
  
## <a name="see-also"></a>См. также  
 [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md)  
  
  
