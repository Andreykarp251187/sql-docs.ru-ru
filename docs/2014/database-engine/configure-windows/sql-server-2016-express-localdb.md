---
title: SQL Server 2014 Express LocalDB | Документация Майкрософт
ms.custom: ''
ms.date: 07/17/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- user instances
- LocalDB, described
- local database runtime
- file database
- LocalDB
ms.assetid: 5a641a46-7cfb-4d7b-a90d-6e4625719d74
author: MikeRayMSFT
ms.author: mikeray
manager: craigg
ms.openlocfilehash: 224facf54b0cde09f97010be472e3cc28754e94b
ms.sourcegitcommit: 6fd8c1914de4c7ac24900fe388ecc7883c740077
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2020
ms.locfileid: "62756990"
---
# <a name="sql-server-2014-express-localdb"></a>SQL Server 2014 Express LocalDB
  [!INCLUDE[msCoName](../../includes/msconame-md.md)]— Это режим выполнения, [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] предназначенный для разработчиков программ. [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)] `LocalDB` `LocalDB`При установке копируется минимальный набор файлов, необходимых для запуска [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]. После `LocalDB` установки разработчики инициируют подключение, используя специальную строку подключения. При соединении необходимая инфраструктура [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] создается и запускается автоматически, что позволяет приложению использовать базу данных без выполнения сложной настройки, занимающей много времени. Средства разработчика позволяют использовать [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] для написания и проверки кода [!INCLUDE[tsql](../../includes/tsql-md.md)] без необходимости управления полным экземпляром сервера [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Экземпляр [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] `LocalDB` управляется с помощью `SqlLocalDB.exe` программы. [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]`LocalDB`следует использовать вместо функции [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] пользовательского экземпляра, которая является устаревшей.  
  
## <a name="installing-localdb"></a>Установка LocalDB  
 Основной метод установки `LocalDB` — с помощью программы SqlLocalDB. msi. `LocalDB`параметр используется при установке любого SKU [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)]. Выберите `LocalDB` на странице **Выбор компонентов** во время установки [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]. Для каждой основной [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] версии может быть только одна `LocalDB` установка двоичных файлов. Можно запускать несколько процессов [!INCLUDE[ssDE](../../includes/ssde-md.md)] , которые будут использовать одни и те же двоичные файлы. Экземпляр, [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] запущенный как, `LocalDB` имеет те же ограничения, что и[!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]  
  
## <a name="description"></a>Описание  
 Программа `LocalDB` установки использует программу SqlLocalDB. msi для установки необходимых файлов на компьютере. После установки `LocalDB` — это экземпляр [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] , который может создавать и открывать [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] базы данных. Файлы системной базы данных, как правило, хранятся в каталоге AppData пользователя, который обычно скрыт. Например, **C:\Users\\<пользователь\>\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\LocalDBApp1\\**. Файлы пользовательской базы данных хранятся в месте, указанном пользователем, как правило, в папке **C:\Users\\<пользователь\>\Documents\\**.  
  
 Дополнительные сведения о включении `LocalDB` в приложение см. [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] в документации [Общие сведения о локальных данных](https://msdn.microsoft.com/library/ms233817\(VS.110\).aspx), [Пошаговое руководство. Создание SQL Server базы данных LocalDB](https://msdn.microsoft.com/library/ms233763\(VS.110\).aspx)и [пошаговое руководство. подключение к данным в SQL Server базе данных LocalDB (Windows Forms)](https://msdn.microsoft.com/library/ms171890\(VS.110\).aspx).  
  
 Дополнительные сведения об API см `LocalDB` . в разделе [Справочник по api экземпляра LocalDB SQL Server Express](https://msdn.microsoft.com/library/hh234692\(SQL.110\).aspx) и [функция LocalDBStartInstance](https://msdn.microsoft.com/library/hh217143\(SQL.110\).aspx).  
  
 Служебная программа SqlLocalDb может создавать новые экземпляры `LocalDB`, запускать и прекращать экземпляр `LocalDB`и включает параметры, помогающие управлять. `LocalDB`  Дополнительные сведения о программе SqlLocalDb см. в разделе [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md).  
  
 Параметры сортировки экземпляра для `LocalDB` заданы как SQL_Latin1_General_CP1_CI_AS и не могут быть изменены. Параметры сортировки на уровне базы данных, на уровне столбца и на уровне выражения поддерживаются обычным образом. Содержащиеся базы данных следуют правилам метаданных и параметрам сортировки tempdb, определенным [Contained Database Collations](../../relational-databases/databases/contained-database-collations.md).  
  
### <a name="restrictions"></a>Ограничения  
 `LocalDB`не может быть подписчиком репликации слиянием.  
  
 `LocalDB`не поддерживает FILESTREAM.  
  
 `LocalDB`разрешает только локальные очереди для Service Broker.  
  
 Экземпляр, `LocalDB` принадлежащий встроенным учетным записям, например NT AUTHORITY\SYSTEM, может иметь проблемы управляемости из-за перенаправления файловой системы Windows. Вместо этого используйте обычную учетную запись Windows в качестве владельца.  
  
### <a name="automatic-and-named-instances"></a>Автоматические и именованные экземпляры  
 `LocalDB`поддерживает два типа экземпляров: Автоматические экземпляры и именованные экземпляры.  
  
-   Автоматические экземпляры `LocalDB` являются общедоступными. Они создаются и обслуживаются автоматически и могут использоваться любым приложением. Для каждой версии, `LocalDB` `LocalDB` установленной на компьютере пользователя, существует один автоматический экземпляр. Автоматические экземпляры `LocalDB` обеспечивают эффективное управление экземплярами. Нет необходимости создавать экземпляр. Он просто работает. Это упрощает установку приложения и его перенос на другой компьютер. Если на целевом компьютере установлена указанная версия `LocalDB`, то там также будет доступен автоматический экземпляр `LocalDB`. Автоматические экземпляры `LocalDB` имеют особый шаблон для имени экземпляра, принадлежащего зарезервированному пространству имен. Это предотвращает конфликты имен с именованными экземплярами `LocalDB`. Автоматический экземпляр имеет имя **MSSQLLocalDB**.  
  
-   Именованные экземпляры `LocalDB` являются частными. Они принадлежат одному приложению, которое отвечает за создание экземпляра и управление им. Именованные экземпляры обеспечивают изоляцию от других экземпляров и способствуют повышению производительности за счет снижения уровня конфликта за ресурсы с другими пользователями базы данных. Именованные экземпляры должны явно создаваться пользователем через API `LocalDB` управления или неявно через файл App. config для управляемого приложения (хотя при необходимости управляемое приложение может также использовать API). Каждый именованный экземпляр `LocalDB` имеет связанную `LocalDB` версию, указывающую на соответствующий набор `LocalDB` двоичных файлов. Имя экземпляра типа `LocalDB` является `sysname` типом данных и может содержать до 128 символов. (Это отличается от обычных именованных экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], которые ограничивают имена обычными NetBIOS-именами, равными 16 символам ASCII.) Имя экземпляра `LocalDB` может содержать любые символы Юникода, которые являются допустимыми в имени файла.  Именованный экземпляр, в котором используется имя автоматического экземпляра, становится автоматическим экземпляром.  
  
 Разные пользователи одного и того же компьютера могут иметь экземпляры с одинаковыми именами. Каждый экземпляр является отдельным процессом, который запускается от разных пользователей.  
  
## <a name="shared-instances-of-localdb"></a>Общие экземпляры LocalDB  
 Для поддержки сценариев `LocalDB`, в которых несколько пользователей компьютера должны подключаться к одному экземпляру, `LocalDB` поддерживает совместное использование экземпляров. Владелец экземпляра может разрешить другим пользователям компьютера соединяться со своим экземпляром. Как автоматические, так и именованные экземпляры `LocalDB` можно совместно использовать. Для организации общего доступа к экземпляру `LocalDB` пользователь должен его указать общее имя (псевдоним). Поскольку общее имя видно всем пользователям компьютера, то оно должно быть уникальным на этом компьютере. Общее имя экземпляра `LocalDB` имеет тот же формат, что и именованный экземпляр `LocalDB`.  
  
 Только администратор компьютера может создать общий экземпляр `LocalDB`. Общий экземпляр `LocalDB` может быть недоступен для общего доступа администратором или владельцем общего экземпляра `LocalDB`. Чтобы предоставить общий доступ к экземпляру и отменить `LocalDB`его совместное `LocalDBShareInstance` использование `LocalDBUnShareInstance` , используйте методы `LocalDB` и интерфейса API, а также общие и необщие параметры служебной программы SqlLocalDB.  
  
## <a name="starting-localdb-and-connecting-to-localdb"></a>Запуск LocalDB и подключение к LocalDB  
  
### <a name="connecting-to-the-automatic-instance"></a>Подключение к автоматическому экземпляру  
 Самый простой способ использовать `LocalDB` — подключиться к автоматическому экземпляру, принадлежащему текущему пользователю, с помощью строки подключения **"Server = (LocalDB) \MSSQLLocalDB; Integrated Security = true"**. Подключиться к определенной базе данных, используя имя файла, можно с помощью строки подключения, подобной следующей: **"Server=(LocalDB)\MSSQLLocalDB; Integrated Security=true; AttachDbFileName=D:\Data\MyDB1.mdf"**.  
  
> [!NOTE]  
>  В первый раз, когда пользователь компьютера пытается подключиться к `LocalDB`, автоматически создаваемый экземпляр должен быть создан и запущен. Дополнительное время, необходимое для создания экземпляра, может стать причиной того, что попытка соединения завершится с ошибкой истечения времени ожидания. В этом случае подождите несколько секунд до завершения процесса создания экземпляра, а затем подключитесь снова.  
  
### <a name="creating-and-connecting-to-a-named-instances"></a>Создание и подключение к именованным экземплярам  
 В дополнение к автоматическому экземпляру `LocalDB` службы также поддерживают именованные экземпляры. Используйте программу SqlLocalDB. exe для создания, запуска и завершения именованного экземпляра `LocalDB`. Дополнительные сведения об SqlLocalDB.exe см. в разделе [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md).  
  
```ms-dos  
REM Create an instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" create LocalDBApp1  
REM Start the instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" start LocalDBApp1  
REM Gather information about the instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" info LocalDBApp1  
```  
  
 Вышеуказанная последняя строка возвращает информацию, аналогичную следующей.  
  
|||  
|-|-|  
|Имя|«LocalDBApp1»|  
|Версия|\<текущая версия>|  
|Общее имя|""|  
|Владелец|"\<пользователь Windows>"|  
|Автоматическое создание|нет|  
|Состояние|запуск|  
|Время последнего запуска|\<дата и время>|  
|Имя канала экземпляра|np:\\\\.\pipe\LOCALDB#F365A78E\tsql\query|  
  
> [!NOTE]  
>  Если приложение использует версию .NET до 4.0.2, необходимо напрямую подключиться к именованному каналу `LocalDB`. Значение имени канала экземпляра — это именованный канал, который прослушивает `LocalDB` экземпляр. Часть имени канала экземпляра после LOCALDB # будет изменяться каждый раз при запуске экземпляра `LocalDB` . `LocalDB` Чтобы подключиться к экземпляру с помощью [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], введите имя канала экземпляра в поле **имя сервера** диалогового окна **Подключение к [!INCLUDE[ssDE](../../includes/ssde-md.md)] ** ». Из пользовательской программы можно установить соединение с экземпляром `LocalDB` с помощью строки подключения, аналогичной`SqlConnection conn = new SqlConnection(@"Server=np:\\.\pipe\LOCALDB#F365A78E\tsql\query");`  
  
### <a name="connecting-to-a-shared-instance-of-localdb"></a>Соединение с общим экземпляром LocalDB  
 Для подключения к общему экземпляру `LocalDB` добавьте **.\\ ** (точка + косая черта) в строку подключения для ссылки на пространство имен, зарезервированное для общих экземпляров. Например, чтобы подключиться к общему экземпляру `LocalDB` с именем `AppData` , используйте строку подключения, например `(localdb)\.\AppData` , как часть строки подключения. Пользователь `LocalDB` , подключающийся к общему экземпляру, которому он не владеет, должен иметь проверку подлинности Windows или [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] имя входа для проверки подлинности.  
  
## <a name="troubleshooting"></a>Устранение неполадок  
 Сведения об устранении `LocalDB`неполадок см. в разделе [устранение неполадок SQL Server 2012 Express LocalDB](https://social.technet.microsoft.com/wiki/contents/articles/4609.aspx).  
  
## <a name="permissions"></a>Разрешения  
 Экземпляр [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)] `LocalDB` — это экземпляр, созданный пользователем для использования. Любой пользователь компьютера может создать базу данных с помощью экземпляра `LocalDB`, сохранив файлы в своем профиле пользователя и запуская процесс под их учетными данными. По умолчанию доступ к экземпляру `LocalDB` ограничивается его владельцем. Данные, содержащиеся в `LocalDB` , защищаются с помощью доступа файловой системы к файлам базы данных. Если файлы пользовательской базы данных хранятся в общем расположении, база данных может быть открыта любым пользователем, у которого есть доступ к этому расположению из файловой системы `LocalDB` , с помощью экземпляра, которому они принадлежат. Если файлы базы данных хранятся в защищенном месте, например в папке пользовательских данных, то базу данных может открыть только сам пользователь, а также администратор, обладающий правами доступа к данной папке. `LocalDB` Файлы могут быть открыты только одним экземпляром `LocalDB` за раз.  
  
> [!NOTE]  
>  `LocalDB`всегда выполняется в контексте безопасности "Пользователи"; Это значит, `LocalDB` что никогда не выполняется с учетными данными из группы локального администратора. Это означает, что все файлы базы данных, `LocalDB` используемые экземпляром, должны быть доступны с помощью учетной записи пользователя Windows владельца, без учета членства в локальной группе администраторов.  
  
## <a name="see-also"></a>См. также:  
 [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md)  
  
  
