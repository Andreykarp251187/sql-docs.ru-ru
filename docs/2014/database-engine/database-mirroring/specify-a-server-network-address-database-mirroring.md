---
title: Указание сетевого адреса сервера (зеркальное отображение базы данных) | Документы Майкрософт
ms.custom: ''
ms.date: 04/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- database mirroring [SQL Server], deployment
- database mirroring [SQL Server], endpoint
- endpoints [SQL Server], database mirroring
- server network addresses [SQL Server]
ms.assetid: a64d4b6b-9016-4f1e-a310-b1df181dd0c6
author: MikeRayMSFT
ms.author: mikeray
manager: craigg
ms.openlocfilehash: f197eef6369281001359969bf1d92bd0390bedc8
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "62755060"
---
# <a name="specify-a-server-network-address-database-mirroring"></a>Указание сетевого адреса сервера (зеркальное отображение базы данных)
  При настройке сеанса зеркального отображения базы данных для каждого экземпляра сервера необходим сетевой адрес. Он должен однозначно определять экземпляр по адресу и номеру порта, который прослушивается данным экземпляром.  
  
 Определение порта в сетевом адресе сервера возможно при наличии конечной точки зеркального отображения базы данных в экземпляре сервера. Дополнительные сведения см. в разделе [Create a Database Mirroring Endpoint for Windows Authentication &#40;Transact-SQL&#41;](create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md).  
  
  
  
##  <a name="Syntax"></a>Синтаксис для сетевого адреса сервера  
 Сетевой адрес сервера имеет следующий синтаксис:  
  
 TCP<strong>://</strong>*\<системный адрес>* <strong>:<strong>*\<порт>* 
  
 , где  
  
-   >системных адресов — это строка, однозначно идентифицирующая компьютер назначения. * \<* Обычно сетевой адрес представляет собой системное имя (если компьютеры входят в один домен), полное доменное имя или IP-адрес.  
  
    -   Если компьютеры входят в один домен, можно указать имя компьютера (например `SYSTEM46`).  
  
    -   Если указывается IP-адрес, то он должен быть уникальным в используемой среде. Рекомендуется использовать IP-адрес только в том случае, если он является статическим. IP-адреса бывают версии 4 (IPv4) или 6 (IPv6). IPv6-адрес должен быть заключен в квадратные скобки, например: **[** _<IPv6_address>_ **]**.  
  
         Чтобы определить IP-адрес системы, в командной строке Windows введите команду **ipconfig** .  
  
    -   При указании полного доменного имени гарантируется правильная работа. Это локально определенная строка адреса, которая имеет различную форму в разных местах. Часто, но не всегда полное доменное имя представляет собой составное имя, состоящее из имени компьютера и нескольких компонентов доменов, разделенных точками, в следующем виде:  
  
         _computer_name_ **.** _domain_segment_[... **.** _domain_segment_]  
  
         где *computer_name i*— сетевое имя компьютера, на котором работает экземпляр сервера, и *domain_segment*[... **.** _domain_segment_] — Это оставшаяся информация о домене сервера; Например: `localinfo.corp.Adventure-Works.com`.  
  
         Содержание и количество доменных сегментов определяется компанией или организацией. Полное доменное имя сервера можно узнать у системного администратора.  
  
        > [!NOTE]  
        >  Дополнительные сведения об определении полного доменного имени см. в подразделе «Определение полного доменного имени» далее в этом разделе.  
  
-   Порт>— номер порта, используемого конечной точкой зеркального отображения экземпляра сервера-участника. * \<* Сведения об определении конечной точки см. в разделе [Создание конечной точки зеркального отображения базы данных с проверкой подлинности Windows (Transact-SQL)](create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md).  
  
     Конечная точка зеркального отображения базы данных может использовать любой доступный порт. Номер каждого порта в компьютерной системе должен быть связан только с одной конечной точкой, а каждая конечная точка должна быть связана только с одним экземпляром сервера; таким образом, разные экземпляры сервера на одном и том же сервере прослушивают различные конечные точки через различные порты. Поэтому порт, указанный в сетевом адресе сервера при настройке сеанса зеркального отображения базы данных, будет всегда направлять сеанс к экземпляру сервера, конечная точка которого связана с этим портом.  
  
     Лишь номер порта в сетевом адресе сервера, указанный для экземпляра сервера и связанный с конечной точкой зеркального отображения, отличает этот экземпляр от других экземпляров, имеющихся на данном компьютере. На следующем рисунке показаны сетевые адреса двух экземпляров серверов, имеющихся на одном компьютере. Экземпляр по умолчанию использует порт `7022` , именованный экземпляр — порт `7033`. Сетевым адресом сервера для этих двух экземпляров сервера будут соответственно `TCP://MYSYSTEM.Adventure-works.MyDomain.com:7022` и `TCP://MYSYSTEM.Adventure-works.MyDomain.com:7033`. Обратите внимание, что имя экземпляра сервера в адресе не указывается.  
  
     ![Сетевые адреса сервера экземпляра по умолчанию](../media/dbm-2-instances-ports-1-system.gif "Сетевые адреса сервера экземпляра по умолчанию")  
  
     Чтобы определить, какой порт в текущий момент связан с конечной точкой зеркального отображения базы данных экземпляра сервера, воспользуйтесь следующей инструкцией [!INCLUDE[tsql](../../includes/tsql-md.md)] :  
  
    ```  
    SELECT type_desc, port FROM sys.tcp_endpoints  
    ```  
  
     Найдите строку параметра **type_desc** , имеющую значение "DATABASE_MIRRORING", и используйте соответствующий номер порта.  
  
### <a name="examples"></a>Примеры  
  
#### <a name="a-using-a-system-name"></a>A. Использование имени системы  
 В следующем сетевом адресе сервера определено системное имя `SYSTEM46`и порт `7022`.  
  
```  
ALTER DATABASE AdventureWorks SET PARTNER ='tcp://SYSTEM46:7022';  
```  
  
#### <a name="b-using-a-fully-qualified-domain-name"></a>Б. Использование полного доменного имени  
 В следующем сетевом адресе сервера определено полное доменное имя `DBSERVER8.manufacturing.Adventure-Works.com`и порт `7024`.  
  
```  
ALTER DATABASE AdventureWorks SET PARTNER ='tcp://DBSERVER8.manufacturing.Adventure-Works.com:7024';  
```  
  
#### <a name="c-using-ipv4"></a>В. Использование IPv4  
 В следующем сетевом адресе сервера определены адрес IPv4 `10.193.9.134`и порт `7023`.  
  
```  
ALTER DATABASE AdventureWorks SET PARTNER ='tcp://10.193.9.134:7023';  
```  
  
#### <a name="d-using-ipv6"></a>Г. Использование IPv6  
 В следующем сетевом адресе сервера определен адрес IPv6 `2001:4898:23:1002:20f:1fff:feff:b3a3`и порт `7022`.  
  
```  
ALTER DATABASE AdventureWorks SET PARTNER ='tcp://[2001:4898:23:1002:20f:1fff:feff:b3a3]:7022';  
```  
  
## <a name="finding-the-fully-qualified-domain-name"></a>Определение полного доменного имени  
 Чтобы определить полное доменное имя системы, введите следующую команду в командной строке Windows:  
  
 **IPCONFIG/ALL**  
  
 Чтобы сформировать полное доменное имя, следует сцепить значения *<имя_узла>* и *<основной_DNS_суффикс>* следующим образом:  
  
 _>host_name<_ **.** _<Primary_Dns_Suffix>_  
  
 Например, следующая конфигурация IP:  
  
 `Host Name  .  .  .  .  .  .  : MYSERVER`  
  
 `Primary Dns Suffix  .  .  .  : mydomain.Adventure-Works.com`  
  
 соответствует следующему полному доменному имени:  
  
 `MYSERVER.mydomain.Adventure-Works.com`  
  
##  <a name="Examples"></a> Примеры  
 В следующем примере показан сетевой адрес сервера для экземпляра сервера на компьютере с именем `REMOTESYSTEM3` в другом домене. Сведения о домене: `NORTHWEST.ADVENTURE-WORKS.COM`, порт конечной точки зеркального отображения базы данных — `7025`. Для приведенных примеров компонентов сетевой адрес сервера выглядит следующим образом:  
  
 `TCP://REMOTESYSTEM3.NORTHWEST.ADVENTURE-WORKS.COM:7025`  
  
 В следующем примере показан сетевой адрес сервера для экземпляра сервера на компьютере с именем `DBSERVER1`. Данный компьютер включен в локальный домен и однозначно определяется своим системным именем. Порт конечной точки зеркального отображения базы данных — `7022`.  
  
 `TCP://DBSERVER1:7022`  
  
##  <a name="RelatedTasks"></a> Связанные задачи  
  
-   [Создание конечной точки зеркального отображения базы данных для проверки подлинности Windows &#40;Transact-SQL&#41;](create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md)  
  
## <a name="see-also"></a>См. также:  
 [SQL Server &#40;зеркального отображения базы данных&#41;](database-mirroring-sql-server.md)   
 [SQL Server &#40;конечной точки зеркального отображения базы данных&#41;](the-database-mirroring-endpoint-sql-server.md)  
  
  
