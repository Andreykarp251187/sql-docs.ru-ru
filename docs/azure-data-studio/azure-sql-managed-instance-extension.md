---
title: Расширение Управляемого экземпляра SQL Azure
titleSuffix: Azure Data Studio
description: Использование Azure Data Studio с Управляемым экземпляром SQL Azure
ms.custom: seodec18
ms.date: 10/07/2019
ms.reviewer: alayu; sstein
ms.prod: sql
ms.technology: azure-data-studio
ms.topic: conceptual
author: jovanpop-msft
ms.author: jovanpop
manager: alanyu
ms.openlocfilehash: d443292fb091679d3d6a18d557a5a7aac464fdec
ms.sourcegitcommit: 512acc178ec33b1f0403b5b3fd90e44dbf234327
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/08/2019
ms.locfileid: "72041139"
---
# <a name="managed-instance-support-for-azure-data-studio-preview"></a>Поддержка Управляемого экземпляра для Azure Data Studio (предварительная версия)

Это расширение позволяет работать с [Управляемым экземпляром SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-index) в [Azure Data Studio](https://github.com/Microsoft/azuredatastudio), а также предоставляет следующие возможности:

- отображение свойств Управляемого экземпляра (виртуальные ядра, используемое хранилище);
- мониторинг использования ЦП и хранилища за последние два часа;
- отображение предупреждения касательно конфигурации и рекомендаций по настройке;
- отображение состояния реплик базы данных;
- отображение отфильтрованных журналов ошибок.

## <a name="installations"></a>Установки

Чтобы установить официальный выпуск расширения Управляемого экземпляра, выполните действия, указанные в [документации по Azure Data Studio](https://docs.microsoft.com/sql/azure-data-studio/extensions).
В области "Расширения" найдите расширение "Управляемый экземпляр" и установите его.  Уведомления о последующих обновлениях этого расширения будут приходить автоматически.

После установки расширения Управляемого экземпляра в Azure Data Studio появится вкладка `Managed Instance`. На этой вкладке можно найти сведения, касающиеся Управляемого экземпляра.

## <a name="properties"></a>Свойства

Это расширение позволяет просматривать технические характеристики Управляемого экземпляра и сведения об использовании некоторых ресурсов.

![Свойства Управляемого экземпляра](media/azure-sql-mi-extension/ads-mi-tab1.png)

В первой колонке отображаются следующие сведения:

- **Основные свойства**, такие как доступное количество виртуальных ядер, память, хранилище, текущий уровень служб и поколение оборудования, а также характеристики ввода-вывода, такие как пропускная способность операций записи в журнал экземпляров или характеристики ввода-вывода (пропускной способности) файла.
- **Использование локального хранилища SSD**. На уровне служб "Общего назначения" только файлы **TEMPDB** размещаются локально, в то время как на уровне "Критически важный для бизнеса" все файлы базы данных размещаются в локальном хранилище SSD. В соответствующем разделе вы можете увидеть, сколько места в локальном хранилище используется Управляемым экземпляром.
- **Использование Хранилища дисков Azure (цен. категория "Премиум")**  — пользовательская и системная базы данных уровня служб "Общего назначения" размещаются в хранилище Azure (цен. категория "Премиум"). В соответствующем разделе вы можете узнать, сколько данных вы использовали, а также оставшийся объем хранилища и количество файлов. На уровне служб "Критически важный для бизнеса" этот раздел пуст.
- **Использование ресурсов**. Здесь отображается объем хранилища и ЦП, использованные экземпляром за последние два часа. Увеличьте размер экземпляра, если вы достигли предела.

## <a name="recommendations"></a>Рекомендации

Это расширение предоставляет некоторые рекомендации и предупреждения, которые могут помочь вам оптимизировать Управляемый экземпляр.

![Рекомендации по Управляемому экземпляру](media/azure-sql-mi-extension/ads-mi-tab2.png)

Некоторые из рекомендаций, которые приведены в этой таблице:

- Достижение предела пространства для хранения — необходимо либо удалить ненужные данные, либо увеличить размер хранилища экземпляра, так как базы данных, которые достигают предельного размера хранилища, могут не обрабатывать даже запросы на чтение.
- Достижение предела пропускной способности экземпляра — если вы загружаете ~ 22 МБ/с на GP или ~ 48 МБ/с на BC, Управляемый экземпляр ограничит загрузку, чтобы обеспечить возможность резервного копирования.
- Дефицит памяти — низкие значения ожидаемого времени существования страницы или большая статистика ожидания `PAGEIOLATCH` могут указывать на то, что экземпляр удаляет страницы из памяти и постоянно пытается загрузить больше страниц с диска.
- Ограничения файлов журналов — если журналы достигают [пределов ввода-вывода файлов на уровне служб "Общего назначения"](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-resource-limits#file-io-characteristics-in-general-purpose-tier), вам может потребоваться увеличить размер файла, чтобы повысить производительность.
- Ограничения файлов данных — если файлы данных достигают [пределов ввода-вывода файлов на уровне служб "Общего назначения"](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-resource-limits#file-io-characteristics-in-general-purpose-tier), вам может потребоваться увеличить размер файла, чтобы повысить производительность. Эта проблема может привести к дефициту памяти и замедлению процесса резервного копирования.
- Проблемы доступности — большое количество виртуальных файлов журнала может привести к снижению производительности и к более длительному восстановлению базы данных на уровне служб "Общего назначения" в случае ошибки процесса.

Вы должны периодически просматривать эти рекомендации, исследовать первопричины и предпринимать корректирующие действия. Расширение Управляемого экземпляра предоставляет скрипты, которые можно выполнить, чтобы устранить некоторые проблемы, о которых сообщали пользователи.

## <a name="replicas"></a>Реплики

Расширение Управляемого экземпляра позволяет просматривать состояние реплик базы данных в Управляемом экземпляре.

![Реплики Управляемого экземпляра](media/azure-sql-mi-extension/ads-mi-tab3.png)

На уровне служб "Общего назначения" каждая база данных имеет одну (первичную) реплику, в то время как в экземпляре уровня "Критически важный для бизнеса" каждая база данных имеет одну первичную и три вторичные реплики (одна используется для рабочих нагрузок только для чтения). Здесь вы можете выполнить мониторинг процесса синхронизации и убедиться, что все вторичные реплики синхронизированы с первичной репликой.

## <a name="logs"></a>Журналы

Расширение Управляемого экземпляра отображает самые актуальные последние записи в журнале ошибок SQL.

![Записи журнала Управляемого экземпляра](media/azure-sql-mi-extension/ads-mi-tab4.png)

Управляемый экземпляр порождает большое количество записей журнала. Большинство из них являются внутренними данными или системными сведениями. В некоторых записях журнала отображаются физические имена баз данных (значения `GUID`) вместо фактических логических имен баз данных.

Расширение Управляемого экземпляра отфильтровывает ненужные записи журнала на основе [метода Дмитрия Фурмана](https://techcommunity.microsoft.com/t5/DataCAT/Azure-SQL-DB-Managed-Instance-sp-readmierrorlog/ba-p/305506) и отображает фактические логические имена файлов вместо физических.

## <a name="reporting-problems"></a>Извещение о проблемах

Если у вас возникли проблемы с расширением Управляемого экземпляра, сообщите о проблеме в [проекте по расширению на сайте GitHub](https://github.com/JocaPC/AzureDataStudio-Managed-Instance/issues).

## <a name="maintainers"></a>Издатели

- [Йован Попович (Jovan Popovic) (MSFT)](https://github.com/jovanpop_msft) - [@jovanpop_msft](https://twitter.com/JovanPop_MSFT)

## <a name="code-of-conduct"></a>Правила поведения

В рамках этого проекта действуют [правила поведения в отношении продуктов с открытым исходным кодом Майкрософт][conduct-code].
Дополнительные сведения см. в статье [Вопросы и ответы, связанные с правилами поведения][conduct-FAQ]. Чтобы задать вопрос или получить комментарии, обратитесь по адресу [opencode@microsoft.com][conduct-email].

[conduct-code]: http://opensource.microsoft.com/codeofconduct/
[conduct-FAQ]: http://opensource.microsoft.com/codeofconduct/faq/
[conduct-email]: mailto:opencode@microsoft.com
[conduct-md]: https://github.com/PowerShell/vscode-powershell/blob/master/CODE_OF_CONDUCT.md
