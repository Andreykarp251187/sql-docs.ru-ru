---
title: Расширение Управляемого экземпляра SQL Azure
description: Использование Azure Data Studio с Управляемым экземпляром SQL Azure
ms.custom: seodec18
ms.date: 10/07/2019
ms.reviewer: alanyu, maghan, sstein
ms.prod: azure-data-studio
ms.technology: ''
ms.topic: conceptual
author: jovanpop-msft
ms.author: jovanpop
manager: alanyu
ms.openlocfilehash: 58c79a367782f040739b23f52e01bec5cb0ed917
ms.sourcegitcommit: 822d4b3cfa53269535500a3db5877a82b5076728
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87988599"
---
# <a name="azure-sql-managed-instance-dashboard-for-azure-data-studio-preview"></a>Панель мониторинга Управляемого экземпляра SQL Azure для Azure Data Studio (предварительная версия)

Расширение Управляемого экземпляра SQL Azure предоставляет панель мониторинга для работы с [Управляемым экземпляром SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-index) в [Azure Data Studio](https://github.com/Microsoft/azuredatastudio). а также предоставляет следующие возможности:

- отображение свойств Управляемого экземпляра SQL, включая виртуальные ядра и используемое хранилище;
- отслеживание использования ЦП и хранилища за последние два часа;
- отображение предупреждений касательно конфигурации и рекомендаций по настройке;
- отображение состояния реплик базы данных;
- отображение отфильтрованных журналов ошибок.

## <a name="install"></a>Установка

Вы можете установить официальный выпуск этого расширения. Выполните действия, описанные в [документации по Azure Data Studio](https://docs.microsoft.com/sql/azure-data-studio/extensions).
В области **Расширения** найдите расширение "управляемый экземпляр" и установите его. После установки вы будете автоматически получать уведомления о последующих обновлениях этого расширения.

После установки расширения в Azure Data Studio появится вкладка **Управляемый экземпляр**. На ней можно найти сведения, касающиеся управляемого экземпляра.

## <a name="properties"></a>Свойства

Это расширение позволяет просматривать технические характеристики управляемого экземпляра и некоторые сведения об использовании ресурсов.

[ ![Свойства Управляемого экземпляра](media/azure-sql-mi-extension/ads-mi-tab1.png )](media/azure-sql-mi-extension/ads-mi-tab1.png#lightbox)

В верхней области отображаются следующие сведения.

- **Свойства**. Получите основные сведения об управляемом экземпляре, включая доступные виртуальные ядра, память и хранилище. Также вы найдете здесь текущий уровень служб, поколение оборудования и характеристики ввода-вывода, такие как пропускная способность записи в журнал экземпляра или характеристики пропускной способности файлового ввода/вывода.
- **Локальное хранилище SSD**. На уровне служб "общего назначения" файлы **TempDB** хранятся локально. На уровне служб "критически важный для бизнеса" _все_ файлы базы данных размещаются в локальном хранилище SSD. В соответствующем разделе вы можете увидеть, сколько места в локальном хранилище используется управляемым экземпляром.
- **Хранилище дисков Azure Premium**. При наличии уровня служб "общего назначения" файлы пользовательских и системных баз данных помещаются в хранилище Azure класса Premium. В этом разделе можно увидеть объем используемых данных, количество файлов и доступное хранилище. На уровне служб "критически важный для бизнеса" этот раздел пуст.
- **Использование ресурсов**. Просмотр использования управляемым экземпляром хранилища и ЦП за последние два часа. Благодаря этому можно увеличить размер экземпляра, если приближается предельное значение.

## <a name="recommendations"></a>Рекомендации

При выборе второй панели на вкладке **Управляемый экземпляр** вы увидите рекомендации и оповещения, помогающие оптимизировать управляемый экземпляр.

[ ![Рекомендации по Управляемому экземпляру](media/azure-sql-mi-extension/ads-mi-tab2.png )](media/azure-sql-mi-extension/ads-mi-tab2.png#lightbox)

Вы можете увидеть некоторые из следующих рекомендаций.

- **Достигнут предельный объем дискового пространства**. Удалите ненужные данные или увеличьте размер хранилища экземпляра. Базы данных, которые достигли ограничения хранилища, могут не смочь обработать даже запросы на чтение.
- **Достигнут предел пропускной способности экземпляра**. Уведомляет вас, когда загрузка приближается к ограничению уровня служб: 22 Мб/с для "общего назначения" и 48 МБ/с для "критически важных для бизнеса". Имейте в виду, что управляемый экземпляр ограничит нагрузку, чтобы обеспечить возможность резервного копирования.
- **Дефицит памяти**. Низкие значения ожидаемого времени существования страницы или большая статистика ожидания `PAGEIOLATCH` могут указывать на то, что экземпляр удаляет страницы из памяти и постоянно пытается загрузить больше страниц с диска.
- **Ограничения файла журнала**. Если файлы журналов достигают [пределов ввода-вывода файлов на уровне служб "общего назначения"](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-resource-limits#file-io-characteristics-in-general-purpose-tier), вам может потребоваться увеличить размер файла журнала, чтобы повысить производительность.
- **Ограничения файлов данных**. Если файлы данных достигают [пределов ввода-вывода файлов на уровне служб "общего назначения"](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-resource-limits#file-io-characteristics-in-general-purpose-tier), вам может потребоваться увеличить размер файла, чтобы повысить производительность. Эта проблема может привести к дефициту памяти и замедлению процесса резервного копирования.
- **Проблемы с доступностью**. Большое количество виртуальных файлов журнала может снизить производительность. В случае сбоя процесса такие проблемы могут привести к более длительному восстановлению базы данных на уровне служб "общего назначения".

Вы должны периодически просматривать эти рекомендации, исследовать первопричины и предпринимать действия по устранению проблем. Расширение Управляемого экземпляра SQL предоставляет скрипты, которые можно выполнить, чтобы устранить некоторые обнаруженные проблемы.

## <a name="replicas"></a>Реплики

На третьей панели на вкладке **Управляемый экземпляр** отображается состояние реплик базы данных в управляемом экземпляре.

[ ![Реплики Управляемого экземпляра](media/azure-sql-mi-extension/ads-mi-tab3.png )](media/azure-sql-mi-extension/ads-mi-tab3.png#lightbox)

На уровне служб "общего назначения" каждая база данных имеет одну (первичную) реплику. В экземпляре уровня "критически важный для бизнеса" каждая база данных имеет одну первичную и три вторичные реплики, одна из которых используется для рабочих нагрузок только для чтения. В области **Реплики** вы можете выполнить мониторинг процесса синхронизации и убедиться, что все вторичные реплики синхронизированы с первичной репликой.

## <a name="logs"></a>Журналы

Четвертая панель вкладки **Управляемый экземпляр** отображает последние связанные записи журнала ошибок SQL.

[ ![Записи журнала Управляемого экземпляра](media/azure-sql-mi-extension/ads-mi-tab4.png )](media/azure-sql-mi-extension/ads-mi-tab4.png#lightbox)

Несмотря на то, что управляемый экземпляр порождает большое количество записей журнала, большинство из них являются внутренними данными или системными сведениями. Кроме того, в некоторых записях журнала отображаются физические имена баз данных (значения `GUID`) вместо фактических логических имен баз данных.

Расширение Управляемого экземпляра SQL Azure отфильтровывает ненужные записи журнала на основе [метода Дмитрия Фурмана](https://techcommunity.microsoft.com/t5/DataCAT/Azure-SQL-DB-Managed-Instance-sp-readmierrorlog/ba-p/305506). Расширение также отображает фактические логические имена файлов, а не физические имена.

## <a name="reporting-problems"></a>Извещение о проблемах

Если у вас возникли проблемы с расширением Управляемого экземпляра SQL, сообщите о проблеме в [проекте по расширению на сайте GitHub](https://github.com/JocaPC/AzureDataStudio-Managed-Instance/issues).

## <a name="code-of-conduct"></a>Правила поведения

В рамках этого проекта действуют [правила поведения в отношении продуктов с открытым исходным кодом Майкрософт][conduct-code].

Дополнительные сведения см. в статье [Вопросы и ответы, связанные с правилами поведения][conduct-FAQ]. Чтобы задать вопрос или получить комментарии, обратитесь по адресу [opencode@microsoft.com][conduct-email].

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. [проекте GitHub](https://github.com/JocaPC/AzureDataStudio-Managed-Instance/).

[conduct-code]: https://opensource.microsoft.com/codeofconduct/
[conduct-FAQ]: https://opensource.microsoft.com/codeofconduct/faq/
[conduct-email]: mailto:opencode@microsoft.com
