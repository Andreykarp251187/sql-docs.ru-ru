---
title: Расширение SQL Server 2019 (предварительная версия)
titleSuffix: Azure Data Studio
description: Расширение предварительной версии SQL Server 2019 для Azure Data Studio
ms.custom: seodec18
ms.date: 09/11/2019
ms.reviewer: alayu; sstein
ms.prod: sql
ms.technology: azure-data-studio
ms.topic: conceptual
author: yualan
ms.author: alayu
ms.openlocfilehash: 3d47ea0bc1c905516504c25e3a1f05ca5b74c28d
ms.sourcegitcommit: dacf6c57f6a2e3cf2005f3268116f3c609639905
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/11/2019
ms.locfileid: "70878617"
---
# <a name="sql-server-2019-extension-preview"></a>Расширение SQL Server 2019 (предварительная версия)

Расширение SQL Server 2019 (предварительная версия) обеспечивает предварительную поддержку для доставки новых функций и средств в рамках поддержки [!INCLUDE[sql-server-2019](../includes/sssqlv15-md.md)]. Сюда входит предварительная поддержка [кластеров больших данных SQL Server 2019](../big-data-cluster/big-data-cluster-overview.md), интегрированные [возможности записных книжек](../big-data-cluster/notebooks-guidance.md) и [мастер создания внешних таблиц](../relational-databases/polybase/data-virtualization.md?toc=/sql/toc/toc.json) PolyBase.

## <a name="install-the-sql-server-2019-extension-preview"></a>Установка расширения SQL Server 2019 (предварительная версия)

Чтобы установить расширение SQL Server 2019 (предварительная версия), скачайте и установите соответствующий VSIX-файл.

1. Скачайте VSIX-файл расширения SQL Server 2019 (предварительная версия) в локальный каталог:

   |Платформа|Загрузить|Дата выпуска|Версия
   |:---|:---|:---|:---|
   |Windows|[.vsix](https://go.microsoft.com/fwlink/?linkid=2103613)|11 сентября 2019 г. |0.16.0
   |macOS|[.vsix](https://go.microsoft.com/fwlink/?linkid=2103612)|11 сентября 2019 г. |0.16.0
   |Linux|[.vsix](https://go.microsoft.com/fwlink/?linkid=2103709)|11 сентября 2019 г. |0.16.0

1. В Azure Data Studio выберите **Установить расширение из пакета VSIX** в меню **Файл** и выберите скачанный VSIX-файл.

1. Нажмите кнопку **Да** при появлении запроса на подтверждение установки и дождитесь уведомления об успешной установке.

1. Выберите **Перезагрузить**, чтобы включить расширение (требуется только при первой установке расширения).

1. После перезагрузки расширение установит зависимости. Ход выполнения отображается в окне вывода: это может занять несколько минут.

1. После установки зависимостей закройте и снова откройте Azure Data Studio. Тип подключения **кластера больших данных SQL Server** будет недоступен, пока вы не перезапустите Azure Data Studio.

## <a name="changes-in-release-016"></a>Изменения в выпуске 0.16
* Мастер создания внешних таблиц:
  * Улучшена обработка ошибок при загрузке таблиц и представлений на странице сопоставления объектов.

## <a name="changes-in-release-015"></a>Изменения в выпуске 0.15
* Мастер создания внешних таблиц:
  * Сокращено время, необходимое для загрузки сведений о таблицах и столбцах на странице сопоставления объектов.
  * Исправлена ошибка с загрузкой существующих учетных данных области базы данных на странице сведений о подключении.
* Создание внешней таблицы с помощью мастера CSV-файлов:
  * Увеличен размер выборки по умолчанию, используемый для синтаксического анализа PROSE.

## <a name="changes-in-release-0141"></a>Изменения в выпуске 0.14.1
* Поддержка источников данных CTP-версии 3.1

## <a name="changes-in-release-0121"></a>Изменения в выпуске 0.12.1

* Тип подключения **кластера больших данных SQL Server** был удален в этом выпуске. Все ранее доступные функции подключения кластера больших данных SQL Server теперь доступны в подключении SQL Server.
* Обзор HDFS можно найти в папке **Службы данных**.
* Для записных книжек PySpark и другие ядра больших данных работают при подключении к главному экземпляру SQL Server в кластере больших данных SQL Server.
* Мастер создания внешних таблиц:
  * поддержка создания внешней таблицы с помощью существующего внешнего источника данных.
  * Повышение производительности в мастере.
  * Улучшена обработка имен объектов со специальными символами. В некоторых случаях это приводило к сбою мастера
  * Улучшения надежности страницы сопоставления объектов.
  * Удалены системные базы данных DWConfiguration, DWDiagnostics, DWQueue из раскрывающегося списка баз данных.
  * Поддержка установки имени объекта формата внешнего файла в мастере **создания внешней таблицы из CSV-файлов**.
  * Добавлена кнопка "Обновить" на первую страницу мастера **создания внешней таблицы из CSV-файлов**.

## <a name="release-notes-v0110"></a>Заметки о выпуске (версия 0.11.0)

* Поддержка Jupyter Notebook, в частности поддерживающая ядра Python3 и Spark, была перемещена в Azure Data Studio. Это расширение больше не требуется для использования записных книжек.
* Несколько исправлений ошибок в мастерах внешних данных:
  * Сопоставления типов Oracle были обновлены в соответствии с изменениями, вышедшими в SQL Server 2019 CTP 2.3.
  * Исправлена проблема, при которой утрачивались новые схемы, указываемые в элементах управления сопоставлением таблиц.
  * Исправлена проблема, при которой выбор узла базы данных в сопоставлениях таблиц не приводил к выбору всех таблиц и представлений.


## <a name="release-notes-v0102"></a>Заметки о выпуске (версия 0.10.2)
### <a name="sql-server-2019-support"></a>Поддержка SQL Server 2019
Поддержка SQL Server 2019 обновлена. При подключении к экземпляру кластера больших данных SQL Server в дереве обозревателя отобразится новая папка _Службы данных_. Там есть точки запуска для таких действий, как открытие новой записной книжки для подключения, отправка заданий Spark и работа с HDFS. Обратите внимание, что для некоторых действий, таких как _создание внешних данных_ в HDFS- файле или папке, необходимо установить расширение _предварительной версии SQL Server 2019_.

### <a name="notebook-support"></a>Поддержка записных книжек
В этом выпуске мы внесли значительные изменения в пользовательский интерфейс записных книжек. Наша цель заключается в упрощении чтения записных книжек, к которым вам предоставлен доступ. Удалены все рамки вокруг ячеек, если только они не выбраны или не выделены при наведении, добавлена поддержка наведения для простых действий на уровне ячеек без необходимости выбора ячейки, уточнение состояния выполнения путем добавления счетчика выполнения, анимированная кнопка _Остановить выполнение_ и многое другое. Мы также добавили сочетания клавиш для _создания записной книжки_ (`Ctrl+Shift+N`), _выполнения ячейки_ (`F5`), _создания ячейки кода_ (`Ctrl+Shift+C`) и _создания текстовой ячейки_ (`Ctrl+Shift+T`). В дальнейшем мы хотим, чтобы все ключевые действия могли запускаться по сочетанию клавиш, поэтому сообщите нам, если вам чего-то не хватает.

Прочие улучшения и исправления:
* Расширение _предварительной версии SQL Server 2019_ теперь предлагает выбор каталога установки для зависимостей Python. Оно также больше не включает Python в `.vsix file`, что уменьшает общий размер расширения. Зависимости Python необходимы для поддержки ядер Spark и Python3, поэтому для их использования необходимо установить это расширение.
* Добавлена поддержка запуска новой записной книжки из командной строки. Запуск с аргументами `--command=notebook.command.new --server=myservername` позволяет открыть новую записную книжку и подключиться к этому серверу.
* Исправления производительности для записных книжек с большой длиной кода в ячейках. Если ячейки кода содержат более чем 250 строк, будет добавлена полоса прокрутки.
* Улучшена поддержка IPYNB-файлов. Теперь поддерживается версия 3 или более поздняя. Обратите внимание, что при сохранении файлов будет выполнено обновление до версии 4 или более поздней.
* Параметр пользователя `notebook.enabled` был удален, так как встроенное средство просмотра записных книжек является стабильным.
* Теперь поддерживается тема с высокой контрастностью с несколькими исправлениями в макете объекта.
* Исправлена ошибка 3680, при которой в выходных данных `,,,` иногда выводилось неправильное число символов.
* Исправлена ошибка #3602, когда редактор для ячеек исчезает после перехода от Azure Data Studio.
* Добавлена поддержка представлений сетки для выходного типа MIME `application/vnd.dataresource+json`. Это означает, что во многих записных книжках, использующих эту возможность (например, при задании `pd.options.display.html.table_schema` в записной книжке Python), будут улучшены табличные выходные данные. Исправлена ошибка 3959, при которой Azure Data Studio пытается завершить работу сервера записной книжки дважды после закрытия.

#### <a name="known-issues"></a>Известные проблемы
* При открытии записной книжки появится диалоговое окно "Установка Python". Отмена этой установки приведет к тому, что раскрывающиеся списки ядер и "Присоединение к" не будут отображать ожидаемые значения. Для решения этой проблемы необходимо завершить установку Python.
* При открытии записной книжки с неподдерживаемым ядром раскрывающиеся списки ядер и _Присоединение к_ приведут к тому, что Azure Data Studio перестанет отвечать на запросы. Необходимо закрыть Azure Data Studio и убедиться, что используется поддерживаемое ядро (Python3, Spark | R, Spark | Scala, PySpark, PySpark3).
* Сбой ссылки пользовательского интерфейса Spark при использовании PySpark3 или других ядер Spark с конечной точкой SQL Server. В качестве обходного решения щелкните пользовательский интерфейс Spark на панели мониторинга или подключитесь с помощью типа подключения к кластеру больших данных SQL Server, так как это даст правильную гиперссылку для пользовательского интерфейса Spark.

### <a name="extensibility-improvements"></a>Улучшения расширяемости
В этом выпуске добавлено несколько улучшений, которые помогают расширять возможности среды.
* Новый API `ObjectExplorerNodeProvider` позволяет расширениям публиковать папки в SQL Server или других узлах подключения. Это способ добавления узла `Data Services` в экземплярах SQL Server 2019, но его можно использовать для простого добавления в пользовательский интерфейс папки мониторинга или других папок.
* Для отображения или скрытия вкладок в панели мониторинга доступны два новых значения ключа контекста.
  * `mssql:iscluster` указывает, используется ли кластер больших данных SQL Server 2019.
  * `mssql:servermajorversion` указывает версию сервера (15 для SQL Server 2019, 14 для SQL Server 2017 и т. д.). Это может помочь, например, если функции должны отображаться только для SQL Server 2017 или более поздней версии.


## <a name="release-notes-v080"></a>Заметки о выпуске (версия 0.8.0)
*Записные книжки*.
* Добавление ячеек до и после существующих ячеек теперь поддерживается нажатием кнопки ячейки "Другие действия".
* Параметр **Добавить новое подключение** добавлен к подключениям в раскрывающемся списке "Присоединение к".
* Была добавлена команда **Переустановить зависимости записной книжки**, которая поможет в обновлении пакетов Python и решении таких проблем, как прерывание установки путем закрытия приложения. Ее можно выполнить из палитры команд (используйте `Ctrl/Cmd+Shift+P` и введите `Reinstall Notebook Dependencies`).
* Пакет PROSE Python был обновлен до 1.1.0 и включает ряд исправлений ошибок. Чтобы обновить этот пакет, используйте команду **Переустановить зависимости записной книжки**.
* Теперь поддерживается команда **Очистить вывод** при нажатии кнопки ячейки **Больше действий**.
* Исправлены следующие проблемы, о которых сообщили клиенты:
  * Не удавалось запустить сеанс записной книжки в Windows из-за проблем с путем PATH.
  * Не удавалось запустить записную книжку из корневой папки диска, например C:\ или D:\.
  * [Ошибка 2820](https://github.com/Microsoft/azuredatastudio/issues/2820): не удавалось изменить записные книжки, созданные из ADS, в VS Code.
  * Ссылка на пользовательский интерфейс Spark теперь работает при запуске ядра Spark.
  * Переименование пункта "Управляемые пакеты" в "Установка пакетов".

*Создание внешних данных*:

* сообщения об ошибках копируются и разделяются на сводку и подробности для упрощения.
* Улучшена структура пользовательского интерфейса, значительно повышена надежность и улучшена обработка ошибок.
* Исправлены следующие проблемы, о которых сообщили клиенты:
  * Таблицы с недопустимыми сопоставлениями столбцов отображаются как отключенные и выводится предупреждение, объясняющее ошибку.

## <a name="release-notes-v072"></a>Заметки о выпуске (версия 0.7.2)
* Обозреватель ресурсов Azure теперь встроен в Azure Data Studio и удален из этого расширения. Благодарим за отзывы по этому поводу!
* Улучшена производительность записных книжек с множеством ячеек Markdown.
* Автоподбор размера ячеек кода в записной книжке. По-прежнему есть минимальный размер, основанный на панели инструментов ячейки.
* Уведомление пользователя при установке зависимостей записной книжки. В частности, в Windows это может занять много времени, поэтому теперь уведомления отображаются в представлении задач.
* Поддержка переустановки зависимостей записной книжки. Это полезно, если пользователь ранее закрыл Azure Data Studio посередине установки.
* Поддержка отмены выполнения ячейки в записной книжке.
* Повышена надежность при использовании мастера создания внешних данных, особенно при возникновении ошибок подключения.
* Блокирование использование мастера создания внешних данных, если PolyBase не включена или не работает на целевом сервере.
* Исправления для проверки орфографии и имен, связанные с SQL Server 2019 и созданием внешних данных.
* Устранено большое количество ошибок в консоли отладки Azure Data Studio.

##  <a name="sql-server-2019-big-data-cluster-support"></a>Поддержка кластеров больших данных SQL Server 2019

* Щелкните **Добавить соединение** в *обозревателе объектов* и выберите **Кластер больших данных SQL Server** в качестве типа подключения.

   > [!TIP]
   > Если тип подключения **кластера больших данных SQL Server** недоступен, перезапустите Azure Data Studio.

* Введите имя узла или IP-адрес конечной точки кластера, а также имя пользователя и пароль, используемые для подключения.
* При необходимости включите понятное отображаемое имя в поле **Имя**.
* Нажмите кнопку **Подключить**. Затем можно запустить общие задачи на панели мониторинга, просмотреть **HDFS** в обозревателе объектов и выполнить в нем задачи из контекста.
* Чтобы отправить задание Spark в кластер, щелкните правой кнопкой мыши узел сервера в *обозревателе объектов* и выберите **Отправить задание Spark**, чтобы открыть диалоговое окно отправки.
* Чтобы открыть записную книжку, см. следующий раздел.

Дополнительные сведения см. в разделе [Кластеры больших данных](../big-data-cluster/big-data-cluster-overview.md).


## <a name="azure-data-studio-notebooks"></a>Записные книжки Azure Data Studio

* Откройте записную книжку одним из следующих способов:
  * Откройте новую записную книжку из *палитры команд*.
  * Откройте дерево обозревателя объектов HDFS для кластера больших данных SQL Server 2019 и выполните одно из следующих действий.
    * Щелкните правой кнопкой мыши узел сервера и выберите **Создать Jupyter Notebook**.
    * Щелкните правой кнопкой мыши CSV-файл и выберите **Анализ в записной книжке**.
  * Откройте существующий IPYNB-файл из меню **Файл** или проводника *(IPYNB-файлы необходимо обновить до версии 4 или выше для правильной загрузки)* .
* Выберите ядро. Для выполнения локальной записной книжки выберите Python 3. Для удаленного выполнения выберите PySpark или Spark | Scala.
* Выберите конечную точку кластера больших данных SQL Server для подключения при удаленном запуске (это необязательно для локальной разработки с помощью Python 3).
* Добавьте ячейки кода или Markdown с помощью кнопок в заголовке записной книжки. Удаляйте ячейки щелчком значка корзины слева от каждой ячейки.
* Запускайте ячейки кнопкой "Воспроизвести" для ячеек кода и путем переключения редактирования и предварительного просмотра Markdown с помощью значка с глазом.

## <a name="polybase-create-external-table-wizard"></a>Мастер создания внешних таблиц PolyBase

* Из экземпляра SQL Server 2019 *мастер создания внешней таблицы* можно открыть тремя способами:
  * Щелкните правой кнопкой мыши сервер, выберите пункт **Управление**, перейдите на вкладку SQL Server 2019 (предварительная версия) и выберите **Создать внешнюю таблицу**.
  * Выберите экземпляр SQL Server 2019 в *обозревателе объектов* и откройте *мастер создания внешней таблицы* с помощью *палитры команд*.
  * Щелкните правой кнопкой мыши базу данных SQL Server 2019 в *обозревателе объектов* и выберите пункт **Создать внешнюю таблицу**.
* В этой версии расширения внешние таблицы могут быть созданы для доступа к удаленным таблицам SQL Server и Oracle.

  > [!NOTE]
  > Хотя функциональность внешней таблицы является компонентом SQL 2019, удаленный SQL Server может работать под управлением более ранней версии SQL Server.

* Выберите тип доступа к SQL Server или Oracle на первой странице мастера и продолжайте работу.
* Вам будет предложено создать главный ключ базы данных, если он еще не был создан (пароли недостаточной сложности будут заблокированы).
* Создайте соединение с источником данных и именованные учетные данные для удаленного сервера.
* Выберите объекты, которые следует сопоставлять с новой внешней таблицей.
* Выберите команду **Создать скрипт** или **Создать**, чтобы завершить работу мастера.
* После создания внешней таблицы она немедленно появляется в дереве объектов базы данных, в которой она была создана.


## <a name="known-issues"></a>Известные проблемы

* Если при создании подключения пароль не сохраняется, некоторые действия, такие как отправка задания Spark, могут не выполняться.
* Существующие записные книжки в IPYNB-файлах необходимо обновить до версии 4 или более поздней, чтобы загрузить содержимое в средство просмотра.
* При выполнении команды **Переустановить зависимости записной книжки** в представлении "Задачи" могут отображаться две задачи, одна из которых завершается ошибкой. Это не приведет к сбою установки.
* Если выбрать **Добавить новое подключение** в записной книжке, а затем нажать кнопку "Отмена", будет отображаться команда **Выберите подключение**, даже если вы уже установили подключение.
