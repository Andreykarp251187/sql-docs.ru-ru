---
title: Использование пулов соединений | Документация Майкрософт
ms.custom: ''
ms.date: 08/12/2019
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
ms.assetid: 699d4e8a-34bf-4c60-b0d5-4a10dad6084a
author: MightyPen
ms.author: genemi
ms.openlocfilehash: 69aa4d7f29d8c7963f9b300f868bc8265cde2fd0
ms.sourcegitcommit: 9348f79efbff8a6e88209bb5720bd016b2806346
ms.translationtype: MTE75
ms.contentlocale: ru-RU
ms.lasthandoff: 08/14/2019
ms.locfileid: "69026375"
---
# <a name="using-connection-pooling"></a>Использование пулов подключений

[!INCLUDE[Driver_JDBC_Download](../../includes/driver_jdbc_download.md)]

Драйвер [!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] обеспечивает поддержку пулов соединений на платформе Java Enterprise Edition (Java EE). В драйвере JDBC реализованы необходимые интерфейсы JDBC 3.0, что позволяет драйверу участвовать в любой реализации пулов соединений, предоставляемой поставщиками ПО промежуточного слоя и совместимой с JDBC 3.0. ПО промежуточного слоя, например серверы приложений Java EE, часто предоставляет соответствующие стандарту средства работы с пулами соединений. Драйвер JDBC сможет участвовать в соединениях из пула в таких средах.  
  
> [!NOTE]  
> Драйвер JDBC поддерживает пулы соединений Java EE, однако не предоставляет собственную реализацию работы с пулом. Драйверу необходимо, чтобы управление соединениями осуществлялось серверами приложений Java сторонних разработчиков.  
  
## <a name="remarks"></a>Remarks

Далее представлены классы для реализации пулов соединений.  
  
| Class                                                           | Реализации                                                    | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| --------------------------------------------------------------- | ------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| com.microsoft.sqlserver.jdbc. SQLServerXADataSource             | javax.sql.ConnectionPoolDataSource и javax.sql.XADataSource | Рекомендуется использовать класс [SQLServerXADataSource](../../connect/jdbc/reference/sqlserverxadatasource-class.md) для всех задач сервера Java EE, так как в нем реализованы все интерфейсы пулов JDBC 3.0 и интерфейсы XA.                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| com.microsoft.sqlserver.jdbc. SQLServerConnectionPoolDataSource | javax.sql.ConnectionPoolDataSource                            | Этот класс представляет фабрику соединений, которая позволяет серверу приложений Java EE заполнять пул соединений физическими соединениями. Если конфигурация поставщика Java EE подразумевает необходимость класса, реализующего javax.sql.ConnectionPoolDataSource, укажите имя класса в свойстве [SQLServerConnectionPoolDataSource](../../connect/jdbc/reference/sqlserverconnectionpooldatasource-class.md). Вместо этого рекомендуется использовать класс [SQLServerXADataSource](../../connect/jdbc/reference/sqlserverxadatasource-class.md), так как в нем реализуются и интерфейсы пулов, и интерфейсы XA, а его работоспособность проверена в большем числе конфигураций сервера Java EE. |
  
 Чтобы получить максимальную выгоду от использования пулов, в коде приложений JDBC всегда следует явно закрывать соединения. Если приложение явно закрывает соединение, реализация пулов может немедленно повторно использовать это соединение. Если соединение не закрыто, другие приложения не могут его использовать. Приложение может использовать конструкцию`finally`, чтобы убедиться в том, что соединения закрываются даже в случае, если происходит исключение.  
  
> [!NOTE]  
> В текущей версии драйвер JDBC не вызывает хранимую процедуру sp_reset_connection, когда соединение возвращается в пул. Драйверу необходимо, чтобы сервера приложений Java сторонних разработчиков возвращали соединения в исходное состояние.  
  
## <a name="see-also"></a>См. также раздел

[Подключение к SQL Server с помощью JDBC Driver](../../connect/jdbc/connecting-to-sql-server-with-the-jdbc-driver.md)  
