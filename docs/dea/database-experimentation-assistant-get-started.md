---
title: Начало работы с базы данных службы "Экспериментирование" Assistant для обновления до SQL Server
description: Начало работы с помощник базы данных службы "Экспериментирование"
ms.custom: ''
ms.date: 10/22/2018
ms.prod: sql
ms.prod_service: dea
ms.suite: sql
ms.technology: dea
ms.tgt_pltfrm: ''
ms.topic: conceptual
author: HJToland3
ms.author: ajaykar
ms.reviewer: mathoma
manager: craigg
ms.openlocfilehash: 45cd72d4383b0bae756b7b8f59502c981dfd6622
ms.sourcegitcommit: 45a9d7ffc99502c73f08cb937cbe9e89d9412397
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/22/2019
ms.locfileid: "66015124"
---
# <a name="get-started-with-database-experimentation-assistant"></a>Начало работы с помощник базы данных службы "Экспериментирование"

Помощник по базе данных службы "Экспериментирование" (веб) является A / B-тестирование решения для изменений в средах SQL Server, таких как обновления или новые индексы. Инициатив поможет вам оценить, как рабочая нагрузка на исходном сервере (в текущей среды) будет выполнять в новой среде. Инициатив поможет выполнить запуск A / B-тестирования, выполнив три шага: 

- Сбор
- воспроизведение
- Анализ

В этой статье поможет выполнить следующие действия.

## <a name="capture"></a>Сбор

Первым шагом SQL Server, объект / B-тестирования – это записать трассировку на исходном сервере. Исходный сервер обычно является рабочего сервера. Файлы трассировки записи всей рабочей нагрузки на этом сервере, включая отметки времени. Позднее эта трассировка воспроизводится на целевых серверах для анализа. Отчет об анализе обеспечивает анализ на разницу в производительности рабочей нагрузки между двумя целевыми серверами.

Рекомендации

- Перед началом записи трассировки, убедитесь, что резервное копирование баз данных, из которых которого захватываются данные трассировки.
- Пользователь Инициатив, должен быть настроен для подключения к базе данных с использованием проверки подлинности Windows.
- Учетной записи службы SQL Server требуется доступ к пути файла трассировки источника.

Чтобы записать трассировку на исходном сервере:

1. В Инициатив, перейдите в раздел **захватывает все** , выбрав значок камеры в меню слева.

   ![Меню навигации слева](./media/database-experimentation-assistant-get-started/dea-get-started-leftnav.png)

1. Введите или выберите следующие сведения:

   - **Имя трассировки**: Имя файла для нового файла трассировки, которые вы создаете. Избегайте имя трассировки, которое использует файл продолжения, например, CaptureName\_NNN.
   - **Длительность**: Длительность записи.
   - **Имя экземпляра SQL Server**: Экземпляр SQL Server, из которого вы хотите собирать трассировки.
   - **Имя базы данных**: Имя базы данных на компьютере, на котором выполняется SQL Server требуется записать трассировку. Если оставить пустым, трассировки записываются из всех баз данных на сервере.
   - **Путь для сохранения файла трассировки источника, на компьютере SQL Server**: Путь к папке, где нужно сохранить в файл трассировки.

1. Убедитесь, что целевой объект резервная копия базы данных. Выберите поле базы данных.
1. Выберите **запустить** для запуска отслеживания.

Можно просмотреть ход выполнения отслеживания, в том числе время начала, длительности и оставшееся время. Также для начала новой записи, во время ожидания для завершения этой записи. После завершения записи использовать в выходном файле трассировки, чтобы начать второй этап: воспроизведение файла трассировки на целевых серверах.

Часто задаваемые вопросы о записи трассировки, см. в разделе [записи часто задаваемые вопросы о](database-experimentation-assistant-capture-trace.md#frequently-asked-questions-about-trace-capture).

## <a name="replay"></a>воспроизведение

На втором шаге SQL Server A / B-тестирования используется воспроизведение файла трассировки, которые были собраны для целевых серверов. Затем соберите расширенные трассировки из воспроизведения для анализа. 

Воспроизведение файла трассировки на два целевых серверах: тот, который имитирует исходного сервера (цель 1) и тот, который имитирует предполагаемого изменения (целевой 2). Конфигурации оборудования, цель 1 и 2 целевой должно быть как можно более одинаковыми, чтобы SQL Server точно выполнить анализ влияния производительности из предлагаемых вами изменений.

Рекомендации

- Для запуска воспроизведения, компьютеры необходимо настроить для запуска трассировки распределенного воспроизведения (DReplay). Дополнительные сведения см. в разделе [установки контроллера и клиента распределенного воспроизведения](https://blogs.msdn.microsoft.com/datamigration/distributed-replay-controller-and-client-setup/).
- Убедитесь, что восстановление баз данных на целевых серверах с помощью резервной копии с исходного сервера.
- Кэширование запросов в SQL Server может повлиять на результаты оценки. Мы рекомендуется перезапустить службу SQL Server (MSSQLSERVER) в приложения службы, чтобы улучшить согласованность в результатах оценки.

Для воспроизведения файла трассировки:

1. В Инициатив, выберите значок воспроизведения в меню слева, чтобы перейти к **все воспроизведения**. Список последних воспроизведения, работающих во время сеанса, если имеется, отображаются. Чтобы начать новый воспроизведения, выберите **новый воспроизведения**.

1. Введите или выберите следующие сведения:

   - **Имя воспроизведения**: Имя файла для воспроизведения трассировки.
   - **Имя компьютера контроллера**: Имя компьютера контроллера распределенного воспроизведения.
   - **Путь к файлу источника трассировки на контроллере**: Путь к файлу для файла трассировки источника, из [записи](#capture).
   - **Имя экземпляра SQL Server**: Имя экземпляра SQL Server, на котором для воспроизведения трассировки источника.
   - **Путь для сохранения файла трассировки целевой на компьютере SQL Server**: Путь к папке для результирующий файл трассировки воспроизведения.

1. Установите флажок для восстановления резервной копии в первом шаге.

1. Выберите **запустить** запустить воспроизведение. 

Можно просмотреть состояние вашей воспроизведения. После можно воспроизвести трассировку источника для обоих серверов, вы готовы для создания отчета об анализе.

Часто задаваемые вопросы о воспроизведения см. в разделе [воспроизведения часто задаваемые вопросы о](database-experimentation-assistant-replay-trace.md#frequently-asked-questions-about-trace-replay).

## <a name="analysis"></a>Анализ

Последним шагом является создание отчета об анализе с помощью воспроизведения трассировок. Отчет об анализе помогут вам получить представление о влиянии на производительность предлагаемого изменения.

Рекомендации

- Если отсутствует один или несколько компонентов, необходимых компонентов страницу со ссылками для загрузки появляется при попытке создать отчет анализа (требуется подключение к Интернету).
- Чтобы просмотреть отчет, который был создан в более ранней версии средства, необходимо сначала обновить схему.

Для создания отчета об анализе:

1. В меню слева, перейдите в раздел **отчеты с анализом**. Подключитесь к компьютеру под управлением SQL Server, где хранятся ваши базы данных отчетов. Появится список всех отчетов на сервере. Чтобы создать новый отчет, выберите **новый отчет**.

1. Введите или выберите сведения, необходимые для создания отчета:

   - **Имя отчета**: Имя создаваемого отчет об анализе.
   - **Трассировки для SQL Server цель 1**: Путь для файла трассировки из воспроизведения на цель 1.
   - **Трассировка для целевого 2 сервера SQL Server**: Путь для файла трассировки из воспроизведения на целевом 2.

1. Выберите **запустить** для создания отчета. Новый отчет отображается в верхней части списка. Значок рядом с отчетом становится зеленой галочкой, если отчет был создан.

Теперь просмотрите отчет об анализе получать ценные сведения, предоставляемые вашей A / B-тестирования.

Часто задаваемые вопросы об отчетах анализа, см. в разделе [анализ часто задаваемые вопросы о](database-experimentation-assistant-create-report.md#frequently-asked-questions-about-analysis-reports).

### <a name="analysis-report"></a>Отчет об анализе

На первой странице отчета отображается сведения о версии и сборке для целевых серверов, на которых эксперимент был выполнен. Пороговое значение можно использовать для корректировки чувствительности и устойчивости к ошибкам в A / B-анализ. Пороговое значение по умолчанию составляет 5%. К категории никакого усовершенствования производительности, больше или равно 5% **Improved**. Выберите параметры в раскрывающемся меню для оценки в отчете с помощью пороговых значений производительности.

![Порог](https://msdnshared.blob.core.windows.net/media/2017/03/threshold.jpg)

Двух секторных диаграммах показано влияние на производительность разницу между двумя целевых серверов для рабочей нагрузки. Слева основан на число выполнений. Правой части диаграммы основан на уникальных запросов. Существует пять возможных категорий:

- **Улучшенная**:  С точки зрения статистики на выполнение запроса потребовалось лучше на целевой 2, чем на 1 целевой объект.
- **Снижение**: С точки зрения статистики запроса запустили хуже целевой 2, чем на 1 целевой объект.
- **Же**: Нет никакой статистический разницы для запроса между целевой 1 и 2 целевой.
- **Не удается вычислить**: Размер выборки для запроса слишком мал для статистического анализа. Для A / B тестирование анализа, Инициатив требуются те же запросы, чтобы иметь по крайней мере 30 выполнений на каждом конечном объекте.
- **Ошибка**. Запрос, завершившиеся сбоем по крайней мере один раз на одном из целевых объектов.

![Круговая диаграмма](./media/database-experimentation-assistant-get-started/dea-get-started-piechart.png)

Выберите срез, чтобы перейти к определенной категории и получить метрики производительности, включая **невозможно вычислить** среза круговой диаграммы.

Странице детализации для производительности изменить категорию показывает список запросов в этой категории. **Ошибка** страница содержит три вкладки:

- **Новые ошибки**: Ошибки, которые были доступны на целевой 2, но не на целевом 1.
- **Существующие ошибки**: Ошибки, которые были доступны на цель 1 и 2 целевой объект.
- **Разрешить ошибки**: Ошибки, которые были доступны в целевой 1, но не на целевом 2.

   ![Страница ошибки](./media/database-experimentation-assistant-get-started/dea-get-started-errorpage.png)

Выберите запрос, чтобы перейти к **Сводка сравнения** страницы для этого запроса.

**Сводка сравнения** странице отображаются сводные статистические данные для этого запроса. Сводка содержит число выполнений, среднее время, среднее значение ЦП, mean операций чтения и записи и число ошибок.

![Сводка статистики](./media/database-experimentation-assistant-get-started/dea-get-started-summarystats.png)

Если запрос является запросом ошибка **сведения об ошибке** вкладке отображаются дополнительные сведения об ошибке. **Данные плана запроса** вкладке отображаются сведения о планах запросов, которые используются для запроса на цель 1 и 2 целевой объект.

![План запроса](./media/database-experimentation-assistant-get-started/dea-get-started-queryplan.png)

На любой странице отчета анализа выберите **печати** вверху право на печать все, который является видимым.

## <a name="next-steps"></a>Следующие шаги

- Чтобы узнать, как создать файл трассировки, который имеет журнал событий, происходящих на сервере, см. в разделе [захвата трассировки](database-experimentation-assistant-capture-trace.md).

- 19-минутный введение Инициатив и демонстрации в следующем видео:

  > [!VIDEO https://channel9.msdn.com/Shows/Data-Exposed/Introducing-the-Database-Experimentation-Assistant/player]
