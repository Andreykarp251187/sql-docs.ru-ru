---
title: Определение секций в моделях Analysis Services DirectQuery | Документация Майкрософт
ms.date: 05/07/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: tabular-models
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: f6de0417055adc506fc6d9940aa3fa349f59c658
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "63019296"
---
# <a name="define-partitions-in-directquery-models"></a>Определение секций в моделях DirectQuery
[!INCLUDE[ssas-appliesto-sqlas-aas](../../includes/ssas-appliesto-sqlas-aas.md)]
  В этом разделе объясняется использование секций в моделях DirectQuery. Более общие сведения о секциях в табличных моделях, см. в разделе [секций](../../analysis-services/tabular-models/partitions-ssas-tabular.md).  
  
> [!NOTE]  
>  Хотя у таблицы может быть несколько секций, в режиме DirectQuery только одну из них можно назначить для выполнения запроса. Требование использовать одну секцию относится к моделям DirectQuery на всех уровнях совместимости.  
  
## <a name="using-partitions-in-directquery-mode"></a>Использование секций в режиме Direct Query  
 Для каждой таблицы следует указать одну секцию, которая будет использоваться в качестве источника данных DirectQuery.  Если есть несколько секций, при переводе модели в режим DirectQuery по умолчанию первая секция, которая была создана в таблице, будет отмечена как секция DirectQuery. Ее можно будет изменить позже с помощью диспетчера секций в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].  
  
 Почему в режиме DirectQuery разрешена только одна секция?  
  
 В табличных моделях, таких как OLAP-модели, секции таблицы определяются с помощью SQL-запросов. Разработчик, создающий определение секции, должен следить за тем, чтобы секции не пересекались. Службы Analysis Services не проверяют принадлежность записей к одной или нескольким секциям.  
  
 Секции в кэшированной табличной модели ведут себя одинаково. При использовании модели, находящейся в памяти во время доступа к кэшу, DAX-формулы вычисляются для каждой секции, а результаты объединяются. Тем не менее, когда табличная модель работает в режиме DirectQuery, невозможно выполнить вычисление для нескольких секций, объединить результаты и преобразовать их в одну инструкцию SQL для отправки в реляционное хранилище данных. Это может привести к неприемлемой потере производительности, а также к потенциально неточным результатам после их объединения.  
  
 Поэтому для запросов, ответ на которые создается в режиме DirectQuery, сервер использует одну секцию, которая была помечена как первичная секция для доступа DirectQuery. Она называется *секцией DirectQuery*.  SQL-запрос, указанный в определении этой секции, определяет полный набор данных, которые могут использоваться для ответов на запросы в режиме DirectQuery.  
  
 Если явно определенных секций нет, ядро просто создает SQL-запрос для всего реляционного источника данных, выполняет операции на основе наборов, определяемые DAX-формулой, и возвращает результаты запроса.  
  
  
## <a name="change-a-directquery-partition"></a>Изменение секции DirectQuery  
 Поскольку только одну секцию в таблице можно определить как секцию DirectQuery, службы Analysis Services по умолчанию используют первую секцию, созданную в таблице. При создании проекта модели секцию DirectQuery можно изменять с помощью диалогового окна «Диспетчер секций» в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]. Для развернутых моделей изменить секцию DirectQuery можно с помощью среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].  
  
#### <a name="change-the-directquery-partition-for-a-tabular-model-project"></a>Изменение секции DirectQuery для проекта табличной модели  
  
1.  В конструкторе моделей в среде [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]щелкните таблицу (вкладку), содержащую секционированную таблицу.  
  
2.  В меню **Таблица** выберите **Секции**.  
  
3.  В **диспетчере секций**секцией является текущая секция DirectQuery, имя которой содержит префикс **(DirectQuery)** .  
  
     Выберите другую секцию в списке **Секции** , затем выберите **Установить в качестве DirectQuery**. Кнопка **Установить в качестве DirectQuery** неактивна, если выбрана текущая секция DirectQuery, и не отображается, если в модели не поддерживается режим прямых запросов.  
  
4.  При необходимости измените параметры обработки и нажмите кнопку **ОК**.  
  
#### <a name="change-the-directquery-partition-for-a-deployed-tabular-model"></a>Изменение секции DirectQuery для развернутой табличной модели  
  
1.  В [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]откройте шаблон базы данных в обозревателе объектов.  
  
2.  Разверните узел **Таблицы** , щелкните правой кнопкой мыши секционированную таблицу и выберите команду **Секции**.  
  
     Имя секции, определенной для использования в режиме DirectQuery, имеет префикс (DirectQuery).  
  
3.  Чтобы перейти к другой секции, щелкните значок **Прямой запрос** на панели инструментов, чтобы открыть диалоговое окно **Настройка секции DirectQuery** . Значок панели инструментов DirectQuery недоступен в моделях, не поддерживающих прямые запросы.  
  
4.  Выберите другую секцию в раскрывающемся списке **Имя секции** и при необходимости измените параметры обработки.  
  
## <a name="partitions-in-cached-models-and-in-directquery-models"></a>Секции в кэшированных моделях и в моделях DirectQuery  
 Во время настройки секции DirectQuery следует указать параметры обработки для секции.  
  
 Для секции DirectQuery есть два параметра обработки. Чтобы задать это свойство, воспользуйтесь **Диспетчером секций** в [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]или [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]и выберите свойство **Параметр обработки** . В следующей таблице перечислены значения этого свойства и описан результат применения каждого значения при объединении со свойством DirectQueryUsage в строке подключения.  
  
|Свойство**Строка подключения**|Свойство**Параметр обработки**|Примечания|  
|------------------------------------|------------------------------------|-----------|  
|DirectQuery|Никогда не обрабатывать эту секцию|Когда модель использует только DirectQuery, обработка не требуется.<br /><br /> В гибридных моделях можно настроить секцию DirectQuery так, чтобы она никогда не обрабатывалась. Например, если выполняется работа с большим набором данных, при этом нет необходимости добавлять все результаты в кэш, можно указать, чтобы секция DirectQuery включала объединение результатов для всех других секций в таблице и не обрабатывала объединение. Это не касается запросов к реляционному источнику, а запросы к кэшированным данным будут содержать объединенные данные из других секций.|  
|DataView=Sample<br /><br /> Применяется к табличным моделям, использующим представления образцов данных|Разрешить обработку секции|Если модель использует образец данных, вы можете обработать таблицу, чтобы вернуть отфильтрованный набор данных, который обеспечивает визуальные подсказки во время разработки модели.|  
|DirectQueryUsage=InMemory With DirectQuery<br /><br /> Применяется к табличным моделям 1100 или 1103, использующим сочетание режима выполнения в памяти и режима DirectQuery.|Разрешить обработку секции|Если модель использует гибридный режим, то для запросов к источнику данных в памяти и источнику данных DirectQuery следует использовать одну и ту же секцию.|  
  
## <a name="see-also"></a>См. также  
 [Секции](../../analysis-services/tabular-models/partitions-ssas-tabular.md)  
  
  
