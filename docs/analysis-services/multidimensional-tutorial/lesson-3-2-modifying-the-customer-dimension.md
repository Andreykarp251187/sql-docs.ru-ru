---
title: Изменение измерения «Заказчик» | Документация Майкрософт
ms.date: 05/06/2019
ms.prod: sql
ms.technology: analysis-services
ms.custom: multidimensional-models
ms.topic: tutorial
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: bbe4fbfc2cad2df41a1d9bd14fcb2620e2dec5c1
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "65403646"
---
# <a name="lesson-3-2---modifying-the-customer-dimension"></a>Занятие 3 – 2-изменение измерения «Заказчик»
[!INCLUDE[ssas-appliesto-sqlas](../../includes/ssas-appliesto-sqlas.md)]

Существует много способов повысить удобство использования и функциональность измерений куба. При выполнении задач этого раздела будет изменено измерение «Заказчик».  
  
## <a name="renaming-attributes"></a>Переименование атрибутов  
Имена атрибутов можно изменить на вкладке **Структура измерения** конструктора измерений.  
  
#### <a name="to-rename-an-attribute"></a>Переименование атрибута  
  
1.  Откройте измерение "Заказчик" в **конструкторе измерений** среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]. Для этого дважды щелкните измерение **Заказчик** в узле **Измерения** обозревателя решений.  
  
2.  На панели **Атрибуты** щелкните правой кнопкой мыши атрибут **English Country Region Name**и выберите команду **Переименовать**. Измените имя атрибута на **Country-Region**.  
  
3.  Аналогичным образом измените имена следующих атрибутов.  
  
    -   **English Education** атрибута — изменить на **для образовательных учреждений**  
  
    -   **English Occupation** атрибута — измените **род занятий**  
  
    -   **State Province Name** атрибута — изменить на **State-Province**  
  
4.  В меню **Файл** выберите команду **Сохранить все**.  
  
## <a name="creating-a-hierarchy"></a>Создание иерархии  
Иерархию можно создать, перетащив атрибут с панели **Атрибуты** на панель **Иерархии** .  
  
#### <a name="to-create-a-hierarchy"></a>Создание иерархии  
  
1.  Перетащите атрибут **Country-Region** с панели **Атрибуты** на панель **Иерархии** .  
  
2.  Перетащите атрибут **State-Province** с панели **Атрибуты** в ячейку **<new level>** на панели **Иерархии** под уровнем **Country-Region** .  
  
3.  Перетащите атрибут **City** с панели **Атрибуты** в ячейку **<new level>** на панели **Иерархии** под уровнем **State-Province** .  
  
4.  На панели **Иерархии** на вкладке **Структура измерения** щелкните правой кнопкой мыши строку заголовка окна **Иерархия** , выберите команду **Переименовать**и введите **География заказчиков**.  
  
    Теперь иерархия называется **География заказчиков**.  
  
5.  В меню **Файл** выберите команду **Сохранить все**.  
  
## <a name="adding-a-named-calculation"></a>Добавление именованного вычисления  
К таблице в представлении источника данных можно добавить именованное вычисление, которое является выражением SQL и представляет собой вычисляемый столбец, Это выражение имеет вид и функции столбца таблицы. Именованные вычисления позволяют расширять реляционную схему таблиц, существующих в представлении источника данных, не изменяя структуру таблиц в базовом источнике данных. Дополнительные сведения см. в разделе [Определение именованных вычислений в представлении источника данных (службы Analysis Services)](../multidimensional-models/define-named-calculations-in-a-data-source-view-analysis-services.md).  
  
#### <a name="to-add-a-named-calculation"></a>Добавление именованного вычисления  
  
1.  Откройте представление источника данных **[!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] DW 2012**, дважды щелкнув его в папке **Представления источников данных** обозревателя решений.  
  
2.  На панели **Таблицы** слева щелкните правой кнопкой мыши таблицу **Заказчик**и выберите команду **Создать именованное вычисление**.  
  
3.  В диалоговом окне **Создание именованного вычисления** в поле **Имя столбца** введите **FullName** , а затем введите или скопируйте и вставьте в поле **Выражение** следующую инструкцию **CASE** :  
  
    ```  
    CASE  
       WHEN MiddleName IS NULL THEN  
       FirstName + ' ' + LastName  
       ELSE  
       FirstName + ' ' + MiddleName + ' ' + LastName  
    END  
    ```  
  
    Инструкция **CASE** объединяет столбцы **FirstName**, **MiddleName**и **LastName** в один столбец, который затем можно использовать в измерении "Заказчик" в качестве отображаемого имени для атрибута **Customer** .  
  
4.  Нажмите кнопку **ОК**, а затем разверните узел **Заказчик** на панели **Таблицы** .  
  
    Именованное вычисление **FullName** отображается в списке столбцов таблицы "Заказчик" со значком, обозначающим, что это именованное вычисление.  
  
5.  В меню **Файл** выберите команду **Сохранить все**.  
  
6.  На панели **Таблицы** щелкните правой кнопкой мыши таблицу **Заказчик**и выберите пункт **Просмотр данных**.  
  
7.  Просмотрите последний столбец в представлении **Просмотр таблицы "Заказчик"** .  
  
    Обратите внимание на то, что в представлении источника данных появился столбец **FullName** , содержащий сцепление данных из других столбцов источника данных; при этом исходный источник данных изменять не пришлось.  
  
8.  Закройте вкладку **Просмотр таблицы Customer** .  
  
## <a name="using-the-named-calculation-for-member-names"></a>Использование именованных вычислений в качестве имен элементов  
После создания именованного вычисления в представлении источника данных это вычисление можно использовать в качестве свойства атрибута.  
  
#### <a name="to-use-the-named-calculation-for-member-names"></a>Использование именованного вычисления в качестве имен элементов  
  
1.  В конструкторе измерений откройте измерение Customer.  
  
2.  На панели **Атрибуты** вкладки **Структура измерения** выберите атрибут **Customer Key** .  
  
3.  Откройте окно "Свойства" и нажмите в строке заголовка кнопку **Автоматически скрывать** , чтобы оно оставалось открытым.  
  
4.  В поле свойства **Name** введите **Полное имя**.  
  
5.  Щелкните в **NameColumn** свойство в нижней части, а затем нажмите кнопку обзора ( **...** ) кнопку, чтобы открыть **столбец имени** диалоговое окно.  
  
6.  Выберите пункт **FullName** внизу списка **Исходный столбец** и нажмите кнопку **OK**.  
  
7.  На вкладке "Структура измерений" перетащите атрибут **Полное имя** с панели **Атрибуты** в ячейку **<new level>** на панели **Иерархии** под уровень **City** .  
  
8.  В меню **Файл** выберите команду **Сохранить все**.  
  
## <a name="defining-display-folders"></a>Определение папок отображения  
Папки отображения позволяют группировать пользовательские иерархии и иерархии атрибутов в структуры папок, удобные для пользователя.  
  
#### <a name="to-define-display-folders"></a>Определение папок отображения  
  
1.  Откройте вкладку **Структура измерения** для измерения "Заказчик".  
  
2.  На панели **Атрибуты** выберите следующие атрибуты (щелкните каждый из них, удерживая нажатой клавишу CTRL):  
  
    -   **City**  
  
    -   **Country-Region**  
  
    -   **Почтовый индекс**  
  
    -   **State-Province**  
  
3.  В окне "Свойства" щелкните поле свойства **AttributeHierarchyDisplayFolder** сверху (может потребоваться навести указатель на элемент, чтобы увидеть его полное имя) и введите **Расположение**.  
  
4.  На панели **Иерархии** щелкните элемент **География заказчиков**и в окне "Свойства" справа выберите пункт **Расположение** в качестве значения свойства **DisplayFolder** .  
  
5.  На панели **Атрибуты** выберите следующие атрибуты (щелкните каждый из них, удерживая нажатой клавишу CTRL):  
  
    -   **Расстояние до работы**  
  
    -   **Education**  
  
    -   **Пол**  
  
    -   **House Owner Flag**  
  
    -   **Семейное положение**  
  
    -   **Number Cars Owned**  
  
    -   **Number Children At Home**  
  
    -   **Occupation**  
  
    -   **Общее количество детей**  
  
    -   **Годовой доход**  
  
6.  В окне свойств щелкните поле свойства **AttributeHierarchyDisplayFolder** сверху и введите **Демография**.  
  
7.  На панели **Атрибуты** выберите следующие атрибуты (щелкните каждый из них, удерживая нажатой клавишу CTRL):  
  
    -   **Email Address**  
  
    -   **Phone**  
  
8.  В окне свойств щелкните поле свойства **AttributeHierarchyDisplayFolder** и введите **Контакты**.  
  
9. В меню **Файл** выберите команду **Сохранить все**.  
  
## <a name="defining-composite-keycolumns"></a>Определение составных ключевых столбцов  
Свойство **KeyColumns** содержит столбец или столбцы, представляющие ключ для атрибута. На этом занятии будет создан составной ключ для атрибутов **City** и **State-Province** . Составные ключи могут оказаться полезными для уникальной идентификации атрибута. Например, при определении связи атрибутов далее в этом учебнике атрибут **City** должен уникально идентифицировать атрибут **State-Province** . Однако в разных областях бывают города с одинаковыми названиями. Поэтому для атрибута **City** необходимо создать составной ключ, состоящий из столбцов **StateProvinceName** и **City** . Дополнительные сведения см. в разделе [Изменение свойства KeyColumn атрибута](../multidimensional-models/attribute-properties-modify-the-keycolumn-property.md).  
  
#### <a name="to-define-composite-keycolumns-for-the-city-attribute"></a>Определение составного свойства KeyColumns для атрибута City  
  
1.  Откройте вкладку **Структура измерения** для измерения "Заказчик".  
  
2.  На панели **Атрибуты** щелкните атрибут **City** .  
  
3.  В окне **Свойства** щелкните в поле **KeyColumns** ближе к нижней части и нажмите кнопку обзора ( **...** ).  
  
4.  В диалоговом окне **Ключевые столбцы** в списке **Доступные столбцы** выберите столбец **StateProvinceName**и нажмите кнопку **>** .  
  
    Теперь в списке **Ключевые столбцы** отображаются столбцы **City** и **StateProvinceName** .  
  
5.  Нажмите кнопку **ОК**.  
  
6.  Чтобы задать свойство **NameColumn** атрибута **City** , щелкните в окне свойств поле **NameColumn** и нажмите кнопку обзора ( **...** ).  
  
7.  В диалоговом окне **Столбец имени** в списке **Исходный столбец** выберите **City**и нажмите кнопку **ОК**.  
  
8.  В меню **Файл** выберите команду **Сохранить все**.  
  
#### <a name="to-define-composite-keycolumns-for-the-state-province-attribute"></a>Определение составного свойства KeyColumns для атрибута «Республика, область или край»  
  
1.  Убедитесь в том, что вкладка **Структура измерения** для измерения "Заказчик" открыта.  
  
2.  На панели **Атрибуты** щелкните атрибут **State-Province** .  
  
3.  В окне **Свойства** щелкните в поле **KeyColumns** и нажмите кнопку обзора ( **...** ).  
  
4.  В диалоговом окне **Ключевые столбцы** в списке **Доступные столбцы** выберите столбец **EnglishCountryRegionName**и нажмите кнопку **>** .  
  
    Теперь в списке **Ключевые столбцы** отображаются столбцы **EnglishCountryRegionName** и **StateProvinceName** .  
  
5.  Нажмите кнопку **ОК**.  
  
6.  Чтобы задать свойство **NameColumn** атрибута **State-Province** , щелкните в окне свойств поле **NameColumn** и нажмите кнопку обзора ( **...** ).  
  
7.  В диалоговом окне **Столбец имени** в списке **Исходный столбец** выберите **StateProvinceName**и нажмите кнопку **ОК**.  
  
8.  В меню **Файл** выберите команду **Сохранить все**.  
  
## <a name="defining-attribute-relationships"></a>Определение связей атрибутов  
Необходимо определять связи между атрибутами, если базовые данные это поддерживают. Определение связей между атрибутами ускоряет обработку измерений, секций и запросов. Дополнительные сведения см. в разделах [Определение связей атрибутов](../multidimensional-models/attribute-relationships-define.md) и [Связи атрибутов](../multidimensional-models-olap-logical-dimension-objects/attribute-relationships.md).  
  
#### <a name="to-define-attribute-relationships"></a>Определение связей атрибутов  
  
1.  В **конструкторе измерений** для измерения "Заказчик" откройте вкладку **Связи атрибутов** . Возможно, потребуется подождать.  
  
2.  На диаграмме щелкните правой кнопкой мыши атрибут **Город** и выберите команду **Создать связь атрибутов**.  
  
3.  В диалоговом окне **Создание связи атрибутов** поле **Исходный атрибут** содержит значение **Город**. Для поля **Связанный атрибут** задайте значение **Республика — область или край**.  
  
4.  В списке **Тип связи** выберите тип **Жесткая**.  
  
    Связь имеет тип **Жесткая**, так как связи между элементами не будут меняться с течением времени. Например, переход города под юрисдикцию другого штата или провинции — явление крайне редкое.  
  
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
6.  На диаграмме щелкните правой кнопкой мыши атрибут **Республика — область или край** и выберите команду **Создать связь атрибутов**.  
  
7.  В диалоговом окне **Создание связи атрибутов** поле **Исходный атрибут** имеет значение **Республика — область или край**. Задайте для поля **Связанный атрибут** значение **Страна — регион**.  
  
8.  В списке **Тип связи** выберите тип **Жесткая**.  
  
9. Нажмите кнопку **ОК**.  
  
10. В меню **Файл** выберите команду **Сохранить все**.  
  
## <a name="deploying-changes-processing-the-objects-and-viewing-the-changes"></a>Развертывание изменений, обработка объектов и просмотр изменений  
После изменения атрибутов и иерархий необходимо произвести развертывание произведенных изменений и повторную обработку связанных объектов, прежде чем эти изменения можно будет просмотреть.  
  
#### <a name="to-deploy-the-changes-process-the-objects-and-view-the-changes"></a>Развертывание изменений, обработка объектов и просмотр изменений  
  
1.  В меню **Построение** среды [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]выберите команду **Развернуть Analysis Services Tutorial**.  
  
2.  Получив сообщение **Развертывание выполнено успешно** , в конструкторе измерений перейдите на вкладку **Браузер** измерения "Заказчик" и щелкните на панели инструментов значок повторного соединения.  
  
3.  Убедитесь в том, что в списке **Иерархия** выделена иерархия **География заказчиков** , на панели браузера последовательно разверните узлы **Все**, **Australia**(Австралия), **New South Wales**(Новый Южный Уэльс) и, наконец, **Coffs Harbour**(Коффс Харбор).  
  
    В браузере отображаются заказчики, живущие в этом городе.  
  
4.  Переключитесь в **конструктор кубов** для куба учебника по службам [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]. Чтобы сделать это, дважды щелкните куб **Учебник по службам Analysis Services** , который находится в узле **Кубы** в дереве **обозревателя решений**.  
  
5.  Перейдите на вкладку **Браузер** и на панели инструментов конструктора нажмите кнопку повторного соединения.  
  
6.  На панели **Группа мер** разверните узел **Заказчик**.  
  
    Обратите внимание, что вместо длинного списка атрибутов для измерения «Заказчик» отображаются только папки отображения и те атрибуты, для которых не указана папка отображения.  
  
7.  В меню **Файл** выберите команду **Сохранить все**.  
  
## <a name="next-task-in-lesson"></a>Следующая задача занятия  
[Изменение измерения Product](lesson-3-3-modifying-the-product-dimension.md)  
  
## <a name="see-also"></a>См. также  
[Справочник по свойствам атрибута измерения](../multidimensional-models/dimension-attribute-properties-reference.md)  
[Удаление атрибута из измерения](../multidimensional-models/attribute-properties-remove-an-attribute-from-a-dimension.md)  
[переименовать атрибут](../multidimensional-models/attribute-properties-rename-an-attribute.md)  
[Определение именованных вычислений в представлении источника данных (службы Analysis Services)](../multidimensional-models/define-named-calculations-in-a-data-source-view-analysis-services.md)  
  
