---
title: 'Analysis Services занятие для учебника по 4: Создание связей | Документация Майкрософт'
ms.date: 03/08/2019
ms.prod: sql
ms.technology: analysis-services
ms.custom: tabular-models
ms.topic: tutorial
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
monikerRange: '>= sql-server-2017 || = sqlallproducts-allversions'
ms.openlocfilehash: 7f593dafc1a734cd5f3a0c9fde4f47987f0b92af
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "68207363"
---
# <a name="create-relationships"></a>Создавать связи

[!INCLUDE[ssas-appliesto-sql2017-later-aas](../../includes/ssas-appliesto-sql2017-later-aas.md)]

На этом занятии вы проверьте связи, которые были автоматически созданы при импорте данных и добавить новые связи между различными таблицами. Связь — это соединение между двумя таблицами, которое определяет, каким образом должны соотноситься данные этих таблиц. Например, таблица DimProduct и таблица DimProductSubcategory содержат связь на основе того факта, что каждый продукт принадлежит подкатегории. Дополнительные сведения см. в разделе [связи](../tabular-models/relationships-ssas-tabular.md).
  
Предполагаемое время для выполнения этого занятия: **10 минут**  
  
## <a name="prerequisites"></a>Предварительные требования  

Эта статья входит в учебник по табличному моделированию, который следует изучать в порядке. Перед выполнением задач на этом занятии, необходимо завершить предыдущее занятие: [Занятие 3. Пометить как таблицу дат](../tutorial-tabular-1400/as-lesson-3-mark-as-date-table.md). 
  
## <a name="review-existing-relationships-and-add-new-relationships"></a>Обзор существующих связей и добавление новых  

При импорте данных с помощью получения данных, вы получили семь таблиц из базы данных AdventureWorksDW. Как правило при импорте данных из реляционного источника существующие связи автоматически импортируются вместе с данными. Чтобы получить данные для автоматического создания связей в модели данных должен быть связей между таблицами в источнике данных.

Прежде чем продолжить создание модели, следует проверить эти связи между таблицами созданы правильно. Для этого руководства вы также добавите три новых связи.  

  
#### <a name="to-review-existing-relationships"></a>Просмотр существующих связей  
  
1.  Нажмите кнопку **модели** меню > **представление модели** > **представление схемы**.  

    Конструктор моделей теперь отображается в представлении диаграммы — графическом формате отображения всех таблиц было импортировано с линиями между ними. Линии между таблицами указывают на связи, которые были автоматически созданы во время импорта данных.
    
    ![как схема lesson4](../tutorial-tabular-1400/media/as-lesson4-diagram.png)
  
    > [!NOTE]
    > Если вы не видите никаких связей между таблицами, он скорее всего, означает, что существует ни одной связи между этими таблицами в источнике данных.

    Включив большее число таблиц, с помощью мини-карту элементов управления в правом нижнем углу конструктора моделей. Можно также выбирать и перетаскивать таблицы в другие места. Например, их можно свести вместе или разместить в определенном порядке. Перемещение таблиц не влияет на связи между таблицами. Чтобы просмотреть все столбцы в определенной таблице, щелкните и перетащите ее край, чтобы развернуть или уменьшить ее.  
  
2.  Щелкните сплошную линию между **DimCustomer** таблицы и **DimGeography** таблицы. Сплошная линия между этими двумя таблицами показывает, что связь активна, то есть он используется по умолчанию при вычислении формул DAX.  
  
    Обратите внимание, что **GeographyKey** столбца в **DimCustomer** таблицы и **GeographyKey** столбца в **DimGeography** таблицы теперь оба Каждый появились в блоке. Эти столбцы используются в связи. Свойства связи также отображаются в **свойства** окна.  
  
    > [!TIP]  
    > Можно также использовать диалоговое окно «Управление связями» для отображения связей между всеми таблицами в табличном формате. В обозревателе табличных моделей, щелкните правой кнопкой мыши **связи** > **управление связями**.
  
3.  Убедитесь, что следующие связи были созданы при импорте каждой из таблиц из базы данных AdventureWorksDW:  
  
    |Активен|Таблица|Связанная таблица подстановки|  
    |----------|---------|------------------------|  
    |Да|**DimCustomer [GeographyKey]**|**DimGeography [GeographyKey]**|  
    |Да|**DimProduct [ProductSubcategoryKey]**|**DimProductSubcategory [ProductSubcategoryKey]**|  
    |Да|**DimProductSubcategory [ProductCategoryKey]**|**DimProductCategory [ProductCategoryKey]**|  
    |Да|**FactInternetSales [CustomerKey]**|**DimCustomer [CustomerKey]**|  
    |Да|**FactInternetSales [ProductKey]**|**DimProduct [ProductKey]**|  
  
    Если какие-либо связи отсутствуют, убедитесь, что модель включает в себя следующие таблицы: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory и FactInternetSales. Если таблицы из одного подключения к источнику данных импортируются в разное время, связи между этими таблицами не создаются автоматически и должны быть созданы вручную. Если связи не отображаются, это означает, что в источнике данных нет связей. Их можно создать вручную в модели данных.

### <a name="take-a-closer-look"></a>Рассмотрим это более подробно

В представлении диаграммы Обратите внимание, что стрелка, звездочка и число на линиях, обозначающих связи между таблицами.

![как lesson4 строки](../tutorial-tabular-1400/media/as-lesson4-line.png)

Стрелка указывает направление фильтрации. Звездочка показывает, что эта таблица является *многих* стороне в кратности связи, а второй показывает, что эта таблица *один* стороны связи. Если вам нужно изменить связь; Например измените направление фильтрации или кратность, дважды щелкните линию связи, чтобы открыть диалоговое окно Изменение связи.

![как изменить lesson4](../tutorial-tabular-1400/media/as-lesson4-edit.png)

Эти функции предназначены для расширенного моделирования данных и выходят за рамки данного руководства. Дополнительные сведения см. в разделе [двунаправленного кросс-фильтры для табличных моделей в службах Analysis Services](../tabular-models/bi-directional-cross-filters-tabular-models-analysis-services.md).

В некоторых случаях может потребоваться создание дополнительных связей между таблицами в модели, чтобы поддержать определенную бизнес-логику. В этом учебнике вам нужно создать три дополнительные связи между таблицей FactInternetSales и DimDate.  
  
#### <a name="to-add-new-relationships-between-tables"></a>Добавление новых связей между таблицами  
  
1.  В конструкторе моделей в **FactInternetSales** таблицы, нажмите и удерживайте **OrderDate** столбец, затем перетащите курсор **даты** столбец в  **DimDate** таблицы, а затем отпустите.  

    Появится сплошная линия, указывающая на создание активной связи между **OrderDate** столбца в **Интернет-продажи** таблицы и **даты** столбец в  **Дата** таблицы. 
  
      ![AS-lesson4-new](../tutorial-tabular-1400/media/as-lesson4-new.png) 
  
    > [!NOTE]  
    > При создании связей кратность и направление фильтрации между основной таблицей и связанной таблицей поиска выбирается автоматически.  
  
2.  В **FactInternetSales** нажмите и удерживайте нажатым **DueDate** столбец, затем перетащите курсор **даты** столбца в **DimDate** таблицы, а затем отпустите.  
  
    Появится пунктирная линия была создана неактивная связь между **DueDate** столбца в **FactInternetSales** таблицы и **даты** столбец в  **DimDate** таблицы. Между таблицами можно создавать несколько связей, но одновременно может быть активна только одна связь. Неактивные связи можно сделать активными для выполнения специальных статистических вычислений в пользовательских выражений DAX.  
  
3.  Наконец создайте еще одну связь. В **FactInternetSales** нажмите и удерживайте нажатым **ShipDate** столбец, затем перетащите курсор **даты** столбца в **DimDate** таблицы, а затем отпустите.  
    
     ![как newinactive lesson4](../tutorial-tabular-1400/media/as-lesson4-newinactive.png)
  
## <a name="whats-next"></a>Дальнейшие действия

[Занятие 5. Создание вычисляемых столбцов](../tutorial-tabular-1400/as-lesson-5-create-calculated-columns.md).
  
  
  
