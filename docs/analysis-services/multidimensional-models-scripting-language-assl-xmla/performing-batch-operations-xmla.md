---
title: Выполнение пакетных операций (XMLA) | Документация Майкрософт
ms.date: 05/02/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: xmla
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: 6c451d13016915c9218efb2963429f8f5a7709e2
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63261647"
---
# <a name="performing-batch-operations-xmla"></a>Выполнение пакетных операций (XMLA)
  Можно использовать [пакета](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/batch-element-xmla) в XML для аналитики (XMLA) для выполнения нескольких команд XMLA при помощи только одного команда [Execute](https://docs.microsoft.com/bi-reference/xmla/xml-elements-methods-execute) метод. Можно выполнить несколько команд, содержащихся в **пакета** команды, как одна транзакция или в отдельные транзакции для каждой команды, последовательно или параллельно. Можно также указать out-привязок и другие свойства в **пакета** команды для обработки нескольких [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] объектов.  
  
## <a name="running-transactional-and-nontransactional-batch-commands"></a>Выполнение транзакционных и нетранзакционных пакетных команд  
 **Пакета** команда выполняет команды одним из двух способов:  
  
 **Транзакционная**  
 Если **транзакции** атрибут **пакета** набора команд значение true, **пакета** команда выполняет все команды, содержащиеся **пакетнойслужбы** команды в рамках одной транзакции a *транзакций* пакетной службы.  
  
 При сбое любой команды в пакете транзакций [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] откат всех команд **пакетной службы** команды, перед командой, на котором произошел сбой и **пакета** команда немедленно завершается. Все команды в **пакета** команду, которая еще не запускались не выполняются. После **пакета** команды завершается, **пакета** команда сообщает обо всех ошибках, произошедших для ошибки.  
  
 **Nontransactional**  
 Если **транзакции** атрибут имеет значение false, **пакета** команда выполняет каждую команду, содержащуюся **пакета** команду в отдельной транзакции a  *Нетранзакционные* пакетной службы. Если из команд завершается ошибкой в рамках нетранзакционного пакета **пакета** команда продолжает выполнение команд после команды, которой не удалось. После **пакетной службы** команда пытается выполнить все команды, **пакета** содержит команду, **пакета** команда выводит все возникшие ошибки.  
  
 Все результаты, возвращаемые командами, содержащихся в **пакета** команды возвращаются в том же порядке, в котором эти команды расположены в **пакета** команды. Результаты, возвращенные **пакета** команды различаются в зависимости от ли **пакета** команда является транзакционной или нетранзакционных.  
  
> [!NOTE]  
>  Если **пакета** команд содержит команду, которая не возвращает выходные данные, такие как [блокировки](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/lock-element-xmla) команда, и что команда выполнена успешно, **пакета** команда возвращает пустой [корневой](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/root-element-xmla) элемента в элементе результатов. Пустой **корневой** элемент гарантирует, что каждую команду, содержащуюся в **пакета** команда может совпадать с соответствующим **корневой** элемент для результатов этой команды.  
  
### <a name="returning-results-from-transactional-batch-results"></a>Возвращение результатов из результатов транзакционного пакета  
 Результаты выполнения команд в рамках транзакционного пакета не возвращаются после завершения выполнения всей **пакета** выполнения команды. Результаты не возвращаются после выполнения каждой команды, так как любая из команд завершается ошибкой в рамках транзакционного пакета бы привести к весь **пакета** команды и всех содержащихся в ней команд к откату. Если все команды запустились и выполнены успешно, [возвращают](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/return-element-xmla) элемент [ExecuteResponse](https://docs.microsoft.com/bi-reference/xmla/xml-elements-objects-executeresponse) элемент, возвращаемый **Execute** метод **пакетной службы**  команды содержит одно [результатов](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/results-element-xmla) элемент, который в свою очередь содержит один **корневой** -элемент для каждой успешно выполненной команды, содержащиеся в **пакетнойслужбы** команды. Если любая из команд в **пакета** команды не может быть запущена или не удается завершить, **Execute** метод возвращает ошибку SOAP для **пакета** команду, которая содержит ошибку команды, завершившейся неудачей.  
  
### <a name="returning-results-from-nontransactional-batch-results"></a>Возвращение результатов из результатов нетранзакционного пакета  
 Результаты выполнения команд в рамках нетранзакционного пакета возвращаются в порядке, в котором эти команды расположены в пределах **пакета** команды и как они будут возвращены каждой командой. Если нет команды, содержащиеся в **пакета** команда успешно запускается, **Execute** метод возвращает ошибку SOAP, который содержит ошибку для **пакета** команды. Если успешно запущен хотя бы одну команду, **возвращают** элемент **ExecuteResponse** элемент, возвращаемый **Execute** метод **пакетной службы**  команды содержит одно **результатов** элемент, который в свою очередь содержит один **корневой** для каждой команды, содержащиеся в **пакета** команды . Если одной или нескольких команд в рамках нетранзакционного пакета не может быть запущена или не удается завершить, **корневой** содержит элемент для завершившейся неудачно команды [ошибка](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/error-element-xmla) элемент, описывающий ошибку.  
  
> [!NOTE]  
>  До тех пор, пока хотя бы одну команду в рамках нетранзакционного пакета может быть запущена, что нетранзакционный пакет считается успешного выполнения, даже если все команды, содержащиеся в нетранзакционного пакета возвращает сообщение об ошибке в результатах **пакетной службы**  команды.  
  
## <a name="using-serial-and-parallel-execution"></a>Использование последовательного и параллельного выполнения  
 Можно использовать **пакета** команду выполнения включенных команды последовательно или параллельно. Если команды выполняются последовательно, далее команды, включенные в **пакетной службы** команда не может начинаться до выполнения текущей команды в **пакета** выполнения команды. При параллельном выполнении команд, несколько команд могут выполняться одновременно с **пакета** команды.  
  
 Для выполнения команд в параллельном режиме, необходимо добавить команды, должны выполняться в параллельном режиме в [параллельных](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/parallel-element-xmla) свойство **пакета** команды. В настоящее время [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] можно запустить только непрерывные, последовательные [процесс](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/process-element-xmla) команды в параллельном режиме. Любые другие команды XMLA, такие как [создать](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/create-element-xmla) или [Alter](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/alter-element-xmla), входящий в **параллельных** свойство, выполняются последовательно.  
  
 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] пытается запустить все **процесс** команды, добавленные в **параллельных** свойство в параллельном режиме, но не может гарантировать, что все они входят **процесс** команды могут выполняться параллельно. Экземпляр анализирует каждую **процесс** команды и, если обнаруживается, что команда не может выполняться параллельно, **процесс** команда последовательно.  
  
> [!NOTE]  
>  Для выполнения команд в параллельном режиме, **транзакции** атрибут **пакета** команды должно быть присвоено значение true, так как [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] поддерживает только одну активную транзакцию на соединение, а нетранзакционные пакеты выполняют каждую команду в отдельной транзакции. При включении **параллельных** свойство в рамках нетранзакционного пакета произошла ошибка.  
  
### <a name="limiting-parallel-execution"></a>Ограничение параллельного выполнения  
 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] Пытаются выполнить столько **процесс** команды параллельно, как можно в установленных пределах для компьютера, на котором запущен экземпляр. Можно ограничить число параллельно выполняемых **процесс** команд, задав **maxParallel** атрибут **параллельных** присваивается значение, указывающее, Максимальное число **процесс** команд, которые могут выполняться параллельно.  
  
 Например **параллельных** свойство содержит следующие команды в указанном порядке:  
  
1.  **Создание**  
  
2.  **Процесс**  
  
3.  **Alter**  
  
4.  **Процесс**  
  
5.  **Процесс**  
  
6.  **Процесс**  
  
7.  **Удаление**  
  
8.  **Процесс**  
  
9. **Процесс**  
  
 **MaxParalle**атрибут это **параллельных** свойство имеет значение 2. Это означает, что экземпляр выполнит приведенный ранее список команд в следующем порядке.  
  
-   Команда 1 будет последовательно, так как команда 1 **создать** команды и только **процесс** команды могут выполняться параллельно.  
  
-   Команда 2 выполняется последовательно после завершения команды 1.  
  
-   Команда 3 выполняется последовательно после завершения команды 2.  
  
-   Команды, 4 и 5 выполняются в параллельном режиме, после завершения команды 3. Несмотря на то, что команда 6 также является **процесс** команды, команда 6 не могут выполняться параллельно с командами 4 и 5, так как **maxParallel** свойство имеет значение 2.  
  
-   Команда будет выполнена последовательно после завершения команд 4 и 5.  
  
-   Команда 7 выполняется последовательно за командой 6.  
  
-   Команды 8 и 9 выполняются параллельно после завершения команды 7.  
  
## <a name="using-the-batch-command-to-process-objects"></a>Использование пакетов команд для обработки объектов  
 **Пакета** команда содержит несколько дополнительных свойств и атрибутов, включенных в нее специально для поддержки обработки нескольких [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] проектов:  
  
-   **ProcessAffectedObjects** атрибут **пакета** команда указывает, должен ли экземпляр также обрабатывать любой объект, который требуется повторная обработка результате **процесс** команды, включенные в **пакета** команды, обрабатывающую указанный объект.  
  
-   [Привязки](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/bindings-element-xmla) свойство содержит коллекцию привязок вне строки, используемые всеми **процесс** команды в **пакета** команды.  
  
-   [DataSource](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/datasource-element-xmla) содержит привязку вне строки для источника данных, используемые всеми **процесс** команды в **пакета** команды.  
  
-   [DataSourceView](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/datasourceview-element-xmla) содержит привязку вне строки для представления источников данных, используемые всеми **процесс** команды в **пакета** команды.  
  
-   [ErrorConfiguration](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/errorconfiguration-element-xmla) указывает то, как в котором **пакета** команда обрабатывает ошибки, обнаруженные всеми **процесс** команд, содержащихся в **Пакета** команды.  
  
    > [!IMPORTANT]  
    >  Объект **процесс** команда не может содержать **привязки**, **DataSource**, **DataSourceView**, или **ErrorConfiguration**  свойства, если **процесс** находится в **пакета** команды. Если необходимо указать эти свойства для **процесс** команды, введите необходимую информацию в соответствующих свойствах **пакета** команду, которая содержит **процесс** команды.  
  
## <a name="see-also"></a>См. также  
 [Элемент Batch &#40;XML для Аналитики&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/batch-element-xmla)   
 [Обработать элемент &#40;XML для Аналитики&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/process-element-xmla)   
 [Обработка многомерной модели (службы Analysis Services)](../../analysis-services/multidimensional-models/processing-a-multidimensional-model-analysis-services.md)   
 [Разработка с использованием XMLA в службах Analysis Services](../../analysis-services/multidimensional-models-scripting-language-assl-xmla/developing-with-xmla-in-analysis-services.md)  
  
  
