---
title: Резервное копирование, восстановление и синхронизация баз данных (XMLA) | Документация Майкрософт
ms.date: 05/02/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: xmla
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: 19d311a07eb11f1c5119a3c20d7536b5a2986b49
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62719887"
---
# <a name="backing-up-restoring-and-synchronizing-databases-xmla"></a>Резервное копирование, восстановление и синхронизация баз данных (XMLA)
  В XML для аналитики есть три команды для резервного копирования, восстановления и синхронизации баз данных.  
  
-   [Резервного копирования](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/backup-element-xmla) команда создает резервную [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных с помощью [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] (ABF), как описано в разделе [резервного копирования баз данных](#backing_up_databases).  
  
-   [Восстановить](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/restore-element-xmla) команда восстанавливает [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] из базы данных ABF-файле, как описано в разделе [восстановление баз данных](#restoring_databases).  
  
-   [Synchronize](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/synchronize-element-xmla) команда синхронизирует одну [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных с данными и метаданными другой базы данных, как описано в разделе [синхронизация баз данных](#synchronizing_databases).  
  
##  <a name="backing_up_databases"></a> Резервное копирование баз данных  
 Как упоминалось ранее, **резервного копирования** команда резервное копирование указанной [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных в файл резервной копии. **Резервного копирования** команда имеет различные свойства, позволяющие указывать базу данных для резервного копирования, файл резервной копии для использования, как создавать резервные копии определений безопасности и удаленные секции для резервного копирования.  
  
> [!IMPORTANT]  
>  У учетной записи служб Analysis Services должны быть разрешения на запись в папку резервного копирования, заданную для каждого из файлов. Кроме того, пользователь должен быть членом одной из следующих ролей: роли администратора в экземпляре служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] или роли базы данных с разрешениями «Полный доступ (Администратор)» в базе данных, для которой создается резервная копия.  
  
### <a name="specifying-the-database-and-backup-file"></a>Задание базы данных и файла резервной копии  
 Чтобы указать базу данных для резервного копирования, необходимо задать [объект](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/object-element-xmla) свойство **резервного копирования** команды. **Объект** свойство должно содержать идентификатор объекта для базы данных, или произошла ошибка.  
  
 Чтобы указать файл, который должен быть создан и использованный во время резервного копирования, необходимо задать [файл](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/file-element-xmla) свойство **резервного копирования** команды. **Файл** свойство должно быть присвоено UNC путь к файлу и имя создаваемого файла резервной копии.  
  
 Помимо указания файла, в который будет произведено резервирование, для него также можно задать следующие параметры.  
  
-   Если задать [AllowOverwrite](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/allowoverwrite-element-xmla) присваивается значение true, **резервного копирования** команда перезаписывает файл резервной копии, если указанный файл уже существует. Если задать **AllowOverwrite** значение false, ошибка возникает, если указанный файл резервной копии уже существует.  
  
-   Если задать [ApplyCompression](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/applycompression-element-xmla) присваивается значение true, файл резервной копии сжат, после создания файла.  
  
-   Если задать [пароль](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/password-element-xmla) свойство задано любое непустое значение, файл резервной копии шифруется с использованием заданного пароля.  
  
    > [!IMPORTANT]  
    >  Если **ApplyCompression** и **пароль** свойства не указаны, файл резервной копии сохраняет имена пользователей и пароли, которые содержатся в строках подключения в виде открытого текста. Данные, хранящиеся в виде открытого текста, можно извлечь. Для повышения безопасности используйте **ApplyCompression** и **пароль** параметры, как сжать и зашифровать файл резервной копии.  
  
### <a name="backing-up-security-settings"></a>Резервное копирование параметров безопасности  
 [Безопасности](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/security-element-xmla) определяет свойство ли **резервного копирования** команда создает резервные копии определений безопасности, такие как роли и разрешения, определенные в [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных. **Безопасности** свойство также определяет, включает ли файл резервной копии Windows учетные записи пользователей и группы, определенные как члены определений безопасности.  
  
 Значение **безопасности** свойства только одна из строк в таблице ниже.  
  
|Значение|Описание|  
|-----------|-----------------|  
|*skipMembership*|Включает определения безопасности, но исключает сведения о членстве из файла резервной копии.|  
|*CopyAll*|Включает определения безопасности и сведения о членстве в файл резервной копии.|  
|*IgnoreSecurity*|Исключает определения безопасности из файла резервной копии.|  
  
### <a name="backing-up-remote-partitions"></a>Резервирование удаленных секций  
 Резервное копирование удаленных секций в [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных, задайте [BackupRemotePartitions](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/backupremotepartitions-element-xmla) свойство **резервного копирования** команду значение true. Этот параметр задан, то **резервного копирования** команду для создания удаленного файла резервной копии для каждого удаленного источника данных, используемый для хранения удаленных секций для базы данных.  
  
 Для каждого удаленного источника данных для резервного копирования, можно указать соответствующий файл резервной копии, включив [расположение](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/location-element-xmla) элемент в [расположения](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/locations-element-xmla) свойство **резервного копирования** команда. **Расположение** элемент должен иметь его **файл** свойство присвоено UNC-путь и имя удаленного файла резервной копии и его [DataSourceID](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/datasourceid-element-xmla) свойство идентификатора удаленным источником данных в базе данных.  
  
##  <a name="restoring_databases"></a> Восстановление баз данных  
 **Восстановить** команда восстанавливает указанную [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных из файла резервной копии. **Восстановить** команда имеет различные свойства, позволяющие указывать базу данных для восстановления, файл резервной копии, восстановление определений безопасности, удаленные секции для хранения и перемещения реляционной OLAP (ROLAP) объекты.  
  
> [!IMPORTANT]  
>  Пользователь, выполняющий команду восстановления, должен иметь разрешение на чтение из папки резервного копирования, указанной для каждого восстанавливаемого файла. Чтобы восстановить базу данных служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , которая не установлена на сервере, пользователь также должен быть членом роли сервера для этого экземпляра служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] . Чтобы перезаписать базу данных служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], пользователь должен входить в одну из следующих ролей: член роли сервера для экземпляра служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] или член роли базы данных с разрешениями «Полный доступ» («Администратор») в восстанавливаемой базе данных.  
  
> [!NOTE]  
>  После восстановления существующей базы данных пользователь, выполнявший восстановление, может утратить доступ к этой базе данных. Потеря доступа может произойти в случае, если на время создания резервной копии этот пользователь не был членом роли сервера и роли базы данных с разрешением «Полный доступ (Администратор)».  
  
### <a name="specifying-the-database-and-backup-file"></a>Задание базы данных и файла резервной копии  
 **DatabaseName** свойство **восстановить** команды должны содержать идентификатор объекта для базы данных, или произошла ошибка. Если указанная база данных уже существует, **AllowOverwrite** свойство определяет, перезаписывается ли существующая база данных. Если **AllowOverwrite** свойство имеет значение false, и указанная база данных уже существует, возникает ошибка.  
  
 Необходимо задать **файл** свойство **восстановить** команды UNC путь к файлу и имя файла резервной копии для восстановления в указанной базе данных. Можно также задать **пароль** свойство для указанного файла резервной копии. Если **пароль** задано любое непустое значение, файл резервной копии будет расшифрован при помощи указанного пароля. Если файл резервной копии не был расшифрован либо если указанный пароль не совпадает с паролем, использованным для шифрования файла резервной копии, возникает ошибка.  
  
### <a name="restoring-security-settings"></a>Восстановление параметров безопасности  
 **Безопасности** определяет свойство ли **восстановить** команда восстанавливает определения безопасности, такие как роли и разрешения, определенные в [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных. **Безопасности** также определяет ли **восстановить** команда содержит учетные записи пользователей Windows и группы, определенные как члены определений безопасности, как часть процесса восстановления.  
  
 Значением этого элемента может быть только одна из строк в следующей таблице.  
  
|Значение|Описание|  
|-----------|-----------------|  
|*skipMembership*|Включает определения безопасности, но исключает сведения о членстве из базы данных.|  
|*CopyAll*|Включает определения безопасности и сведения о членстве в базу данных.|  
|*IgnoreSecurity*|Исключает определения безопасности из базы данных.|  
  
### <a name="restoring-remote-partitions"></a>Восстановление удаленных секций  
 Для каждого удаленного файла резервной копии, созданные при выполнении предыдущей **резервного копирования** команды, вы можете восстановить удаленную секцию, связанную, включая **расположение** элемент **расположения**свойство **восстановить** команды. [DataSourceType](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/datasourcetype-element-xmla) для каждой **расположение** элемент следует исключить либо явно задано значение *удаленного*.  
  
 Для каждого указанного **расположение** элемент, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] экземпляра обращается к удаленным данным источника, указанной в **DataSourceID** свойство, чтобы восстановить секции, определенные в удаленном файле резервной копии указанный в **файл** свойство. Помимо **DataSourceID** и **файл** свойства, доступны следующие свойства для каждого **расположение** элемент, используемый для восстановления удаленной секции:  
  
-   Чтобы переопределить строку подключения для удаленного источника данных указан в **DataSourceID**, можно задать **ConnectionString** свойство **расположение** элемент для другой строки подключения. **Восстановить** команда будет использовать строку подключения, содержащаяся в **ConnectionString** свойство. Если **ConnectionString** не указан, **восстановить** команда использует строку подключения, сохраненную в файл резервной копии для указанного удаленного источника данных. Можно использовать **ConnectionString** параметр для перемещения удаленной секции в другой удаленный экземпляр. Тем не менее, нельзя использовать **ConnectionString** параметр для восстановления удаленной секции в тот же экземпляр, который содержит восстановленную базу данных. Другими словами, нельзя использовать **ConnectionString** свойства удаленной секции в локальную секцию.  
  
-   Для каждой первоначальной папки, используемый для хранения удаленных секций на удаленный источник данных, можно указать [папку](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/folder-element-xmla) элемент, чтобы указать новую папку, в котором предполагается восстановить все удаленные секции, хранящиеся в первоначальной папке. Если **папку** элемент не указан, **восстановить** команда использует первоначальные папки, указанные для удаленных секций, содержащихся в удаленном файле резервной копии.  
  
### <a name="relocating-rolap-objects"></a>Перемещение объектов ROLAP  
 **Восстановить** команда не может восстанавливать агрегаты или данные для объектов, использующих режим хранения ROLAP, поскольку такие сведения хранятся в таблицах в базовом реляционном источнике данных. Однако метаданные объектов ROLAP восстановить можно. Чтобы восстановить метаданные объекта ROLAP, **восстановить** команда создает повторно структуру таблицы в реляционном источнике данных.  
  
 Можно использовать **расположение** элемент в **восстановить** команду для перемещения объектов ROLAP. Для каждого **расположение** элемент, используемый для перемещения источника данных, **DataSourceType** свойство должно быть явно присвоено *локального*. Необходимо также установить **ConnectionString** свойство **расположение** элемент строку подключения нового расположения. Во время восстановления **восстановить** команда заменит строку подключения для источника данных, определенного **DataSourceID** свойство **расположение** элемент со значением **ConnectionString** свойство **расположение** элемент.  
  
##  <a name="synchronizing_databases"></a> Синхронизация баз данных  
 **Synchronize** команда синхронизирует данные и метаданные указанной [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных с другой базой данных. **Synchronize** команда имеет различные свойства, которые позволяют указать базы данных-источника, как синхронизировать определения безопасности, удаленные секции для синхронизации и синхронизацию объектов ROLAP.  
  
> [!NOTE]  
>  **Synchronize** команда может быть выполнена только администраторы сервера и администраторам баз данных. Исходная и целевая базы данных должны иметь одинаковый уровень совместимости.  
  
### <a name="specifying-the-source-database"></a>Указание базы данных-источника  
 [Источника](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/source-element-xmla) свойство **Synchronize** команда содержит два свойства **ConnectionString** и **объект**. **ConnectionString** свойство содержит строку подключения к экземпляру, содержащему базы данных-источника, и **объект** свойство содержит идентификатор объекта для базы данных-источника.  
  
 Целевая база данных является текущей базы данных для сеанса, в котором **Synchronize** выполняется команда.  
  
 Если **ApplyCompression** свойство **Synchronize** команда имеет значение true, сведения, передаваемые из источника базы данных в целевую базу данных сжимается до его отправки.  
  
### <a name="synchronizing-security-settings"></a>Синхронизация параметров безопасности  
 [SynchronizeSecurity](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/security-element-xmla) свойство определяет, является ли **Synchronize** команда синхронизирует определения безопасности, такие как роли и разрешения, определенные в базы данных-источника. **SynchronizeSecurity** также определяет ли **синхронизировать** команда содержит учетные записи пользователей Windows и группы, определенные как члены определений безопасности.  
  
 Значением этого элемента может быть только одна из строк в следующей таблице.  
  
|Значение|Описание|  
|-----------|-----------------|  
|*skipMembership*|Включает определения безопасности, но исключает сведения о членстве из целевой базы данных.|  
|*CopyAll*|Включает определения безопасности и сведения о членстве в целевую базу данных.|  
|*IgnoreSecurity*|Исключает определения безопасности из целевой базы данных.|  
  
### <a name="synchronizing-remote-partitions"></a>Синхронизация удаленных секций  
 Для каждого удаленного источника данных, существующего для базы данных-источника, можно синхронизировать каждого удаленную секцию, связанную, включая **расположение** элемент в **расположения** свойство  **Синхронизировать** команды. Для каждого **расположение** элемент, **DataSourceType** следует исключить либо явно задано свойство *удаленного*.  
  
 Чтобы определить соединение с удаленным данным источника в целевую базу данных, **Synchronize** команда использует строку подключения, определенные в **ConnectionString** свойство **расположение**  элемент. **Synchronize** затем команда использует **DataSourceID** свойство **расположение** элемент, чтобы определить, какие удаленные секции для синхронизации. **Synchronize**команда синхронизирует удаленные секции на удаленном источнике данных указано в **DataSourceID** свойства базы данных-источника с удаленным источником данных указан в  **DataSourceID** свойство в целевой базе данных.  
  
 Для каждой первоначальной папки, используемый для хранения удаленных секций на удаленный источник данных для исходной базы данных, можно также указать **папку** элемент в **расположение** элемент. **Папку** элемент указывает новую папку для целевой базы данных, в которой следует синхронизировать все удаленные секции, хранящиеся в первоначальной папке в удаленном источнике данных. Если **папку** элемент не указан, команда Synchronize будет использовать первоначальные папки, указанные для удаленных секций, содержащихся в базы данных-источника.  
  
### <a name="synchronizing-rolap-objects"></a>Синхронизация объектов ROLAP  
 **Synchronize** команды не удалось синхронизировать агрегаты или данные для объектов, использующих режим хранения ROLAP, поскольку такие сведения хранятся в таблицах в базовом реляционном источнике данных. Однако метаданные объектов ROLAP синхронизировать можно. Синхронизация метаданных, **Synchronize** команда повторно создает структуру таблицы в реляционном источнике данных.  
  
 Можно использовать **расположение** элемент в команде Synchronize для синхронизации объектов ROLAP. Для каждого **расположение** элемент, используемый для перемещения источника данных, **DataSourceType** свойство должно быть явно присвоено *локального*. . Необходимо также установить **ConnectionString** свойство **расположение** элемент строку подключения нового расположения. Во время синхронизации **Synchronize** команда заменит строку подключения для источника данных, определенного **DataSourceID** свойство **расположение** элемент со значением **ConnectionString** свойство **расположение** элемент.  
  
## <a name="see-also"></a>См. также  
 [Элемент Backup (XMLA)](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/backup-element-xmla)   
 [Элемент Restore (XMLA)](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/restore-element-xmla)   
 [Элемент Synchronize (XMLA)](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/synchronize-element-xmla)   
 [Создание и восстановление резервных копий баз данных служб Analysis Services](../../analysis-services/multidimensional-models/backup-and-restore-of-analysis-services-databases.md)  
  
  
