---
title: Построение вложенных кубов в многомерных Выражениях (многомерные Выражения) | Документация Майкрософт
ms.date: 05/02/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: mdx
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: 7bf6396ebe7cfe18aa7d1005d39095a35713e10b
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "68208802"
---
# <a name="building-subcubes-in-mdx-mdx"></a>Построение вложенных кубов в многомерных выражениях (многомерные выражения)
[!INCLUDE[ssas-appliesto-sqlas](../../../includes/ssas-appliesto-sqlas.md)]
  Вложенный куб — это подмножество куба, полученное на основании отфильтрованного представления базовых данных. Ограничивая куб до вложенного куба, можно повысить производительность запросов.  
  
 Для определения вложенного куба предназначена инструкция [CREATE SUBCUBE](../../../mdx/mdx-data-definition-create-subcube.md) , описанная в данном разделе.  
  
## <a name="create-subcube-syntax"></a>Синтаксис инструкции CREATE SUBCUBE  
 Чтобы создать вложенный куб, используется следующий синтаксис:  
  
```  
CREATE SUBCUBE Subcube_Identifier AS Subcube_Expression  
```  
  
 Синтаксис инструкции CREATE SUBCUBE очень прост. Аргумент *Subcube_Identifier* указывает куб, из которого создается данный вложенный куб. Аргумент *Subcube_Expression* определяет часть куба, которая станет вложенным кубом.  
  
 После создания вложенного куба он становится контекстом для всех запросов многомерных выражений либо до закрытия сеанса, либо до выполнения инструкции [DROP SUBCUBE](../../../mdx/mdx-data-definition-drop-subcube.md) .  
  
### <a name="what-a-subcube-contains"></a>Содержимое вложенного куба  
 Хотя инструкция CREATE SUBCUBE довольно проста в использовании, она не указывает явно все элементы, которые войдут во вложенный куб. При определении вложенного куба применяются следующие правила.  
  
-   При включении во вложенный куб элемента иерархии **(Все)** туда включаются все элементы этой иерархии.  
  
-   При включении во вложенный куб какого-либо элемента туда включаются все его предки и потомки.  
  
-   При включении во вложенный куб всех элементов какого-либо уровня туда включаются все элементы из данной иерархии. Элементы других иерархий не включаются во вложенный куб, если они не существуют с элементами данного уровня (например, в случае несбалансированной иерархии — города, в котором нет клиентов).  
  
-   Вложенный куб всегда содержит все элементы **(Все)** из данного куба.  
  
 Кроме того, во вложенном кубе визуально подсчитываются статистические значения. Пусть вложенный куб содержит значения `USA`, `WA`и `OR`. Статистическое значение для параметра `USA` будет суммой `{WA,OR}` , поскольку `WA` и `OR` — единственные штаты, определенные во вложенном кубе. Все прочие штаты будут проигнорированы.  
  
 Кроме того, явные ссылки на ячейки вне вложенного куба возвращают значения ячеек, вычисленные в контексте всего куба. Пусть создан вложенный куб, ограниченный текущим годом. После этого можно при помощи функции [ParallelPeriod](../../../mdx/parallelperiod-mdx.md) сравнить текущий год с предыдущим. Несмотря на то, что предыдущего года лежат вне данного вложенного куба, будет возвращаться разницы между значениями.  
  
 Наконец, если оригинальный контекст не заменяется, функции наборов, значения которых рассчитаны в подзапросе выборки, вычисляются в контексте этого подзапроса. Если контекст заменяется, функции наборов вычисляются в контексте всего куба.  
  
## <a name="create-subcube-example"></a>Пример инструкции CREATE SUBCUBE  
 В следующем примере создается вложенный куб, ограничивающий куб «Бюджет» счетами 4200 и 4300.  
  
 `CREATE SUBCUBE Budget AS SELECT {[Account].[Account].&[4200], [Account].[Account].&[4300] } ON 0 FROM Budget`  
  
 После создания вложенного куба для сеанса, все последующие запросы будут выполняться для этого вложенного куба, а не для всего куба. Например, при выполнении следующего запроса будут возвращены только элементы счетов 4200 и 4300.  
  
 `SELECT [Account].[Account].Members ON 0, Measures.Members ON 1 FROM Budget`  
  
## <a name="see-also"></a>См. также  
 [Определение контекста куба в запросе (многомерные выражения)](../../../analysis-services/multidimensional-models/mdx/establishing-cube-context-in-a-query-mdx.md)   
 [Основные принципы запросов многомерных выражений (службы Analysis Services)](../../../analysis-services/multidimensional-models/mdx/mdx-query-fundamentals-analysis-services.md)  
  
  
