---
title: Основные понятия многомерных выражений (службы Analysis Services) | Документация Майкрософт
ms.date: 04/19/2019
ms.prod: sql
ms.technology: analysis-services
ms.custom: mdx
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: a402c385be8c89f71824e5312ffc57fd6c1b0a2c
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "65357331"
---
# <a name="key-concepts-in-mdx-analysis-services"></a>Основные понятия многомерных выражений (службы Analysis Services)
[!INCLUDE[ssas-appliesto-sqlas](../../../includes/ssas-appliesto-sqlas.md)]
  Прежде чем приступить к использованию многомерных выражений (MDX) для выполнения запросов к многомерным данным или для создания выражений MDX в кубе, следует понять соответствующие принципы действия и термины.  
  
 Рекомендуется начать с уже известного примера обобщения данных, а затем посмотреть связь с MDX. Здесь представлена сводная таблица, созданная в Excel, заполненную данными из примера куба служб Analysis Services.  
  
 ![Сводная таблица с мерами и измерениями, вызванной](../../../analysis-services/multidimensional-models/media/ssas-keyconcepts-pivot1-measures-dimensions.png "Сводная таблица с мерами и измерениями, вызванной")  
  
## <a name="measures-and-dimensions"></a>Меры и измерения  
 Куб служб Analysis Services состоит из мер, измерений и атрибутов измерений, которые присутствуют в сводной таблице.  
  
 **Меры** — это находящиеся в ячейках числовые значения данных, выраженные в виде сумм, количеств, процентов, минимальных значений, максимальных значений, средних значений. Значения мер являются динамичными, вычисляются в режиме реального времени согласно переходам пользователя по таблице и работе с ней. В этом примере в ячейках показаны суммы продаж торговых посредников, которые увеличиваются или уменьшаются в зависимости от того, разворачиваются оси или сворачиваются. Для любой комбинации даты (год, квартал, месяц или дата) и территории продаж (группа стран, страна, регион) можно получить значение суммы продаж торговых посредников, вычисленной для данной конкретной ситуации. Другие термины, которые являются синонимами мер, — это факты (в хранилищах данных) и вычисляемые поля (в табличной модели и модели данных Excel).  
  
 **Измерения** находятся на осях столбцов и строк сводной таблицы и определяют значение меры. Измерения аналогичны таблицам в реляционной модели данных. Распространенные примеры измерения — время, география, продукты, клиенты, сотрудники и т. д. В этом примере существует два измерения — «Территория продаж» в строках и «Дата» в верхней части. Однако вы можете легко перетаскивать другие измерения, связанные с компонентом «Продажи торгового посредника», такие как «Рекламные акции» или «Продукты», чтобы просматривать эффективность продаж по этим измерениям. Возможность изучения данных интересными способами зависит от создаваемых измерений и от того, будут ли они связаны с таблицами фактов в источнике данных.  
  
 **Атрибуты измерения** — это именованные элементы в измерении, схожие со столбцами в таблице. В этом примере используются следующие атрибуты измерения «Территория продаж»: «Группа стран» (Европа, Северная Америка, Тихоокеанский регион), «Страна» (Канада, США) и «Регион» (центральный, северо-восточный, северо-западный, юго-восточный и юго-западный).  
  
 Каждый атрибут имеет связанный с ним набор значений данных или элементов. В этом примере элементами атрибута «Группа стран» являются Европа, Северная Америка и Тихоокеанский регион. **Элементы** — это реальные значения данных, принадлежащие атрибуту.  
  
> [!NOTE]  
>  Одним из аспектов моделирования данных является оформление шаблонов и отношений, уже существующих в данных. При работе с данными, входящими в естественную иерархию, как в случае со странами-регионами-городами, это отношение можно оформить путем создания **связи атрибутов**. Связь атрибутов — отношение "один ко многим" между атрибутами, например отношение между областью и городом — состояние имеет много городов, но Город принадлежит только к одной. Создание связи атрибутов в модели ускоряет производительность запросов, так что это лучший способ их создания, если он поддерживается данными. Связь атрибутов создается в конструкторе измерений в SQL Server Data Tools. См. [Define Attribute Relationships](../../../analysis-services/multidimensional-models/attribute-relationships-define.md).  
  
 В приложении Excel модель метаданных отображается в списке полей сводной таблицы.  Сравните приведенную выше сводную таблицу с расположенным ниже списком полей. Обратите внимание, что список полей содержит компоненты «Территория продаж», «Группа», «Страна», «Регион» (метаданные), тогда как в сводной таблице находятся только элементы (значения данных). Зная, как выглядит значок, можно без труда соотнести части многомерной модели со сводной таблицей в Excel.  
  
 ![Список полей сводной таблицы](../../../analysis-services/multidimensional-models/mdx/media/ssas-keyconcepts-ptfieldlist.png "список полей сводной таблицы")  
  
## <a name="attribute-hierarchies"></a>Иерархии атрибутов  
 Нам известно, что при разворачивании и сворачивании уровней по каждой оси значения в сводной таблице изменяются. Почему это происходит? Ответ следует искать в иерархии атрибутов.  
  
 Сверните все уровни и обратите внимание на общие итоги для каждого компонента «Группа стран» и «Календарный год». Это значение получено из объекта **элемент (Все)** в иерархии. Это вычисленное значение всех элементов в иерархии.  
  
-   Значение элемента (Все) для всех групп стран и дат — $80 450 596,98  
  
-   Значение элемента (Все) для 2008 календарного года — $16 038 062,60  
  
-   Значение элемента (Все) для Тихоокеанского региона — $1 594 335,38  
  
 Подобные агрегаты предварительно вычисляются и заранее сохраняются. Именно поэтому службам Analysis Services свойственна высокая скорость обработки запросов.  
  
 ![Сводная таблица с всех член с именем](../../../analysis-services/multidimensional-models/mdx/media/ssas-keyconcepts-pivot2-allmember.png "Сводная таблица с всех член с именем")  
  
 Разверните иерархию и вы увидите самый нижний уровень. Он называется **конечным элементом**. У конечного элемента в иерархии нет дочерних элементов. В этом примере Юго-Запад — конечный элемент.  
  
 ![Сводная таблица с вызванными конечными элементами](../../../analysis-services/multidimensional-models/mdx/media/ssas-keyconcepts-pivot3-leafparent.PNG "Сводная таблица с вызванными конечными элементами")  
  
 Все, что выше этого элемента, называется **родительским элементом**. США является родительским для юго-запад.  
  
 **Компоненты иерархии атрибута**  
  
 Все эти компоненты работают на формирование понятия **иерархии атрибута**. Иерархия атрибута представляет собой дерево элементов атрибута, содержащих следующие уровни.  
  
-   Конечный уровень, содержащий все отдельные элементы атрибута, и все элементы конечного уровня ( **конечные элементы**).  
  
-   Промежуточные уровни, если иерархия атрибута является иерархией родительских и дочерних элементов (подробнее об этом позже).  
  
-   Элемент (Все), содержащий совокупное значение всех дочерних атрибутов. При желании можно скрыть или отключить уровень (все), если он не имеет смысла для данных. Например несмотря на то, что код продукта является числовым, неразумно сумма или среднее или в противном случае статистической функции всех кодов продуктов.  
  
> [!NOTE]  
>  Разработчики бизнес-аналитики часто задают свойства в иерархии атрибута, чтобы сформировать определенное поведение в клиентских приложениях или добиться максимальной производительности. Например, вы можете задать AttributeHierarchyEnabled = False в атрибутах, для которых элемент «(все)» не имеет смысла. С другой стороны, возможно, вы просто хотите скрыть элемент (Все), поэтому должны задать AttributeHierarchyVisible = False. Дополнительные сведения о свойствах см. в разделе [Dimension Attribute Properties Reference](../../../analysis-services/multidimensional-models/dimension-attribute-properties-reference.md) .  
  
## <a name="navigation-hierarchies"></a>Иерархии навигации  
 В сводной таблице (по крайней мере в этом примере) расширение осей строк и столбцов позволяет просмотреть нижние уровни атрибутов. Расширяемая структура достигается за счет навигационных иерархий, создаваемых в модели.  В примере модели AdventureWorks измерение «Территория продаж» имеет многоуровневую иерархию, которая начинается с атрибута «Группа стран», затем идет «Страна», а потом — «Регион».  
  
 Как видно, иерархии используются для предоставления пути навигации в сводной таблице или других объектов обобщения данных. Существует два основных типа: сбалансированная и несбалансированная.  
  
 **Сбалансированные иерархии**  
  
|||  
|-|-|  
|![Сводная таблица с вызванной сбалансированной иерархии](../../../analysis-services/multidimensional-models/mdx/media/ssas-keyconcepts-pivot4-balancedhierarchy.PNG "Сводная таблица с вызванной сбалансированной иерархии")|**Сбалансированная иерархия** — это иерархия, в которой между верхним уровнем и любым из конечных элементов существует одинаковое количество уровней.<br /><br /> **Естественная иерархия** — это иерархия, которая естественным образом развивается на основе базовых данных. Распространенным примером является "Страна-Регион-Область", "Год-Месяц-День" или "Категория-Подкатегория-Модель", где каждый подчиненный уровень предсказуемо происходит от родительского.<br /><br /> В многомерной модели большинство иерархии являются сбалансированными и многие из них — естественными.<br /><br /> Следует упомянуть еще один связанный термин моделирования, **пользовательская иерархия**, часто противопоставляемый иерархиям атрибута. Он просто означает иерархию, созданную разработчиком BI, в отличие от иерархий атрибутов, которые автоматически генерируются службами Analysis Services при определении атрибута.|  
  
 **Несбалансированные иерархии**  
  
|||  
|-|-|  
|![Сводная таблица с вызванной неоднородной иерархии](../../../analysis-services/multidimensional-models/mdx/media/ssas-keyconcepts-pivot15-raggedhierarchy.PNG "Сводная таблица с вызванной неоднородной иерархии")|**Неоднородная** или **несбалансированная иерархия** — это иерархия, в которой между элементами верхнего уровня и конечными элементами существует разное количество уровней. Опять же это иерархия, созданная разработчиком бизнес-Аналитики, но в данном случае существуют пропуски в данных.<br /><br /> В примере модели AdventureWorks «Территория продаж» демонстрирует неоднородную иерархию, поскольку США имеют дополнительный уровень («Регионы»), который не существует для других стран в этом примере.<br /><br /> Если клиентское приложение не может надлежащим образом обрабатывать неоднородные иерархии, у разработчиков BI возникают проблемы. В модели служб Analysis Services можно создать **иерархию родительских и дочерних элементов** , которая явно определяет связь между многоуровневыми данными, исключая любую неоднозначность, касающуюся отношения одного уровня к следующему. Дополнительные сведения см. в статье [Измерения "родители-потомки"](../../../analysis-services/multidimensional-models/parent-child-dimension.md) .|  
  
## <a name="key-attributes"></a>Ключевые атрибуты  
 Модели представляют собой наборы связанных объектов, которые для создания ассоциаций используют ключи и индексы. Модели служб Analysis Services не отличаются друг от друга. Для каждого измерения (напомним, что оно эквивалентно таблице в реляционной модели) существует ключевой атрибут. **Ключевой атрибут** используется в отношениях внешнего ключа к таблице фактов (группе мер). Все неключевые атрибуты в измерении связаны (прямую или косвенно) с ключевым атрибутом.  
  
 Часто, но не всегда, ключевой атрибут может быть **атрибутом гранулярности**. Гранулярность — это уровень детализации или точности в данных. Общий пример является самым быстрым способом понять все значения. Рассмотрим следующие значения данных. Для ежедневных продаж требуются значения дат, заданные для дня. Для квот достаточно указать квартал. Но если аналитические данные содержат результаты состязания из спортивного мероприятия, гран следует указать в миллисекундах. Гран будет представлять уровень точности в значениях данных.  
  
 Валюта представляет собой еще один пример: финансовое приложение может отслеживать денежные значения до многих знаков после запятой, а локальный учебного заведения фонд возможно только, потребуется округленные значения до ближайшего доллара. Чтобы избежать хранения ненужных данных, очень важно понимать смысл грана. Исключение миллисекунд из отметки времени или копеек из суммы объема продаж может сэкономить пространство хранения и время обработки, если подобный уровень детализации не имеет отношения к выполняемому анализу.  
  
 Чтобы задать атрибут гранулярности, воспользуйтесь вкладкой «Использование измерений» в конструкторе кубов в SQL Server Data Tools. В примере модели AdventureWorks ключевым атрибутом измерения «Дата» является ключ «Дата». Для компонента «Заказы на продажу» атрибут гранулярности эквивалентен ключевому атрибуту. Для компонента «Цели продаж» уровнем гранулярности является квартал, поэтому атрибуту гранулярности задано значение «Календарный квартал».  
  
 ![Модель, которая показывает атрибут гранулярности](../../../analysis-services/multidimensional-models/mdx/media/ssas-keyconcepts-granularityattrib.png "модель, которая показывает атрибут гранулярности")  
  
> [!NOTE]  
>  Если атрибут гранулярности отличается от ключевого атрибута, все неключевые атрибуты должны быть напрямую или косвенно связаны атрибутом гранулярности. Внутри куба атрибут гранулярности определяет гранулярность измерения.  
  
## <a name="query-scope-cube-space"></a>Область запроса (пространство куба)  
 Область запроса определяется границами, в пределах которых происходит выбор данных. Ее размеры могут варьироваться от куба целиком (куб является крупнейшим объектом запроса) до ячейки.  
  
 **Пространство куба** — это совокупность элементов иерархий атрибутов куба с мерами куба.  
  
 **Вложенный куб** — это подмножество куба, представляющее отфильтрованное представление куба. Вложенные кубы можно определить в инструкции SCOPE в скрипте вычисления MDX, или в предложении SUBSELECT, или в запросе MDX, или как куб сеанса.  
  
 **Ячейка** — это пространство на пересечении элемента измерения мер и элемента из каждой иерархии атрибута в кубе.  
  
## <a name="other-modeling-terms"></a>Другие термины моделирования  
 В этом разделе — это коллекция основные понятия и термины, которые не укладывающиеся в других разделах, но по-прежнему нужно знать.  
  
 **Вычисляемый элемент** — это элемент измерения, который определяется и вычисляется во время обработки запроса. Вычисляемый элемент может быть определен в пользовательском запросе или в скрипте вычисления многомерного выражения и храниться на сервере. Вычисляемый элемент соответствует строкам в таблице измерения, в котором он определен.  
  
 **Число различных объектов** — это особый тип меры, используемый для элементов данных, которые следует подсчитывать только один раз. В примере модели AdventureWorks можно увидеть меры числа различных объектов для компонентов «Заказы через Интернет», «Заказы торгового посредника» и «Заказы на продажу».  
  
 **Группы мер** — это набор, состоящий из одной или нескольких мер. В основном эти группы определяются пользователями и используются для хранения связанных мер вместе. Меры числа различных объектов являются исключением. Они всегда размещаются в специальной группе мер, содержащей только явные меры. В примере иллюстрации сводной таблицы группы мер не отображается, но он отображается в списке полей сводной таблицы, как это именованная коллекция мер.  
  
 **Измерение мер** — это измерение, содержащее все меры в кубе. Он остается невидимым в многомерной модели, создаваемые в SQL Server Data Tools, но существует точно так же. Поскольку оно содержит меры, все элементы измерения мер, как правило, объединены (обычно по сумме или по числу).  
  
 **Измерения базы данных и измерения куба**. В рамках модели можно определить отдельные измерения, которые затем включаются в любое количество кубов в этой модели. При добавлении измерения в кубе называется измерением куба. Сама по себе в рамках проекта, как отдельный элемент в обозревателе объектов называется измерением базы данных. Зачем проводить различие? Это связано с возможностью независимого задания свойств для каждого из типов измерений. В документации по продукту вы увидите используются оба термина, поэтому важно понимать, что они означают.  
  
## <a name="next-steps"></a>Следующие шаги  
 Получив представление о важных понятиях и терминологии, можно перейти к дополнительным разделам, содержащим дальнейшие сведения об основных принципах работы служб Analysis Services.  
  
-   [Базовый запрос многомерных выражений (многомерные выражения)](../../../analysis-services/multidimensional-models/mdx/mdx-query-the-basic-query.md)  
  
-   [Базовый скрипт многомерных выражений (многомерные выражения)](../../../analysis-services/multidimensional-models/mdx/the-basic-mdx-script-mdx.md)  
  
-   [Многомерное моделирование (учебник по Adventure Works)](../../../analysis-services/multidimensional-tutorial/multidimensional-modeling-adventure-works-tutorial.md)  
  
## <a name="see-also"></a>См. также  
 [Cube Space](../../../analysis-services/multidimensional-models/mdx/cube-space.md)   
 [Кортежи](../../../analysis-services/multidimensional-models/mdx/tuples.md)   
 [Autoexists](../../../analysis-services/multidimensional-models/mdx/autoexists.md)   
 [Работа с элементами, кортежами и наборами (многомерные выражения)](../../../analysis-services/multidimensional-models/mdx/working-with-members-tuples-and-sets-mdx.md)   
 [Визуальные и невизуальные итоги](../../../analysis-services/multidimensional-models/mdx/visual-totals-and-non-visual-totals.md)   
 [Основные принципы запросов многомерных выражений (службы Analysis Services)](../../../analysis-services/multidimensional-models/mdx/mdx-query-fundamentals-analysis-services.md)   
 [Основные принципы создания скриптов многомерных выражений (службы Analysis Services)](../../../analysis-services/multidimensional-models/mdx/mdx-scripting-fundamentals-analysis-services.md)   
 [Справочник по языку многомерных выражений (многомерные выражения)](../../../mdx/mdx-language-reference-mdx.md)   
 [Справочник по многомерным выражениям (многомерные выражения)](../../../mdx/multidimensional-expressions-mdx-reference.md)  
  
  
