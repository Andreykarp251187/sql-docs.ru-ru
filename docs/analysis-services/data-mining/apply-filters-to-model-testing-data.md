---
title: Применение фильтров к модели проверочных данных | Документация Майкрософт
ms.date: 05/01/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: data-mining
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: d9254d42d61fdf6bf087d83d0ced4ff1761dd077
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "68210192"
---
# <a name="apply-filters-to-model-testing-data"></a>Применение фильтров к данным проверки модели
[!INCLUDE[ssas-appliesto-sqlas](../../includes/ssas-appliesto-sqlas.md)]
  Задавая внешний источник данных для использования при тестировании модели, можно при необходимости применить фильтр для ограничения входных данных. Например, необходимо проверить модель конкретно по прогнозам для клиентов с определенным уровнем дохода.  
  
 Например, в сценарии целевой рассылки Adventure Works можно создать критерий фильтра, аналогичный приведенному ниже в ProspectiveBuyer, который является таблицей с проверочными данными, и ограничить проверочные варианты по уровню дохода:  
  
 `[YearlyIncome] = '50000'`  
  
 Поведение фильтров несколько отличается в зависимости от того, фильтруются обучающие данные модели или набор проверочных данных.  
  
-   При создании фильтра по набору проверочных данных создается предложение WHERE для входящих данных. Если фильтруется набор входных данных, используемый для оценки модели, то критерий фильтра преобразуется в инструкцию Transact-SQL и применяется к входной таблице во время создания диаграммы. В результате количество проверочных вариантов можно значительно сократить.  
  
-   Если к модели интеллектуального анализа данных применяется фильтр, именно критерий фильтра переводится в инструкцию расширений интеллектуального анализа данных и применяется к отдельной модели. Таким образом, когда к модели применяется фильтр, для обучения модели используется только подмножество исходных данных. Это может вызывать ошибки, если фильтр применяется к обучаемой модели с одним набором критериев; модель настраивается на определенный набор данных, а проверяется с другим набором критериев.  
  
-   Если набор проверочных данных был определен во время создания структуры, то к используемым для обучения вариантам модели относятся только те варианты, которые входят в набор обучающих данных структуры интеллектуального анализа данных **и** удовлетворяют условиям фильтра. Таким образом, если при проверке модели выбрать параметр **Использовать проверочные варианты модели интеллектуального анализа**, то проверочными будут только варианты, которые входят в набор проверочных данных структуры интеллектуального анализа данных и удовлетворяют условиям фильтра. Однако если набор контрольных данных определен не был, то к проверочным вариантам модели относятся все варианты набора данных, удовлетворяющие условиям фильтра  
  
-   Кроме того, условия фильтра, применяемые к модели, действуют также для запросов детализации по вариантам модели.  
  
 В итоге при проверке нескольких моделей, даже если все они основаны на одной и той же структуре интеллектуального анализа данных, необходимо иметь в виду, что они потенциально могут использовать для обучения и проверки различные подмножества данных. Это может иметь следующие последствия для диаграмм точности.  
  
-   Общее число вариантов в проверочных наборах может быть разным у разных проверяемых моделей.  
  
-   Процентные показатели для каждой модели могут не совпадать в диаграмме, если в моделях используются различные подмножества обучающих и проверочных данных.  
  
 Чтобы определить, содержит ли модель стандартный фильтр, который может влиять на результаты, посмотрите значение свойства **Filter** на панели **Свойства** либо выполните запрос к модели с использованием наборов строк схемы интеллектуального анализа данных. Например, следующий запрос возвращает текст фильтра для указанной модели:  
  
 `SELECT [FILTER] FROM $system.DMSCHEMA_MINING_MODELS WHERE MODEL_NAME = 'name of model'`  
  
> [!WARNING]  
>  Если нужно удалить фильтр из существующей модели интеллектуального анализа данных или если изменяются критерии фильтра, необходимо выполнить повторную обработку модели.  
  
 Дополнительные сведения о видах применяемых фильтров и оценке критериев фильтра см. в разделе [Синтаксис и примеры фильтра модели (службы Analysis Services — интеллектуальный анализ данных)](../../analysis-services/data-mining/model-filter-syntax-and-examples-analysis-services-data-mining.md).  
  
### <a name="create-a-filter-on-external-testing-data"></a>Создание фильтра для внешних проверочных данных  
  
1.  Чтобы открыть конструктор интеллектуального анализа данных, дважды щелкните структуру интеллектуального анализа данных, которая содержит модель для проверки.  
  
2.  Перейдите на вкладку **Диаграмма точности интеллектуального анализа** , а затем на вкладку **Выбор входных данных** .  
  
3.  На вкладке **Выбор входа** в области **Выбор набора данных для диаграммы точности**выберите параметр **Задать другой набор данных**.  
  
4.  Нажмите кнопку обзора **(...)**  чтобы открыть диалоговое окно и выбрать внешний набор данных.  
  
5.  Выберите таблицу вариантов, затем при необходимости добавьте вложенную таблицу. Сопоставьте требуемым образом столбцы в модели со столбцами во внешнем источнике данных. Выберите диалоговое окно **Указание сопоставления столбцов** , чтобы сохранить определение исходной таблицы.  
  
6.  Нажмите кнопку **Открыть редактор фильтров** , чтобы определить фильтр для набора данных.  
  
     Откроется диалоговое окно **Фильтр набора данных** . Если в структуре содержится вложенная таблица, можно создать фильтр из двух частей. Сначала следует задать условия для таблицы вариантов с помощью диалогового окна **Фильтр набора данных** , затем следует задать условия для вложенных строк с помощью диалогового окна **Фильтр** .  
  
7.  В диалоговом окне **Фильтр набора данных** щелкните верхнюю строку сетки в поле **Столбец структуры интеллектуального анализа данных**, затем выберите таблицу или столбец из списка.  
  
     Если в представлении источника данных содержатся несколько таблиц или вложенная таблица, сначала следует выбрать имя таблицы. В противном случае можно выбирать столбцы из таблицы вариантов напрямую.  
  
     Добавьте новую строку в каждый столбец, который необходимо фильтровать.  
  
8.  Используйте столбцы **Оператор**и **Значение** , чтобы определить метод фильтрации столбцов.  
  
     **ПРИМЕЧАНИЕ.** Значения следует вводить без кавычек.  
  
9. Щелкните текстовое поле **И/ИЛИ** и выберите логический оператор, чтобы определить метод сочетания нескольких условий.  
  
10. При необходимости нажмите кнопку обзора **(...)**  в правой части **значение** текстовое поле, чтобы открыть **фильтра** диалогового окна и задать условия для вложенной таблицы или отдельных столбцов таблицы вариантов.  
  
11. Проверьте правильность условий завершенного фильтра, просмотрев текст на панели **Выражение** .  
  
12. [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
     Условие фильтра применяется к источнику данных при создании диаграммы точности.  
  
## <a name="see-also"></a>См. также  
 [Выбрать и сопоставить данные проверки модели](../../analysis-services/data-mining/choose-and-map-model-testing-data.md)   
 [Использование данных вложенной таблицы в качестве входных для диаграммы точности](../../analysis-services/data-mining/using-nested-table-data-as-an-input-for-an-accuracy-chart.md)   
 [Выбор типа диаграммы точности и задание параметров диаграммы](../../analysis-services/data-mining/choose-an-accuracy-chart-type-and-set-chart-options.md)  
  
  
