---
title: Настройка учетных записей служб Power Pivot | Документация Майкрософт
ms.date: 05/02/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: ppvt-sharepoint
ms.topic: conceptual
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: 55eb472ef14e980f77a47a2c6989031cebec91e9
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "68208298"
---
# <a name="configure-power-pivot-service-accounts"></a>Настройка учетных записей служб Power Pivot
[!INCLUDE[ssas-appliesto-sqlas](../../includes/ssas-appliesto-sqlas.md)]
  Установка [!INCLUDE[ssGeminiShort](../../includes/ssgeminishort-md.md)]включает две службы, поддерживающие операции сервера. **SQL Server Analysis Services ([!INCLUDE[ssGemini](../../includes/ssgemini-md.md)])** — это службы Windows, обеспечивающие обработку данных [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] и поддержку запросов на сервере приложений. Учетная запись входа для этих служб всегда указывается во время настройки SQL Server при установке служб Analysis Services в режиме интеграции SharePoint.  
  
 Для приложения службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] , которая является общей веб-службой, работающей под идентификатором пула приложений на ферме SharePoint, необходимо указать вторую учетную запись. Эта учетная запись указывается, когда вы настраиваете установку [!INCLUDE[ssGeminiShort](../../includes/ssgeminishort-md.md)]с помощью средства настройки [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] или PowerShell.  
  
 Все службы должны запускаться под выделенной специальной учетной записью, чтобы у пользователя была возможность аудита подключений и включения протокола проверки подлинности Kerberos в ферме.  
  
 После настройки учетных записей служб все изменения любой из этих учетных записей должны выполняться в центре администрирования SharePoint. При использовании других средств (таких как консольное приложение «Службы», диспетчер служб IIS или диспетчер конфигурации SQL Server) разрешения не будут обновляться для доступа к базам данных на ферме или для доступа к локальным файлам на физическом сервере.  
  
 Этот раздел состоит из следующих подразделов.  
  
 [Обновление пароля, срок действия которого истек, для экземпляра служб SQL Server Analysis Services (Power Pivot)](#bkmk_passwordssas)  
  
 [Обновление пароля, срок действия которого истек, для приложения службы Power Pivot](../../analysis-services/power-pivot-sharepoint/configure-power-pivot-service-accounts.md#bkmk_passwordapp)  
  
 [Изменение учетной записи, под которой выполняется служба](#bkmk_newacct)  
  
 [Создание или изменение пула приложений для приложения службы Power Pivot](#bkmk_appPool)  
  
 [Требования к учетным записям и разрешения](#requirements)  
  
 [Устранение неполадок: Предоставление административных разрешений вручную](#updatemanually)  
  
 [Устранение неполадок: Разрешить HTTP 503, вызванных ошибками истечением срока действия паролей для центра администрирования или SharePoint Foundation службы веб-приложения](#expired)  
  
##  <a name="bkmk_passwordssas"></a> Обновление пароля, срок действия которого истек, для экземпляра служб SQL Server Analysis Services (Power Pivot)  
  
1.  Укажите «Пуск», выберите пункт **Администрирование**, а затем **Службы**. Дважды щелкните **SQL Server Analysis Services ([!INCLUDE[ssGemini](../../includes/ssgemini-md.md)])** . Откройте вкладку **Вход в систему**и введите новый пароль для учетной записи.  
  
2.  В центре администрирования в разделе «Безопасность» щелкните ссылку **Настройка управляемых учетных записей**.  
  
3.  Чтобы изменить нужную учетную запись, нажмите кнопку **Изменить** .  
  
4.  Установите флажок **Изменить пароль сейчас**.  
  
5.  Установите флажок **Задать новое значение для пароля учетной записи**. Все службы, работающие с управляемой учетной записью, будут использовать обновленные учетные данные.  
  
##  <a name="bkmk_passwordapp"></a> Обновление пароля, срок действия которого истек, для приложения службы Power Pivot  
  
1.  В центре администрирования в разделе «Безопасность» щелкните ссылку **Настройка управляемых учетных записей**.  
  
2.  Чтобы изменить нужную учетную запись, нажмите кнопку **Изменить** .  
  
3.  Установите флажок **Изменить пароль сейчас**.  
  
4.  Установите флажок **Задать новое значение для пароля учетной записи**. Все службы, работающие с управляемой учетной записью, будут использовать обновленные учетные данные.  
  
##  <a name="bkmk_newacct"></a> Изменение учетной записи, под которой выполняется служба  
  
1.  В центре администрирования в разделе «Безопасность» щелкните ссылку **Настройка учетных записей служб**.  
  
2.  Выберите **Служба Windows — службы SQL Server Analysis Services** и измените учетную запись службы Analysis Services.  
  
3.  В списке **Выберите учетную запись для этой службы**выберите существующую управляемую учетную запись или создайте новую. Это должна быть учетная запись пользователя домена.  
  
4.  Выберите **Пул приложений службы — система веб-служб SharePoint** и измените удостоверение пула приложений для приложения службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] по умолчанию. В зависимости от настройки установки, служба должна выполняться с использованием существующего пула приложений службы, созданного для служб SharePoint. По умолчанию средство настройки [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] регистрирует службу как **Приложение службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] по умолчанию (приложение службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)]).**  
  
     Если служба настроена вручную администратором SharePoint, то, скорее всего, будет иметь собственный пул приложений службы.  
  
5.  В списке **Выберите учетную запись для этой службы**выберите существующую управляемую учетную запись или создайте новую. Это должна быть учетная запись пользователя домена.  
  
6.  Нажмите кнопку **ОК**.  
  
##  <a name="bkmk_appPool"></a> Создание или изменение пула приложений для приложения службы Power Pivot  
  
1.  В разделе «Управление приложениями» центра администрирования выберите пункт **Управление приложениями служб**.  
  
2.  Выберите приложение службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] , но не щелкайте его. Если щелкнуть имя приложения, откроется панель управления [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] , в которой не указана ссылка на страницу свойств, где указан пул приложений.  Можно щелкнуть пустое место в строке или щелкнуть имя типа, чтобы выбрать приложение службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] .  
  
3.  На ленте нажмите **Свойства** .  
  
4.  Выберите команду **Создать новый пул приложений**. Укажите имя пула приложений и управляемую учетную запись для этого удостоверения.  
  
##  <a name="requirements"></a> Требования к учетным записям и разрешения  
 Планируя развертывание [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] для SharePoint, следует предусмотреть следующие учетные записи служб.  
  
-   Учетная запись службы Analysis Services. Службы Analysis Services обрабатывают запросы и задания обновления данных [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] в ферме. Эта учетная запись всегда указывается при установке SQL Server, когда происходит установка [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] для SharePoint.  
  
-   [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] . Приложение службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] связано с системной службой [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] , которая обеспечивает интеграцию с SharePoint и инфраструктуру для обработки запросов [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] в ферме. Пул приложений, указанный для приложения службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] , является удостоверением системной службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] . В ферме может применяться несколько приложений службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] . Каждое из созданных приложений должно запускаться в собственном пуле приложений.  
  
#### <a name="analysis-services-service-account"></a>Учетная запись службы Analysis Services  
  
|Требование|Описание|  
|-----------------|-----------------|  
|Требования провизионирования|Эта учетная запись может быть указана во время установки SQL Server на странице **Службы Analysis Services — конфигурация мастера установки** (либо параметром установки **ASSVCACCOUNT** в случае установки из командной строки).<br /><br /> Имя пользователя или пароль можно изменить с помощью центра администрирования, PowerShell или средства настройки [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] . Использование других средств для изменения учетных записей и паролей не поддерживается.|  
|Требования к учетной записи пользователя домена|Эта учетная запись должна быть учетной записью пользователя домена Windows. Использование встроенных учетных записей компьютера (таких как учетные записи локальной или сетевой службы) недопустимо. Программа установки SQL Server обеспечивает выполнение требования использовать учетную запись пользователя домена, блокируя установку при указании учетной записи компьютера.|  
|Требования к разрешениям|Эта учетная запись должна быть членом SQLServerMSASUser$\<сервера > $PowerPivot и группы безопасности WSS_WPG на локальном компьютере. Эти разрешения должны предоставляться автоматически. Дополнительные сведения о проверке и предоставлении разрешений см. в разделе [Предоставление административных разрешений учетной записи службы PowerPivot вручную](#updatemanually) этой статьи и в статье [Начальная конфигурация (PowerPivot для SharePoint)](http://msdn.microsoft.com/3a0ec2eb-017a-40db-b8d4-8aa8f4cdc146).|  
|Требования к масштабированию|Если в ферме устанавливается несколько экземпляров [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] для сервера SharePoint, все экземпляры сервера служб Analysis Services должны запускаться от имени одной и той же учетной записи пользователя домена. Например, если первый экземпляр [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)] настроен для запуска от имени Contoso\ssas-srv01, то все остальные экземпляры [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)] , развернутые в той же ферме, также должны запускаться от имени Contoso\ssas-srv01 (имя учетной записи приведено для примера и может отличаться).<br /><br /> Настройка всех экземпляров службы для запуска под одной и той же учетной записью позволяет системной службе [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] назначать задания по обработке запросов или обновлению данных любому экземпляру службы Analysis Services в ферме. Кроме того, это дает возможность администрировать экземпляры сервера служб Analysis Services с помощью функции управления учетными записями центра администрирования. Поскольку для всех экземпляров [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)] используется одна и та же учетная запись, появляется возможность изменить учетную запись или пароль только один раз, после чего все экземпляры службы, в которых используются эти учетные данные, будут обновлены автоматически.<br /><br /> Программа установки SQL Server обеспечивает соблюдение требования по использованию одной и той же учетной записи. При масштабном развертывании, когда в ферме SharePoint уже есть экземпляр [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] для установленного сервера SharePoint, программа установки блокирует новую установку, если указанная учетная запись [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)] отличается от уже используемой в ферме.|  
  
#### <a name="power-pivot-service-application-pool"></a>Пул приложений службы Power Pivot  
  
|Требование|Описание|  
|-----------------|-----------------|  
|Требования провизионирования|[!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] — это общий ресурс фермы, который становится доступным после создания приложения службы. Пул приложений службы должен быть указан при его создании. Его можно указать двумя способами: с помощью средства настройки [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] или с помощью команд PowerShell.<br /><br /> Удостоверение пула приложений можно настроить для запуска под уникальной учетной записью. Но если вы не рекомендуется, изменить его для запуска под другой учетной записи.|  
|Требования к учетной записи пользователя домена|Это удостоверение пула приложений должно быть учетной записью пользователя домена Windows. Использование встроенных учетных записей компьютера (таких как учетные записи локальной или сетевой службы) недопустимо.|  
|Требования к разрешениям|Для этой учетной записи не требуется наличие разрешений администратора локальной системы на компьютере. Однако эта учетная запись должна иметь разрешения системного администратора службы Analysis Services на локальном экземпляре [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)] , установленном на том же компьютере. Эти разрешения предоставляются либо автоматически программой установки SQL Server, либо при задании или смене удостоверения пула приложений в центре администрирования.<br /><br /> Административные разрешения требуются для перенаправления запросов [!INCLUDE[ssGeminiSrv](../../includes/ssgeminisrv-md.md)]. Они также необходимы для наблюдения за исправностью, закрытия неактивных сеансов и прослушивания событий трассировки.<br /><br /> Учетная запись должна иметь разрешения на подключение, чтение и запись для базы данных приложения службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] . Эти разрешения предоставляются автоматически при автоматическом создании и обновлении приложения в случае смены учетной записи или пароля в центре администрирования.<br /><br /> Прежде чем получить файл, приложение службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] проверяет, имеет ли пользователь SharePoint право просматривать данные, но оно не олицетворяет пользователя. Требований в отношении разрешений для олицетворения нет.|  
|Требования к масштабированию|Нет.|  
  
##  <a name="updatemanually"></a> Устранение неполадок: Предоставление административных разрешений вручную  
 Обновление административных разрешений невозможно, если пользователь, обновляющий учетные данные, не является локальным администратором на компьютере. В таком случае можно предоставить административные разрешения вручную. Проще всего это сделать, запустив задание таймера конфигурации [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] в центре администрирования. Такой подход позволяет сбрасывать разрешения для всех серверов [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] в пределах фермы. Учтите, что данный метод работает только в случае, если задание таймера SharePoint выполняется одновременно с правами администратора фермы и локального администратора на компьютере.  
  
1.  В разделе «Наблюдение» щелкните ссылку **Пересмотр определений заданий**.  
  
2.  Щелкните **Задание таймера конфигурации [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)]** .  
  
3.  Нажмите кнопку **Выполнить**.  
  
 В качестве последнего средства можно обеспечить наличие нужных разрешений, предоставив этому пользователю разрешения на системное администрирование служб Analysis [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] приложения службы, а затем явно добавив удостоверение приложения службы SQLServerMSASUser$\<имя_сервера > $PowerPivot Windows группа безопасности. Эти действия необходимо повторить для каждого экземпляра служб Analysis Services, интегрированного с фермой SharePoint.  
  
 Группы безопасности Windows может обновить только локальный администратор.  
  
1.  В SQL Server Management Studio подключитесь к экземпляру служб Analysis Services как \<имя_сервера > \POWERPIVOT.  
  
2.  Щелкните имя сервера правой кнопкой мыши и выберите пункт **Свойства**.  
  
3.  Перейдите на вкладку **Безопасность**.  
  
4.  Нажмите кнопку **Добавить**.  
  
5.  Введите имя учетной записи, которая используется для пула приложений службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] , и нажмите кнопку **ОК**.  
  
6.  В меню «Администрирование» выберите пункт **Управление компьютером**.  
  
7.  Откройте папку **Локальные пользователи и группы**.  
  
8.  Откройте **Группы**.  
  
9. Дважды щелкните SQLServerMSASUser$\<имя_сервера > $PowerPivot.  
  
10. Нажмите кнопку **Добавить**.  
  
11. Введите имя учетной записи, которая используется для пула приложений службы [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] , и нажмите кнопку **ОК**.  
  
##  <a name="expired"></a> Устранение неполадок: Разрешить HTTP 503, вызванных ошибками истечением срока действия паролей для центра администрирования или SharePoint Foundation службы веб-приложения  
 Если служба центра администрирования или служба веб-приложения SharePoint Foundation перестает работать из-за сброса учетной записи или истечения срока действия пароля, то при открытии центра администрирования SharePoint или сайта SharePoint будет выводиться сообщение об ошибке HTTP 503 «Служба недоступна». Чтобы восстановить работу сервера, выполните следующие действия. Когда центр администрирования станет доступен, можно продолжить обновление данных учетной записи с истекшим сроком действия.  
  
1.  В окне «Администрирование» выберите пункт **Диспетчер служб IIS**.  
  
2.  Для учетной записи пользователя домена, которая служит удостоверением для сайта или пула приложений центра администрирования и имеет пароль с истекшим сроком действия, выполните следующие действия.  
  
    1.  Щелкните имя пула приложений правой кнопкой мыши и выберите пункт **Дополнительные параметры**.  
  
    2.  Выберите **удостоверений** и нажмите кнопку... кнопку, чтобы открыть диалоговое окно удостоверение пула приложений.  
  
    3.  Нажмите кнопку **Установить**.  
  
    4.  Введите имя пользователя и пароль.  
  
3.  Запустите IISRESET. Для этого откройте командную строку администратора и введите команду **iisreset** .  
  
4.  В центре администрирования SharePoint в разделе «Безопасность» щелкните ссылку **Настройка управляемых учетных записей**.  
  
5.  Нажмите кнопку **Изменить** , чтобы обновить данные для управляемой учетной записи с истекшим сроком действия пароля.  
  
6.  Установите флажок **Изменить пароль сейчас**.  
  
7.  Установите флажок **Использовать существующий пароль**.  
  
8.  Введите пароль и нажмите кнопку **ОК**.  
  
 Если установлены службы Reporting Services, используйте диспетчер конфигурации служб Reporting Services для обновления паролей сервера отчетов и соединения с базой данных сервера отчетов. Дополнительные сведения см. в разделе [Настройка и администрирование сервера отчетов (режим интеграции с SharePoint служб Reporting Services)](../../reporting-services/report-server-sharepoint/configuration-and-administration-of-a-report-server.md).  
  
## <a name="see-also"></a>См. также  
 [Запуск и остановка службы PowerPivot для SharePoint Server](../../analysis-services/power-pivot-sharepoint/start-or-stop-a-power-pivot-for-sharepoint-server.md)   
 [Настройка учетной записи автоматического обновления данных Power Pivot (Power Pivot для SharePoint)](http://msdn.microsoft.com/81401eac-c619-4fad-ad3e-599e7a6f8493)  
  
  
