---
title: Повторное использование потока управления для нескольких пакетов с помощью частей пакета потока управления | Документы Майкрософт
ms.custom: ''
ms.date: 03/01/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.dts.designer.toolboxcontrolflowtemplate.f1
- sql13.dts.designer.addcopyexistingtemplate.f1
- sql13.dts.designer.addcopyexistingpackagepart.f1
- sql13.dts.designer.packagepart.general.f1
ms.assetid: 1edc91d9-1fab-4fe5-aed3-6f581fe32c18
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 2fa693e4e5c8f21b9d8fc8ad02369bff7623b59e
ms.sourcegitcommit: 58158eda0aa0d7f87f9d958ae349a14c0ba8a209
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2020
ms.locfileid: "71295789"
---
# <a name="reuse-control-flow-across-packages-by-using-control-flow-package-parts"></a>Повторное использование потока управления для нескольких пакетов с помощью частей пакета потока управления

[!INCLUDE[ssis-appliesto](../includes/ssis-appliesto-ssvrpluslinux-asdb-asdw-xxx.md)]


  Можно сохранить часто используемую задачу или контейнер потока управления в отдельный файл части (DTSXP-файл) и повторно использовать их несколько раз в одном или нескольких пакетах с помощью частей пакета потока управления. Такая возможность повторного использования упрощает разработку и обслуживание пакетов служб SSIS.  
  
## <a name="create-a-new-control-flow-package-part"></a>Создание части пакета потока управления  
 Чтобы создать новую часть пакета потока управления, в обозревателе решений разверните папку **Части пакета** . Щелкните правой кнопкой мыши **Поток управления** и выберите пункт **Создать часть пакета потока управления**.  
  
 ![Создание шаблона потока управления](../integration-services/media/control-flow-templates-create-new.png "Создание шаблона потока управления")  
  
 В папке **Части пакета | Поток управления** будет создан новый файл части с расширением DTSXP. В то же время в панель элементов служб SSIS будет добавлен новый элемент с тем же именем. (Элемент в панели отображается только при наличии проекта, содержащего часть, открытую в Visual Studio.)  
  
 ![Шаблоны потока управления в панели элементов](../integration-services/media/control-flow-templates-in-toolbox.png "Шаблоны потока управления в панели элементов")  
  
## <a name="design-a-control-flow-package-part"></a>Проектирование части пакета потока управления  
 Чтобы открыть редактор частей пакета, дважды щелкните файл части в обозревателе решений. Проектировать часть можно так же, как и пакет.  
  
 ![Шаг 1 при проектировании шаблона потока управления](../integration-services/media/control-flow-template-design-step-1.png "Шаг 1 при проектировании шаблона потока управления")  
  
 ![Шаг 2 при проектировании шаблона потока управления](../integration-services/media/control-flow-template-design-step-2.png "Шаг 2 при проектировании шаблона потока управления")  
  
 Части пакета потока управления имеют следующие ограничения.  
  
-   Часть может содержать только одну задачу или контейнер верхнего уровня. Чтобы включить несколько задач и контейнеров, поместите их в один контейнер последовательности.  
  
-   Запуск и отладка части непосредственно в конструкторе не поддерживается.  
  
## <a name="add-an-existing-control-flow-package-part-to-a-package"></a>Добавление существующей части пакета потока управления в пакет  
 Части, сохраненные в текущем проекте служб Integration Services или в другом проекте, можно использовать повторно.  
  
-   Чтобы повторно использовать часть, которая входит в текущий проект, перетащите ее из панели элементов.  
  
-   Чтобы повторно использовать часть, которая входит в другой проект, используйте команду **Добавить существующую часть пакета потока управления** .  
  
### <a name="drag-and-drop-a-control-flow-package-part"></a>Перетаскивание части пакета потока управления  
 Чтобы повторно использовать часть проекта, просто перетащите ее из панели элементов, как любую другую задачу или контейнер. Перетаскивать часть в пакет можно несколько раз для повторного использования логики в нескольких расположениях пакета. Этот способ используется для частей, которые входят в текущий проект.  
  
 ![Добавление шаблона потока управления в пакет](../integration-services/media/control-flow-templates-add-to-package.png "Добавление шаблона потока управления в пакет")  
  
 ![Пакет с несколькими шаблонами потока управления](../integration-services/media/control-flow-templates-in-package.png "Пакет с несколькими шаблонами потока управления")  
  
 При сохранении пакета конструктор служб SSIS проверяет наличие экземпляров частей в пакете.  
  
-   Если пакет содержит экземпляры частей, конструктор создает новый DTSX.DESIGNER-файл, который содержит все сведения, относящиеся к частям.  
  
-   Если в пакете не используются части, конструктор удаляет все созданные ранее DTSX.DESIGNER-файлы для пакета (то есть любые DTSX.DESIGNER-файлы, имеющие то же имя, что и пакет).  
  
 ![Обозреватель решений с шаблонами потока управления](../integration-services/media/control-flow-templates-in-solution-explorer.png "Обозреватель решений с шаблонами потока управления")  
  
### <a name="add-a-copy-of-an-existing-control-flow-package-part-or-a-reference-to-an-existing-part"></a>Добавление копии существующей части пакета потока управления или ссылка на существующую часть  
 Чтобы добавить копию существующей части в файловой системе в пакет, в обозревателе решений разверните папку **Части пакета** . Щелкните правой кнопкой мыши **Поток управления** и выберите пункт **Добавить существующую часть пакета потока управления**.  
  
 ![Добавление новых шаблонов потока управления из меню](../integration-services/media/control-flow-templates-add-from-menu.png "Добавление новых шаблонов потока управления из меню")  
  
 ![Диалоговое окно "Добавление копии существующего шаблона"](../integration-services/media/control-flow-templates-add-copy-dialog.png "Диалоговое окно "Добавление копии существующего шаблона"")  
  
 **Параметры**  
  
 **Путь к части пакета**  
 Введите путь к файлу части или нажмите кнопку обзора (...) и найдите файл части для копирования или ссылки.  
  
 **Добавить как ссылку**  
 -   Если этот флажок установлен, часть добавляется в проект служб Integration Services в виде ссылки. Выберите этот вариант, если требуется сослаться на одну копию файла части в нескольких проектах служб Integration Services.  
  
-   Если этот флажок снят, копия файла части добавляется в проект.  
  
## <a name="configure-a-control-flow-package-part"></a>Настройка части пакета потока управления  
 Чтобы настроить части пакета потока управления после добавления их в поток управления пакета, используйте диалоговое окно **Настройка частей пакета**  .  
  
#### <a name="to-open-the-package-part-configuration-dialog-box"></a>Открытие диалогового окна "Настройка частей пакета"  
  
1.  Чтобы настроить экземпляр части, дважды щелкните его в потоке управления. Кроме того, можно щелкнуть экземпляр части правой кнопкой мыши и выбрать пункт **Изменить**. Откроется диалоговое окно **Настройка частей пакета** .  
  
2.  Настройте свойства и диспетчеры подключений для экземпляра части.  
  
### <a name="properties-tab"></a>Вкладка «Свойства»  
 Вкладка **Свойства** диалогового окна **Настройка частей пакета**  служит для задания свойств части.  
  
 ![Вкладка "Свойства" диалогового окна "Конфигурация шаблона"](../integration-services/media/template-configuration-properties-tab.png "Вкладка "Свойства" диалогового окна "Конфигурация шаблона"")  
  
 В представлении дерева слева перечислены все настраиваемые свойства экземпляра части.  
  
-   Если флажок свойства снят, значит, оно не настроено в экземпляре части. Экземпляр части использует значение свойства по умолчанию, определенное в части пакета потока управления.  
  
-   Если флажок установлен, введенное или выбранное значение переопределяет значение по умолчанию.  
  
 В таблице справа перечисляются свойства для настройки.  
  
-   **Путь к свойству**. Путь к данному свойству.  
  
-   **Тип свойства**. Тип данных свойства.  
  
-   **Значение**. Настроенное или заданное значение. Это значение переопределяет значение по умолчанию.  
  
### <a name="connection-managers-tab"></a>Вкладка "Диспетчеры подключений"  
 Вкладка **Диспетчеры подключений** диалогового окна **Настройка частей пакета**  служит для задания свойств диспетчеров подключений для экземпляра части.  
  
 ![Вкладка "Диспетчеры подключений" диалогового окна "Конфигурация шаблона"](../integration-services/media/template-configuration-connection-managers-tab.png "Вкладка "Диспетчеры подключений" диалогового окна "Конфигурация шаблона"")  
  
 В таблице слева перечислены все диспетчеры подключений, определенные в части потока управления. Выберите нужный диспетчер подключений.  
  
 В списке справа перечисляются свойства выбранного диспетчера подключений.  
  
-   **Задано**. Флажок установлен, если свойство настроено для экземпляра части.  
  
-   **Имя свойства**. Имя свойства.  
  
-   **Значение**. Настроенное или заданное значение. Это значение переопределяет значение по умолчанию.  
  
## <a name="delete-a-control-flow-part"></a>Удаление части потока управления  
 Чтобы удалить часть, в обозревателе решений щелкните ее правой кнопкой мыши и выберите пункт **Удалить**. Нажмите кнопку **ОК** , чтобы подтвердить удаление, или кнопку **Отмена** , чтобы оставить часть в пакете.  
  
 При удалении части из проекта она безвозвратно удаляется из файловой системы и не подлежит восстановлению.  
  
> [!NOTE]  
>  Если требуется удалить часть из проекта служб Integration Services, но оставить ее для использования в других проектах, необходимо использовать пункт **Исключить из проекта**  , а не **Удалить** .  
  
## <a name="package-parts-are-a-design-time-feature-only"></a>Части пакета можно использовать только во время проектирования  
 Части пакета используются исключительно во время проектирования. Конструктор служб SSIS служит для создания, сохранения и обновления частей, а также для добавления, настройки или удаления экземпляров частей в пакете. При этом среда выполнения служб SSIS не учитывает части. Такое разделение достигается следующим образом.  
  
-   Конструктор сохраняет экземпляры частей пакета с их настроенными свойствами в DTSX.DESIGNER-файл.  
  
-   Когда конструктор сохраняет DTSX.DESIGNER-файл, помимо этого, он извлекает содержимое из частей, на которые ссылается этот файл, и заменяет экземпляры частей в пакете содержимым частей.  
  
-   Наконец, все содержимое, которое больше не содержит информации о части, сохраняется в файл пакета с расширением DTSX. Это файл, который выполняет среда выполнения служб SSIS.  
  
 На приведенной ниже схеме показано отношение между частями (DTSXP-файлами), конструктором служб SSIS и средой выполнения SSIS.  
  
 ![Файлы и поток шаблонов потока управления](../integration-services/media/control-flow-templates-intro.png "Файлы и поток шаблонов потока управления")  
  
  
