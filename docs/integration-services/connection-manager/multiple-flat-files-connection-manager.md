---
title: Диспетчер соединения с несколькими неструктурированными файлами | Документы Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.dts.designer.multifile.advanced.f1
- sql13.dts.designer.multifile.columns.f1
- sql13.dts.designer.multifile.general.f1
- sql13.dts.designer.multifile.preview.f1
helpviewer_keywords:
- Multiple Flat Files connection manager
- connections [Integration Services], flat files
- flat files
- flat file connections [Integration Services]
- connection managers [Integration Services], Multiple Flat Files
- multiple flat file connections
ms.assetid: 31fc3f7a-d323-44f5-a907-1fa3de66631a
author: chugugrace
ms.author: chugu
ms.openlocfilehash: c93f0be480341abb59038db34616a94d4b475952
ms.sourcegitcommit: b2e81cb349eecacee91cd3766410ffb3677ad7e2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "71298507"
---
# <a name="multiple-flat-files-connection-manager"></a>диспетчер соединения с несколькими неструктурированными файлами

[!INCLUDE[ssis-appliesto](../../includes/ssis-appliesto-ssvrpluslinux-asdb-asdw-xxx.md)]


  Диспетчер соединения с несколькими неструктурированными файлами позволяет пакету получить доступ к данным в нескольких неструктурированных файлах. Например, источник неструктурированных файлов может использовать диспетчер соединения с несколькими неструктурированными файлами, если задача потока данных находится в контейнере цикла, например в контейнере «цикл по элементам». В каждом цикле контейнера источник неструктированных файлов загружает данные из следующего имени файла, которое предоставляет диспетчер соединения с несколькими неструктурированными файлами.  
  
 При добавлении к пакету диспетчера соединения с несколькими неструктурированными файлами службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] создают диспетчер соединения, устанавливающий соединения с несколькими неструктурированными файлами во время работы, а также устанавливают свойства диспетчера соединения с несколькими неструктурированными файлами и добавляют его к коллекции **Соединения** пакета.  
  
 Свойству **ConnectionManagerType** диспетчера соединений присваивается значение **MULTIFLATFILE**.  
  
 Можно установить конфигурацию диспетчера соединений с несколькими неструктурированными файлами следующими способами.  
  
-   Укажите файлы, локаль и кодовую страницу для использования. Локаль используется для интерпретации данных, зависящих от локаля, например дат, а кодовая страница используется для конвертации строковых данных в формат Юникод.  
  
-   Укажите формат файла. Можно использовать форматы с разделителями, фиксированной шириной или без выравнивания по правому краю.  
  
-   Укажите строку заголовка, строку данных и разделители столбцов. Разделители столбцов могут указываться на уровне файла и перезаписываться на уровне столбцов.  
  
-   Укажите, содержит ли первая строка данных имена столбцов.  
  
-   Укажите символ ограничителя текста. Каждый столбец может быть настроен на распознавание текстового ограничителя.  
  
-   Установите свойства, например имя, тип данных и максимальную ширину отдельных столбцов.  
  
 Когда диспетчер соединений нескольких неструктурированных файлов ссылается на несколько файлов, то пути этих файлов разделены символом вертикальной черты (|). Свойство **ConnectionString** диспетчера соединений имеет следующий формат:  
  
 \<*путь*>|\<*путь*>  
  
 Можно также указать несколько файлов, используя символы-шаблоны. Например, для создания ссылки на все текстовые файлы на диске C значение свойства **ConnectionString** может быть равно "C:\\*.txt".  
  
 Если диспетчер соединений с несколькими неструктурированными файлами ссылается на несколько файлов, то все файлы должны иметь один формат.  
  
 По умолчанию диспетчер соединений с несколькими неструктурированными файлами устанавливает длину строковых столбцов в значение 50 символов. В диалоговом окне **Редактор диспетчера соединений с несколькими неструктурированными файлами** можно оценить образцы данных и автоматически изменить длину этих столбцов, чтобы предотвратить усечение данных или избыточность ширины столбца. Если изменение длины столбца происходит не в источнике или преобразовании неструктурированного файла, то длина столбца остается неизменной на всем потоке данных. Если эти столбцы сопоставляются с более узкими целевыми столбцами, то пользователю выдается предупреждение, а во время выполнения могут возникнуть ошибки, связанные с усечением данных. Можно изменить размер столбцов так, чтобы столбцы соответствовали целевым столбцам в диспетчере соединений с неструктурированными файлами, источнике неструктурированных файлов или преобразовании. Чтобы изменить длину выходных столбцов, используйте свойство **Length** выходных столбцов на вкладке **Свойства входов и выходов** диалогового окна **Расширенный редактор** .  
  
 Если длина столбцов обновляется в диспетчере соединений с несколькими неструктурированными файлами, после того как был добавлен и настроен источник неструктурированного файла, который использует диспетчер соединений, то нельзя вручную изменять размер выходных столбцов в источнике неструктурированного файла. При открытии диалогового окна **Источник «Неструктурированный файл»** источник неструктурированного файла предоставляет параметр для синхронизации метаданных столбца.  
  
## <a name="configuration-of-the-multiple-flat-files-connection-manager"></a>Конфигурация диспетчера соединений с несколькими неструктурированными файлами  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Дополнительные сведения о программной настройке диспетчера подключений см. в разделах <xref:Microsoft.SqlServer.Dts.Runtime.ConnectionManager> и [Добавление соединений программным образом](../../integration-services/building-packages-programmatically/adding-connections-programmatically.md).  
  
## <a name="multiple-flat-files-connection-manager-editor-general-page"></a>Редактор диспетчера соединений с несколькими неструктурированными файлами (страница «Общие»)
  С помощью страницы **Общие** диалогового окна **Редактор диспетчера соединения с несколькими неструктурированными файлами** можно выбрать группу файлов с одинаковым форматом данных и указать их формат данных. Соединения с несколькими неструктурированными файлами дают возможность пакету подключиться к группе текстовых файлов с тем же форматом.  
  
 Дополнительные сведения о диспетчере соединений с несколькими неструктурированными файлами см. в разделе [Multiple Flat Files Connection Manager](../../integration-services/connection-manager/multiple-flat-files-connection-manager.md).  
  
### <a name="options"></a>Параметры  
 **Имя диспетчера подключений**  
 Задайте уникальное имя для соединения с несколькими неструктурированными файлами в рабочем процессе. Выбранное имя будет отображаться в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .  
  
 **Описание**  
 Опишите соединение. Рекомендуется описать цель соединения, чтобы пакеты самодокументировались и их проще было обслуживать.  
  
 **Имена файлов**  
 Введите путь и имена файлов для соединения с несколькими неструктурированными файлами. Можно указать несколько файлов, используя символы-шаблоны (как в "C:\\*.txt") или разделив несколько имен файлов символом вертикальной черты (|). Все файлы должны иметь одинаковый формат данных.  
  
 **Обзор**  
 Просмотрите имена файлов для использования соединения с несколькими неструктурированными файлами. Можно выбрать несколько файлов. Все файлы должны иметь одинаковый формат данных.  
  
 **Локаль**  
 Укажите местоположение, чтобы дать необходимые сведения о порядке сортировки и преобразовании даты и времени.  
  
 **Юникод**  
 Укажите, следует ли использовать Юникод. Использование Юникод исключает возможность указания кодовой страницы.  
  
 **Кодовая страница**  
 Укажите кодовую страницу для текста не в Юникоде.  
  
 **Формат**  
 Укажите, будет ли использоваться форматирование с разделителями, с фиксированной шириной строк или без выравнивания по правому краю. Все файлы должны иметь одинаковый формат данных.  
  
|Значение|Описание|  
|-----------|-----------------|  
|С разделителями|Столбцы отделены друг от друга с помощью разделителей, указанных на странице **Столбцы** .|  
|Фиксированная ширина|Столбцы имеют фиксированную ширину, заданную перетаскиванием линий разметки на странице **Столбцы** .|  
|Переменная ширина|В файлах с неровным правым краем все столбцы имеют фиксированную ширину, кроме последнего. Последний столбец ограничен разделителем строк, заданным на странице **Столбцы** .|  
  
 **Ограничитель текста**  
 Укажите ограничитель текста, который следует использовать. Например, можно задать заключение текста в кавычки.  
  
 **Разделитель строки заголовка**  
 Выберите разделитель из списка разделителей строк заголовка или введите текст разделителя.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**{CR}{LF}**|В качестве разделителей для строки заголовка используются сочетания символов возврата каретки и перевода строки.|  
|**{CR}**|В качестве разделителей для строки заголовка используются символы возврата каретки.|  
|**{LF}**|В качестве разделителей для строки заголовка используются символы перевода строки.|  
|**Точка с запятой {;}**|В качестве разделителя для строки заголовка используется точка с запятой.|  
|**Двоеточие {:}**|В качестве разделителя для строки заголовка используется двоеточие.|  
|**Запятая {,}**|В качестве разделителя для строки заголовка используется запятая.|  
|**Табуляция {t}**|В качестве разделителя для строки заголовка используется символ табуляции.|  
|**Вертикальная черта {&#124;}**|В качестве разделителя для строки заголовка используется вертикальная черта.|  
  
 **Пропускаемые строки заголовка**  
 Укажите число строк заголовка, которые нужно пропустить (если такие есть).  
  
 **Имена столбцов в первой строке данных**  
 Укажите, ожидать или задать имена столбцов в первой строке данных.  
  
## <a name="multiple-flat-files-connection-manager-editor-columns-page"></a>Редактор диспетчера соединения с несколькими неструктурированными файлами (страница «Столбцы»)
  Для задания сведений о строках и столбцах, а также для предварительного просмотра первого выбранного файла используется узел **Столбцы** диалогового окна **Редактор диспетчера соединений с несколькими неструктурированными файлами** .  
  
 Дополнительные сведения о диспетчере соединений с несколькими неструктурированными файлами см. в разделе [Multiple Flat Files Connection Manager](../../integration-services/connection-manager/multiple-flat-files-connection-manager.md).  
  
### <a name="static-options"></a>Статические параметры  
 **Имя диспетчера подключений**  
 Задайте уникальное имя для соединения с несколькими неструктурированными файлами в рабочем процессе. Выбранное имя будет отображаться в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .  
  
 **Описание**  
 Опишите соединение. Рекомендуется описать цель соединения, чтобы пакеты самодокументировались и их проще было обслуживать.  
  
### <a name="flat-file-format-dynamic-options"></a>Динамические параметры формата неструктурированных файлов  
  
#### <a name="format--delimited"></a>Формат = Разделитель  
 **Разделитель строк**  
 Выберите из списка доступных разделителей строк или введите текст разделителя.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**{CR}{LF}**|Строки разделяются сочетанием символов возврата каретки и перевода строки.|  
|**{CR}**|Строки разделяются символом возврата каретки.|  
|**{LF}**|Строки разделяются символом перевода строки.|  
|**Точка с запятой {;}**|Строки разделяются точкой с запятой.|  
|**Двоеточие {:}**|Строки разделяются двоеточием.|  
|**Запятая {,}**|Строки разделяются запятой.|  
|**Табуляция {t}**|Строки разделяются символом табуляции.|  
|**Вертикальная черта {&#124;}**|Строки разделяются вертикальной чертой.|  
  
 **Разделитель столбцов**  
 Выберите из списка доступных разделителей столбцов или введите текст разделителя.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**{CR}{LF}**|Столбцы разделяются парой символов возврата каретки и перевода строки.|  
|**{CR}**|Столбцы разделяются символом возврата каретки.|  
|**{LF}**|Столбцы разделяются символом перевода строки.|  
|**Точка с запятой {;}**|Столбцы разделяются символом точки с запятой.|  
|**Двоеточие {:}**|Столбцы разделяются символом двоеточия.|  
|**Запятая {,}**|Столбцы разделяются символом запятой.|  
|**Табуляция {t}**|Столбцы разделяются символом табуляции.|  
|**Вертикальная черта {&#124;}**|Столбцы разделяются символом вертикальной черты.|  
  
 **Сбросить столбцы**  
 При нажатии кнопки **Сбросить столбцы**удаляются все столбцы, кроме исходных.  
  
#### <a name="format--fixed-width"></a>Формат = Фиксированная ширина  
 **Шрифт**  
 Выбор шрифта для предварительного просмотра данных.  
  
 **Столбцы источника данных**  
 Настройте ширину строк, перемещая вертикальный маркер, а также ширину столбцов, щелкнув линейку в верхней части окна предварительного просмотра  
  
 **Ширина строки**  
 Задайте длину строки перед добавлением разделителей для отдельных столбцов. Либо перетащите вертикальную линию в окне предварительного просмотра, чтобы отметить конец строки. Значение ширины строки автоматически обновляется.  
  
 **Сбросить столбцы**  
 При нажатии кнопки **Сбросить столбцы**удаляются все столбцы, кроме исходных.  
  
#### <a name="format--ragged-right"></a>Формат = Выравнивание по левому краю  
  
> [!NOTE]  
>  В файлах с текстом без выключки вправо каждый столбец имеет фиксированную ширину, за исключением последнего столбца. Он отделяется разделителем строк.  
  
 **Шрифт**  
 Выбор шрифта для предварительного просмотра данных.  
  
 **Столбцы источника данных**  
 Настройте ширину строк, перемещая вертикальный маркер, а также ширину столбцов, щелкнув линейку в верхней части окна предварительного просмотра  
  
 **Разделитель строк**  
 Выберите из списка доступных разделителей строк или введите текст разделителя.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**{CR}{LF}**|Строки разделяются сочетанием символов возврата каретки и перевода строки.|  
|**{CR}**|Строки разделяются символом возврата каретки.|  
|**{LF}**|Строки разделяются символом перевода строки.|  
|**Точка с запятой {;}**|Строки разделяются точкой с запятой.|  
|**Двоеточие {:}**|Строки разделяются двоеточием.|  
|**Запятая {,}**|Строки разделяются запятой.|  
|**Табуляция {t}**|Строки разделяются символом табуляции.|  
|**Вертикальная черта {&#124;}**|Строки разделяются вертикальной чертой.|  
  
 **Сбросить столбцы**  
 При нажатии кнопки **Сбросить столбцы**удаляются все столбцы, кроме исходных.  
  
## <a name="multiple-flat-files-connection-manager-editor-advanced-page"></a>Редактор диспетчера соединения с несколькими неструктурированными файлами (страница «Дополнительно»)
  Используйте страницу **Дополнительно** в диалоговом окне **Редактор диспетчера соединения с несколькими неструктурированными файлами**, чтобы задать такие свойства, как тип данных и разделители каждого столбца в текстовых файлах, с которыми производит соединение диспетчер подключений неструктурированных файлов.  
  
 По умолчанию, длина строковых столбцов составляет 50 символов. Чтобы не допустить усечения данных или установки избыточной ширины столбца, можно оценить образец данных и автоматически изменить длину столбцов. Также можно обновить другие метаданные, чтобы обеспечить совместимость с целевыми столбцами. Например, можно изменить тип данных столбца, который содержит только целые данные, на числовой тип данных, например DT_I2.  
  
 Дополнительные сведения о диспетчере соединений с несколькими неструктурированными файлами см. в разделе [Multiple Flat Files Connection Manager](../../integration-services/connection-manager/multiple-flat-files-connection-manager.md).  
  
### <a name="options"></a>Параметры  
 **Имя диспетчера подключений**  
 Задайте уникальное имя для диспетчера соединения с несколькими неструктурированными файлами в рабочем процессе. Указанное имя будет отображаться в области **Диспетчеры соединений** конструктора служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .  
  
 **Описание**  
 Задайте описание диспетчера соединений. Рекомендуется описать назначение диспетчера соединений, чтобы сделать пакеты самодокументируемыми и более простыми в использовании.  
  
 **Задать параметры каждого столбца**  
 Выберите столбец в левой панели для просмотра его свойств в правой панели. В нижеследующей таблице приведены описания свойств типов данных. Некоторые перечисленные свойства могут настраиваться только для некоторых форматов неструктурированных файлов.  
  
|Свойство|Описание|  
|--------------|-----------------|  
|**ColumnType**|Указывает, ограничен ли столбец специальным символом, фиксированной шириной или оборван по правому краю. Это свойство доступно только для чтения. В файлах с текстом без выравнивания по правому краю каждый столбец имеет фиксированную ширину, за исключением последнего столбца, ограниченного разделителем строк.|  
|**OutputColumnWidth**|Укажите значение, которое будет храниться как количество байтов; для файлов в кодировке Юникод это будет отображаться как количество символов. В задаче потока данных это значение используется для задания ширины выходных столбцов для источника неструктурированного файла.<br /><br /> Примечание. В объектной модели это свойство имеет имя MaximumWidth.|  
|**DataType**|Выберите из списка доступных типов данных. Дополнительные сведения см. в разделе [Integration Services Data Types](../../integration-services/data-flow/integration-services-data-types.md).|  
|**TextQualified**|Указывает, обработаны ли текстовые данные символом квалификатора текста:<br /><br /> **True**. Текстовые данные в неструктурированном файле обработаны квалификатором.<br /><br /> **False**. Текстовые данные в неструктурированном файле не обработаны квалификатором.|  
|**имя**;|Введите имя столбца. По умолчанию, используется нумерованный список столбцов, однако можно выбрать любое уникальное описательное имя.|  
|**DataScale**|Укажите масштаб числовых данных. Масштаб представляет собой количество разрядов в числе. Дополнительные сведения см. в разделе [Integration Services Data Types](../../integration-services/data-flow/integration-services-data-types.md).|  
|**ColumnDelimiter**|Выберите из списка допустимых разделителей столбцов. Выберите разделители, которые не могут встретиться в тексте. Это значение пропускается для столбцов фиксированной ширины.<br /><br /> **{CR}{LF}** — столбцы разделяются с помощью комбинации символов возврата каретки и перевода строки.<br /><br /> **{CR}** — столбцы разделяются символом возврата каретки.<br /><br /> **{LF}** — столбцы разделяются символом перевода строки.<br /><br /> **Точка с запятой {;}** — столбцы разделяются с помощью символа точки с запятой.<br /><br /> **Двоеточие {:}** — столбцы разделяются с помощью символа двоеточия.<br /><br /> **Запятая {,}**  — столбцы разделяются с помощью символа запятой.<br /><br /> **Табуляция {t}** — столбцы разделяются с помощью символа табуляции.<br /><br /> **Вертикальная черта {&#124;}** — столбцы разделяются с помощью символа вертикальной черты.|  
|**DataPrecision**|Укажите точность числовых данных. Точность представляет собой число разрядов. Дополнительные сведения см. в разделе [Integration Services Data Types](../../integration-services/data-flow/integration-services-data-types.md).|  
|**InputColumnWidth**|Укажите значение, которое будет храниться как количество байтов; для файлов в кодировке Юникод это будет отображаться как количество символов. Это значение пропускается для столбцов, ограниченных разделителями.<br /><br /> **Примечание** . В объектной модели это свойство имеет имя ColumnWidth.|  
  
 **Создать**  
 Добавьте новый столбец, нажав кнопку **Создать**. По умолчанию, кнопка **Создать** добавляет новый столбец в конец списка. Эта кнопка также имеет следующие параметры, доступные в раскрывающемся списке.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**Добавить столбец**|Добавить новый столбец в конец списка.|  
|**Вставить до**|Вставить новый столбец перед выделенным столбцом.|  
|**Вставить после**|Вставить новый столбец после выделенного столбца.|  
  
 **Удаление**  
 Выберите столбец и затем удалите его, нажав кнопку **Удалить**.  
  
 **Предложить типы...**  
 Используйте диалоговое окно **Предлагаемые типы столбцов** для проведения оценки данных выборки в первом выбранном файле и получения предложений относительно типа данных и длины каждого столбца. Дополнительные сведения см. в разделе [Диалоговое окно "Предложение типов столбцов" справочника по пользовательскому интерфейсу](../../integration-services/connection-manager/suggest-column-types-dialog-box-ui-reference.md).  
  
## <a name="multiple-flat-files-connection-manager-editor-preview-page"></a>Редактор диспетчера соединений с несколькими неструктурированными файлами (страница «Предварительный просмотр»)
  Используйте страницу **Предварительный просмотр** диалогового окна **Редактор диспетчера соединений с несколькими неструктурированными файлами** для просмотра содержимого первого выбранного исходного файла, разделенного на столбцы в соответствии с определениями пользователя.  
  
 Дополнительные сведения о диспетчере соединений с несколькими неструктурированными файлами см. в разделе [Multiple Flat Files Connection Manager](../../integration-services/connection-manager/multiple-flat-files-connection-manager.md).  
  
### <a name="options"></a>Параметры  
 **Имя диспетчера подключений**  
 Задайте уникальное имя для соединения с несколькими неструктурированными файлами в рабочем процессе. Указанное имя будет отображаться в области **Диспетчеры соединений** конструктора служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .  
  
 **Описание**  
 Опишите соединение. Рекомендуется описать цель соединения, чтобы пакеты самодокументировались и их проще было обслуживать.  
  
 **Количество пропускаемых строк данных**  
 Укажите, сколько строк необходимо пропустить в начале неструктурированного файла.  
  
 **Предварительный просмотр строк**  
 Просмотрите образец данных в первом выбранном неструктурированном файле, разделенном на столбцы и строки с помощью выбранных параметров.  
  
## <a name="see-also"></a>См. также:  
 [Источник «Неструктурированный файл»](../../integration-services/data-flow/flat-file-source.md)   
 [Назначение «Неструктурированный файл»](../../integration-services/data-flow/flat-file-destination.md)   
 [Соединения в службах Integration Services (SSIS)](../../integration-services/connection-manager/integration-services-ssis-connections.md)  
  
  
