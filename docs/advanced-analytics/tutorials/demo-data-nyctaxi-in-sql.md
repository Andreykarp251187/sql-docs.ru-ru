---
title: Скачайте демонстрационные данные и скрипты Нью такси для встраиваемых R и Python
description: Инструкции по скачиванию данных в городе Нью-Йорка и созданию базы данных. Данные используются в SQL Server Python и языковых учебниках R, демонстрирующих Внедрение скрипта в SQL Server хранимых процедур и функций T-SQL.
ms.prod: sql
ms.technology: machine-learning
ms.date: 10/31/2018
ms.topic: tutorial
author: dphansen
ms.author: davidph
ms.openlocfilehash: 1b0eea71105cb22cce81ac482c8ad6df50e63fa0
ms.sourcegitcommit: c1382268152585aa77688162d2286798fd8a06bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/19/2019
ms.locfileid: "68343429"
---
# <a name="nyc-taxi-demo-data-for-sql-server-python-and-r-tutorials"></a>Демонстрационные данные Нью такси для учебников по SQL Server Python и R
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

В этой статье объясняется, как настроить образец базы данных, состоящий из общедоступных данных из Нью- [йоркного города такси и лимузинов комиссии](http://www.nyc.gov/html/tlc/html/about/trip_record_data.shtml). Эти данные используются в нескольких руководствах по R и Python для аналитики в базе данных на SQL Server. Чтобы ускорить выполнение примера кода, мы создали образец образца 1% данных. В системе файл резервной копии базы данных немного превышает 90 МБ, предоставляя 1 700 000 строк в первичной таблице данных.

Для выполнения этого упражнения необходимо иметь [SQL Server Management Studio](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-2017) или другое средство, которое может восстановить файл резервной копии базы данных и выполнить запросы T-SQL.

Ниже приведены руководства и краткие руководства, в которых используется этот набор данных.

+ [Изучение аналитики базы данных с помощью R в SQL Server](sqldev-in-database-r-for-sql-developers.md)
+ [Изучение аналитики базы данных с помощью Python в SQL Server](sqldev-in-database-python-for-sql-developers.md)

## <a name="download-files"></a>Скачать файлы

Образец базы данных — это файл SQL Server 2016 BAK, размещенный корпорацией Майкрософт. Его можно восстановить на SQL Server 2016 и более поздних версий. Скачивание файла начинается сразу же после щелчка по ссылке. 

Размер файла составляет примерно 90 МБ.

1. Щелкните [NYCTaxi_Sample. bak](https://sqlmldoccontent.blob.core.windows.net/sqlml/NYCTaxi_Sample.bak) , чтобы скачать файл резервной копии базы данных.

2. Скопируйте файл в папку C:\Program files\Microsoft SQL Сервер\мсскл-инстанце-наме\мсскл\баккуп.

3. В Management Studio щелкните правой кнопкой мыши **базы данных** и выберите **восстановить файлы и группы файлов**.

4. Введите *NYCTaxi_Sample* в качестве имени базы данных.

5. Щелкните **с устройства** , а затем откройте страницу Выбор файла, чтобы выбрать файл резервной копии. Нажмите кнопку **Добавить** , чтобы выбрать NYCTaxi_Sample. bak.

6. Установите флажок **восстановить** и нажмите кнопку **ОК** , чтобы восстановить базу данных.

## <a name="review-database-objects"></a>Проверка объектов базы данных
   
Убедитесь, что объекты базы данных существуют [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в экземпляре с помощью. [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] Вы должны увидеть базу данных, таблицы, функции и хранимые процедуры.
  
   ![rsql_devtut_BrowseTables](media/rsql-devtut-browsetables.png "rsql_devtut_BrowseTables")

### <a name="objects-in-nyctaxisample-database"></a>Объекты в базе данных NYCTaxi_Sample

В следующей таблице перечислены объекты, созданные в демонстрационной базе данных Нью такси.

|**Имя объекта**|**Тип объекта**|**Описание**|
|----------|------------------------|---------------|
|**NYCTaxi_Sample** | База данных | Создает базу данных и две таблицы:<br /><br />таблица dbo. nyctaxi_sample: Содержит основной набор данных Нью такси. К таблице добавляется кластеризованный индекс columnstore для оптимизации хранения данных и производительности запросов. Образец 1-процент набора данных о такси Нью вставляется в эту таблицу.<br /><br />Таблица _taxi_models dbo. Нью: Используется для сохранения обученной расширенной модели аналитической аналитики.|
|**fnCalculateDistance** |скалярная функция | Вычисляет прямое расстояние между расположениями раскладки и высадки. Эта функция используется для [создания функций данных](sqldev-create-data-features-using-t-sql.md), [обучения и сохранения модели](sqldev-train-and-save-a-model-using-t-sql.md) и [эксплуатацию модели R](sqldev-operationalize-the-model.md).|
|**fnEngineerFeatures** |функция с табличным значением | Создает новые функции данных для обучения модели. Эта функция используется в [функции создания данных](sqldev-create-data-features-using-t-sql.md) и [эксплуатацию модели R](sqldev-operationalize-the-model.md).|


Хранимые процедуры создаются с помощью сценария R и Python, находящихся в различных учебниках. В следующей таблице перечислены хранимые процедуры, которые при необходимости можно добавить в демонстрационную базу данных Нью такси при запуске сценария из различных занятий.

|**Хранимая процедура**|**Язык**|**Описание**|
|-------------------------|------------|---------------|
|**рксплосистограм** |R | Вызывает функцию RevoScaleR rxHistogram для построения гистограммы переменной, а затем возвращает график в виде двоичного объекта. Эта хранимая процедура используется для [просмотра и визуализации данных](sqldev-explore-and-visualize-the-data.md).|
|**рплотрхист** |R| Создает график с помощью функции Хист и сохраняет выходные данные в виде локального PDF-файла. Эта хранимая процедура используется для [просмотра и визуализации данных](sqldev-explore-and-visualize-the-data.md).|
|**ркстраинлогитмодел**  |R| Обучение модели логистической регрессии путем вызова пакета R. Модель прогнозирует значение для столбца tipped и обучается на основе случайной выборки, содержащей 70 % данных. Выходными данными хранимой процедуры является обученная модель, которая сохраняется в таблице nyc_taxi_models. Эта хранимая процедура используется для [обучения и сохранения модели](sqldev-train-and-save-a-model-using-t-sql.md).|
|**RxPredictBatchOutput**  |R | Вызывает обученную модель для создания прогнозов с помощью модели. Хранимая процедура принимает запрос в качестве входного параметра и возвращает столбец числовых значений, представляющих оценки для входных строк. Эта хранимая процедура используется для [прогнозирования возможных результатов](sqldev-operationalize-the-model.md).|
|**ркспредиктсинглеров**  |R| Вызывает обученную модель для создания прогнозов с помощью модели. Эта хранимая процедура принимает новое наблюдение в качестве входных данных, причем отдельные значения характеристик передаются как встроенные параметры, и возвращает значение, представляющее прогнозируемый результат для нового наблюдения. Эта хранимая процедура используется для [прогнозирования возможных результатов](sqldev-operationalize-the-model.md).|

## <a name="query-the-data"></a>Запрос данных

В качестве шага проверки выполните запрос для подтверждения передачи данных.

1. В обозревателе объектов в разделе базы данных щелкните правой кнопкой мыши базу данных **NYCTaxi_Sample** и запустите новый запрос.

2. Выполните некоторые простые запросы:

    ```sql
    SELECT TOP(10) * FROM dbo.nyctaxi_sample;
    SELECT COUNT(*) FROM dbo.nyctaxi_sample;
    ```
База данных содержит 1 700 000 строк.

3. В базе данных находится таблица **nyctaxi_sample** , содержащая набор данных. Таблица оптимизирована для вычислений на основе наборов с добавлением [индекса columnstore](../../relational-databases/indexes/columnstore-indexes-overview.md). Выполните эту инструкцию, чтобы создать краткую сводку по таблице.

    ```sql
    SELECT DISTINCT [passenger_count]
        , ROUND (SUM ([fare_amount]),0) as TotalFares
        , ROUND (AVG ([fare_amount]),0) as AvgFares
    FROM [dbo].[nyctaxi_sample]
    GROUP BY [passenger_count]
    ORDER BY  AvgFares DESC
    ````
Результаты должны быть похожи на показанные на снимке экрана ниже.

  ![Сводные сведения о таблице](media/nyctaxidatatablesummary.png "Результаты запроса")

## <a name="next-steps"></a>Следующие шаги

Примеры данных Нью такси теперь доступны для практического обучения.

+ [Изучение аналитики базы данных с помощью R в SQL Server](sqldev-in-database-r-for-sql-developers.md)
+ [Изучение аналитики базы данных с помощью Python в SQL Server](sqldev-in-database-python-for-sql-developers.md)