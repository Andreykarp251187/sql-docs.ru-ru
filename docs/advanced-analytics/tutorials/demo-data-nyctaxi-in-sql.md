---
title: Загрузите демонстрационные данные о такси Нью-ЙОРКА и сценарии для внедренных R и Python — машинного обучения SQL Server
description: Инструкции по скачиванию демонстрационные данные о такси Нью-Йорке и создании базы данных. Данные используются в SQL Server Python и R языка учебников, показывающих, как внедрить скрипт в хранимых процедурах SQL Server и функций T-SQL.
ms.prod: sql
ms.technology: machine-learning
ms.date: 10/31/2018
ms.topic: tutorial
author: dphansen
ms.author: davidph
manager: cgronlun
ms.openlocfilehash: 502f46b67dbf282a7b3daeac76882915a7c3ac84
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "64505448"
---
# <a name="nyc-taxi-demo-data-for-sql-server-python-and-r-tutorials"></a>Демонстрационные данные такси Нью-ЙОРКА для учебники по SQL Server Python и R
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

В этой статье объясняется, как установить образец базы данных, состоящий из общедоступных данных из [такси Нью-Йорке и Лимузинов комиссии](http://www.nyc.gov/html/tlc/html/about/trip_record_data.shtml). Эти данные используются в учебниках несколько R и Python для анализа в базе данных в SQL Server. Чтобы пример кода выполнялось быстрее, мы создали представительную выборку из данных 1%. В системе файл резервной копии базы данных является немного более чем 90 МБ, предоставляя 1,7 млн. строк в первичной таблице данных.

Для этого упражнения вам понадобится [SQL Server Management Studio](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-2017) или другое средство, которое можно восстановить файл резервной копии базы данных и выполнять запросы T-SQL.

Учебники и примеры использования, с помощью этого набора данных включают следующее:

+ [Дополнительные аналитические функции в базе данных с помощью языка R в SQL Server](sqldev-in-database-r-for-sql-developers.md)
+ [Дополнительные аналитические функции в базе данных с помощью Python в SQL Server](sqldev-in-database-python-for-sql-developers.md)

## <a name="download-files"></a>Скачивание файлов

Образец базы данных — это файл SQL Server 2016 BAK, размещаемая компанией Майкрософт. Ее можно восстановить в SQL Server 2016 и более поздних версий. Загрузка файла начинается немедленно при щелчке ссылки. 

Размер файла составляет около 90 МБ.

1. Нажмите кнопку [NYCTaxi_Sample.bak](https://sqlmldoccontent.blob.core.windows.net/sqlml/NYCTaxi_Sample.bak) для загрузки файла резервной копии базы данных.

2. Скопируйте файл C:\Program files\Microsoft SQL Server\MSSQL экземпляр name\MSSQL\Backup папку.

3. В среде Management Studio щелкните правой кнопкой мыши **баз данных** и выберите **восстановление файлов и файловых групп**.

4. Введите *NYCTaxi_Sample* имя базы данных.

5. Нажмите кнопку **с устройства** и перейдите на страницу выбора файлов выберите файл резервной копии. Нажмите кнопку **добавить** для выбора NYCTaxi_Sample.bak.

6. Выберите **восстановить** флажок и нажмите кнопку **ОК** восстановление базы данных.

## <a name="review-database-objects"></a>Ознакомьтесь с объектами базы данных
   
Подтвердите объекты базы данных существуют в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] экземпляра с помощью [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]. Вы увидите базы данных, таблиц, функций и хранимых процедур.
  
   ![rsql_devtut_BrowseTables](media/rsql-devtut-browsetables.png "rsql_devtut_BrowseTables")

### <a name="objects-in-nyctaxisample-database"></a>Объекты в базе данных NYCTaxi_Sample

В следующей таблице перечислены объекты, созданные в демонстрационной базы данных о такси Нью-ЙОРКА.

|**Имя объекта**|**Тип объекта**|**Описание**|
|----------|------------------------|---------------|
|**NYCTaxi_Sample** | База данных | Создает базу данных и две таблицы:<br /><br />таблица dbo.nyctaxi_sample: Содержит основной набор данных о такси Нью-ЙОРКА. К таблице добавляется кластеризованный индекс columnstore для оптимизации хранения данных и производительности запросов. В примере 1% набора данных такси Нью-ЙОРКА вставляется в эту таблицу.<br /><br />таблица dbo.nyc_taxi_models: Используется для сохранения обученной модели расширенной аналитики.|
|**fnCalculateDistance** |скалярная функция | Вычисляет прямое расстояние между местами посадки и высадки. Эта функция используется в [Создание функций данных](sqldev-create-data-features-using-t-sql.md), [обучение и сохранение модели](sqldev-train-and-save-a-model-using-t-sql.md) и [ввод в эксплуатацию моделей R](sqldev-operationalize-the-model.md).|
|**fnEngineerFeatures** |функция с табличным значением | Формирует новые характеристики данных для обучения модели. Эта функция используется в [Создание функций данных](sqldev-create-data-features-using-t-sql.md) и [ввод в эксплуатацию моделей R](sqldev-operationalize-the-model.md).|


Хранимые процедуры создаются с помощью скрипта R и Python, найти в различных учебных курсах. В следующей таблице перечислены хранимые процедуры, которые при необходимости можно добавить к демонстрационной базы данных о такси Нью-ЙОРКА, при выполнении скрипта из различных занятий.

|**Хранимая процедура**|**Язык**|**Описание**|
|-------------------------|------------|---------------|
|**RxPlotHistogram** |Чтение | Вызывает функцию RevoScaleR rxHistogram для построения гистограммы на переменной, а затем возвращает диаграмму в виде двоичного объекта. Эта хранимая процедура используется в [анализ и визуализация данных](sqldev-explore-and-visualize-the-data.md).|
|**RPlotRHist** |Чтение| Создает графический объект с помощью функции Hist и сохраняет результат в виде локального файла PDF. Эта хранимая процедура используется в [анализ и визуализация данных](sqldev-explore-and-visualize-the-data.md).|
|**RxTrainLogitModel**  |Чтение| Обучает модель логистической регрессии, вызывая пакет r. Модель прогнозирует значение для столбца tipped и обучается на основе случайной выборки, содержащей 70 % данных. Выходными данными хранимой процедуры является обученная модель, которая сохраняется в таблице nyc_taxi_models. Эта хранимая процедура используется в [обучение и сохранение модели](sqldev-train-and-save-a-model-using-t-sql.md).|
|**RxPredictBatchOutput**  |Чтение | Вызывает обученную модель для создания прогнозов с помощью модели. Хранимая процедура принимает запрос в качестве входного параметра и возвращает столбец числовых значений, представляющих оценки для входных строк. Эта хранимая процедура используется в [предсказания возможных выхода](sqldev-operationalize-the-model.md).|
|**RxPredictSingleRow**  |Чтение| Вызывает обученную модель для создания прогнозов с помощью модели. Эта хранимая процедура принимает новое наблюдение в качестве входных данных, причем отдельные значения характеристик передаются как встроенные параметры, и возвращает значение, представляющее прогнозируемый результат для нового наблюдения. Эта хранимая процедура используется в [предсказания возможных выхода](sqldev-operationalize-the-model.md).|

## <a name="query-the-data"></a>Запрос данных

В качестве шага проверки выполните запрос, чтобы убедиться, что данные были отправлены.

1. В обозревателе объектов в базах данных, щелкните правой кнопкой мыши **NYCTaxi_Sample** базы данных, а затем запустите новый запрос.

2. Выполните некоторые простые запросы:

    ```sql
    SELECT TOP(10) * FROM dbo.nyctaxi_sample;
    SELECT COUNT(*) FROM dbo.nyctaxi_sample;
    ```
База данных содержит 1,7 млн. строк.

3. В базе данных является **nyctaxi_sample** таблицу, содержащую набор данных. Таблица была оптимизирована для вычислений с использованием наборов с добавлением [индекс columnstore](../../relational-databases/indexes/columnstore-indexes-overview.md). Выполните эту инструкцию, чтобы создать краткую сводку по таблице.

    ```sql
    SELECT DISTINCT [passenger_count]
        , ROUND (SUM ([fare_amount]),0) as TotalFares
        , ROUND (AVG ([fare_amount]),0) as AvgFares
    FROM [dbo].[nyctaxi_sample]
    GROUP BY [passenger_count]
    ORDER BY  AvgFares DESC
    ````
Результаты должны быть аналогичны отображение на следующем снимке экрана.

  ![Сводные данные таблицы](media/nyctaxidatatablesummary.png "результаты запроса")

## <a name="next-steps"></a>Следующие шаги

Образец данных о такси Нью-ЙОРКА теперь доступна пройти Практическое обучение.

+ [Дополнительные аналитические функции в базе данных с помощью языка R в SQL Server](sqldev-in-database-r-for-sql-developers.md)
+ [Дополнительные аналитические функции в базе данных с помощью Python в SQL Server](sqldev-in-database-python-for-sql-developers.md)