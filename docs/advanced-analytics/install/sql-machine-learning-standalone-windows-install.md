---
title: Установка R Server или Machine Learning Server (изолированный), программа установки SQL Server - машинного обучения SQL Server
description: Установка сервера машинного обучения не поддерживающей экземпляр автономного для разработки R и Python, с помощью RevoScaleR, revoscalepy, MicrosoftML и других пакетов.
ms.prod: sql
ms.technology: machine-learning
ms.date: 08/28/2018
ms.topic: conceptual
author: dphansen
ms.author: davidph
monikerRange: '>=sql-server-2016||=sqlallproducts-allversions'
ms.openlocfilehash: f721a840b6fba4a840484fccb1cafb334b1ba438
ms.sourcegitcommit: b2464064c0566590e486a3aafae6d67ce2645cef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/15/2019
ms.locfileid: "67962857"
---
# <a name="install-machine-learning-server-standalone-or-r-server-standalone-using-sql-server-setup"></a>Установить сервер машинного обучения (автономный) или с помощью программы установки SQL Server R Server (изолированный)
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Программа установки SQL Server включает в себя **общих компонентов** вариант установки не привязаны, сервер автономного машинного обучения, который выполняется вне SQL Server. В SQL Server 2016 эта функция называется **R Server (изолированный)** . В SQL Server 2017, он называется **сервера машинного обучения (изолированного)** и включает в себя R и Python. 

Изолированный сервер, как устанавливается программой установки SQL Server является функциональным эквивалентом версии без SQL-фирменной символики [Microsoft Machine Learning Server](https://docs.microsoft.com/machine-learning-server/what-is-machine-learning-server), поддерживающий же вариантов использования и сценарии, включая:

+ Удаленное выполнение, переключение между локальные и удаленные сеансы с помощью одной консоли
+ Ввод в эксплуатацию с помощью веб-узлов и вычислительных узлов
+ Веб-развертывания службы: возможность упаковать скрипт R и Python в веб-служб
+ Полная коллекция библиотеки функций R и Python

Как сервер независимых отделены от SQL Server R и Python среда настроена, защищенные и осуществлять с использованием базовой операционной системы и средств, предоставляемых в автономный сервер, не SQL Server.

В качестве дополнения SQL Server автономный сервер полезно, если вам нужно разрабатывать высокопроизводительные решения по машинному обучению, которые можно использовать контексты удаленных вычислений для широкого спектра данных, поддерживаемых платформ. Выполнение с локального сервера можно сместить на удаленный сервер машинного обучения, в кластере Spark, или на другом экземпляре SQL Server.

<a name="bkmk_prereqs"> </a>

## <a name="pre-install-checklist"></a>Контрольный список перед установкой

Если установлена предыдущая версия, например SQL Server 2016 R Server (изолированный) или Microsoft R Server, удалите существующую установку, прежде чем продолжить.

Как правило, мы рекомендуем обращаться с автономным сервером и установки баз данных ядра экземпляру как взаимно монопольного, чтобы избежать конфликта ресурсов, что имеется достаточно ресурсов, есть ли не запрет на их установку на том же физическом компьютере.

На компьютере может иметь только один изолированный сервер: сервер машинного обучения SQL Server 2017 или SQL Server 2016 R Server (изолированную версию). Не забудьте удалить одной версии перед добавлением нового.

::: moniker range="=sql-server-2016"
<a name="bkmk_ga_instalpatch"></a> 

 ###  <a name="install-patch-requirement"></a>Требование для установки исправления 

Только для SQL Server 2016: Корпорация Майкрософт выявила проблему с определенной версией двоичных файлов среды выполнения Microsoft VC++ 2013, которые SQL Server устанавливает в качестве необходимого компонента. Если это обновление двоичных файлов среды выполнения VC не установлено, в SQL Server могут возникать проблемы с надежностью в определенных сценариях. Перед установкой SQL Server выполните инструкции, приведенные в [заметках о выпуске SQL Server](../../sql-server/sql-server-2016-release-notes.md#bkmk_ga_instalpatch), чтобы узнать, требуется ли на вашем компьютере исправление для двоичных файлов среды выполнения VC.  
::: moniker-end

## <a name="get-the-installation-media"></a>Получение установочного носителя

[!INCLUDE[GetInstallationMedia](../../includes/getssmedia.md)]

::: moniker range=">=sql-server-2017||=sqlallproducts-allversions"
## <a name="run-setup"></a>Запуск программы установки

Для локальных установок необходимо запускать программу установки с правами администратора. При установке [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] из удаленной общей папки необходимо использовать учетную запись домена с разрешениями на чтение и выполнение для удаленной общей папки.

1. Запустите мастер установки.

2. Нажмите кнопку **установки** и выберите **установки нового сервера машинного обучения (изолированного)** .
    
     ![Установка автономного сервера машинного обучения](media/2017setup-installation-page-mlsvr.png "запуска установки автономного сервера машинного обучения")

3. По завершении проверки правил примите условия лицензирования SQL Server и выберите новую установку.

4. На **Выбор компонентов** страницы, следующие параметры должен быть установлен:

    - Microsoft Machine Learning Server (изолированный)

    - R и Python выбираются по умолчанию. Можно отменить выбор любым из этих языков, но мы рекомендуем установить хотя бы один из поддерживаемых языков.

     ![Выбрать компоненты R или Python](media/2017setup-features-page-mlsvr-rpy.png "запуска установки автономного сервера машинного обучения")
    
    Все прочие параметры нужно игнорировать. 
    
    > [!NOTE]
    > Не устанавливать **общие компоненты** Если на компьютере уже имеется служб машинного обучения для анализа в базе данных SQL Server. Это создает повторяющиеся библиотеки.
    > 
    > Кроме того в то время как SQL Server, так как не будет конфликтовать с память, занятая другими службами компонента database engine управляет сценариев R или Python, выполняемого в SQL Server, автономного сервера машинного обучения имеет такие ограничения не и может конфликтовать с другими операциями базы данных . Наконец удаленный доступ через сеанс RDP, который часто используется для ввода в эксплуатацию, обычно блокируется администраторами баз данных.
    > 
    > По этим причинам обычно рекомендуется установить сервер машинного обучения (автономный) на компьютере, отличном от службы машинного обучения SQL Server.

5.  Примите условия лицензии для скачивания и установки дистрибутивов базовый язык. Когда кнопка **Принять** станет недоступна, можно нажать кнопку **Далее**. 

     ![Python лицензионное соглашение](media/2017setup-python-license.png "Python лицензионное соглашение")

6.  На странице **Все готово для установки** проверьте выбранные параметры и нажмите кнопку **Установить**.

По завершении установки см. в разделе [пользовательские отчеты для служб R SQL Server](../r/monitor-r-services-using-custom-reports-in-management-studio.md) для получения справки по любой ошибки или предупреждения, см. в разделе [обновлению и установке часто задаваемые вопросы – службы машинного обучения](../r/upgrade-and-installation-faq-sql-server-r-services.md).
::: moniker-end

::: moniker range="=sql-server-2016"
## <a name="run-setup"></a>Запуск программы установки

Для локальных установок необходимо запускать программу установки с правами администратора. При установке [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] из удаленной общей папки необходимо использовать учетную запись домена с разрешениями на чтение и выполнение для удаленной общей папки.

1. Запустите мастер установки.

2. На **установки** щелкните **Установка нового R Server (изолированный)** .
    
     ![Запустите программу установки изолированного сервера R](media/2016-setup-installation-rsvr.png "запустите программу установки изолированного сервера R")

3. По завершении проверки правил примите условия лицензирования SQL Server и выберите новую установку.

4.  На странице **Выбор компонентов** уже должен быть выбран следующий параметр:
    
    **R Server (изолированный)**  
    
    ![Выбор изолированного сервера R компонентов](media/2016setup-rserver-features.png "Выбор изолированного сервера R компонентов")
    
    Все прочие параметры можно игнорировать. 
    
    > [!NOTE]
    > Не устанавливать **общие компоненты** при запуске программы установки на компьютере, где R уже установлены службы для анализа в базе данных SQL Server. Это создает повторяющиеся библиотеки.
    > 
    > При этом R-скриптов, выполняемых в SQL Server под управлением SQL Server, так как не будет конфликтовать с память, занятая другими службами компонента database engine, изолированного сервера R Server имеет такие ограничения нет и может конфликтовать с другими операциями базы данных.
    > 
    > Обычно рекомендуется установить R Server (изолированный) на отдельном компьютере с SQL Server R Services (в базе данных).

5.  Примите условия лицензии для скачивания и установки дистрибутивов базовый язык. Когда кнопка **Принять** станет недоступна, можно нажать кнопку **Далее**. 

6.  На странице **Все готово для установки** проверьте выбранные параметры и нажмите кнопку **Установить**.

По завершении установки см. в разделе [пользовательские отчеты для служб R SQL Server](../r/monitor-r-services-using-custom-reports-in-management-studio.md) для получения справки по любой ошибки или предупреждения, см. в разделе [обновлению и установке часто задаваемые вопросы – службы машинного обучения](../r/upgrade-and-installation-faq-sql-server-r-services.md).
::: moniker-end

## <a name="set-environment-variables"></a>Настройка переменных среды

Для R интеграции функций только, следует задать **MKL_CBWR** переменную среды, чтобы [гарантировать согласованный результат](https://software.intel.com/articles/introduction-to-the-conditional-numerical-reproducibility-cnr) из вычислений Intel Math Kernel Library (MKL).

1. На панели управления выберите **система и безопасность** > **системы** > **Дополнительные параметры системы**  >   **Переменные среды**.

2. Создайте новую переменную пользователем или системой. 

  + Набор имя переменной `MKL_CBWR`
  + Задать значения переменной `AUTO`

3. Перезапустите сервер.

<a name="install-path"></a>

### <a name="default-installation-folders"></a>По умолчанию установочные папки

Для разработки R и Python чаще всего на одном компьютере установлено несколько версий. Программа установки SQL Server устанавливает, базового дистрибутива устанавливается в папку, связанную с версией SQL Server, который использовался для установки.

В следующей таблице перечислены пути для R и Python распределениям, созданным используемый установщиками Майкрософт. Для полноты информации в таблице содержатся пути, создаваемые программы установки SQL Server, а также отдельный установщик для сервера машинного обучения Майкрософт.

|Version| Метод установки | Папка по умолчанию|
|----|----|----|
|Сервер SQL Server 2017 машинного обучения (автономный) |  Мастер установки SQL Server 2017 |`C:\Program Files\Microsoft SQL Server\140\R_SERVER` <br/>`C:\Program Files\Microsoft SQL Server\140\PYTHON_SERVER`|
|Microsoft Machine Learning Server (изолированный) |  Автономный установщик Windows |`C:\Program Files\Microsoft\ML Server\R_SERVER`<br/>`C:\Program Files\Microsoft\ML Server\PYTHON_SERVER`|
|Службы машинного обучения из состава SQL Server 2017 (в базе данных) |Мастер установки SQL Server 2017, с помощью языка R-параметр|`C:\Program Files\Microsoft SQL Server\MSSQL14.<instance_name>\R_SERVICES`  <br/>`C:\Program Files\Microsoft SQL Server\MSSQL14.<instance_name>\PYTHON_SERVICES` |
|SQL Server 2016 R Server (изолированный) |  Мастер установки SQL Server 2016 |`C:\Program Files\Microsoft SQL Server\130\R_SERVER`|
|SQL Server 2016 R Services (в базе данных) |Мастер установки SQL Server 2016|`C:\Program Files\Microsoft SQL Server\MSSQL13.<instance_name>\R_SERVICES`|

<a name="apply-cu"></a>

## <a name="apply-updates"></a>Применение обновлений

Мы рекомендуем применить последний накопительный пакет обновления для компонентов в машинном обучении и компонент database engine. Накопительные пакеты обновления устанавливаются через программу установки. 

На устройствах, подключенных к Интернету вы можете скачать самораскрывающийся исполняемый файл. Применение обновления для компонента database engine автоматически извлекает накопительные пакеты обновления для существующих функций R и Python. 

На серверах с отключенной дополнительные действия не требуются. Необходимо получить накопительный пакет обновления для компонента database engine, а также CAB-файлы для функции машинного обучения. Все файлы должны передаваться изолированного сервера и вручную применить.

1. Начать с экземпляром базовых показателей. Накопительные пакеты обновления можно применять только к существующим установкам:

  + Сервер машинного обучения (автономный) из первоначального выпуска SQL Server 2017
  + R Server (изолированный из первоначального выпуска SQL Server 2016, SQL Server 2016 с пакетом обновления 1 или 2 (SP2) для SQL Server 2016)

2. Закройте все открытые сеансы R или Python и остановите все процессы, все еще выполняется в системе.

3. Если вы включили ввода в эксплуатацию для запуска в качестве веб-узлов и вычислительных узлов для развертывания веб-служб, резервное копирование **AppSettings.json** файл в качестве меры предосторожности. Применение SQL Server 2017 CU13 или более поздней версии revises этого файла, поэтому может быть резервной копии для сохранения исходной версии.

4. На Интернет подключенное устройство щелкните ссылку накопительное обновление для вашей версии SQL Server.

  + [Обновления SQL Server 2017](https://sqlserverupdates.com/sql-server-2017-updates/)
  + [Обновления SQL Server 2016](https://sqlserverupdates.com/sql-server-2016-updates/)

5. Скачайте последний накопительный пакет обновления. Он представляет собой исполняемый файл.

6. На устройства, подключенного к Интернету дважды щелкните файл .exe для запуска программы установки и шаг шаги мастера, чтобы принять условия лицензионного проверьте затронутые компоненты и отслеживать ход выполнения до ее завершения.

7. На сервере без подключения к Интернету:

   + Получите соответствующий CAB-файлы для R и Python. Ссылки для загрузки см. в разделе [CAB-файлов загрузки для накопительные пакеты обновления для анализа в базе данных SQL Server экземпляры](sql-ml-cab-downloads.md).

   + Перенос всех файлов, основного исполняемого файла и CAB-файлы в папку на автономном компьютере.

   + Дважды щелкните файл .exe, чтобы запустить программу установки. При установке cumulate обновления на сервере без подключения к Интернету, вам будет предложено выбрать расположение CAB-файлы для R и Python.

8. После установки на сервере, для которого вы включили ввода в эксплуатацию с помощью веб-узлов и вычислительных узлов, изменить **AppSettings.json**, добавления записи «MMLResourcePath» непосредственно в разделе «MMLNativePath»:

    ```json
    "ScorerParameters": {
        "MMLNativePath": "C:\Program Files\Microsoft SQL Server\140\R_SERVER\library\MicrosoftML\mxLibs\x64\",
        "MMLResourcePath": "C:\Program Files\Microsoft SQL Server\140\R_SERVER\library\MicrosoftML\mxLibs\x64\"
    }
    ```

9. [Запустите служебную программу администрирования CLI](https://docs.microsoft.com/machine-learning-server/operationalize/configure-admin-cli-launch) перезапуск веб-узла и вычислительных узлов. Действия и синтаксис, см. в разделе [монитор, запуска и остановки веб- и вычислительных узлов](https://docs.microsoft.com/machine-learning-server/operationalize/configure-admin-cli-stop-start).

## <a name="development-tools"></a>Средства разработки

Интегрированная СРЕДА разработки не устанавливается в процессе установки. Дополнительные сведения о настройке среды разработки см. в разделе [Настройка средств R](../r/set-up-a-data-science-client.md) и [Настройка средств Python](../python/setup-python-client-tools-sql.md).

## <a name="next-steps"></a>Следующие шаги

Разработчики R можно приступить к работе с простыми примерами и ознакомиться с основами как R работает с SQL Server. Следующий шаг см. следующие ссылки:

+ [Учебник. Запуск R в T-SQL](../tutorials/rtsql-using-r-code-in-transact-sql-quickstart.md)
+ [Учебник. Аналитика в базе данных для разработчиков R](../tutorials/sqldev-in-database-r-for-sql-developers.md)

::: moniker range=">=sql-server-2017||=sqlallproducts-allversions"
Разработчики Python рассказывается, как использовать Python с SQL Server с помощью этих учебных материалов:

+ [Учебник. Запустите Python в T-SQL](../tutorials/run-python-using-t-sql.md)
+ [Учебник. Аналитика в базе данных для разработчиков Python](../tutorials/sqldev-in-database-python-for-sql-developers.md)
::: moniker-end

Чтобы просмотреть примеры машинного обучения, которые основаны на реальных сценариев, см. в разделе [машинного обучения учебники](../tutorials/machine-learning-services-tutorials.md).
