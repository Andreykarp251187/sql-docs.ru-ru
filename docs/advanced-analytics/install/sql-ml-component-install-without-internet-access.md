---
title: Установить язык R и Python компоненты без доступа к Интернету - машинного обучения SQL Server
description: Подключитесь к серверу R для машинного обучения и Python установки на изолированный экземпляр SQL Server за брандмауэром сети.
ms.prod: sql
ms.technology: machine-learning
ms.date: 03/13/2019
ms.topic: conceptual
author: dphansen
ms.author: davidph
manager: cgronlun
ms.openlocfilehash: da9676f029bb917adf15690b6870583fb0465fc4
ms.sourcegitcommit: 622bcdaa0b21258248b259f003f38e9d6f73e05a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/17/2019
ms.locfileid: "65836217"
---
# <a name="install-sql-server-machine-learning-r-and-python-on-computers-with-no-internet-access"></a>Установка SQL Server в машинном обучении R и Python на компьютерах без доступа к Интернету
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

По умолчанию установщики соединиться с узлов загрузки корпорации Майкрософт, чтобы получить необходимые и обновленных компонентов для машинного обучения на сервере SQL Server. Если ограничения брандмауэра запретить установщику достижение этих сайтов, можно использовать устройства, подключенного к Интернету для загрузки файлов, передачи файлов на сервер вне сети и затем запустите программу установки.

Аналитика в базе данных состоят из экземпляра компонента database engine, а также дополнительных компонентов для интеграции R и Python, в зависимости от версии SQL Server. 

+ SQL Server 2017 включает в себя R и Python 
+ SQL Server 2016 — только для R.

На изолированном сервере машинное обучение и функциям языков R и Python добавляются с помощью CAB-файлы. 

## <a name="sql-server-2017-offline-install"></a>Автономной установки SQL Server 2017

Для установки SQL Server 2017 служб машинного обучения (R и Python) на изолированном сервере, запустить, загрузив первоначального выпуска SQL Server и поддерживать соответствующие файлы CAB-файла для R и Python. Даже если вы планируете немедленно обновлять сервер на использование последнее накопительное обновление, необходимо сначала установить первоначального выпуска.

> [!Note]
> SQL Server 2017 не поддерживает пакеты обновления. Это первый выпуск SQL Server для использования в качестве единственной строкой базы с обслуживанием через только накопительные пакеты обновления первоначального выпуска. 

### <a name="1---download-2017-cabs"></a>1 - скачайте 2017 CAB-файлов

На компьютере, наличия подключения к Интернету Загрузите CAB-файлы, предоставляя функции R и Python для первоначального выпуска и установочный носитель для SQL Server 2017. 

Выпуск  |Ссылка на скачивание  |
---------|---------------|
Microsoft R Open     |[SRO_3.3.3.24_1033.cab](https://go.microsoft.com/fwlink/?LinkId=851496)|
Microsoft R Server      |[SRS_9.2.0.24_1033.cab](https://go.microsoft.com/fwlink/?LinkId=851507)|
Откройте Microsoft Python     |[SPO_9.2.0.24_1033.cab](https://go.microsoft.com/fwlink/?LinkId=851502) |
Microsoft Python Server    |[SPS_9.2.0.24_1033.cab](https://go.microsoft.com/fwlink/?LinkId=851508) |

###  <a name="2---get-sql-server-2017-installation-media"></a>2 - Получение установочного носителя SQL Server 2017

1. На компьютере, наличия подключения к Интернету, загрузите [программу установки SQL Server 2017](https://www.microsoft.com/sql-server/sql-server-downloads). 

2. Дважды щелкните файл установки и выберите **скачать носитель** тип установки. В этом случае программа установки создает локальный файл ISO-файл (или CAB), содержащий установочного носителя.

   ![Выберите тип установки Скачанный носитель](media/offline-download-tile.png "скачать носитель")

## <a name="sql-server-2016-offline-install"></a>Автономной установки SQL Server 2016

Аналитика в базе данных SQL Server 2016 — предназначенным только для R с помощью только два CAB файлов для пакетов продукта и распространяемого корпорацией Майкрософт R с открытым кодом, соответственно. Начать с установки любого из этих выпусков: RTM, SP 1, SP 2. После установки на месте, накопительные пакеты обновления могут применяться в качестве следующего шага.

На компьютере, наличия подключения к Интернету Загрузите CAB-файлы, используемые программой установки для установки аналитики в базе данных на SQL Server 2016. 

### <a name="1---download-2016-cabs"></a>1 - скачайте 2016 CAB-файлов

Выпуск  | Microsoft R Open | Microsoft R Server |
---------|-----------------|---------------------|
**SQL Server 2016 RTM**     | [SRO_3.2.2.803_1033.cab](https://go.microsoft.com/fwlink/?LinkId=761266) |[SRS_8.0.3.0_1033.cab](https://go.microsoft.com/fwlink/?LinkId=735051) |
**SQL Server 2016 с пакетом обновления 1 (SP1)**     | [SRO_3.2.2.15000_1033.cab](https://go.microsoft.com/fwlink/?LinkId=824879) |[SRS_8.0.3.15000_1033.cab](https://go.microsoft.com/fwlink/?LinkId=824881) | 
**SQL Server 2016 SP 2**  |[SRO_3.2.2.16000_1033.cab](https://go.microsoft.com/fwlink/?LinkId=866039) |[SRS_8.0.3.17000_1033.cab](https://go.microsoft.com/fwlink/?LinkId=850317) |

### <a name="2---get-sql-server-2016-installation-media"></a>2 - Получение установочного носителя SQL Server 2016

SQL Server 2016 RTM с Пакетом обновления 1 и 2 (SP2) можно установить как первой установке на целевом компьютере. Любой из этих версий могут принимать накопительный пакет обновления.

Один из способов получить ISO-файл, содержащий установочный носитель является через [Visual Studio Dev Essentials](https://visualstudio.microsoft.com/dev-essentials/). Войдите, а затем использовать **загружает** ссылку, чтобы найти в выпуске SQL Server 2016, вы хотите установить. Файл загружается в виде ISO-файл, который можно скопировать на целевой компьютер для автономной установки.

## <a name="transfer-files"></a>Передача файлов

Скопируйте установочный носитель SQL Server (ISO-файл или CAB) и файлы в базе данных аналитики CAB-файла на конечном компьютере. Поместите файлы CAB-файла и установки файла мультимедиа в той же папке на целевом компьютере, таких как установки % TEMP * папки.

В папке % TEMP % является обязательным для Python CAB-файлов. Для R можно использовать % TEMP % или задайте для параметра myrcachedirectory значение пути CAB-файла.

На следующем снимке экрана показан файлы SQL Server 2017 CAB и ISO. Файлы для загрузки SQL Server 2016 выглядеть по-другому: имя файла меньшее количество файлов (не Python) и установочный носитель предназначен для 2016.

![Список файлов, которые будут передаваться](media/offline-file-list.png "список файлов")

## <a name="run-setup"></a>Запуск программы установки

При запуске программы установки SQL Server на компьютере без подключения к Интернету, программа установки добавляет **автономной установки** страницы мастера, можно указать расположение файлов CAB, скопированным на предыдущем шаге.

1. Чтобы начать установку, дважды щелкните ISO-файл или CAB-файл для доступа к установочного носителя. Вы должны увидеть **setup.exe** файл.

2. Щелкните правой кнопкой мыши **setup.exe** и запуск от имени администратора.

3. Когда страница лицензирования для компонентов с открытым кодом R или Python, показанных в мастере установки, нажмите кнопку **Accept**. Принятие условий лицензионного соглашения можно переходить к следующему шагу.

4. При получении к **автономной установки** странице **путь установки**, укажите папку, содержащую CAB-файлы, скопированные ранее.

   ![Страница мастера для выбора папки cab](media/screenshot-sql-offline-cab-page.png "папку CAB-файла")

5. По-прежнему ниже инструкциям на экране для завершения установки.

<a name="apply-cu"></a>

## <a name="apply-cumulative-updates"></a>Применить накопительные обновления

Мы рекомендуем применить последний накопительный пакет обновления для компонентов в машинном обучении и компонент database engine. Накопительные пакеты обновления устанавливаются через программу установки. 

1. Начать с экземпляром базовых показателей. Накопительные пакеты обновления можно применять только для существующих установок SQL Server:

  + Первоначальный выпуск SQL Server 2017
  + Первоначальный выпуск SQL Server 2016, SQL Server 2016 с пакетом обновления 1 или 2 (SP2) для SQL Server 2016

2. На подключенном устройстве Интернета перейдите к списку накопительное обновление для вашей версии SQL Server:

  + [Обновления SQL Server 2017](https://sqlserverupdates.com/sql-server-2017-updates/)
  + [Обновления SQL Server 2016](https://sqlserverupdates.com/sql-server-2016-updates/)

3. Выберите последнее накопительное обновление для загрузки исполняемого файла.

4. Получите соответствующий CAB-файлы для R и Python. Ссылки для загрузки см. в разделе [CAB-файлов загрузки для накопительные пакеты обновления для анализа в базе данных SQL Server экземпляры](sql-ml-cab-downloads.md).

5. Перенос всех файлов, исполняемый файл и CAB-файлов в папке на автономном компьютере.

6. Запустите программу установки. Примите условия лицензионного соглашения и на странице выбора компонентов, просмотрите список компонентов, для которых применяются накопительные пакеты обновления. Вы должны увидеть все возможности, которые установлены для текущего экземпляра, включая функции машинного обучения.

  ![Выбор компонентов в дереве компонентов](media/cumulative-update-feature-selection.png "список функций")

5. Следуйте указаниям мастера, приняв условия лицензионного соглашения о дистрибутивах R и Python. Во время установки будет предложено выбрать расположение папки, обновленные CAB-файлы.

## <a name="set-environment-variables"></a>Настройка переменных среды

Для R интеграции функций только, следует задать **MKL_CBWR** переменную среды, чтобы [гарантировать согласованный результат](https://software.intel.com/articles/introduction-to-the-conditional-numerical-reproducibility-cnr) из вычислений Intel Math Kernel Library (MKL).

1. На панели управления выберите **система и безопасность** > **системы** > **Дополнительные параметры системы**  >   **Переменные среды**.

2. Создайте новую переменную пользователем или системой. 

  + Набор имя переменной `MKL_CBWR`
  + Задать значения переменной `AUTO`

Этот шаг требует перезапуска сервера. Если вы собираетесь включить выполнение сценариев, вы можете воздержаться от перезапуска до завершения всей работы конфигурации.

## <a name="post-install-configuration"></a>Настройка после установки

После завершения установки перезапустите службу и затем настройте сервер для разрешения выполнения сценариев:

+ [Включить выполнение внешних скриптов (SQL Server 2017)](sql-machine-learning-services-windows-install.md#bkmk_enableFeature)
+ [Включить выполнение внешних скриптов (SQL Server 2016)](sql-r-services-windows-install.md#bkmk_enableFeature)

Начальной автономной установки служб машинного обучения SQL Server 2017 или SQL Server 2016 R Services требуется той же конфигурацией, что рабочую установку:

+ [Проверка установки](sql-machine-learning-services-windows-install.md#verify-installation) (для SQL Server 2016, нажмите кнопку [здесь](sql-r-services-windows-install.md#verify-installation)).
+ [Дополнительная настройка при необходимости](sql-machine-learning-services-windows-install.md#additional-configuration) (для SQL Server 2016, нажмите кнопку [здесь](sql-r-services-windows-install.md#bkmk_FollowUp)).

## <a name="next-steps"></a>Следующие шаги

Чтобы проверить состояние установки экземпляра и исправлять распространенные проблемы, см. в разделе [пользовательские отчеты для служб R SQL Server](../r/monitor-r-services-using-custom-reports-in-management-studio.md).

Для получения справки по любой незнакомого сообщения или записи журнала, см. в разделе [обновлению и установке часто задаваемые вопросы – службы машинного обучения](../r/upgrade-and-installation-faq-sql-server-r-services.md).

