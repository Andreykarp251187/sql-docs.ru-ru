---
title: Масштабирование параллельного выполнения внешних скриптов
description: Настройте параллельное или одновременное выполнение скрипта R и Python в пуле учетных записей пользователей для масштабирования SQL Server Службы машинного обучения.
ms.prod: sql
ms.technology: machine-learning
ms.date: 09/25/2019
ms.topic: conceptual
author: dphansen
ms.author: davidph
monikerRange: =sql-server-2016||=sql-server-2017||=sqlallproducts-allversions
ms.openlocfilehash: 262810be3ad1fd246c6f60383e28d456c6b79e08
ms.sourcegitcommit: fd3e81c55745da5497858abccf8e1f26e3a7ea7d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/01/2019
ms.locfileid: "71714338"
---
# <a name="scale-concurrent-execution-of-external-scripts-in-sql-server-machine-learning-services"></a>Масштабирование параллельного выполнения внешних скриптов в SQL Server Службы машинного обучения
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Узнайте о рабочих учетных записях для SQL Server Службы машинного обучения и о том, как изменить конфигурацию по умолчанию, чтобы масштабировать количество параллельных выполнений внешних скриптов.

В рамках процесса установки Службы машинного обучения создается новый *пул учетных записей пользователей* Windows для поддержки выполнения задач службой [!INCLUDE[rsql_launchpad](../../includes/rsql-launchpad-md.md)]. Эти рабочие учетные записи предназначены для изоляции параллельного выполнения внешних скриптов различными SQL Server пользователями.

> [!Note]
> В SQL Server 2019 **SQLRUserGroup** имеет только один элемент, который теперь является единственной панель запуска SQL Server учетной записью службы, а не несколькими рабочими учетными записями. В этой статье описываются рабочие учетные записи для SQL Server 2016 и 2017.

## <a name="worker-account-group"></a>Группа рабочих учетных записей

Группа учетных записей Windows создается [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] программой установки для каждого экземпляра, на котором установлено и включено машинное обучение.

- В экземпляре по умолчанию именем группы будет **SQLRUserGroup**. Это имя одинаково независимо от того, используется ли Python или R или оба.
- В именованном экземпляре имя группы по умолчанию имеет в качестве суффикса имя экземпляра, например **SQLRUserGroupИмя_экземпляра**.

По умолчанию пул учетных записей пользователей содержит 20 учетных записей. В большинстве случаев 20 больше, чем достаточно для поддержки задач машинного обучения, но количество учетных записей можно изменить. Максимальное число учетных записей — 100.

- В экземпляре по умолчанию отдельным учетным записям присваиваются имена от **MSSQLSERVER01** и до **MSSQLSERVER20**.
- Для именованного экземпляра отдельным учетным записям присваиваются имена на основе экземпляра: например, **Имя_экземпляра01** и до **Имя_экземпляра20**.

Если в нескольких экземплярах используется машинное обучение, компьютер будет иметь несколько групп пользователей. Группа не может совместно использоваться несколькими экземплярами.

<a name = "HowToChangeGroup"> </a>

## <a name="number-of-worker-accounts"></a>Число рабочих учетных записей

Чтобы изменить число пользователей в пуле учетных записей, необходимо изменить свойства службы [!INCLUDE[rsql_launchpad](../../includes/rsql-launchpad-md.md)], как описано ниже.

Пароли, связанные с каждой учетной записью пользователя, генерируются случайным образом, но при необходимости после создания учетных записей их можно изменить.

1. Откройте диспетчер конфигурации SQL Server и выберите **Службы SQL Server**.
2. Дважды щелкните службу панели запуска SQL Server и остановите службу, если она запущена.
3.  Убедитесь, что на вкладке **Служба** установлен автоматический режим запуска. Внешние скрипты не могут быть запущены, если панель запуска не запущена.
4.  Щелкните вкладку **Дополнительно** и при необходимости измените значение параметра **Число внешних пользователей**. Этот параметр определяет, сколько разных пользователей SQL могут выполнять сеансы внешних скриптов одновременно. Значение по умолчанию — 20 учетных записей. Максимальное число пользователей — 100.
5. При необходимости можно задать для параметра **Сбросить пароль внешних пользователей** значение _Да_, если политика вашей организации требует регулярной смены паролей. Это приведет к повторному созданию зашифрованных паролей, которые хранит панель запуска для учетных записей пользователей. Дополнительные сведения см. в разделе [Применение политики паролей](../security/sql-server-launchpad-service-account.md#bkmk_EnforcePolicy).
6.  Перезапустите службу панели запуска.

## <a name="managing-workloads"></a>Управление рабочими нагрузками

Число учетных записей в этом пуле определяет, сколько сеансов внешних скриптов может быть активно одновременно.  По умолчанию создаются 20 учетных записей, то есть 20 разных пользователей могут одновременно иметь активные сеансы Python или R. Можно увеличить число рабочих учетных записей, если предполагается выполнение более 20 параллельных сценариев.

Когда один пользователь одновременно выполняет несколько внешних скриптов, все сеансы, запущенные этим пользователем, используют одну и ту же рабочую учетную запись. Например, один пользователь может иметь 100 разных скриптов Python или R, выполняющихся одновременно, при условии, что ресурсы разрешены, но все скрипты будут выполняться с использованием одной рабочей учетной записи.

Количество рабочих учетных записей, которые можно поддерживать, и количество одновременных сеансов, которые может выполнять любой пользователь, ограничено ресурсами сервера. Как правило, память является первым узким местом, которое возникает при использовании среды выполнения Python или R.

Ресурсы, которые могут использоваться скриптами Python или R, управляются SQL Server. Мы советуем отслеживать использование ресурсов с помощью динамических административных представлений SQL Server или следить за счетчиками производительности для связанного объекта задания Windows и соответствующим образом настраивать использование памяти сервера. При наличии SQL Server Enterprise Edition можно выделить ресурсы, используемые для выполнения внешних скриптов, настроив [внешний пул ресурсов](how-to-create-a-resource-pool.md).

## <a name="next-steps"></a>Следующие шаги

- [Мониторинг выполнения скриптов Python и R с помощью пользовательских отчетов в SQL Server Management Studio](../../advanced-analytics/administration/monitor-sql-server-machine-learning-services-using-custom-reports-management-studio.md)
- [Мониторинг SQL Server Службы машинного обучения с помощью динамических административных представлений](../../advanced-analytics/administration/monitor-sql-server-machine-learning-services-using-dynamic-management-views.md)