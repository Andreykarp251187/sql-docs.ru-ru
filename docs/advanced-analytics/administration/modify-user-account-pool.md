---
title: Масштабирование параллельного выполнения внешних скриптов
description: Настройте параллельное или одновременное выполнение скрипта R и Python в пуле учетных записей пользователей для масштабирования SQL Server Службы машинного обучения.
ms.prod: sql
ms.technology: machine-learning
ms.date: 10/17/2018
ms.topic: conceptual
author: dphansen
ms.author: davidph
monikerRange: '>=sql-server-2016||>=sql-server-linux-ver15||=sqlallproducts-allversions'
ms.openlocfilehash: a5a0cd5ab05f7675ce011fe5205cbba3432725f4
ms.sourcegitcommit: 321497065ecd7ecde9bff378464db8da426e9e14
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/01/2019
ms.locfileid: "68715866"
---
# <a name="scale-concurrent-execution-of-external-scripts-in-sql-server-machine-learning-services"></a>Масштабирование параллельного выполнения внешних скриптов в SQL Server Службы машинного обучения
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Чтобы [!INCLUDE[rsql_launchpad](../../includes/rsql-launchpad-md.md)] могла выполнять задачи, в процессе установки [!INCLUDE[rsql-productnamenew-md](../../includes/rsql-productnamenew-md.md)] создается новый *пул учетных записей пользователей* Windows. Эти рабочие учетные записи предназначены для изоляции параллельного выполнения внешних скриптов разными пользователями SQL.

В этой статье описывается конфигурация и емкость рабочих учетных записей по умолчанию, а также изменение конфигурации по умолчанию для масштабирования количества одновременных выполнений внешних скриптов в SQL Server Службы машинного обучения.

## <a name="worker-account-group"></a>Группа рабочих учетных записей

Группа учетных записей Windows создается [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] программой установки для каждого экземпляра, на котором установлено и включено машинное обучение.

- В экземпляре по умолчанию именем группы будет **SQLRUserGroup**. Это имя одинаково независимо от того, используется R или Python или оба.
- В именованном экземпляре имя группы по умолчанию имеет в качестве суффикса имя экземпляра, например **SQLRUserGroupИмя_экземпляра**.

По умолчанию пул учетных записей пользователей содержит 20 учетных записей. В большинстве случаев 20 больше, чем достаточно для поддержки задач машинного обучения, но количество учетных записей можно изменить. Максимальное число учетных записей — 100.

- В экземпляре по умолчанию отдельным учетным записям присваиваются имена от **MSSQLSERVER01** и до **MSSQLSERVER20**.
- Для именованного экземпляра отдельным учетным записям присваиваются имена на основе экземпляра: например, **Имя_экземпляра01** и до **Имя_экземпляра20**.

Если в нескольких экземплярах используется машинное обучение, компьютер будет иметь несколько групп пользователей. Группа не может совместно использоваться несколькими экземплярами.

> [!Note]
> В SQL Server 2019 **SQLRUserGroup** имеет только один элемент, который теперь является единственной панель запуска SQL Server учетной записью службы, а не несколькими рабочими учетными записями.

<a name = "HowToChangeGroup"> </a>

## <a name="number-of-worker-accounts"></a>Число рабочих учетных записей

Чтобы изменить число пользователей в пуле учетных записей, необходимо изменить свойства службы [!INCLUDE[rsql_launchpad](../../includes/rsql-launchpad-md.md)], как описано ниже.

Пароли, связанные с каждой учетной записью пользователя, генерируются случайным образом, но при необходимости после создания учетных записей их можно изменить.

1. Откройте диспетчер конфигурации SQL Server и выберите **Службы SQL Server**.
2. Дважды щелкните службу панели запуска SQL Server и остановите службу, если она запущена.
3.  Убедитесь, что на вкладке **Служба** установлен автоматический режим запуска. Внешние скрипты не могут быть запущены, если панель запуска не запущена.
4.  Щелкните вкладку **Дополнительно** и при необходимости измените значение параметра **Число внешних пользователей**. Этот параметр определяет, сколько разных пользователей SQL могут выполнять сеансы внешних скриптов одновременно. Значение по умолчанию — 20 учетных записей. Максимальное число пользователей — 100.
5. При необходимости можно задать для параметра **Сбросить пароль внешних пользователей** значение _Да_, если политика вашей организации требует регулярной смены паролей. Это приведет к повторному созданию зашифрованных паролей, которые хранит панель запуска для учетных записей пользователей. Дополнительные сведения см. в разделе [Применение политики паролей](../security/sql-server-launchpad-service-account.md#bkmk_EnforcePolicy).
6.  Перезапустите службу панели запуска.

## <a name="managing-workloads"></a>Управление рабочими нагрузками

Число учетных записей в этом пуле определяет, сколько сеансов внешних скриптов может быть активно одновременно.  По умолчанию создаются 20 учетных записей, то есть 20 разных пользователей могут одновременно иметь активные сеансы R или Python. Можно увеличить число рабочих учетных записей, если предполагается выполнение более 20 параллельных сценариев.

Когда один пользователь одновременно выполняет несколько внешних скриптов, все сеансы, запущенные этим пользователем, используют одну и ту же рабочую учетную запись. Например, один пользователь может иметь 100 различных скриптов R, выполняющихся одновременно, при условии, что ресурсы разрешены, но все скрипты будут выполняться с одной рабочей учетной записью.

Количество рабочих учетных записей, которые можно поддерживать, и количество одновременных сеансов, которые может выполнять любой пользователь, ограничено ресурсами сервера. Как правило, память является первым узким местом при использовании среды выполнения R.

Ресурсы, которые могут использоваться скриптами Python или R, управляются SQL Server. Мы советуем отслеживать использование ресурсов с помощью динамических административных представлений SQL Server или следить за счетчиками производительности для связанного объекта задания Windows и соответствующим образом настраивать использование памяти сервера. При наличии SQL Server Enterprise Edition можно выделить ресурсы, используемые для выполнения внешних скриптов, настроив [внешний пул ресурсов](how-to-create-a-resource-pool.md).

## <a name="see-also"></a>См. также

Дополнительные сведения о настройке емкости см. в следующих статьях:

- [Настройка SQL Server для служб R](../../advanced-analytics/r/sql-server-configuration-r-services.md)
- [Пример производительности для служб R](../../advanced-analytics/r/performance-case-study-r-services.md)