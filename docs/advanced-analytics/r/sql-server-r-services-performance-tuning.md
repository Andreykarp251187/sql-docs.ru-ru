---
title: Производительность служб SQL Server R настройке - машинного обучения служб SQL Server
ms.prod: sql
ms.technology: machine-learning
ms.date: 04/15/2018
ms.topic: conceptual
author: dphansen
ms.author: davidph
manager: cgronlun
ms.openlocfilehash: e547e2cd3c50e020d1164dc2b8aaffb31f4e3cb8
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62641652"
---
# <a name="performance-tuning-for-r-in-sql-server"></a>Настройка производительности для R в SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Эта статья является первой в серии из четырех статей, посвященных оптимизации производительности для служб R, в зависимости от двух примеры внедрения:

- Тесты производительности в группой разработчиков продуктов для проверки профиль производительности решений r.

- Оптимизация производительности, команды обработки и анализа данных Microsoft для сценария конкретного машинного обучения, часто предложенные клиентами.

Цель этой серии — чтобы предоставить сведения о типах, которые наиболее важны для выполнения заданий R в SQL Server методы настройки производительности.

+ В этом разделе (первой) Обзор архитектуры и некоторых распространенных проблем при оптимизации для выполнения задач обработки и анализа данных.
+ Во второй статье рассматриваются определенного оборудования и оптимизации SQL Server.
+ В третьей статье описаны оптимизации в коде R и ресурсы для ввода в эксплуатацию.
+ В четвертой статье описывается методов теста в подробности и результаты отчетов и заключений.

**Применимо к:** Службы R SQL Server 2016, SQL Server 2017 службы машинного обучения

## <a name="performance-goals-and-targeted-scenarios"></a>Целевые показатели производительности и целевых сценариев

Компонент служб r. появилась в SQL Server 2016 для поддержки выполнения скриптов R с SQL Server. При использовании этой функции среды выполнения R работает в отдельном процессе от ядра базы данных, но безопасно обменивается данными с ядром СУБД, использование ресурсов сервера и служб, взаимодействующих с SQL Server, например доверенная панель запуска.

В SQL Server 2017 поддержка было объявлено для выполнения скриптов Python, используя ту же архитектуру, с помощью дополнительных языков для выполнения в будущем.

По мере роста числа поддерживаемых версий и языка, очень важно иметь в виду потенциальные для конфликта ресурсов из-за заданий машинного обучения администратор базы данных и архитектор баз данных, и что они смогут настроить сервер для поддержки новых рабочих нагрузок. Несмотря на то, что сохранение analytics рядом с данными исключает перемещений небезопасных данных, он также перемещает аналитических рабочих нагрузок off ноутбук, специалист по обработке данных и на сервер, на котором хранятся данные.

Оптимизация производительности для машинного обучения не очевидно, что опасно предложение. Следующие общие задачи могут быть очень разными показателями производительности:

- Обучение задачи: Создание и обучение модели регрессии и обучении нейронной сети
- Проектирование признаков, с помощью языка R и извлечения компонентов, с помощью T-SQL
- Оценка отдельных строк или небольшими пакетами, сравнение массовой оценки с использованием табличных входных данных
- Выполнение оценки в R и развертывание моделей в рабочей среде на сервере SQL Server в хранимых процедурах
- Изменить код R, чтобы минимизировать объем передаваемых данных или удалите преобразования дорогостоящих данных
- Включить автоматическое тестирование и повторное Обучение моделей

Поскольку Выбор методов оптимизации, зависит от того, какую задачу критически важна для вашего приложения или вариант использования, практические примеры охватывают Общие советы и рекомендации по оптимизации для конкретного сценария, оптимизации для массовой оценки.

+ **Параметры оптимизации отдельных в SQL Server**

    В первый пример использования производительности нескольких тесты выполнялись на один набор данных с помощью одного типа модели. Алгоритм rxLinMod в RevoscaleR был использован для создания модели и создания оценок из него, но код, а также базовые таблицы данных систематически были изменены для проверки влияния каждого изменения.

    Например в один тестовый запуск, код R была изменена таким образом, чтобы сравнение может выполняться между признаков с помощью функции преобразования и предварительного вычисления функции, а затем загрузки компонентов из таблицы. В другом тестовом запуске эффективность обучения модели сравнивался между использованием стандартных индексированной таблицы и данных в таблицу с различных типов сжатия или новых типов индекса.

+ **Оптимизация для конкретного сценария оценки большого объема**

    Задача машинного обучения в второй пример использования включает обработку многих резюме передан для нескольких позиций и поиск лучшим кандидатом для каждого объявление о вакансии. Самой модели машинного обучения формулируется как проблема двоичной классификации: он принимает описание резюме и задания как входные данные и создает вероятности для каждой пары resume-job. Так как целью является найти наилучшее соответствие, для дальнейшей фильтрации и получить так же хорошо соответствуют используется порог вероятности, определяемые пользователем.

    Для этого решения основной целью было обеспечить низкую задержку во время оценки. Тем не менее эта задача является невыгодно даже в процессе оценки, так как каждому новому зданию должны сопоставляться с миллионами резюме в течение разумного промежутка времени. Кроме того на этапе проектирования компонент создает более 2000 функций для каждой resume или задания также является критическим фактором производительности.

Мы рекомендуем просмотреть все результаты из первый пример реализации, чтобы определить, какие методы применимы к решению и сравнить их возможному влиянию.

Просмотрите результаты оценки пример реализации оптимизации, чтобы узнать, как автор применения различных методов и оптимизированных для операций сервера для поддержки конкретной рабочей нагрузки.

## <a name="performance-optimization-process"></a>Процесс оптимизации производительности

Конфигурация и настройка для повышения производительности требует создания устойчивой клиентской базы, выступающей в качестве уровня оптимизации, предназначенных для конкретных рабочих нагрузок:

- Выберите соответствующий сервер в analytics узла. Как правило предпочтительнее отчетов вторичной, хранилище данных или другой сервер, который уже используется для других отчетов или анализа. Тем не менее, в гибридном решении транзакций аналитическая обработка (HTAP), рабочие данные могут использоваться в качестве входных данных для R для быстрой оценки.

- Настройте экземпляр SQL Server для распределения операций ядра базы данных и R или запуск на должном уровне сценария Python. Они могут включать изменение значения по умолчанию SQL Server для памяти и об использовании ЦП, NUMA и настройки соответствия процессоров и создание групп ресурсов.

- Оптимизация удаленного сервера для поддержки эффективного использования внешних скриптов. Это могут быть увеличение числа учетных записей, используемых для выполнения внешнего скрипта, Включение управления пакетами и назначение пользователям связанных ролей безопасности.

- Применение конкретных оптимизации хранения данных и передачи в SQL Server, включая индексирования и статистика стратегии, конструктор запросов и оптимизации запросов и структуру таблицы, которые используются для машинного обучения. Вы также можете анализировать источники данных и данных передачи методов или изменения процессов ETL для оптимизации извлечения признаков.

- Настройки аналитической модели во избежание неэффективное использование. Области оптимизации, которые возможны зависят от сложности кода R и пакетов, а также данные, которые вы используете. Ключевые задачи включают удаление преобразования дорогостоящих данных или переносу данных подготовки или функция инженерных задач из R или Python процессов ETL или SQL. Может также рефакторинг скрипты, исключение устанавливает пакет в строке, разделить отдельные инструкции для обучения, оценки и вычисления код R и упростить код, чтобы работать более эффективно, как хранимую процедуру.

## <a name="articles-in-this-series"></a>Статьях этой серии

+ [Настройка производительности для R в SQL Server — оборудование](../r/sql-server-configuration-r-services.md)

    Содержит рекомендации по настройке оборудования, [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] устанавливается на, а также для настройки экземпляра SQL Server для поддержки внешних скриптов. Это особенно полезно для **администраторам баз данных**.

+ [Настройка производительности для R в SQL Server — код и данные оптимизации](../r/r-and-data-optimization-r-services.md)

    Предоставляет конкретные советы по оптимизации внешнего скрипта, чтобы избежать известных проблем. Это может пригодиться для **по обработке и анализу данных**.

    > [!NOTE]
    > Хотя большая часть информации в этом разделе относится к R в целом, некоторая информация относится только к аналитических функциях RevoScaleR. Подробные сведения о производительности руководство доступно не для **revoscalepy** и других поддерживаемых библиотек Python.
    >

+ [Настройка производительности для R в SQL Server - методы и результаты](../r/performance-case-study-r-services.md)

    Приведена сводка данных использовался в двух примерах внедрения, как был протестирован производительности и влияние оптимизации результатов.
