---
title: Установка новых языковых пакетов R
description: Добавление новых пакетов R в службы SQL Server 2016 R или SQL Server 2017 Службы машинного обучения (в базе данных)
ms.prod: sql
ms.technology: machine-learning
ms.date: 06/13/2019
ms.topic: conceptual
author: dphansen
ms.author: davidph
ms.openlocfilehash: 8de02f679af1bbeed8f65f4e4dc5456cd414e75e
ms.sourcegitcommit: c1382268152585aa77688162d2286798fd8a06bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/19/2019
ms.locfileid: "68345547"
---
# <a name="install-new-r-packages-on-sql-server"></a>Установить новые пакеты R на SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

В этой статье описывается, как установить новые пакеты R в экземпляре SQL Server, где включено машинное обучение. Существует несколько способов установки новых пакетов R в зависимости от используемой версии SQL Server и наличия у сервера подключения к Интернету. Возможны следующие подходы к установке нового пакета.

| Подход                           | Разрешения               | Удаленный/локальный |
|------------------------------------|---------------------------|--------------|
| [Использование стандартных диспетчеров пакетов R](use-r-package-managers-on-sql-server.md)  | Административный | Local |
| [Использование RevoScaleR](use-revoscaler-to-manage-r-packages.md) |  С поддержкой администрирования, роли базы данных затем | both|
| [Использование T-SQL (создание внешней библиотеки)](install-r-packages-tsql.md) | С поддержкой администрирования, роли базы данных затем | both 

## <a name="who-installs-permissions"></a>Кто устанавливает (разрешения)

Библиотека пакетов R физически находится в папке Program Files вашего экземпляра SQL Server в защищенной папке с ограниченным доступом. Для записи в это расположение требуются разрешения администратора.

Администраторы, не являющиеся администраторами, могут устанавливать пакеты, но это требует дополнительной настройки и возможности, недоступные при первоначальной установке. Существует два подхода к установке пакетов без прав администратора. RevoScaleR, используя версию 9.0.1 и более поздней версии или СОЗДАВ ВНЕШНЮЮ БИБЛИОТЕКУ (только SQL Server 2017). В SQL Server 2017 **dbo_owner** или другой пользователь с разрешением на создание внешней библиотеки может устанавливать пакеты R в текущую базу данных.

Разработчики R привыкли создавать пользовательские библиотеки для нужных им пакетов, если централизованно расположенные библиотеки являются неограниченными. Такой подход является проблематичным для кода R, который выполняется в SQL Server экземпляре ядра СУБД. SQL Server не может загружать пакеты из внешних библиотек, даже если эта библиотека находится на одном компьютере. В коде R, выполняющемся в SQL Server, можно использовать только пакеты из библиотеки экземпляров.

Доступ к файловой системе обычно ограничен на сервере, и даже если у вас есть права администратора и доступ к папке пользовательских документов на сервере, среда выполнения внешнего скрипта, которая выполняется в SQL Server, не может получить доступ к пакетам, установленным вне экземпляра по умолчанию. Библиотечная. 

## <a name="considerations-for-package-installation"></a>Рекомендации по установке пакета

Перед установкой новых пакетов определите, подходят ли возможности данного пакета в среде SQL Server. В защищенной SQL Server среде может возникнуть необходимость избежать следующих проблем:

+ Пакеты, которым требуется доступ к сети
+ Пакеты, для которых требуется повышенный доступ к файловой системе
+ Пакет используется для веб-разработки или других задач, которые не выигрывают от использования в SQL Server

## <a name="offline-installation-no-internet-access"></a>Автономная установка (без доступа к Интернету)

Как правило, серверы, на которых размещаются рабочие базы данных, блокируют подключения к Интернету. Для установки новых пакетов R или Python в таких средах требуется предварительная подготовка пакетов и зависимостей, а также копирование файлов в папку на сервере для автономной установки.

Определение всех зависимостей становится сложным. Для R рекомендуется использовать [miniCRAN для создания локального репозитория](create-a-local-package-repository-using-minicran.md) , а затем переносить полностью определенный репозиторий в изолированный экземпляр SQL Server.

Кроме того, эти действия можно выполнить вручную.

1. Выявление всех зависимостей пакетов. 
2. Проверьте, установлены ли на сервере какие бы то ни было необходимые пакеты. Если пакет установлен, убедитесь, что указана правильная версия.
3. Скачайте пакет и все зависимости на отдельный компьютер.
4. Переместите файлы в папку, доступную для сервера.
5. Запустите поддерживаемую команду установки или инструкцию DDL, чтобы установить пакет в библиотеке экземпляров.

### <a name="download-the-package-as-a-zipped-file"></a>Скачивание пакета в виде ZIP-файла

Для установки на сервере без доступа к Интернету необходимо загрузить копию пакета в формате ZIP-файла для автономной установки. **Не Распакуйте пакет.**

Например, в следующей процедуре описывается, как получить правильную версию пакета [FISHalyseR](https://bioconductor.org/packages/release/bioc/html/FISHalyseR.html) из биоofing, предполагая, что компьютер имеет доступ к Интернету.

1.  В списке **Package Archives** (Архивы пакетов) найдите версию **Windows binary** (Двоичный файл Windows).

2.  Щелкните правой кнопкой мыши ссылку на. ZIP-файл и выберите **Сохранить объект как**.

3.  Перейдите в локальную папку, в которой хранятся ZIP-пакеты, и нажмите кнопку **сохранить**.

    Будет создана локальная копия пакета. 

4. Если возникает ошибка загрузки, попробуйте другой зеркальный сайт.

5. После загрузки архивного пакета можно установить пакет или скопировать сжатый пакет на сервер, не имеющий доступа к Интернету.

> [!TIP]
> Если по ошибке вы установили пакет, а не скачиваете двоичные файлы, копия скачанного ZIP-файла также будет сохранена на компьютере. Просмотрите сообщения о состоянии по мере установки пакета, чтобы определить расположение файла. Сжатый ZIP-файл можно скопировать на сервер без доступа к Интернету.
> 
> Однако при получении пакетов с помощью этого метода зависимости не включаются. 


## <a name="side-by-side-installation-with-standalone-r-or-python-servers"></a>Параллельная установка с автономными серверами R или Python

Функции R и Python включены в несколько продуктов Майкрософт, все из которых могут сосуществовать на одном компьютере.

Если вы установили SQL Server 2017 Microsoft Machine Learning Server (автономный) или SQL Server 2016 R Server (изолированный) в дополнение к аналитической аналитике (SQL Server 2017 Службы машинного обучения и SQL Server 2016 R Services), компьютер имеет отдельный установки R для каждой версии с дубликатами всех средств и библиотек R.

Пакеты, устанавливаемые в библиотеку R_SERVER, используются только отдельным сервером и не могут быть доступны в экземпляре SQL Server (в базе данных). Всегда используйте `R_SERVICES` библиотеку при установке пакетов, которые будут использоваться в базе данных на SQL Server. Дополнительные сведения о путях см. в разделе [расположение библиотеки пакетов](../package-management/default-packages.md).

## <a name="see-also"></a>См. также

+ [Установка новых пакетов Python](../python/install-additional-python-packages-on-sql-server.md)
+ [Руководства, примеры, решения](../tutorials/machine-learning-services-tutorials.md)
