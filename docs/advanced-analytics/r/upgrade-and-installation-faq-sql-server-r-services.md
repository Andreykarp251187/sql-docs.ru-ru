---
title: Часто задаваемые вопросы по обновлению и установке
ms.custom: sqlseattle
ms.prod: sql
ms.technology: machine-learning
ms.date: 06/13/2019
ms.topic: conceptual
ms.author: davidph
author: dphansen
ms.openlocfilehash: 71a6149f1d89a4a1df114f376c250c203a8721cf
ms.sourcegitcommit: c1382268152585aa77688162d2286798fd8a06bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/19/2019
ms.locfileid: "68344906"
---
# <a name="upgrade-and-installation-faq-for-sql-server-machine-learning-or-r-server"></a>Часто задаваемые вопросы по обновлению и установке для SQL Server Машинное обучение или R Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

В этом разделе содержатся ответы на некоторые распространенные вопросы об установке функций машинного обучения в SQL Server. Здесь также рассматриваются распространенные вопросы об обновлениях.

+ Некоторые проблемы возникают только при обновлениях до предварительных версий. Поэтому перед чтением этих примечаний рекомендуется сначала выяснить версию и выпуск. Чтобы получить сведения о версии, `@@VERSION` выполните запрос из SQL Server Management Studio.
+ Выполните обновление до последней версии или выпуска службы как можно скорее, чтобы устранить проблемы, исправленные в последних выпусках.

**Применимо к:** SQL Server 2016 служб R SQL Server 2017 Службы машинного обучения (в базе данных)

## <a name="requirements-and-restrictions-on-older-versions-of-sql-server-2016"></a>Требования и ограничения для старых версий SQL Server 2016 

В зависимости от устанавливаемой сборки SQL Server могут применяться некоторые из следующих ограничений.

- В ранних версиях служб SQL Server 2016 R Services на диске, содержащем рабочий каталог, была необходима нотация 8.3. Если вы установили предварительную версию, обновление до SQL Server 2016 с пакетом обновления 1 (SP1) должно устранить эту проблему. Это требование не распространяется на выпуски после пакета обновления 1 (SP1).

- В настоящее время установка [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] в отказоустойчивом кластере невозможна. Однако SQL Server 2019 Preview обеспечивает поддержку отработки отказа, если вы хотите оценить эту возможность в тестовой среде. Дополнительные сведения см. в разделе [новые](../what-s-new-in-sql-server-machine-learning-services.md)возможности.

- На виртуальной машине Azure может потребоваться дополнительная настройка. Например, может потребоваться создать исключение брандмауэра для поддержки удаленного доступа.

- Параллельная установка с другой версией R или с другими выпусками из аналитики революции не поддерживается.

- Отключите Поиск вирусов перед началом установки. После завершения установки рекомендуется приостановить поиск вирусов в папках, используемых [!INCLUDE[ssnoversion](../../includes/ssnoversion-md.md)]. Желательно приостановить сканирование во всем [!INCLUDE[ssnoversion](../../includes/ssnoversion-md.md)] дереве.

 - Установка Microsoft R Server на экземпляре SQL Server, установленном в Windows Core. В RTM-версии SQL Server 2016 возникла известная ошибка при добавлении Microsoft R Server в экземпляр в Windows Server Core Edition. Эта ошибка исправлена. При возникновении этой проблемы можно применить исправление, описанное в [KB3164398](https://support.microsoft.com/kb/3164398) , чтобы добавить компонент R в существующий экземпляр в Windows Server Core. Дополнительные сведения см. в разделе [Не удается установить изолированный сервер Microsoft R Server в операционной системе Windows Server Core](https://support.microsoft.com/kb/3168691).


## <a name="offline-installation-of-machine-learning-components-for-a-localized-version-of-sql-server-2016"></a>Автономная установка компонентов машинного обучения для локализованной версии SQL Server 2016

В ранних версиях SQL Server 2016 не удалось установить файлы CAB, зависящие от локали, во время автономной установки без подключения к Интернету. Эта проблема была исправлена в последующих выпусках, но если установщик возвращает сообщение о том, что не удается установить правильный язык, можно изменить имя файла, чтобы разрешить продолжение установки.

+ Вручную измените файл установщика, чтобы убедиться, что установлен правильный язык. Например, чтобы установить японскую версию SQL Server, измените имя файла с SRS_ 8.0.3.0 _**1033**. cab на srs_ 8.0.3.0 _**1041**. cab.
+ Идентификатор языка, используемый для компонентов машинного обучения, должен быть таким же, как и язык установки SQL Server или вы не можете завершить установку.

## <a name="pre-release-versions-support-policies-upgrade-and-known-issues"></a>Предварительные версии: политики поддержки, обновление и известные проблемы

Новые установки предварительной версии [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] более не поддерживаются. Если вы используете предварительную версию, обновите как можно скорее.

В этом разделе содержатся подробные инструкции для конкретных сценариев обновления.

### <a name="how-to-upgrade-sql-server"></a>Обновление SQL Server

Версию SQL Server можно обновить, повторно запустив мастер установки.

+ [Обновление SQL Server](../../database-engine/install-windows/upgrade-sql-server.md)
+ [Обновление SQL Server с помощью мастера установки](../../database-engine/install-windows/upgrade-sql-server-using-the-installation-wizard-setup.md)

Вы можете обновить только компоненты машинного обучения с помощью процесса привязки: 
+ [Использование SqlBindR для обновления компонентов машинного обучения](../install/upgrade-r-and-python.md)

### <a name="end-of-support-for-in-place-upgrades-from-prerelease-versions"></a>Окончание поддержки обновлений на месте в предварительных версиях

Обновления с предварительных версий SQL Server 2016 больше не поддерживаются. Сюда входит SQL Server 2016 ОЗНАКОМИТЕЛЬНАЯ версия, CTP 3.1, CTP 3.2, RC0 или RC1.

Следующие версии были установлены с предварительными версиями SQL Server 2016.

| Version | Сборка         |
|---------|---------------|
| CTP 3.0 | 13.0.xxx      |
| CTP 3.1 | 13.0.801.12   |
| CTP 3.2 | 13.0.900.73   |
| CTP 3.3 | 13.0.1000.281 |
| RC1     | 13.0.1200.242 |
| RC2     | 13.0.1300.275 |
| RC3     | 13.0.1400.361 |

Если у вас есть сомнения относительно того, какую версию вы используете, `@@VERSION` выполните запрос из SQL Server Management Studio.

Как правило, процесс обновления выглядит следующим образом:

1. Резервное копирование скриптов и данных.
2. Удалите предварительную версию.
3. Установите окончательную версию.

Удаление предварительной версии компонентов машинного обучения SQL Server может быть сложным и может потребовать выполнения специального сценария. Обратитесь в службу технической поддержки.

###  <a name="bkmk_Uninstall"></a>Удалите перед обновлением с более ранней версии Microsoft R Server

Если вы установили предварительную версию Microsoft R Server, ее необходимо удалить перед обновлением до более новой версии.

1.  В **панели управления**щелкните элемент **Установка и удаление программ**, а затем выберите `Microsoft SQL Server 2016 <version number>`.

2.  В диалоговом окне с командами **добавления**, **восстановления**и **удаления** компонентов выберите **Удалить**.
  
3.  На странице **Выбор компонентов** в разделе **Общие компоненты**выберите **R Server (изолированный)** . Нажмите кнопку **Далее**, а затем — кнопку **Готово** , чтобы удалить только выбранные компоненты.

## <a name="r-services-and-r-server-standalone-side-by-side-errors"></a>Службы r и R Server (автономные) ошибки одновременной стороны 

В более ранних версиях SQL Server 2016 установка R Server (автономных) и служб R (в базе данных) в то же время иногда привела к сбою программы установки с сообщением "доступ запрещен". Эта проблема была исправлена в пакете обновления 1 (SP1) для SQL Server 2016.

Если вы столкнулись с этой ошибкой и вам нужно обновить эти компоненты, выполните установку SQL Server 2016 с пакетом обновления 1 (SP1). Устранить проблему можно двумя способами, для которых требуется удаление и повторная установка.

1. Удалите службы R (в базе данных) и убедитесь, что учетные записи пользователей для SQLRUserGroup удалены.

2. Перезапустите сервер, а затем переустановите R Server (изолированный).

3. Запустите программу установки SQL Server еще раз, и на этот раз выберите **Добавить компоненты к существующим SQL Server**.

4. Выберите экземпляр, а затем выберите параметр **службы R (в базе данных)** для добавления.

Если эта процедура не позволяет устранить проблему, попробуйте следующее.

1. Удалите службы R (в базе данных) и R Server (автономные) одновременно.

2. Удалите локальные учетные записи пользователей (SQLRUserGroup).

3. Перезапустите сервер.

4. Запустите программу установки SQL Server и добавьте только функцию R Services (в базе данных). Не выбирайте **R Server (изолированный)** .

Как правило, не рекомендуется устанавливать службы R (в базе данных) и R Server (изолированные) на одном компьютере. Однако, предполагая, что сервер обладает достаточной емкостью, в качестве средства разработки может оказаться полезным использовать R Server standalone. Еще один возможный сценарий заключается в том, что необходимо использовать функции работы сервера R Server, но также требуется доступ к данным SQL Server без перемещения данных.

## <a name="incompatible-version-of-r-client-and-r-server"></a>Несовместимые версии клиента R и сервера R Server

Если вы устанавливаете Microsoft R Client и используете его для запуска R в контексте удаленного SQL Serverного вычислений, может появиться сообщение об ошибке следующего вида:

*Вы используете версию 9.0.0 клиента Microsoft R на компьютере, которая несовместима с Microsoft R Server версией 8.0.3. Скачайте и установите совместимую версию*.

В SQL Server 2016 требовалось, чтобы версия R, которая выполнялась в SQL Server R Services, была точно такой же, как и библиотеки в Microsoft R Client. Это требование было удалено в более поздних версиях. Однако рекомендуется всегда получать последние версии компонентов машинного обучения и устанавливать все пакеты обновления. 

Если у вас более ранняя версия Microsoft R Server и необходимо обеспечить совместимость с Microsoft R Client 9.0.0, установите обновления, описанные в этой [статье о поддержке](https://support.microsoft.com/kb/3210262).


## <a name="installation-fails-with-error-only-one-revolution-enterprise-product-can-be-installed-at-a-time"></a>Установка завершается ошибкой "Одновременная установка нескольких продуктов Revolution Enterprise невозможна".

Эта ошибка может возникнуть, если у вас уже установлены продукты Revolution Analytics или предварительная версия служб SQL Server R. Перед тем как устанавливать новую версию Microsoft R Server, необходимо удалить все предыдущие версии. Параллельная установка с другими версиями средств Revolution Enterprise не поддерживается.

Но она поддерживается при использовании изолированного сервера R Server с [!INCLUDE[ssSQLv14_md](../../includes/sssqlv14-md.md)] или SQL Server 2016.

## <a name="registry-cleanup-to-uninstall-older-components"></a>Очистка реестра для удаления старых компонентов

Если у вас возникают проблемы с удалением предыдущей версии, вам может потребоваться отредактировать реестр, удалив соответствующие разделы.

> [!IMPORTANT]
> Эта проблема возникает, только если вы установили предварительную версию Microsoft R Server или версию CTP служб SQL Server 2016 R.
  
1. Откройте реестр Windows и найдите следующий раздел: `HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall`.
2. Удалите следующие записи, если они имеются и если раздел содержит только параметр `sEstimatedSize2`:
  
    -   E0B2C29E-B8FC-490B-A043-2CAE75634972        (для версии 8.0.2)
  
    -   46695879-954E-4072-9D32-1CC84D4158F4        (для версии 8.0.1)
  
    -   2DF16DF8-A2DB-4EC6-808B-CB5A302DA91B        (для версии 8.0.0)
  
    -   5A2A1571-B8CD-4AAF-9303-8DF463DABE5A        (для версии 7.5.0)

## <a name="see-also"></a>См. также

 [Службы машинного обучения SQL Server (в базе данных)](../r/sql-server-r-services.md)

 [Machine Learning Server SQL Server (изолированный)](../r/r-server-standalone.md)
