---
title: Часто задаваемые вопросы по обновлению и установке
description: Ответы на некоторые распространенные вопросы по установке функций машинного обучения в SQL Server.
ms.custom: seo-lt-2019
ms.prod: sql
ms.technology: machine-learning
ms.date: 11/06/2019
ms.topic: conceptual
ms.author: davidph
author: dphansen
monikerRange: '>=sql-server-2016||>=sql-server-linux-ver15||=sqlallproducts-allversions'
ms.openlocfilehash: 6357f98627842ab790b494cf1b4a1f9b2110ec9c
ms.sourcegitcommit: ff82f3260ff79ed860a7a58f54ff7f0594851e6b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2020
ms.locfileid: "73727345"
---
# <a name="upgrade-and-installation-faq-for-sql-server-machine-learning-or-r-server"></a>Часто задаваемые вопросы по обновлению и установке функций машинного обучения в SQL Server или R Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]

В этом разделе приводятся ответы на некоторые распространенные вопросы по установке функций машинного обучения в SQL Server. Здесь также рассматриваются общие вопросы об обновлениях.

+ Некоторые проблемы возникают только при обновлениях с предварительных версий. Поэтому перед чтением этих примечаний рекомендуется определить версию и выпуск. Чтобы получить сведения о версии, выполните `@@VERSION` в запросе в среде SQL Server Management Studio.
+ Чтобы устранить проблемы, исправленные в последних выпусках, как можно скорее выполните обновление до последней версии или выпуска службы.

**Применимо к:** Службы SQL Server 2016 R Services, службы машинного обучения SQL Server в базе данных

## <a name="requirements-and-restrictions-on-older-versions-of-sql-server-2016"></a>Требования и ограничения для предыдущих версий SQL Server 2016 

В зависимости от устанавливаемой сборки SQL Server могут применяться некоторые из перечисленных ограничений.

- В ранних версиях служб SQL Server 2016 R Services на диске, содержащем рабочий каталог, требовалась нотация 8dot3. Если у вас установлена предварительная версия, обновление до SQL Server 2016 с пакетом обновления 1 (SP1) должно устранить эту проблему. Это требование не распространяется на выпуски, вышедшие после пакета обновления 1 (SP1).

- Установить [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] в отказоустойчивом кластере в SQL Server 2016 нельзя. Однако SQL Server 2019 обеспечивает поддержку отработки отказа. Дополнительные сведения см. в статье [Новые возможности](../what-s-new-in-sql-server-machine-learning-services.md).

- На виртуальных машинах Azure может понадобиться выполнить дополнительную настройку. Например, может потребоваться создать исключение брандмауэра для поддержки удаленного доступа.

- Параллельная установка с другими версиями R или другими выпусками Revolution Analytics не поддерживается.

- Перед началом установки следует отключить поиск вирусов. После установки рекомендуется приостановить поиск вирусов в папках, используемых [!INCLUDE[ssnoversion](../../includes/ssnoversion-md.md)]. Желательно приостановить поиск во всем дереве [!INCLUDE[ssnoversion](../../includes/ssnoversion-md.md)].

 - Установка Microsoft R Server в экземпляре SQL Server, установленном в Windows Server Core. В версии RTM выпуска SQL Server 2016 имелась известная проблема при добавлении Microsoft R Server в экземпляр в выпуске Windows Server Core. Эта ошибка исправлена. При ее возникновении можно применить исправление, описываемое в [статье 3164398 базы знаний](https://support.microsoft.com/kb/3164398), чтобы добавить компонент R в существующий экземпляр в Windows Server Core. Дополнительные сведения см. в разделе [Не удается установить изолированный сервер Microsoft R Server в операционной системе Windows Server Core](https://support.microsoft.com/kb/3168691).


## <a name="offline-installation-of-machine-learning-components-for-a-localized-version-of-sql-server-2016"></a>Автономная установка компонентов машинного обучения для локализованной версии SQL Server 2016

В ранних версиях SQL Server 2016 установка зависящих от языкового стандарта CAB-файлов во время автономной установки без подключения к Интернету завершалась сбоем. Эта проблема была устранена в последующих выпусках, но если установщик возвращает сообщение о невозможности установки правильного языка, можно изменить имя файла и продолжить установку.

+ Вручную измените файл установщика, чтобы установить правильный язык. Например, при установке японской версии SQL Server имя файла SRS_8.0.3.0_**1033**.cab следует изменить на SRS_8.0.3.0_**1041**.cab.
+ Идентификатор языка, используемый для компонентов машинного обучения, должен соответствовать устанавливаемому языку SQL Server. В противном случае вы не сможете завершить установку.

## <a name="pre-release-versions-support-policies-upgrade-and-known-issues"></a>Предварительные версии: политики поддержки, обновление и известные проблемы

Новые установки предварительной версии [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] больше не поддерживаются. Если вы используете предварительную версию, как можно скорее выполните обновление.

В этом разделе содержатся подробные инструкции для конкретных сценариев обновления.

### <a name="how-to-upgrade-sql-server"></a>Обновление SQL Server 2016

Версию SQL Server можно обновить, повторно запустив мастер установки.

+ [Обновление SQL Server](../../database-engine/install-windows/upgrade-sql-server.md)
+ [Обновление SQL Server с помощью мастера установки](../../database-engine/install-windows/upgrade-sql-server-using-the-installation-wizard-setup.md)

Для обновления только компонентов машинного обучения можно воспользоваться процессом привязки. 
+ [Использование SqlBindR для обновления компонентов машинного обучения](../install/upgrade-r-and-python.md)

### <a name="end-of-support-for-in-place-upgrades-from-prerelease-versions"></a>Окончание поддержки выполняемых на месте обновлений с предварительных версий

Обновления с предварительных версий SQL Server 2016 больше не поддерживаются. В число этих версий входят SQL Server 2016 CTP3, CTP 3.1, CTP 3.2, RC0 или RC1.

Следующие версии были установлены с предварительными версиями SQL Server 2016.

| Версия | Сборка         |
|---------|---------------|
| CTP 3.0 | 13.0.xxx      |
| CTP 3.1 | 13.0.801.12   |
| CTP 3.2 | 13.0.900.73   |
| CTP 3.3 | 13.0.1000.281 |
| RC1     | 13.0.1200.242 |
| RC2     | 13.0.1300.275 |
| RC3     | 13.0.1400.361 |

Если у вас есть сомнения относительно используемой версии, выполните `@@VERSION` в запросе в среде SQL Server Management Studio.

Как правило, процесс обновления состоит из следующих этапов.

1. Резервное копирование сценариев и данных.
2. Удаление предварительной версии.
3. Установка выпущенной версии.

Удаление предварительной версии компонентов машинного обучения SQL Server может оказаться сложной задачей и потребовать выполнения специального сценария. Обратитесь в службу технической поддержки.

###  <a name="uninstall-prior-to-upgrading-from-an-older-version-of-microsoft-r-server"></a><a name="bkmk_Uninstall"></a> Удаление перед обновлением с предыдущей версии Microsoft R Server

Если вы установили предварительную версию Microsoft R Server, ее необходимо удалить перед обновлением до более новой версии.

1.  В **панели управления**щелкните элемент **Установка и удаление программ**, а затем выберите `Microsoft SQL Server 2016 <version number>`.

2.  В диалоговом окне с командами **добавления**, **восстановления**и **удаления** компонентов выберите **Удалить**.
  
3.  На странице **Выбор компонентов** в разделе **Общие компоненты**выберите **R Server (изолированный)** . Нажмите кнопку **Далее**, а затем — кнопку **Готово** , чтобы удалить только выбранные компоненты.

## <a name="r-services-and-r-server-standalone-side-by-side-errors"></a>Ошибки, возникающие при параллельной установке R Services и R Server (изолированного) 

В предыдущих версиях SQL Server 2016 одновременная установка R Server (изолированного) и R Services (в базе данных) иногда приводила к сбою программы установки с выводом сообщения об отказе в доступе. Эта проблема была устранена в пакете обновления 1 (SP1) для SQL Server 2016.

Если вы столкнулись с этой ошибкой и вам нужно обновить эти компоненты, выполните интегрированную установку SQL Server 2016 с пакетом обновления 1 (SP1). Устранить проблему можно двумя способами, в каждом из которых требуется удаление и повторная установка.

1. Удалите R Services (в базе данных) и убедитесь, что удалены учетные записи пользователей для SQLRUserGroup.

2. Перезапустите сервер, а затем переустановите R Server (изолированный).

3. Запустите программу установки SQL Server повторно, и на этот раз выберите параметр **Добавить компоненты в существующий экземпляр SQL Server**.

4. Выберите экземпляр, а затем выберите добавляемый компонент — **R Services (в базе данных)** .

Если проблема сохраняется, попробуйте следующее решение.

1. Одновременно удалите R Services (в базе данных) и R Server (изолированный).

2. Удалите локальные учетные записи пользователей (SQLRUserGroup).

3. Перезапустите сервер.

4. Запустите программу установки SQL Server и добавьте только компонент R Services (в базе данных). Не выбирайте **R Server (изолированный)** .

Как правило, не рекомендуется устанавливать R Services R (в базе данных) и R Server (изолированный) на одном компьютере. Однако предполагая, что сервер обладает достаточной емкостью, R Server (изолированный) может оказаться полезным инструментом разработки. Другим возможным сценарием является необходимость использовать рабочие функции R Server и при этом иметь доступ к данным SQL Server без их перемещения.

## <a name="incompatible-version-of-r-client-and-r-server"></a>Несовместимые версии клиента R и сервера R Server

Если вы установили Microsoft R Client и используете его для выполнения R в удаленном контексте вычисления SQL Server, может возникнуть следующая ошибка:

*На компьютере используется версия 9.0.0 Microsoft R Client, которая несовместима с Microsoft R Server версии 8.0.3. Скачайте и установите совместимую версию*.

В SQL Server 2016 требовалось, чтобы версия R, которая выполнялась в SQL Server R Services, точно соответствовала версиям библиотек в Microsoft R Client. Это требование было удалено в более поздних версиях. Однако рекомендуется всегда получать последние версии компонентов машинного обучения и устанавливать все пакеты обновления. 

Если у вас установлена предыдущая версия Microsoft R Server и требуется обеспечить совместимость с Microsoft R Client 9.0.0, необходимо установить обновления, которые описываются в этой [статье службы поддержки](https://support.microsoft.com/kb/3210262).


## <a name="installation-fails-with-error-only-one-revolution-enterprise-product-can-be-installed-at-a-time"></a>Установка завершается ошибкой "Одновременная установка нескольких продуктов Revolution Enterprise невозможна".

Эта ошибка может возникнуть, если у вас уже установлены продукты Revolution Analytics или предварительная версия служб SQL Server R. Перед тем как устанавливать новую версию Microsoft R Server, необходимо удалить все предыдущие версии. Параллельная установка с другими версиями средств Revolution Enterprise не поддерживается.

Но она поддерживается при использовании изолированного сервера R Server с [!INCLUDE[ssSQLv14_md](../../includes/sssqlv14-md.md)] или SQL Server 2016.

## <a name="registry-cleanup-to-uninstall-older-components"></a>Очистка реестра для удаления старых компонентов

Если у вас возникают проблемы с удалением предыдущей версии, вам может потребоваться отредактировать реестр, удалив соответствующие разделы.

> [!IMPORTANT]
> Эта проблема возникает, только если вы установили предварительную версию Microsoft R Server или версию CTP служб SQL Server 2016 R.
  
1. Откройте реестр Windows и найдите следующий раздел: `HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall`.
2. Удалите следующие записи, если они имеются и если раздел содержит только параметр `sEstimatedSize2`:
  
    -   E0B2C29E-B8FC-490B-A043-2CAE75634972        (для версии 8.0.2)
  
    -   46695879-954E-4072-9D32-1CC84D4158F4        (для версии 8.0.1)
  
    -   2DF16DF8-A2DB-4EC6-808B-CB5A302DA91B        (для версии 8.0.0)
  
    -   5A2A1571-B8CD-4AAF-9303-8DF463DABE5A        (для версии 7.5.0)

## <a name="see-also"></a>См. также раздел

 [Службы машинного обучения SQL Server (в базе данных)](../r/sql-server-r-services.md)

 [Сервер машинного обучения SQL Server (изолированный)](../r/r-server-standalone.md)
