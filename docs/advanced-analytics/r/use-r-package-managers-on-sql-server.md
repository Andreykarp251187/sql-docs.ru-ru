---
title: Использовать диспетчеры пакетов R - служб машинного обучения SQL Server
description: Используйте стандартные команды R, например install.packages Добавление новых пакетов R в SQL Server 2016 R Services или служб SQL Server 2017 машинного обучения (в базе данных).
ms.prod: sql
ms.technology: machine-learning
ms.date: 06/13/2019
ms.topic: conceptual
author: dphansen
ms.author: davidph
manager: cgronlun
ms.openlocfilehash: 2582d519893fac3a49ce997674980d2d58d5cf32
ms.sourcegitcommit: a91c3f4fe2587d474cd4d470bda93239ba2693bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/14/2019
ms.locfileid: "67140779"
---
# <a name="use-r-package-managers-to-install-r-packages-on-sql-server"></a>Использование R диспетчеров пакетов для установки пакетов R на SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Можно использовать стандартные средства R, чтобы установить новые пакеты на экземпляре SQL Server 2016 или SQL Server 2017, предоставляя компьютер имеет открытый порт 80, и иметь права администратора.

> [!IMPORTANT] 
> Не забудьте установить пакеты в библиотеку по умолчанию, связанный с текущим экземпляром. Никогда не устанавливайте пакеты в каталоге пользователя.

В этой процедуре используется RGui, но можно использовать RTerm и любым другим R командной строки, поддерживающий повышенных прав доступа.

## <a name="install-a-package-using-rgui"></a>Установка пакета с помощью RGui

1. [Определить расположение библиотеки экземпляра](../package-management/default-packages.md). Перейдите в папку, где установлены средства R. Например путь по умолчанию для экземпляра SQL Server 2017 по умолчанию выглядит следующим образом: `C:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\R_SERVICES\bin\x64`

1. Щелкните правой кнопкой мыши RGui.exe и выберите **Запуск от имени администратора**. Если у вас нет необходимых разрешений, обратитесь к администратору базы данных и укажите список необходимых пакетов.

1. Из командной строки Если известно имя пакета, можно ввести: `install.packages("the_package-name")` Двойные кавычки необходимы для имени пакета.

1. При запросе зеркальный сайт, выберите любой сайт, удобный для вашего расположения.

Если целевой пакет зависит от дополнительных пакетов, установщик R автоматически загружаются зависимости и установит их.

При наличии нескольких экземпляров SQL Server, например side-by-side экземпляры SQL Server 2016 R Services и SQL Server 2017 служб машинного обучения, запустите установку отдельно для каждого экземпляра, если вы хотите использовать пакет в контекстах. Пакеты невозможно будет совместно использоваться экземплярами.

## <a name = "bkmk_offlineInstall"></a> Установки в автономном режиме с помощью средств r.

Если сервер не имеет доступа к Интернету, чтобы подготовить пакеты требуются дополнительные действия. Чтобы установить пакеты R на сервере, который не имеет доступа к Интернету, необходимо сделать следующее:

+ Анализ зависимостей заранее.
+ Загрузите целевой пакет на компьютер с доступом к Интернету.
+ Скачать необходимые пакеты на одном компьютере и поместите все пакеты в одном пакете архиве.
+ ZIP-архив, если он еще не находится в формате ZIP.
+ Скопируйте архив пакета в расположение на сервере.
+ Установки целевого пакета, указав файл архива в качестве источника.

> [!IMPORTANT] 
>  Убедитесь, что проанализировать все зависимости и загрузите **все** необходимые пакеты **перед** начала установки. Мы рекомендуем [miniCRAN](https://mran.microsoft.com/package/miniCRAN) для этого процесса. Этот пакет R принимает список пакетов для установки, анализирует зависимости и возвращает все ZIP-файлы для вас. затем miniCRAN создает один репозиторий, который можно скопировать на сервер. Дополнительные сведения см. в разделе [Создание локального репозитория пакетов с помощью miniCRAN](create-a-local-package-repository-using-minicran.md)

Эта процедура предполагает, что вы подготовили все пакеты, необходимые в формате ZIP и будут готовы, скопируйте их на сервер.

1. Скопируйте пакет ZIP-файл, или для нескольких пакетов полный репозиторий, содержащий все пакеты в ZIP-формате, по которому можно получить доступ к серверу.

2. Откройте папку на сервере, где установлены средства R для экземпляра. Например, если вы используете командную строку Windows на компьютере с SQL Server 2016 R Services, переключиться на `C:\Program Files\MSSQL13.MSSQLSERVER\R_SERVICES\bin\x64`.

3. Щелкните правой кнопкой мыши на RGui или RTerm и выберите команду **Запуск от имени администратора**.

4. Выполните команду R `install.packages` и укажите пакета или имя репозитория и расположение ZIP-файлов.

    ```R
    install.packages("C:\\Temp\\Downloaded packages\\mynewpackage.zip", repos=NULL)
    ```

    Эта команда извлекает R-пакет `mynewpackage` из его локальный ZIP-файл, при условии, что копия сохранена в каталоге `C:\Temp\Downloaded packages`и устанавливает пакет на локальном компьютере. Если пакет содержит все зависимости, программа установки проверяет существующие пакеты в библиотеке. Если вы создали репозиторий, который включает в себя зависимости, установщик устанавливает необходимые пакеты также.

    Если необходимые пакеты не существуют в библиотеке экземпляра, а не удается найти в ZIP-файлы, происходит сбой установки целевого пакета.

## <a name="see-also"></a>См. также

+ [Установка новых пакетов R](install-additional-r-packages-on-sql-server.md)
+ [Установка новых пакетов Python](../python/install-additional-python-packages-on-sql-server.md)
+ [Руководства, примеры, решения](../tutorials/machine-learning-services-tutorials.md)
