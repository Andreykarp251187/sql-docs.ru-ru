---
title: Использование диспетчеров пакетов R
description: Используйте стандартные команды R, такие как install. Packages, для добавления новых пакетов R в SQL Server 2016 служб R или SQL Server Службы машинного обучения (в базе данных).
ms.prod: sql
ms.technology: machine-learning
ms.date: 06/13/2019
ms.topic: conceptual
author: dphansen
ms.author: davidph
monikerRange: '>=sql-server-2016||>=sql-server-linux-ver15||=sqlallproducts-allversions'
ms.openlocfilehash: 75ef22eb7e06fa1f8d4d2a0d9c754959f1bb1ae4
ms.sourcegitcommit: 321497065ecd7ecde9bff378464db8da426e9e14
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/01/2019
ms.locfileid: "68715024"
---
# <a name="use-r-package-managers-to-install-r-packages-on-sql-server"></a>Используйте диспетчеры пакетов R для установки пакетов R на SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]

Вы можете использовать стандартные инструменты R для установки новых пакетов на экземпляре SQL Server 2016 или SQL Server 2017, предоставляя компьютеру открытый порт 80, и у вас есть права администратора.

> [!IMPORTANT] 
> Не забудьте установить пакеты в библиотеку по умолчанию, связанную с текущим экземпляром. Никогда не устанавливайте пакеты в каталог пользователя.

В этой процедуре используется RGui, но можно использовать RTerm или любое другое средство командной строки R, поддерживающее повышенный уровень доступа.

## <a name="install-a-package-using-rgui"></a>Установка пакета с помощью RGui

1. [Определите расположение библиотеки экземпляров](../package-management/default-packages.md). Перейдите в папку, где установлены инструменты R. Например, путь по умолчанию для экземпляра SQL Server 2017 по умолчанию выглядит следующим образом:`C:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\R_SERVICES\bin\x64`

1. Щелкните правой кнопкой мыши файл RGui. exe и выберите команду **Запуск от имени администратора**. Если у вас нет необходимых разрешений, обратитесь к администратору базы данных и предоставьте список необходимых пакетов.

1. Если имя пакета известно, в командной строке можно ввести следующее: `install.packages("the_package-name")`Для имени пакета требуются двойные кавычки.

1. При появлении запроса на зеркальный сайт выберите любой сайт, который удобен для вашего расположения.

Если целевой пакет зависит от дополнительных пакетов, установщик R автоматически скачивает зависимости и устанавливает их.

Если имеется несколько экземпляров SQL Server, таких как параллельные экземпляры служб SQL Server 2016 R и SQL Server Службы машинного обучения, выполните установку отдельно для каждого экземпляра, если вы хотите использовать пакет в обоих контекстах. Пакеты нельзя совместно использовать в экземплярах.

## <a name = "bkmk_offlineInstall"></a>Автономная установка с помощью средств R

Если сервер не имеет доступа к Интернету, необходимо выполнить дополнительные действия для подготовки пакетов. Для установки пакетов R на сервере без доступа к Интернету необходимо выполнить следующие действия.

+ Проанализируйте зависимости заранее.
+ Скачайте целевой пакет на компьютер с доступом к Интернету.
+ Скачайте все необходимые пакеты на один и тот же компьютер и разместите все пакеты в одном архиве пакета.
+ ZIP-архив, если он еще не находится в формате ZIP.
+ Скопируйте архив пакета в расположение на сервере.
+ Установите целевой пакет, указав файл архива в качестве источника.

> [!IMPORTANT] 
>  **Перед** началом установки обязательно Проанализируйте все зависимости и скачайте **все** необходимые пакеты. Мы рекомендуем [miniCRAN](https://mran.microsoft.com/package/miniCRAN) для этого процесса. Этот пакет R принимает список пакетов, которые необходимо установить, анализирует зависимости и получает все ZIP-файлы за вас. затем miniCRAN создает один репозиторий, который можно скопировать на серверный компьютер. Дополнительные сведения см. [в статье Создание локального репозитория пакетов с помощью miniCRAN](create-a-local-package-repository-using-minicran.md) .

В этой процедуре предполагается, что вы подготовили все необходимые пакеты в формате ZIP и готовы к их копированию на сервер.

1. Скопируйте сжатый ZIP-файл пакета или для нескольких пакетов, полный репозиторий, содержащий все пакеты в формате ZIP, в расположение, к которому сервер может получить доступ.

2. Откройте папку на сервере, где установлены инструменты R для экземпляра. Например, если вы используете командную строку Windows в системе с SQL Server 2016 R Services, переключитесь на `C:\Program Files\MSSQL13.MSSQLSERVER\R_SERVICES\bin\x64`.

3. Щелкните правой кнопкой мыши RGui или RTerm и выберите **Запуск от имени администратора**.

4. Выполните команду `install.packages` R и укажите имя пакета или репозитория, а также расположение ZIP-файлов.

    ```R
    install.packages("C:\\Temp\\Downloaded packages\\mynewpackage.zip", repos=NULL)
    ```

    Эта команда извлекает пакет `mynewpackage` R из локального ZIP-файла, предполагая, что копия сохранена в каталоге `C:\Temp\Downloaded packages`, и пакет устанавливается на локальном компьютере. Если у пакета есть зависимости, установщик проверяет наличие существующих пакетов в библиотеке. Если вы создали репозиторий, включающий зависимости, установщик также установит необходимые пакеты.

    Если необходимые пакеты отсутствуют в библиотеке экземпляров и не найдены в ZIP-файлах, Установка целевого пакета завершается сбоем.

## <a name="see-also"></a>См. также

+ [Установка новых пакетов R](install-additional-r-packages-on-sql-server.md)
+ [Установка новых пакетов Python](../python/install-additional-python-packages-on-sql-server.md)
+ [Руководства, примеры, решения](../tutorials/machine-learning-services-tutorials.md)
