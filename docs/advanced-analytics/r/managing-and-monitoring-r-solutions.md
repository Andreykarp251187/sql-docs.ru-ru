---
title: Управление и интеграцию рабочих нагрузок машины обучения — службы SQL Server машинного обучения
description: Как администратор базы данных SQL Server просмотрите административных задач для развертывания машинного обучения подсистема R и Python на экземпляр ядра СУБД.
ms.prod: sql
ms.technology: machine-learning
ms.date: 10/10/2018
ms.topic: conceptual
author: dphansen
ms.author: davidph
manager: cgronlun
ms.openlocfilehash: a53056f1f169224b222a07a062f6ddd88cb24b81
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "66454667"
---
# <a name="manage-and-integrate-machine-learning-workloads-on-sql-server"></a>Управление и интеграцию рабочих нагрузок обучения машины на сервере SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Эта статья предназначена для администраторов баз данных SQL Server, ответственным за развертывание инфраструктуру обработки и анализа данных с эффективным на ресурс сервера, поддержка нескольких рабочих нагрузок. Он кадры пространства административные задачи, имеющие отношение к управлению R и Python кода выполнения SQL Server. 

## <a name="what-is-feature-integration"></a>Что такое функция интеграции

R и Python машинного обучения предоставляется [службы SQL Server машинного обучения](../what-is-sql-server-machine-learning.md) расширением экземпляр ядра СУБД. Интеграция является главным образом посредством уровень безопасности и языка определения данных, выполняется следующим образом:

+ Хранимые процедуры, снабжены возможность принятия R и Python кода как входные параметры. Разработчики и данных с помощью [системной хранимой процедуры](https://docs.microsoft.com/sql/relational-databases/system-stored-procedures/sp-execute-external-script-transact-sql?view=sql-server-2017) или создайте пользовательские процедуры, которая создает оболочку свой код.
+ Функции T-SQL (а именно, [PREDICT](https://docs.microsoft.com/sql/t-sql/queries/predict-transact-sql)), способных использовать данных предварительно обученной модели. Эта возможность доступна через T-SQL. Таким образом его можно вызывать в системе, которая не поддерживает специально машинного обучения установлены расширения.
+ Существующие имена входа базы данных и разрешения на основе роли охватывают сценарии вызываемая пользователем, используя те же данные. Как правило если пользователи не может обращаться к данным с помощью запроса, они не может получить доступ посредством сценария либо.

## <a name="feature-availability"></a>Доступность функций

Интеграция R и Python становятся доступными через последовательность шагов. Первый из них — программа установки, когда вы [либо добавьте **служб машинного обучения** ](../install/sql-machine-learning-services-windows-install.md) компонентов в экземпляр ядра СУБД. В качестве последующих шага необходимо включить внешние сценарии на экземпляре компонента database engine (оно отключено по умолчанию).

На этом этапе только администраторы базы данных имеют полный набор разрешений для создания и выполнения внешних скриптов, добавление или удаление пакетов и создания хранимых процедур и других объектов.

Всем остальным пользователям должно быть предоставлено разрешение EXECUTE ANY EXTERNAL SCRIPT. Дополнительные [стандартной базы данных разрешения](../security/user-permission.md) определить ли пользователи могут создавать объекты, выполнять сценарии, использование сериализации и обученных моделей и т. д. 

## <a name="resource-allocation"></a>Выделение ресурсов

Хранимые процедуры и запросов T-SQL, которые вызывают Звукозапись обрабатывалась использовать ресурсы, доступные в пул ресурсов по умолчанию. Как часть конфигурации по умолчанию внешних процессов, таких как сеансы R и Python, разрешены на 20% от общего объема памяти на хост-систему. 

Если вы хотите перенастроить выделению ресурсов, можно изменить пул по умолчанию, с соответствующим образом отразится на обучения машины рабочих нагрузок, выполняющихся в системе.

Другой вариант — создать пользовательские внешний пул ресурсов для записи сеансов с определенным программам, узлов или действий, происходящих во время определенные интервалы времени. Дополнительные сведения см. в разделе [управление ресурсами для изменения уровней ресурсов для выполнения R и Python](../administration/resource-governance.md) и [Создание пула ресурсов](../administration/how-to-create-a-resource-pool.md) пошаговые инструкции.

## <a name="isolation-and-containment"></a>Изоляция и вложения

Архитектура обработки разработана, чтобы изолировать внешних скриптов из ядра ядра. Скрипты R и Python выполняется как отдельные процессы, в разделе локальных рабочих учетных записей. В диспетчере задач можно отслеживать процессы R и Python, выполнение под учетной записью локального пользователя с низким уровнем привилегий, отличающийся от учетной записи службы SQL Server. 

Выполнение процессов R и Python в отдельных учетных записей с низким уровнем привилегий дает следующие преимущества:

+ Изолирует основные процессы ядра из сеансов R и Python, можно завершить процесс R или Python без ущерба для основных операций базы данных. 

+ Уменьшение привилегий процессов среды выполнения внешних скриптов на главном компьютере.

Учетные записи с минимальными будут созданы во время установки или в Windows *пул учетных записей пользователей* вызывается **SQLRUserGroup**. По умолчанию эта группа имеет разрешение на использование исполняемых файлов, библиотек и встроенные наборы данных в папке программы R и Python в SQL Server. 

Как администратор базы данных безопасность данных SQL Server можно использовать для указания того, у кого есть разрешение на выполнение скриптов, и что данные, используемые в заданиях осуществляется в разделе контролировались ролями безопасности, которые управляют обращаться запросов T-SQL. Системный администратор, вы можете явно запретить **SQLRUserGroup** доступ к конфиденциальным данным на локальном сервере, создав списки управления доступом.

>[!NOTE]
> По умолчанию **SQLRUserGroup** имеет имя входа или разрешения в самом SQL Server. Требуется ли рабочие учетные записи имени входа для доступа к данным, необходимо создать его самостоятельно. Сценарий, который специально не вызовет для создания имени входа — запросы на поддержку с помощью скрипта на выполнение для данных или операций на экземпляре компонента database engine, когда удостоверение пользователя — это пользователь Windows, и в строке подключения указано доверенного пользователя. Дополнительные сведения см. в разделе [Добавление SQLRUserGroup в качестве пользователя базы данных](../../advanced-analytics/security/create-a-login-for-sqlrusergroup.md).

## <a name="disable-script-execution"></a>Отключите выполнение скрипта

В случае предельного числа сценариев вы можете отключить все выполнения скрипта, Отмена действия, предпринимаемые ранее, чтобы включить выполнение внешних скриптов в первую очередь.

1. В SQL Server Management Studio или другом средстве запросов, выполните следующую команду, чтобы задать `external scripts enabled` 0 или FALSE.

    ```sql
    EXEC sp_configure  'external scripts enabled', 0
    RECONFIGURE WITH OVERRIDE
    ```
2. Перезапустите службы компонента database engine.

Как только вам решить проблему, не забудьте снова включить выполнение скрипта на экземпляре, если вы хотите возобновить R и Python сценариев поддерживает на экземпляре компонента database engine. Дополнительные сведения см. в разделе [включить выполнение сценариев](../install/sql-machine-learning-services-windows-install.md#enable-script-execution)

## <a name="extend-functionality"></a>Расширить функциональные возможности

Обработка и анализ данных часто появились новые требования для пакета развертывания и администрирования. Специалист по обработке данных, его обычной практикой является использовать открытым исходным кодом и сторонние пакеты в настраиваемых решениях. Некоторые из этих пакетов будет иметь зависимостей от других пакетов, в этом случае может потребоваться оценивать и устанавливать несколько пакетов для достижения цели.

Как администратор базы данных отвечает за ресурс сервера развертывание произвольные пакетов R и Python на рабочем сервере представляет сложный аспект не знакомы. Прежде чем добавлять пакеты, следует оценить ли действительно необходимо, с помощью эквивалента во встроенной функции, предоставляемые внешнего пакета [язык R](r-libraries-and-data-types.md) и [библиотек Python](../python/python-libraries-and-data-types.md) установлен программой установки SQL Server. 

В качестве альтернативы для установки пакета сервера, специалист по обработке данных может иметь возможность [построения и запуска решений на рабочей станции, внешних](../r/set-up-a-data-science-client.md), извлечение данных из SQL Server, но с весь анализ выполняется локально на рабочей станции а не на самом сервере. 

Если впоследствии выяснилось, что внешние библиотечные функции необходимы и не представляют угрозу для операций сервера или данных в целом, можно выбрать из нескольких методов для добавления пакетов. В большинстве случаев для добавления пакетов в SQL Server требуются права администратора. Дополнительные сведения см. в разделе [Установка пакетов Python в SQL Server](../python/install-additional-python-packages-on-sql-server.md) и [Установка пакетов R в SQL Server](install-additional-r-packages-on-sql-server.md).

> [!NOTE]
> Для пакетов R прав администратора сервера не требуются специально для установки пакета при использовании альтернативных методов. См. в разделе [Установка пакетов R в SQL Server](install-additional-r-packages-on-sql-server.md) подробные сведения.

## <a name="monitoring-script-execution"></a>Мониторинг выполнения скрипта

Скрипты R и Python, которые выполняются в [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] , запускаются с [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)] интерфейс. Тем не менее панель запуска не регулируется ресурсами и не отслеживается отдельно, так как это служба безопасности, предоставляемые корпорацией Майкрософт, который управляет ресурсами соответствующим образом.

Управление внешних скриптов, запускаемых от службы панели запуска выполняется с помощью [объект задания Windows](/windows/desktop/ProcThread/job-objects). Объект задания позволяет управлять группой процессов как единым целым. Каждый объект задания является иерархическим и управляет атрибутами всех связанных с ним процессов. Операции, выполняемые объектом задания, влияют на все связанные с ним процессы.

Таким образом, если необходимо завершить одно задание, связанное с объектом, учтите, что все связанные с ним процессы также будут завершены. Если вы используете скрипт R, который назначен объекту задания Windows и выполняет задание, связанное с ODBC, которое необходимо завершить, родительский процесс скрипта R также будет завершен.

Если запустить внешний скрипт, использующего параллельную обработку, один объект задания Windows управляет всеми параллельными дочерними процессами.

Чтобы определить, выполняется ли процесс в задании, используйте функцию `IsProcessInJob`.

## <a name="next-steps"></a>Следующие шаги

+ Просмотрите основные понятия и компоненты [архитектуру расширяемости](../concepts/extensibility-framework.md) и [безопасности](../concepts/security.md) Дополнительные сведения.

+ Как часть установки компонента, вы можете уже быть знакомы с конечным пользователем данных, управление доступом, но если это не так, см. в разделе [предоставление пользователю разрешений для машинного обучения SQL Server](../security/user-permission.md) подробные сведения. 

+ Узнайте, как настроить системные ресурсы для ресурсоемких нагрузок машинного обучения. Дополнительные сведения см. в разделе [Создание пула ресурсов](../administration/how-to-create-a-resource-pool.md).
