---
title: Исследование данных и прогнозное моделирование с помощью R
ms.prod: sql
ms.technology: machine-learning
ms.date: 04/15/2018
ms.topic: conceptual
author: dphansen
ms.author: davidph
monikerRange: '>=sql-server-2016||>=sql-server-linux-ver15||=sqlallproducts-allversions'
ms.openlocfilehash: 3ffd82aeb1aa099b3f9f21368eacbf603032fd6e
ms.sourcegitcommit: 321497065ecd7ecde9bff378464db8da426e9e14
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/01/2019
ms.locfileid: "68715722"
---
# <a name="data-exploration-and-predictive-modeling-with-r-in-sql-server"></a>Исследование данных и прогнозное моделирование с помощью R в SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]

В этой статье описываются улучшения процесса обработки и анализа данных, которые можно выполнить с помощью интеграции с SQL Server.

Применимо для следующих объектов: SQL Server 2016 служб R, SQL Server 2017 контролируемая Services

## <a name="the-data-science-process"></a>Процесс обработки и анализа данных

Специалисты по анализу данных часто используют R для изучения данных и построения прогнозных моделей. Обычно это итеративный процесс проб и ошибок, повторяющихся до получения хорошей прогнозной модели. Как опытный специалист, вы можете подключиться к базе данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , передать данные на локальную рабочую станцию с помощью пакета RODBC, изучить их и создать прогнозную модель с использованием стандартных пакетов R.

Однако этот подход имеет множество недостатков, Хае более широкое внедрение R на предприятии. 

+ Перемещение данных может быть низкой, неэффективной или небезопасной.
+ Сам R имеет ограничения производительности и масштабирования

Эти недостатки становятся более очевидными, когда необходимо переместить и проанализировать большие объемы данных или использовать наборы данных, не соответствующие объему памяти, доступной на компьютере.

Новые масштабируемые пакеты и функции R, содержащиеся [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] в, помогают преодолеть многие из этих проблем. 

## <a name="whats-different-about-revoscaler"></a>Каковы отличия в RevoScaleR?

Пакет **RevoScaleR** содержит реализации для некоторых наиболее популярных функций R, переработанных для обеспечения параллелизма и масштабирования. Дополнительные сведения см. в разделе [распределенные вычисления с помощью RevoScaleR](https://docs.microsoft.com/machine-learning-server/r/how-to-revoscaler-distributed-computing).

Кроме того, пакет RevoScaleR обеспечивает поддержку для изменения *контекста выполнения*. Это означает, что как для всего решения, так и для отдельной функции можно указать, что вычисления должны выполняться с использованием ресурсов того компьютера, где размещен экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , а не локальной рабочей станции. У такого подхода есть несколько преимуществ: предотвращение ненужного перемещения данных и больший объем вычислительных ресурсов на сервере.

## <a name="r-environment-and-packages"></a>Пакеты и среда R

Поддерживаемая в [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] среда R состоит из среды выполнения, языка с открытым исходным кодом и графического модуля, который поддерживают и расширяют несколько пакетов. Язык позволяет использовать множество расширений, реализуемых с помощью пакетов.  

### <a name="using-other-r-packages"></a>Использование других пакетов R

Помимо собственных библиотек R, поставляемых с Microsoft Машинное обучение, в решении можно использовать почти любые пакеты R, в том числе:

+ Пакеты R общего назначения из открытых репозиториев. Можно получить популярные пакеты R с открытым исходным кодом из открытых репозиториев, таких как CRAN, где хранится более 6000 пакетов.
  
  Для платформы Windows пакеты R предоставляются в виде ZIP-файлов, которые можно скачать и установить по лицензии GPL.  
  
  Дополнительные сведения об установке пакетов сторонних разработчиков для использования с [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] см. в статье [Установка дополнительных пакетов R на SQL Server](../../advanced-analytics/r/install-additional-r-packages-on-sql-server.md).  
  
+ Дополнительные пакеты и библиотеки, предоставляемые [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)].   
  
     Пакет **RevoScaleR** включает в себя средства для высокопроизводительного анализа больших данных, улучшенные версии функций, поддерживающие распространенные задачи обработки и анализа данных, оптимизированные ученики для упрощенного алгоритма Байеса, линейной регрессии, моделей временных рядов и нейронных сетей, а также расширенные математические библиотеки.  
  
     Пакет **RevoPemaR** позволяет разрабатывать в R собственные параллельные алгоритмы внешней памяти.  
  
     Дополнительные сведения об этих пакетах и их использовании см. в разделе [что такое RevoScaleR](https://docs.microsoft.com/machine-learning-server/r/concept-what-is-revoscaler) и [Начало работы с RevoPemaR](https://docs.microsoft.com/machine-learning-server/r/how-to-developer-pemar). 

+ **MicrosoftML** содержит набор высокооптимизированных алгоритмов машинного обучения и преобразований данных из группы обработки и анализа данных Майкрософт. Многие алгоритмы также используются в Машинное обучение Azure. Дополнительные сведения см. [в разделе MicrosoftML in SQL Server](ref-r-microsoftml.md).

### <a name="r-development-tools"></a>Средства разработки R

При разработке решения R обязательно Скачайте Microsoft R Client. Эта бесплатная загрузка включает библиотеки, необходимые для поддержки удаленных контекстов вычислений и масштабируемых алорисмс:

+ **[!INCLUDE[rsql_rro-noversion](../../includes/rsql-rro-noversion-md.md)]:** Распределение среды выполнения R и набора пакетов, например библиотеки Intel Math Kernel, которые повышают производительность стандартных операций R.  
  
+ **RevoScaleR** Пакет R, позволяющий принудительно отправлять вычисления в экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. [!INCLUDE[rsql_rre-noversion](../../includes/rsql-rre-noversion-md.md)]. содержит набор общих функций R, переработанных в целях повышения производительности и масштабируемости. Такие усовершенствованные функции имеют префикс **rx** . Он также включает поставщиков расширенных данных для различных источников. Эти функции начинаются с префикса **Rx**.

Можно использовать любой редактор кода на основе Windows, поддерживающий R, например [!INCLUDE[rsql_rtvs](../../includes/rsql-rtvs-md.md)] или RStudio. Кроме того, скачиваемые файлы [!INCLUDE[rsql_rro-noversion](../../includes/rsql-rro-noversion-md.md)] включают общие программы командной строки для R, например RGui.exe.

## <a name="use-new-data-sources-and-compute-contexts"></a>Использовать новые источники данных и контексты вычислений

При использовании пакета RevoScaleR для подключения к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]выполните поиск этих функций в коде R:

+ **RxSqlServerData** из пакета RevoScaleR обеспечивает улучшенное подключение к данным для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].
  
     Используйте ее в коде R для определения *источника данных*. Объект источника данных указывает сервер и таблицы, где находятся данные, и управляет чтением и записью данных в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].
  
-   Пакет **RxInSqlServer** можно использовать для указания *контекста вычислений*.  Другими словами, можно указать, где именно следует выполнять код R — на локальной рабочей станции или на компьютере с экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  Дополнительные сведения см. в разделе [функции RevoScaleR](https://docs.microsoft.com/machine-learning-server/r-reference/revoscaler/revoscaler).
  
     При задании контекста вычислений он затрагивает только вычисления, поддерживающие удаленный контекст выполнения. Это включает в себя операции R, предоставляемые пакетом RevoScaleR и связанными функциями. Как правило, решения R, основанные на стандартных пакетах CRAN, невозможно выполнять в удаленном контексте вычислений. Однако их можно выполнять на компьютере [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)], если они запущены с помощью T-SQL. Тем не менее с помощью функции `rxExec` можно вызывать отдельные функции R и выполнять их удаленно в [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)].

Примеры создания источников данных и контекстов выполнения и работы с ними см. в следующих руководствах:

+ [Глубокое погружение в обработку и анализ данных](../../advanced-analytics/tutorials/deepdive-data-science-deep-dive-using-the-revoscaler-packages.md)  
+  [Анализ данных с помощью Microsoft R](https://docs.microsoft.com/machine-learning-server/r/how-to-introduction)

## <a name="deploy-r-code-to-production"></a>Развертывание кода R в рабочей среде

Важной частью процесса обработки и анализа данных является обмен результатами с другими специалистами или использование прогнозных моделей для улучшения бизнес-показателей или процессов. В [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)]можно легко переместить в рабочую среду готовую модель или скрипт R.

Дополнительные сведения о перемещении кода для выполнения в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]см. в статье [Operationalizing Your R Code](../../advanced-analytics/r/operationalizing-your-r-code.md).

Обычно процесс развертывания начинается с очистки скрипта от ненужного в рабочей среде кода. При перемещении вычислений ближе к данным можно найти способы более эффективного перемещения, суммирования или представления данных по сравнению с выполнением всех операций в R.  Рекомендуется, чтобы данные анализу с разработчиком базы данных о способах повышения производительности, особенно если решение выполняет очистку данных или проектирование признаков, которые могут быть более эффективны в SQL. Возможно, потребуется изменить процессы извлечения, преобразования и загрузки, чтобы рабочие процессы для создания или оценки модели выполнялись без сбоев, а входные данные имели нужный формат.

## <a name="see-also"></a>См. также

[Сравнение базовых функций R и RevoScaleR](https://docs.microsoft.com/machine-learning-server/r-reference/revoscaler/revoscaler-compared-to-base-r)

[Библиотека RevoScaleR в SQL Server](ref-r-revoscaler.md)
