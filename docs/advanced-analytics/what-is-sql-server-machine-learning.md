---
title: Язык R и Python функция интеграции - службы машинного обучения SQL Server
description: Язык R и функции Python в SQL Server, интеграция с реляционными данными для обработки и анализа данных и статистическое моделирование, моделей машинного обучения, прогнозная аналитика, визуализация данных и многое другое.
ms.prod: sql
ms.technology: machine-learning
ms.date: 06/13/2019
ms.topic: overview
author: dphansen
ms.author: davidph
manager: cgronlun
ms.openlocfilehash: 921ffc0188623335ac7e7206a02095cc11469327
ms.sourcegitcommit: a91c3f4fe2587d474cd4d470bda93239ba2693bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/14/2019
ms.locfileid: "67140332"
---
# <a name="machine-learning-services-r-python-in-sql-server-2017"></a>Службы машинного обучения (R, Python) в SQL Server 2017
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Службы машинного обучения входит в состав SQL Server, используемых для выполнения скриптов R и Python, в базе данных. Включает функцию [пакетов Microsoft R и Python](#components) для высокой производительности прогнозной аналитики и машинного обучения. Реляционные данные, которые можно использовать в сценарии R и Python, посредством хранимых процедур, сценарий T-SQL, содержащий инструкции R и Python, или R и Python code содержащего T-SQL.

Если вы ранее использовали [SQL Server 2016 R Services](r/sql-server-r-services.md), службы машинного обучения в SQL Server 2017 является следующим поколением поддержки R и обновленных версий базовый R, RevoScaleR, MicrosoftML, и другие библиотеки, представленные в 2016 г. 

В базе данных SQL Azure [служб машинного обучения (с помощью R)](https://docs.microsoft.com/azure/sql-database/sql-database-machine-learning-services-overview) в настоящее время находится в общедоступной предварительной версии.

## <a name="bring-compute-power-to-the-data"></a>Вдохните вычислительными ресурсами данных

Основные преимущества служб машинного обучения — это степень его enterprise R и пакеты Python для предоставления расширенной аналитики в масштабе и возможность передачи вычислений и обработки, где хранятся данные, что устраняет необходимость извлечения данных между сеть. Это дает несколько преимуществ:

+ Защита данных. R и Python выполнения ближе к источнику данных позволяет избежать затратного или небезопасного перемещения.
+ Скорость. Базы данных оптимизированы для операций на основе наборов. Последние нововведения в базах данных, таких как таблицы в памяти сводок и существенно ускоряют агрегирование и являются идеальным дополнением для обработки и анализа данных.
+ Простота развертывания и интеграции. [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] является отправной точкой операций для многих других задач управления данных и приложений. Используя данные, хранящиеся в базе данных или хранилище отчетов, убедитесь, что данные, используемые решения машинного обучения, согласованность и обновление. 
+ Эффективность в облачной и локальной. Вместо обработки данных в сеансах R или Python, можно использовать конвейеры корпоративных данных, в том числе [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] и фабрики данных Azure. Отчеты о результатах или анализы можно с легкостью получать с помощью Power BI или [!INCLUDE[ssRSnoversion](../includes/ssrsnoversion-md.md)].

Используя правильное сочетание SQL и R для разнообразных задач по обработке и анализу данных, исследователи данных и разработчики систем могут повысить эффективность работы.

<a name="components"></a>

## <a name="components"></a>Компоненты

SQL Server 2017 поддерживает R и Python. В следующей таблице описаны компоненты.

| Компонент | Описание |
|-----------|-------------|
| Служба панели запуска SQL Server | Служба, которая управляет взаимодействием между внешних сред выполнения R и Python и экземпляра компонента database engine. |
| Пакеты R | [**RevoScaleR** ](r/ref-r-revoscaler.md) является первичная библиотека для масштабируемых функций R. в этой библиотеке среди наиболее широко используемых. Преобразования данных и манипуляции, формирование сводных статистических данных, визуализации и моделирования и анализа в различных форматах можно найти в этих библиотек. Кроме того функции в этих библиотеках автоматически распределять рабочую нагрузку между доступных ядер для параллельной обработки, с возможностью для работы с фрагментами данных, которыми координируемых и управляет механизма вычислений.  <br/>[**MicrosoftML (R)** ](r/ref-r-microsoftml.md) добавляет алгоритмов машинного обучения для создания пользовательских моделей для анализа текста, анализ образов и анализ тональности. <br/>[**sqlRUtils** ](r/ref-r-sqlrutils.md) предоставляет вспомогательные функции для помещения скриптов R в T-SQL, хранимая процедура, регистрация хранимой процедуры с базой данных и запуск хранимой процедуры из среды разработки R.<br/>[**olapR** ](r/ref-r-olapr.md) предназначен для создания или выполнения запроса многомерных Выражений в скрипте R.|
| Microsoft R Open (MRO) | [**MRO** ](https://mran.microsoft.com/open) является открытым исходным кодом корпорации Майкрософт распределение R. Включены пакета и интерпретатор. Всегда используйте версию MRO устанавливается программой установки. |
| Инструменты R | Окнах консоли R и Командная строка, стандартные средства в дистрибутив R.  |
| R Примеры и сценарии |  Пакеты с открытым исходным кодом R и RevoScaleR описан встроенных наборов данных, что можно создать и запустить сценарий с помощью предварительно установленных данных. |
| Пакеты Python | [**revoscalepy** ](python/ref-py-revoscalepy.md) является основной библиотекой для масштабируемой Python с помощью функций для преобразования, визуализации, анализа и обработки данных. <br/>[**microsoftml (Python)** ](python/ref-py-microsoftml.md) добавляет алгоритмов машинного обучения для создания пользовательских моделей для анализа текста, анализ образов и анализ тональности.  |
| Инструменты Python | Встроенное средство командной строки Python полезен для нерегламентированной отладки и задачи.  |
| Anaconda | Anaconda — дистрибутив открытым исходным кодом Python и основных пакетов. |
| Примеры Python и сценарии | С помощью R, Python, содержит встроенные наборы данных и сценарии.  |
| Предварительно обученных моделей R и Python | Предварительно обученных моделей создаются для конкретные варианты использования и поддерживаются командой технических специалистов обработки и анализа данных корпорации Майкрософт. Можно использовать предварительно обученных моделей как-— для оценки тональности неотрицательным положительный результат в текст, или определить функции в образы, с помощью новых входных данных, которые вы указываете. Модели выполнения в службах машинного обучения, но нельзя установить через программу установки SQL Server. Дополнительные сведения см. в разделе [Установка предварительно обученных моделей машинного обучения в SQL Server](install/sql-pretrained-models-install.md). |

## <a name="using-sql-mls"></a>С помощью SQL MLS

Разработчики и аналитикам часто имеют код, запущенный в локальном экземпляре SQL Server. Добавление служб машинного обучения и включение выполнении внешних скриптов, вы получаете возможность выполнять код R и Python в SQL Server модальностей: упаковки сценария в хранимых процедурах, хранения моделей в таблице SQL Server или объединение T-SQL и R или Python в запросах.

Выполнение скрипта находится в пределах модели безопасности данных: разрешения на реляционной базе данных, служат основой для доступа к данным в скрипте. Пользователь, выполняющий скрипт R или Python, не сможете использовать любые данные, нет доступа этого пользователя в запросе SQL. Вам потребуется Стандартная база данных чтения и разрешения на запись, а также дополнительное разрешение для выполнения внешних скриптов. Модели и код, созданный для реляционных данных в оболочку в хранимых процедурах или сериализуются в двоичный формат и хранятся в таблице или загружен с диска, если сериализации потока необработанных байтов в файл.

Наиболее распространенным подходом для аналитики в базе данных является использование [sp_execute_external_script](../relational-databases/system-stored-procedures/sp-execute-external-script-transact-sql.md), передавая скрипт R или Python в качестве входного параметра.

Классический клиент сервер взаимодействия являются другой подход. Любой клиентской рабочей станции с интегрированной среды разработки, можно установить [Microsoft R Client](https://docs.microsoft.com/machine-learning-server/r-client/what-is-microsoft-r-client) или [библиотек Python](https://docs.microsoft.com/machine-learning-server/install/python-libraries-interpreter), а затем написать код, который помещает выполнения (называется *удаленных вычислений контекст*) к данным и операциям на удаленном сервере SQL. 

Наконец Если вы используете [изолированный сервер](r/r-server-standalone.md) и Developer edition, можно создавать решения на клиентской рабочей станции, используя те же библиотеки и интерпретаторами, а затем развернуть рабочий код на машинного обучения SQL Server Службы (в базе данных). 

## <a name="how-to-get-started"></a>Как приступить к работе

### <a name="step-1-install-the-software"></a>Шаг 1. Установить программное обеспечение

+ [SQL Server службы машинного обучения (в базе данных)](install/sql-machine-learning-services-windows-install.md)
 
### <a name="step-2-configure-a-development-tool"></a>Шаг 2. Настройка средства разработки

Обычно, обработке и анализу данных использовать свои собственные ноутбук или разработки, на рабочей станции R или Python исследовать данные и сборка, и также настройка прогнозные модели, пока не получает хорошую прогнозную модель. С помощью аналитики в базе данных в SQL Server нет необходимости изменять этот процесс. После завершения установки можно запустить кодом R или Python на сервере SQL Server локально и удаленно.

![rsql_keyscenario2](r/media/rsql-keyscenario2.png) 

+ **Использовать интегрированную среду разработки, вы предпочитаете**. Библиотеки R и Python можно связать с выбранного инструмента разработки. Дополнительные сведения см. в разделе [Настройка средств R](r/set-up-a-data-science-client.md) и [Настройка средств Python](python/setup-python-client-tools-sql.md).  

+ **Работать удаленно или локально**. Специалисты по анализу данных можно подключиться к SQL Server и переносить эти данные клиента для локального анализа обычным образом. Однако, лучшим решением является использование **RevoScaleR** или **revoscalepy** API-интерфейсы для принудительной отправки вычислений на компьютер SQL Server, как избежать ресурсоемкого небезопасного перемещения данных.

+ **Внедрение сценариев R или Python в хранимые процедуры SQL Server**. Когда ваш код полностью оптимизирован, заключите его в хранимой процедуре, чтобы избежать ненужного перемещения данных и оптимизировать задачи обработки данных.

### <a name="step-3-write-your-first-script"></a>Шаг 3. Создайте первый сценарий

Вызовите функции R или Python из сценария T-SQL:

+ [R: Дополнительные аналитические функции в базе данных с помощью языка R](tutorials/sqldev-in-database-r-for-sql-developers.md)
+ [R: End-to-end пошаговом руководстве с помощью R](tutorials/walkthrough-data-science-end-to-end-walkthrough.md)
+ [Python. Запустите Python, с помощью T-SQL](tutorials/run-python-using-t-sql.md)
+ [Python. Дополнительные аналитические функции в базе данных с помощью Python](tutorials/sqldev-in-database-python-for-sql-developers.md)

Выберите наилучший язык, для задачи. R — это наилучшим образом подходит для статистических вычислений, которые трудно реализовать с помощью SQL. Для операций на основе набора данных воспользуйтесь преимуществами SQL Server для достижения максимальной производительности. Используйте ядро базы данных в памяти для очень быстро вычислений по столбцам.

### <a name="step-4-optimize-your-solution"></a>Шаг 4. Оптимизация решения

Когда модель готова для масштабирования в корпоративных данных, специалист по обработке данных часто работает с разработчика или администратора БАЗЫ данных SQL, оптимизировать процессы, такие как:

+ Формирование признаков
+ Прием данных и преобразования данных
+ Оценки

В большинстве случаев специалистов по анализу данных с помощью языка R испытывали проблемы с производительностью и масштабирования, особенно при использовании большого набора данных. Том, что общая реализация среды выполнения является однопоточным и могут обеспечивать только те наборы данных, которые помещаются в доступную память на локальном компьютере. Интеграция со службами машинного обучения SQL Server предоставляет много возможностей для повышения производительности с большим объемом данных:

+ **RevoScaleR**: Этот пакет R содержит реализации некоторых наиболее популярных функций R, переработанные для обеспечения параллелизма и масштабирования. Пакет также содержит функции, дополнительно повышающие производительность и масштабируемость за счет принудительной отправки вычислений на компьютер SQL Server, который обычно обладает гораздо большим объемом памяти и вычислительной мощности.

+ **revoscalepy**. Эта библиотека Python реализует наиболее популярных функций в RevoScaleR, такие как контексты удаленных вычислений и множество алгоритмов, которые поддерживают распределенную обработку.

Дополнительные сведения о производительности, см. в этом [пример производительности](r/performance-case-study-r-services.md) и [R и данных оптимизации](r/r-and-data-optimization-r-services.md).

### <a name="step-5-deploy-and-consume"></a>Шаг 5. Развертывание и использование

Когда модель или скрипт будет готов для использования в рабочей среде, разработчик баз данных может внедрить модель или код в хранимой процедуре, чтобы сохраненный код R или Python могут вызываться из приложения. Хранение и выполнение кода R из SQL Server имеет множество преимуществ: можно использовать удобный интерфейс SQL Server, а все вычисления выполняются в базе данных без ненужного перемещения данных.

![rsql_keyscenario1](r/media/rsql-keyscenario1.png)

+ **Надежную и расширяемую**. SQL Server использует новую архитектуру расширяемости, которая обеспечивает безопасность ядра базы данных и изолирует сеансы R и Python. Вы также можете контролировать пользователей, которым разрешено выполнять скрипты, и можно указать, какие базы данных может осуществляться по коду. Вы можете управлять объем ресурсов, выделяемых для среды выполнения, чтобы предотвратить негативное влияние на общую производительность сервера масштабных вычислений.

+ **Планирование и аудит**. При выполнении внешних скриптов заданий в SQL Server, можно управлять и аудит данных, используемых по обработке и анализу данных. Можно также запланировать заданий и проектировать рабочие процессы со внешних скриптов R или Python, так же, как будет планировать другие задания T-SQL или хранимой процедуры.

Чтобы воспользоваться преимуществами функций безопасности и управления ресурсами в SQL Server, процесс развертывания может включать следующие задачи:

+ Преобразование кода на функцию, которая может быть оптимальным в хранимой процедуре
+ Настройка безопасности и блокирования пакетов, используемых определенной задачи
+ Включения управления ресурсами (требуется корпоративный выпуск)

Дополнительные сведения см. в разделе [регулирования ресурсов для R](r/resource-governance-for-r-services.md) и [управление пакетами R для SQL Server](r/install-additional-r-packages-on-sql-server.md).

## <a name="version-history"></a>Журнал версий

Службы машинного обучения SQL Server 2017 является следующим поколением SQL Server 2016 R Services, улучшены, чтобы включить Python. Ниже приведен полный список всех версий продукта, с момента их создания до текущего выпуска. 

| Название продукта | Версия подсистемы | Дата выпуска |
|--------------|---------|--------------|
| Службы машинного обучения из состава SQL Server 2017 (в базе данных) | R Server 9.2.1 <br/> Python Server 9.2 | Октябрь 2017 г. |
| Сервер SQL Server 2017 машинного обучения (автономный) | R Server 9.2.1 <br/> Python Server 9.2 | Октябрь 2017 г. |
| SQL Server 2016 R Services (в базе данных) | R Server 9.1  | Июль 2017 г.  |
| SQL Server 2016 R Server (изолированный)  |  R Server 9.1 | Июль 2017 г. |

Версии пакетов, версии, см. в разделе сопоставления в версии [обновления R и Python компонентов](install/upgrade-r-and-python.md#version-map).

## <a name="portability-and-related-products"></a>Переносимость и связанных продуктов

Переносимость пользовательский код R и Python адресуются распространение пакета и интерпретаторами, которые встроены в нескольких продуктов. Те же пакеты, которые поставляются в SQL Server также доступны в несколько других продуктов и служб Майкрософт, включая версию отличные от SQL называется [Microsoft Machine Learning Server](https://docs.microsoft.com/machine-learning-server/). 

Бесплатный клиентов, которые включают наших интерпретаторы R и Python [Microsoft R Client](https://docs.microsoft.com/machine-learning-server/r-client/what-is-microsoft-r-client) и [библиотек Python](https://docs.microsoft.com/machine-learning-server/install/python-libraries-interpreter).

В Azure, пакетов R и Python и интерпретаторами корпорации Майкрософт, также доступны в машинное обучение Azure и служб Azure, такие как [HDInsight](https://docs.microsoft.com/azure/hdinsight/r-server/r-server-overview), и [виртуальных машин Azure](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-azure-vm-on-linux). [Виртуальная машина для обработки и анализа данных](https://azure.microsoft.com/services/virtual-machines/data-science-virtual-machines/) включает учтены все разработки рабочей станции с помощью средств от нескольких поставщиков и библиотек и интерпретаторов от корпорации Майкрософт.

## <a name="see-also"></a>См. также

[Установка SQL Server службы машинного обучения](install/sql-machine-learning-services-windows-install.md)
