---
title: Граф, обработка с помощью SQL Server и базы данных SQL Azure | Документация Майкрософт
ms.custom: ''
ms.date: 07/18/2017
ms.prod: sql
ms.prod_service: database-engine, sql-database
ms.reviewer: ''
ms.technology: ''
ms.topic: language-reference
helpviewer_keywords:
- SQL graph
- SQL graph, overview
ms.assetid: ''
author: shkale-msft
ms.author: shkale
manager: craigg
monikerRange: =azuresqldb-current||>=sql-server-2017||=sqlallproducts-allversions||>=sql-server-linux-2017||=azuresqldb-mi-current
ms.openlocfilehash: dcabc19d3c83cd1ed4c9ee7b8047759e2550863e
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62502507"
---
# <a name="graph-processing-with-sql-server-and-azure-sql-database"></a>Граф, обработка с помощью SQL Server и базы данных SQL Azure
[!INCLUDE[tsql-appliesto-ss2017-asdb-xxxx-xxx-md](../../includes/tsql-appliesto-ss2017-asdb-xxxx-xxx-md.md)]

[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предоставляет возможности диаграммы базы данных для моделирования связей многие ко многим. Граф связей интегрированы в [!INCLUDE[tsql-md](../../includes/tsql-md.md)] и получать преимущества использования [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] как система управления базовой базы данных.


## <a name="what-is-a-graph-database"></a>Что такое база данных графов  
База данных графа представляет собой коллекцию узлов (или вершин) и ребер (или связей). Узел представляет собой сущность (например, лицо или организацию), а ребро — связь между двумя узлами, которые оно соединяет (например, отметки "Нравится" или друзей). Узлы и ребра могут иметь свойства, связанные с ними. Ниже приведены некоторые функции, делающие уникальный базы данных графа.  
-   Края или связи являются первого класса сущностей в базу данных графов и могут иметь атрибуты или свойства, связанные с ними. 
-   Одним краем гибко можно подключить несколько узлов в базу данных графов.
-   Легко можно выразить сопоставления по шаблону и запросы многоступенчатую навигацию.
-   Легко можно выразить транзитивное замыкание и полиморфные запросы.

## <a name="when-to-use-a-graph-database"></a>Когда следует использовать базу данных графов

Нет ничего, базы данных графа можно добиться, чего нельзя добиться с помощью реляционной базы данных. Тем не менее базы данных графа можно упростить express определенного типа запросов. Кроме того, с помощью оптимизировать код, некоторые запросы могут эффективнее. Выберите иное решение может основываться на следующие факторы:  
-   Ваше приложение имеет иерархическую структуру данных. Тип данных HierarchyID можно использовать для реализации иерархии, но он имеет некоторые ограничения. Например он не позволяет хранить несколько родительских элементов для узла.
-   Приложение содержит сложные связи многие ко многим; по мере развития приложения добавляются новые связи.
-   В этом случае необходимо выполнить анализ взаимосвязанных данных и связи.

## <a name="graph-features-introduced-in-includesssqlv14includessssqlv14-mdmd"></a>Граф функций, появившихся в [!INCLUDE[sssqlv14](../../includes/sssqlv14-md.md)] 
Мы начинаем добавлять расширения графа для SQL Server, чтобы упростить хранение и выполнение запросов graph. В первом выпуске добавлены следующие возможности. 


### <a name="create-graph-objects"></a>Создание графа объектов
[!INCLUDE[tsql-md](../../includes/tsql-md.md)] расширения позволит пользователям создавать узла или граничной таблицы. Узлы и ребра может иметь свойства, связанные с ними. Так как узлы и ребра хранятся в виде таблиц, все операции, которые поддерживаются в реляционные таблицы поддерживаются для узлов или граничную таблицу. Например:  

```   
CREATE TABLE Person (ID INTEGER PRIMARY KEY, Name VARCHAR(100), Age INT) AS NODE;
CREATE TABLE friends (StartDate date) AS EDGE;
```   

![пользователь друзей tables](../../relational-databases/graphs/media/person-friends-tables.png "узел Person и друзей периметра таблиц")  
Узлы и ребра хранятся в виде таблицы  

### <a name="query-language-extensions"></a>Расширения языка запросов  
Новый `MATCH` предложение вводится для поддержки сопоставления по шаблону и многоступенчатую навигацию через graph. `MATCH` Функция использует синтаксис искусство ASCII для сопоставления шаблонов. Пример:  

```   
-- Find friends of John
SELECT Person2.Name 
FROM Person Person1, Friends, Person Person2
WHERE MATCH(Person1-(Friends)->Person2)
AND Person1.Name = 'John';
```   
 
### <a name="fully-integrated-in-includessnoversionincludesssnoversion-mdmd-engine"></a>Полностью интегрированный в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ядра 
Расширения Graph полностью интегрированы в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ядра. Используйте такое же ядро хранения, метаданные, обработчик запросов, и т.д. для хранения и запросов к данным графа. Запрос к нескольким graph и реляционных данных в одном запросе. Объединяя возможности диаграммы с другими [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] технологии, такие как службы R columnstore, высокой ДОСТУПНОСТИ, и т.д. База данных SQL graph также поддерживает все безопасности и соответствия требованиям функции, доступные с [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].
 
### <a name="tooling-and-ecosystem"></a>Инструментарий и экосистема

Преимущества существующих средств и экосистема, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предлагает. Такие средства, как резервное копирование и восстановление, Импорт и экспорт BCP просто работать без дополнительной настройки. Другие средства или служб, таких как службы SSIS, SSRS или Power BI будет работать с таблицами графа, именно так, как они работают с реляционными таблицами.

## <a name="edge-constraints"></a>Ограничения ребер
Ограничение границ определен на край таблицы графика и представляет собой пару таблиц узла, тип заданного edge можно подключиться. Это позволяет лучше контролировать их схему графа. С помощью ограничения границ пользователей можно ограничить типы узлов, заданном краю разрешено подключаться. 

Дополнительные сведения о том, как создать и использовать ограничения границ см. в [ограничения границ](../../relational-databases/tables/graph-edge-constraints.md)

## <a name="merge-dml"></a>Слияние DML 
[СЛИЯНИЯ](../../t-sql/statements/merge-transact-sql.md) инструкция выполняет вставки, обновления или удаления операций применительно к целевой таблице, на основе результатов соединения с исходной таблицей. Например можно синхронизировать две таблицы путем вставки, обновления или удаления строк в целевой таблице, исходя из различий между целевой и исходной таблицы. С помощью предикатов СОВПАДЕНИЯ в инструкции MERGE теперь поддерживается в базе данных SQL Azure и SQL Server vNext. То есть это теперь возможность объединять данные графа текущего (узла или граничной таблицы) с использованием предикатов СОВПАДЕНИЕ задать граф связей в одной инструкции, а не отдельных инструкций INSERT/UPDATE/DELETE новых данных.

Дополнительные сведения об использовании совпадение при слиянии DML см. в [инструкции MERGE](../../t-sql/statements/merge-transact-sql.md)

 ## <a name="next-steps"></a>Следующие шаги  
Чтение [Graph базы данных SQL — архитектура](./sql-graph-architecture.md)
   

