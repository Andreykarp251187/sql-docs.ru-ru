---
title: Автоматическое создание фильтров соединения (слияние)
description: Узнайте, как автоматически создать набор фильтров соединения на странице "Фильтрация строк таблицы" мастера создания публикаций для слияния публикаций в SQL Server Management Studio (SSMS).
ms.custom: seo-lt-2019
ms.date: 03/07/2017
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- automatic join filter generation
- join filters
ms.assetid: 7ef419f4-c17f-42a5-9068-174a3ec08941
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 349df4ebe6e7787e6415d60d0ed4988b280deac0
ms.sourcegitcommit: f7ac1976d4bfa224332edd9ef2f4377a4d55a2c9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85886029"
---
# <a name="automatically-generate-join-filters-between-merge-articles"></a>Автоматическое создание фильтров соединения между статьями публикации слиянием
[!INCLUDE [SQL Server](../../../includes/applies-to-version/sqlserver.md)]
  Набор фильтров соединения можно автоматически сформировать на странице **Фильтрация строк таблицы** мастера создания публикаций или на странице **Фильтрация строк** диалогового окна **Свойства публикации — \<Publication>** . Дополнительные сведения об использовании мастера и доступе к этому диалоговому окну см. в статьях [Создание публикации](../../../relational-databases/replication/publish/create-a-publication.md) и [Просмотр и изменение свойств публикации](../../../relational-databases/replication/publish/view-and-modify-publication-properties.md).  
  
> [!NOTE]  
>  В случае автоматического создания набора фильтров соединения в диалоговом окне **Свойства публикации — \<Publication>** после того, как были инициализированы подписки на публикацию, нужно создать новый моментальный снимок и повторно инициализировать все подписки после внесения изменений. Дополнительные сведения о требованиях к изменениям свойств см. в статье [Изменение свойств публикации и статьи](../../../relational-databases/replication/publish/change-publication-and-article-properties.md).  
  
 Фильтры соединения могут быть созданы вручную для набора таблиц или автоматически системой репликации на основе определенных в таблицах отношений внешних ключей к первичным ключам. Дополнительные сведения о создании фильтров соединения вручную см. в статье[Определение и изменение фильтра соединения между статьями публикации слиянием](../../../relational-databases/replication/publish/define-and-modify-a-join-filter-between-merge-articles.md).  
  
### <a name="to-automatically-generate-a-set-of-join-filters-between-merge-articles"></a>Автоматическое создание набора фильтров соединения между статьями публикаций слиянием  
  
1.  На странице **Фильтрация строк таблицы** мастера создания публикаций или на странице **Фильтрация строк** диалогового окна **Свойства публикации — \<Publication>** щелкните **Добавить**, а затем — **Автоматически создать фильтры**.  
  
    > [!NOTE]  
    >  При автоматическом создании фильтров из публикации удаляются любые существующие фильтры строк и фильтры соединения. Фильтры можно добавить вручную после автоматического создания набора фильтров.  
  
2.  Следуйте указаниям в диалоговом окне **Создать фильтры** для создания фильтра строк. Затем фильтр строк расширяется на таблицы, связанные с фильтруемой таблицей связью по первичным и внешним ключам.  
  
    1.  Выберите таблицу для фильтрации в раскрывающемся списке.  
  
    2.  Создайте инструкцию фильтра в текстовом поле **Инструкция фильтра** . Можно ввести текст в тестовом поле или перетащить столбцы из списка **Столбцы** .  
  
         Текстовая область **Инструкция фильтра** содержит текст по умолчанию, в виде:  
  
        ```  
        SELECT <published_columns> FROM [tableowner].[tablename] WHERE  
        ```  
  
         Текст по умолчанию изменять нельзя. Введите предложение фильтра для статического или параметризованного фильтра строк после ключевого слова WHERE, используя стандартный синтаксис SQL. Полное предложение фильтра для параметризованного фильтра строк должно иметь вид:  
  
        ```  
        SELECT <published_columns> FROM [HumanResources].[Employee] WHERE LoginID = SUSER_SNAME()  
        ```  
  
         В предложении WHERE необходимо использовать имена, состоящие из двух частей; имена, состоящие из трех или четырех частей, не поддерживаются.  
  
    3.  Укажите параметры фильтра.  
  
         Выберите параметр, который соответствует способу совместного использования данных подписчиками: **Строка из этой таблицы отправляется нескольким подпискам** или **Строка из этой таблицы отправляется только одной подписке**. Если выбрана настройка **Строка из этой таблицы будет отправлена только одной подписке**, производительность репликации слиянием будет оптимизирована путем уменьшения объема хранимых и обрабатываемых метаданных. Однако следует убедиться, что данные секционированы таким образом, что одна строка не может быть реплицирована более чем одному подписчику. Дополнительные сведения см. в подразделе «Настройка параметров секционирования» раздела [Параметризованные фильтры строк](../../../relational-databases/replication/merge/parameterized-filters-parameterized-row-filters.md).  
  
3.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
     Проводится синтаксический анализ указанного фильтра, после чего фильтр применяется к таблице в предложении SELECT. Если оператор фильтра содержит синтаксические ошибки или встречаются другие проблемы, пользователь уведомляется, после чего может отредактировать эту инструкцию фильтра.  
  
     После синтаксического анализа инструкции система репликации создает необходимые фильтры соединения и показывает их на панели **Отфильтрованные таблицы: таблицы** на страницах **Фильтрация строк таблицы** или **Фильтрация строк** . Если фильтры формируются в мастере создания публикаций, а распространитель для издателя, для которого выполняется мастер, еще не настроен, появляется подсказка о необходимости настроить распространитель.  
  
4.  Если вы находитесь в диалоговом окне **Свойства публикации — \<Publication>** , нажмите кнопку **ОК**, чтобы сохранить результаты и закрыть диалоговое окно.  
  
### <a name="to-modify-a-filter-that-was-automatically-generated"></a>Изменение автоматически созданного фильтра  
  
1.  На странице **Фильтрация строк таблицы** мастера создания публикаций или странице **Фильтрация строк** диалогового окна **Свойства публикации — \<Publication>** выберите фильтр в области **Отфильтрованные таблицы**, а затем нажмите кнопку **Правка**.  
  
2.  В диалоговом окне **Изменение фильтра** или **Изменение соединения** измените фильтр.  
  
3.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
### <a name="to-delete-a-filter-that-was-automatically-generated"></a>Удаление автоматически созданного фильтра  
  
1.  На странице **Фильтрация строк таблицы** мастера создания публикаций или странице **Фильтрация строк** диалогового окна **Свойства публикации — \<Publication>** выберите фильтр в области **Отфильтрованные таблицы**, а затем нажмите кнопку **Удалить**.  
  
## <a name="see-also"></a>См. также:  
 [Join Filters](../../../relational-databases/replication/merge/join-filters.md)   
 [Параметризованные фильтры строк](../../../relational-databases/replication/merge/parameterized-filters-parameterized-row-filters.md)  
  
  
