---
title: Место на диске журнала транзакций для операций обработки индекса | Документация Майкрософт
ms.custom: ''
ms.date: 03/01/2017
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- index disk space [SQL Server]
- space [SQL Server], indexes
- transaction logs [SQL Server], disk space
- disk space [SQL Server], transaction logs
- space [SQL Server], transaction logs
ms.assetid: 4f8a4922-4507-4072-be67-c690528d5c3b
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 4af90d16e4e81b5d2ee1dc73de78826073d1cbff
ms.sourcegitcommit: 58158eda0aa0d7f87f9d958ae349a14c0ba8a209
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2020
ms.locfileid: "67909462"
---
# <a name="transaction-log-disk-space-for-index-operations"></a>Место на диске журнала транзакций для операций обработки индекса
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
  При крупномасштабных операциях обработки индекса могут формироваться большие объемы загружаемых данных, что может привести к быстрому заполнению журнала транзакций. Чтобы обеспечить возможность отката операции обработки индекса, журнал транзакций не может быть усечен до тех пор, пока операция обработки индекса не завершится; однако во время обработки индекса возможно выполнение резервного копирования журнала. Следовательно, журнал транзакций должен иметь достаточно места для хранения как транзакций обработки индекса, так и любых параллельных пользовательских транзакций, выполняющихся во время обработки индекса. Это верно для операций обработки индекса как в режиме вне сети, так и в режиме в сети. Так как доступ к базовым таблицам во время обработки индекса в режиме вне  сети невозможен, количество пользовательских транзакций может быть небольшим и заполнение журнала не будет таким стремительным. Операции обработки индекса в режиме в сети не препятствуют пользовательской работе, поэтому обработка больших индексов вкупе с большим количеством параллельных пользовательских транзакций может привести к непрерывному заполнению журнала транзакций без возможности его усечения.  
  
## <a name="recommendations"></a>Рекомендации  
 При крупномасштабных операциях обработки индекса следует принять во внимание следующие рекомендации:  
  
1.  Перед тем как выполнять крупномасштабную обработку индекса в сети, убедитесь в том что журнал транзакций зарезервирован и усечен, а также что в журнале достаточно места для хранения проектируемого индекса и пользовательских транзакций.  
  
2.  Рассмотрите возможность установки параметра SORT_IN_TEMPDB в положение ON для операции обработки индекса. Это отделяет транзакции индекса от параллельных пользовательских транзакций. Транзакции индекса будут храниться в журнале транзакций **tempdb** , а параллельные пользовательские транзакции — в журнале транзакций пользовательской базы данных. Это позволяет при необходимости выполнить усечение журнала транзакций пользовательской базы данных во время обработки индекса. Кроме того, если журнал **tempdb** находится не на одном с журналом пользовательской базы данных диске, два журнала не конкурируют в использовании одного места на диске.  
  
    > [!NOTE]  
    >  Убедитесь том, что база данных и журнал транзакций **tempdb** имеют достаточно места на диске для выполнения обработки индекса. Журнал транзакций **tempdb** не может быть усечен до тех пор, пока не завершится обработка индекса.  
  
3.  Используйте модель восстановления базы данных, обеспечивающую минимальное число записей для операции обработки индекса. Это позволит уменьшить размер журнала и предотвратить заполнение пространства журнала.  
  
4.  Не выполняйте обработку индекса в сети в явной транзакции. Усечение журнала нельзя будет выполнить до завершения явной транзакции.  
  
## <a name="related-content"></a>См. также  
 [Disk Space Requirements for Index DDL Operations](../../relational-databases/indexes/disk-space-requirements-for-index-ddl-operations.md)  
  
 [Пример использования места на диске для индекса](../../relational-databases/indexes/index-disk-space-example.md)  
  
  
