---
title: Правила для конверсий Документы Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- numeric data type [ODBC], literals
- conversions with numeric literals [ODBC]
- numeric literals [ODBC]
- literals [ODBC], numeric
ms.assetid: 89f846a3-001d-496a-9843-ac9c38dc1762
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: c49177d62fffc3b3b5c47a25bf3fb421d7564245
ms.sourcegitcommit: ce94c2ad7a50945481172782c270b5b0206e61de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81305090"
---
# <a name="rules-for-conversions"></a>Правила преобразования
Правила в этом разделе применяются для конверсий с участием числовых букв. Для целей этих правил определяются следующие термины:  
  
-   *Задания магазина:* При отправке данных в столбец таблицы в базе данных. Это происходит во время вызовов на **S'LExecute,** **S'LExecDirect**, и **S'LSetPos**. Во время назначения хранилища "цель" относится к столбце базы данных, а "источник" — к данным в буферах приложений.  
  
-   *Задание поиска:* При извлечении данных из базы данных в буферы приложений. Это происходит во время вызовов на вызовы в **S'LFetch,** **S'LGetData,** **S'LFetchScroll,** и **S'LSetPos**. Во время назначения поиска "цель" относится к буферам приложения, а "источник" - к столбце базы данных.  
  
-   *CS:* Значение в источнике символов.  
  
-   *NT:* Значение в числовой цели.  
  
-   *NS:* Значение в численном источнике.  
  
-   *КТ:* Значение в цели символов.  
  
-   Точность точного цифрового буквального числа: количество цифр, которые она содержит.  
  
-   Шкала точного цифрового буквального числа: количество цифр справа от выраженного или подразумеваемого периода.  
  
-   Точность приблизительного численного буквального: точность его мантиссы.  
  
## <a name="character-source-to-numeric-target"></a>Источник символов в числовую цель  
 Ниже приведены правила преобразования из источника символов (CS) в числовую цель (NT):  
  
1.  Замените CS на полученное значение, удалив все ведущие или задние пространства в CS. Если CS не является допустимой *числованием в буквальном смысле,* возвращается значение s'LSTATE 22018 (недействительное значение символа для литого спецификации).  
  
2.  Замените CS значением, полученным путем удаления ведущих нулей до десятичной точки, задней нулей после десятичной точки, или обоих.  
  
3.  Преобразуйте CS в NT. Если конверсия приводит к потере значительных цифр, возвращается S'LSTATE 22003 (числовое значение вне диапазона). Если конверсия приводит к потере незначительных цифр, возвращается S'Lstate 01S07 (фракционная усечение).  
  
## <a name="numeric-source-to-character-target"></a>Числовый источник для цели символов  
 Ниже приведены правила преобразования из численного источника (NS) в цель символов (CT):  
  
1.  Пусть LT будет длина в символах КТ. Для назначения поиска LT равен длине буфера в символах за вычетом количества байтов в символе с нулевым окончанием для этого набора символов.  
  
2.  Случаях:  
  
    -   Если NS является точным числовым типом, то пусть YP равняется кратчайшей строке символов, которая соответствует определению *точно-численно-буквального,* так что масштаб YP такой же, как и масштаб NS, а интерпретируемое значение YP является абсолютным значением NS.  
  
    -   Если NS является приблизительной численного типа, то пусть YP будет строка символа следующим образом:  
  
         Регистр:  
  
         Если NS равен 0, то YP 0.  
  
         Пусть YSN будет кратчайшей строкой символов, которая соответствует определению*точно-численно-буквального* и интерпретируемое значение которой является абсолютным значением NS. Если длина YSN меньше *(точность* No 1) типа данных NS, то пусть YP равный YSN.  
  
         В противном случае, YP является кратчайшим характер строки, которая соответствует определению *приблизительно-числового буквального* которого интерпретируется значение абсолютное значение NS и чья *мантисса* состоит из одной *цифры,* которая не является "0", а затем *период* и *неподписанных integer*.  
  
3.  Регистр:  
  
    -   Если NS меньше 0, то пусть Y будет результатом:  
  
         '-' &#124;&#124; YP  
  
         где "&#124;&#124;" является оператором конкатации строк.  
  
         В противном случае, пусть Y равны YP.  
  
4.  Пусть LY быть длина в символы Y.  
  
5.  Регистр:  
  
    -   Если LY равен LT, то КТ устанавливается на Y.  
  
    -   Если LY меньше, чем LT, то КТ устанавливается на Y продлен справа на соответствующее количество пробелов.  
  
         В противном случае (LY > LT), скопируйте первые LT-символы Y в КТ.  
  
         Регистр:  
  
         Если это назначение хранилища, верните ошибку S'LSTATE 22001 (данные строки, право-усеченные).  
  
         Если это назначение поиска, верните предупреждение S'Lstate 01004 (данные струны, право-усеченные). Когда копия приводит к потере дробных цифр (кроме задних нулей), определяется ли один из следующих:  
  
         (1) Водитель уселяет строку в Y в соответствующем масштабе (который также может быть нулевым) и записывает результат в КТ.  
  
         (2) Водитель округляет строку в Y в соответствующем масштабе (который также может быть нулевым) и записывает результат в КТ.  
  
         (3) Водитель не усечения, ни раундов, а просто копирует первые символы LT Y в КТ.
