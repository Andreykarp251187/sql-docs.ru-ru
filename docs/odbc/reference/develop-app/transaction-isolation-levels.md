---
title: Уровни изоляции транзакций (ODBC) | Документация Майкрософт
ms.custom: seo-dt-2019
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- dirty reads [ODBC]
- isolation levels [ODBC]
- nonrepeatable reads [ODBC]
- read uncommitted [ODBC]
- read committed [ODBC]
- serializable reads [ODBC]
- phantoms [ODBC]
- transaction isolation [ODBC]
- repeatable reads [ODBC]
- transactions [ODBC], isolation
ms.assetid: 0d638d55-ffd0-48fb-834b-406f466214d4
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: 622b4cd7f0db259b5ecfd5be63b27df64be965e7
ms.sourcegitcommit: e042272a38fb646df05152c676e5cbeae3f9cd13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2020
ms.locfileid: "81298037"
---
# <a name="transaction-isolation-levels-odbc"></a>Уровни изоляции транзакций (ODBC)
*Уровни изоляции транзакций* — это мера степени, в которой выполняется изоляция транзакции. В частности, уровни изоляции транзакций определяются присутствием или отсутствием следующих явлений:  
  
-   **"Грязных" операций чтения** « *Грязное» чтение* происходит, когда транзакция считывает данные, которые еще не были зафиксированы. Например, транзакция 1 обновляет строку. Транзакция 2 считывает обновленную строку до того, как транзакция 1 зафиксирует обновление. Если транзакция 1 выполняет откат изменений, то транзакция 2 будет считать данные, которые никогда не существовали.  
  
-   **Неповторяемые операции чтения** *Неповторяемое чтение* происходит, когда транзакция дважды считывает одну и ту же строку, но каждый раз получает разные данные. Например, транзакция 1 считывает строку. Транзакция 2 обновляет или удаляет эту строку и фиксирует обновление или удаление. Если транзакция 1 пересчитывает строку, она получает различные значения строки или обнаруживает, что строка была удалена.  
  
-   **Фантомы** *Фантом* — это строка, которая соответствует условиям поиска, но изначально не отображается. Например, транзакция 1 считывает набор строк, удовлетворяющих некоторым условиям поиска. Транзакция 2 создает новую строку (посредством обновления или вставки), которая соответствует условиям поиска для транзакции 1. Если транзакция 1 выполняет инструкцию, которая считывает строки, она получает другой набор строк.  
  
 Четыре уровня изоляции транзакций (как определено в SQL-92) определяются с точки зрения этих явлений. В следующей таблице «X» отмечает каждое обнаруженное явление.  
  
|Уровень изоляции транзакции|"Грязных" операций чтения|Неповторяемые операции чтения|Фантомы|  
|---------------------------------|-----------------|-------------------------|--------------|  
|Уровень изоляции read uncommitted|X|X|X|  
|Уровень изоляции read committed|--|X|X|  
|Уровень изоляции repeatable read|--|--|X|  
|Упорядочиваемый уровень изоляции|--|--|--|  
  
 В следующей таблице описаны простые способы, с помощью которых СУБД может реализовать уровни изоляции транзакций.  
  
> [!IMPORTANT]  
>  Большинство СУБД используют более сложные схемы, чем они позволяют увеличить параллелизм. Эти примеры приведены только в целях иллюстрации. В частности, ODBC не предписывает, как конкретные СУБД изолируют транзакции друг от друга.  
  
|Изоляция транзакций|Возможная реализация|  
|---------------------------|-----------------------------|  
|Уровень изоляции read uncommitted|Транзакции не изолированы друг от друга. Если СУБД поддерживает другие уровни изоляции транзакций, она игнорирует любой механизм, используемый для реализации этих уровней. Так что они не оказывают негативного воздействия на другие транзакции, транзакции, выполняющиеся на уровне READ UNCOMMITTED, обычно доступны только для чтения.|  
|Уровень изоляции read committed|Транзакция ожидает, пока разблокируются строки, заблокированные другими транзакциями. Это предотвращает считывание "грязных" данных.<br /><br /> Транзакция содержит блокировку чтения (если она считывает только строку) или блокировку записи (если она обновляет или удаляет строку) в текущей строке, чтобы предотвратить ее обновление или удаление другими транзакциями. Транзакция освобождает блокировки чтения при перемещении из текущей строки. Он хранит блокировки записи, пока не зафиксируется или не вернется.|  
|Уровень изоляции repeatable read|Транзакция ожидает, пока разблокируются строки, заблокированные другими транзакциями. Это предотвращает считывание "грязных" данных.<br /><br /> Транзакция содержит блокировки чтения для всех строк, которые она возвращает в приложение, и блокировки записи для всех строк, которые она вставляет, обновляет или удаляет. Например, если транзакция включает инструкцию SQL **SELECT \* из Orders**, транзакция READ-locks блокируется по мере их выборки приложением. Если транзакция включает инструкцию SQL **Delete из Orders, где status = ' Closed '**, то транзакция Write-locks блокирует строки по мере их удаления.<br /><br /> Поскольку другие транзакции не могут обновлять или удалять эти строки, текущая транзакция позволяет избежать неповторяемых операций чтения. Транзакция освобождает свои блокировки при фиксации или откате.|  
|Упорядочиваемый уровень изоляции|Транзакция ожидает, пока разблокируются строки, заблокированные другими транзакциями. Это предотвращает считывание "грязных" данных.<br /><br /> Транзакция удерживает блокировку чтения (если она считывает только строки) или блокировку записи (если она может обновлять или удалять строки) в диапазоне строк, на которые он влияет. Например, если транзакция включает инструкцию SQL **SELECT \* из Orders**, то диапазон является всей таблицей Orders. транзакция READ-блокирует таблицу и не допускает вставку новых строк в нее. Если транзакция включает инструкцию SQL **Delete из заказов, где Status = "Closed"**, то диапазоном являются все строки с состоянием "закрыто"; транзакция Write-блокирует все строки в таблице Orders с состоянием "CLOSED" и не позволяет вставлять или обновлять строки таким же, что результирующая строка имеет состояние "CLOSED".<br /><br /> Поскольку другие транзакции не могут обновлять или удалять строки в диапазоне, текущая транзакция позволяет избежать неповторяемых операций чтения. Поскольку другие транзакции не могут вставлять какие-либо строки в диапазоне, текущая транзакция позволяет избежать каких-либо фантомов. Транзакция освобождает свою блокировку при фиксации или откате.|  
  
 Важно отметить, что уровень изоляции транзакции не влияет на способность транзакции просматривать свои собственные изменения. транзакции всегда могут видеть любые изменения, которые они делают. Например, транзакция может состоять из двух инструкций **Update** , первая из которых приводит к оплате всех сотрудников на 10 процентов, а вторая — за оплату всех сотрудников по сравнению с максимальным значением. Это происходит только в рамках одной транзакции, так как вторая инструкция **Update** может видеть результаты первого.
