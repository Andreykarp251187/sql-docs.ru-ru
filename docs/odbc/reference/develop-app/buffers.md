---
description: Буферы
title: Буферы | Документация Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- input buffers [ODBC]
- length/indicator buffers [ODBC]
- output buffers [ODBC]
- buffers [ODBC], about buffers
- application buffers [ODBC]
- buffers [ODBC]
ms.assetid: 42c5226c-cb40-4d1e-809f-2ea50ce6bd55
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: b1c82927c122197249b02a2d327364e68bd851a4
ms.sourcegitcommit: e700497f962e4c2274df16d9e651059b42ff1a10
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "88494784"
---
# <a name="buffers"></a>Буферы
Буфер — это любая часть памяти приложения, используемая для передачи данных между приложением и драйвером. Например, буферы приложений могут быть связаны с столбцами результирующего набора с **SQLBindCol**или *привязаны к* ним. При выборке каждой строки данные возвращаются для каждого столбца в этих буферах. *Входные буферы* используются для передачи данных из приложения в драйвер. *выходные буферы* используются для возврата данных из драйвера в приложение.  
  
> [!NOTE]  
>  Если функция ODBC возвращает SQL_ERROR, содержимое всех выходных аргументов этой функции не определено.  
  
 В основном это обсуждение касается буферов неопределенного типа. Адреса этих буферов отображаются в виде аргументов типа СКЛПОИНТЕР, например аргумент *таржетвалуептр* в **SQLBindCol**. Однако некоторые обсуждаемые здесь элементы, например аргументы, используемые с буферами, также применяются к аргументам, используемым для передачи строк в драйвер, например аргумента *TableName* в **SQLTables**.  
  
 Эти буферы обычно бывают парными. *Буферы данных* используются для передачи самих данных, в то время как *буферы длины и индикатора* используются для передачи длины данных в буфере данных или специального значения, такого как SQL_NULL_DATA, которое указывает, что данные имеют значение null. Длина данных в буфере данных отличается от длины самого буфера данных. На следующем рисунке показана связь между буфером данных и буфером "Длина/индикатор".  
  
 ![Буфер данных и длина буфера&#47;ного индикатора](../../../odbc/reference/develop-app/media/pr09.gif "pr09")  
  
 Буфер длины и индикатора необходим всякий раз, когда буфер данных содержит данные переменной длины, такие как символьные или двоичные данные. Если буфер данных содержит данные фиксированной длины, такие как структура типа Integer или Date, буфер длины и индикатора необходим только для передачи значений индикатора, так как длина данных уже известна. Если приложение использует буфер длины или индикатора с данными фиксированной длины, драйвер игнорирует все переданные длины.  
  
 Длина буфера данных и содержащихся в нем данных измеряется в байтах, а не в символах. Это различие не имеет значения для программ, использующих строки ANSI, так как длина в байтах и символах одинакова.  
  
 Если буфер данных представляет поле дескриптора, определяемое драйвером, поле диагностики или атрибут, приложение должно указать диспетчеру драйверов природу аргумента функции, который указывает значение для поля или атрибута. Приложение делает это, устанавливая аргумент length в любом вызове функции, который задает для поля или атрибута одно из следующих значений. (То же самое справедливо для функций, которые извлекают значения поля или атрибута, за исключением того, что аргумент указывает на значения, которые для функции настройки находятся в самом аргументе.)  
  
-   Если аргумент функции, указывающий значение поля или атрибута, является указателем на символьную строку, аргумент *length* имеет длину строки или SQL_NTS.  
  
-   Если аргумент функции, указывающий значение поля или атрибута, является указателем на двоичный буфер, приложение помещает результат макроса SQL_LEN_BINARY_ATTR (*length*) в аргумент *length* . Это помещает отрицательное значение в аргумент *length* .  
  
-   Если аргумент функции, указывающий значение поля или атрибута, является указателем на значение, отличное от символьной строки или двоичной строки, аргумент *length* должен иметь значение SQL_IS_POINTER.  
  
-   Если аргумент функции, указывающий значение поля или атрибута, содержит значение фиксированной длины, аргумент *длины* — SQL_IS_INTEGER, SQL_IS_UINTEGER, SQL_IS_SMALLINT или SQL_ISI_USMALLINT, в зависимости от ситуации.  
  
 Этот раздел содержит следующие подразделы.  
  
-   [Отложенные буферы](../../../odbc/reference/develop-app/deferred-buffers.md)  
  
-   [Выделение и освобождение буферов](../../../odbc/reference/develop-app/allocating-and-freeing-buffers.md)  
  
-   [Использование буферов данных](../../../odbc/reference/develop-app/using-data-buffers.md)
