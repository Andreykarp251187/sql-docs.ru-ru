---
title: Приложения Юникода | Документация Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- Unicode [ODBC], compiling as Unicode application
- Unicode [ODBC], functions
- compiling Unicode applications [ODBC]
- functions [ODBC], Unicode functions
ms.assetid: 7986c623-2792-4e77-bfee-c86cbf84f08d
author: MightyPen
ms.author: genemi
ms.openlocfilehash: 32b4125d0ecb1f15fab00119a8ef4ed361b6db72
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2020
ms.locfileid: "68087742"
---
# <a name="unicode-applications"></a>Приложения на базе Юникода
Приложение можно перекомпилировать как приложение с поддержкой Юникода одним из двух способов:  
  
-   Включите **#define** Юникода, содержащийся в файле заголовка sqlucode. h в приложении.  
  
-   Скомпилируйте приложение с параметром Unicode компилятора. (Этот параметр будет отличаться для разных компиляторов.)  
  
 Чтобы преобразовать приложение ANSI в приложение Юникод, напишите приложение для хранения и передачи данных в Юникоде. Кроме того, вызовы функций, которые поддерживают аргументы СКЛПОИНТЕР, должны быть преобразованы для использования счетчика байтов.  
  
 Если приложение компилируется как приложение в Юникоде, то если приложение вызывает функцию API ODBC (без суффикса), диспетчер драйверов распознает приложение как приложение в Юникоде и преобразует вызов функции в функцию Юникода (с суффиксом *W* ), если базовый драйвер поддерживает Юникод. Когда приложение ANSI выполняет вызов функции без суффикса, диспетчер драйверов преобразует его в формат ANSI, если базовый драйвер поддерживает ANSI. Если приложение и драйвер поддерживают одинаковую кодировку символов, диспетчер драйверов передает вызовы в драйвер (с определенными исключениями для приложений ANSI).  
  
 Приложение может вызывать обе функции Юникода (с суффиксом *W* ) и функции ANSI ( *с суффиксом или без него)* . Вызовы функций в Юникоде и ANSI могут быть смешанными. Если используется библиотека курсоров, то вызовы функций Юникода и ANSI не могут быть смешанными. Библиотека курсоров — это либо Юникод, либо ANSI, а не смесь.  
  
 Приложение может быть написано таким образом, что оно может быть скомпилировано как приложение с поддержкой Юникода или как приложение ANSI. В этом случае символьные типы данных могут быть объявлены как SQL_C_TCHAR. Это макрос, который вставляет SQL_C_WCHAR, если приложение компилируется как приложение в Юникоде, или вставляет SQL_C_CHAR, если он компилируется как приложение ANSI. Программист приложения должен быть осторожным функций, принимающих СКЛПОИНТЕР в качестве аргумента, поскольку размер аргумента длины изменится (для строковых типов данных) в зависимости от того, является ли приложение ANSI или Unicode.  
  
 Функцию можно вызвать одним из трех способов: как вызов функции только для Юникода (с суффиксом *W* ), как вызов функции только для ANSI (с суффиксом *a* ) или как вызов функции ODBC без суффикса. Аргументы трех форм функции идентичны. Только функции с аргументами \* SQLCHAR или склпоинтер, указывающими на строки, требуются формы в Юникоде и ANSI. Для функций, имеющих аргументы, которые могут быть объявлены как символьный тип, например **SQLBindCol** или **SQLGetData** (который не имеет форм Юникода и ANSI), аргумент может быть объявлен как тип Юникода, тип ANSI или в случае аргумента типа C — макрос SQL_C_TCHAR. Дополнительные сведения см. в разделе [данные в Юникоде](../../../odbc/reference/develop-app/unicode-data.md).  
  
 Приложение может быть написано как приложение для Юникода, даже если нет доступных драйверов Юникода для работы с. Диспетчер драйверов будет сопоставлять функции и типы данных Юникода с ANSI. Существуют некоторые ограничения для сопоставлений Unicode и ANSI, которые могут быть выполнены. Наличие драйвера Юникода для приложения Юникода, с которым будет работать, приведет к лучшей производительности и удалит ограничения, присущие сопоставлениям Юникода и ANSI.
