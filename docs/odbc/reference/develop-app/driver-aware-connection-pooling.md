---
title: Организация пулов соединений с учетом драйвера | Документация Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
ms.assetid: 53e7e3f7-edab-4d0b-8943-45442ba3ebc9
author: MightyPen
ms.author: genemi
manager: craigg
ms.openlocfilehash: 8ea4643354990ad416ac3975467c5991842adacc
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "62658265"
---
# <a name="driver-aware-connection-pooling"></a>Организация пулов соединений с учетом драйвера
Пул соединений с учетом драйвера — это новая функция диспетчера драйверов в Windows 8. Пул соединений с учетом драйвера позволяет записи драйвер для настройки поведения в их драйвер ODBC для пула подключений.  
  
> [!NOTE]  
>  Пул соединений с учетом драйвера в библиотеку курсоров не поддерживается. Приложение будет получать сообщение об ошибке при попытке включить библиотеку курсоров через SQLSetConnectAttr, если разрешено создание пулов соединений с учетом драйвера.  
  
 Пул адресов соединений с учетом драйвера следующие проблемы, связанные с организация пулов соединений диспетчера драйверов:  
  
 **Фрагментация пула** The Driver Manager только возвращает соединение из пула, если это значение точного совпадения в строке подключения новый запрос подключения.  Одна из причин для диспетчера драйверов Требовать точного соответствия является то, что диспетчер драйверов не понимает каждого ключевого слова строки подключения драйвера и его значение.  Тем не менее некоторые значения ключевого слова строки подключения (например, имя базы данных) может не потребоваться точное соответствие, так как драйвер может меняться базы данных менее чем за время, необходимое для открытия нового соединения (разница точное время зависит от источника данных). И различия в некоторые атрибуты соединения (например, SQL_ATTR_CURRENT_CATALOG) может занимать больше времени для изменения в чем различия в другие атрибуты (например, SQL_ATTR_LOGIN_TIMEOUT). Это, кроме того, может препятствовать диспетчера драйверов с помощью подключения по затратам, повторно используемых из пула. Если драйвер для создания многих новых соединений, может привести к снижению производительности приложения и может снизить масштабируемость источника данных. Фрагментация пула уменьшается с пулами соединений с учетом драйвера, поскольку драйвер можно более точно оценить затраты на повторное использование подключений в пуле для запроса на подключение.  
  
 **Не учитывать предпочтения приложения** некоторые источники данных можно эффективно открывать новые соединения (по сравнению с Сброс некоторые атрибуты), таким образом, лучше установить новое соединение, вместо того чтобы повторно использовать немного несоответствующие приложения соединение из пула и сброса, некоторые значения (несмотря на то, что это может быть медленнее во время инициализации фразу пула соединений). Однако некоторые приложения могут поддерживать небольшой размер нагрузку на сервер и откройте меньшее количество соединений, несмотря на то, что может быть больше затрат для устранения несоответствия для правильного поведения. Без пула соединений с учетом драйвера, нельзя указать такого рода предпочтений эффективно, поскольку диспетчер драйверов не распознает все атрибуты соединения драйвера. Организация пулов соединений с учетом драйвера позволяет драйверу получить настройки пользователя (со значением атрибута драйвера SQLSetConnectAttr), чтобы его можно более точно оценить затраты на повторное использование подключений из пула, в зависимости от предпочтений пользователя.  
  
 Дополнительные сведения об использовании пулов соединений с учетом драйвера см. в разделе [драйвера ODBC с поддержкой пула подключений разработка](../../../odbc/reference/develop-driver/developing-connection-pool-awareness-in-an-odbc-driver.md).  
  
## <a name="determining-driver-support"></a>Определение поддержка драйверов  
 Организация пулов соединений с учетом драйвера является дополнительным компонентом, драйвер может не поддерживать. Чтобы определить, поддерживает ли драйвер его, используйте SQL_DRIVER_AWARE_POOLING_SUPPORTED *InfoType* из [SQLGetInfo](../../../odbc/reference/syntax/sqlgetinfo-function.md).  
  
## <a name="how-to-enable-driver-aware-connection-pooling"></a>Как включить использование пулов соединений с учетом драйвера  
 Приложение может использовать awareness пулов соединений драйвера, задав атрибуту SQL_ATTR_CONNECTION_POOLING SQL_CP_DRIVER_AWARE с [SQLSetEnvAttr](../../../odbc/reference/syntax/sqlsetenvattr-function.md). Если драйвер не поддерживает с поддержкой пула подключений, организация пулов соединений диспетчера драйверов будут использоваться (тем же, как если бы SQL_CP_ONE_PER_HENV было задано, а не SQL_CP_DRIVER_AWARE). Приложения ODBC 2.x и 3.x можно включить эту функцию.  
  
## <a name="see-also"></a>См. также  
 [Разработка драйвера ODBC](../../../odbc/reference/develop-driver/developing-an-odbc-driver.md)
