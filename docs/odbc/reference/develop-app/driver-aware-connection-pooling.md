---
title: Пулинг соединения драйверов-осознанности (ru) Документы Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
ms.assetid: 53e7e3f7-edab-4d0b-8943-45442ba3ebc9
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: 70b70c841f37bd69179137c807c0dadcfd932d2b
ms.sourcegitcommit: ce94c2ad7a50945481172782c270b5b0206e61de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81287604"
---
# <a name="driver-aware-connection-pooling"></a>Организация пулов соединений с учетом драйвера
Соединение соединения с пониманием от водителя — это новая функция менеджера драйверов в Windows 8. Объединение соединения драйверов позволяет авторам драйверов настроить поведение объединения соединения в драйвере ODBC.  
  
> [!NOTE]  
>  Объединение соединения с системой не поддерживается библиотекой курсоров. Приложение будет получать сообщение об ошибке, если оно попытается включить библиотеку курсоров через S'LSetConnectAttr, когда включено объединение соединения с информацией о драйвере.  
  
 Соединение соединения с водителем устраняет следующие проблемы, связанные с объединением соединения менеджера драйверов:  
  
 **Фрагментация пула** Менеджер драйвера возвращает соединение из пула только в том случае, если оно точно совпадает со строкой подключения нового запроса на подключение.  Одна из причин, по которой менеджер драйвера требует точного соответствия, заключается в том, что менеджер драйвера не понимает каждое ключевое слово строки строки соединения конкретного драйвера и его значение.  Однако некоторые значения ключевых слов строки соединения (например, название базы данных) могут не требовать точного совпадения, так как драйвер может изменить базу данных меньше времени, необходимого для открытия нового соединения (точная разница во времени зависит от источника данных). Кроме того, различия в некоторых атрибутах соединения (например, SQL_ATTR_CURRENT_CATALOG) могут занять больше времени, чем изменение других атрибутов (например, SQL_ATTR_LOGIN_TIMEOUT). Это также может помешать менеджеру драйвера использовать самое низкое многоразовое соединение из пула. Когда драйверу необходимо создать много новых подключений, производительность приложения может снизиться, а масштабируемость источника данных может снизиться. Фрагментация пула может быть уменьшена при объединении соединения, известного водителю, поскольку водитель может лучше оценить стоимость повторного использования соединения в пуле для запроса на подключение.  
  
 **Отсутствие рассмотрения предпочтений в применении** Некоторые источники данных могут эффективно открывать новые соединения (по сравнению с сбросом некоторых атрибутов), поэтому приложение может предпочесть открыть новое соединение вместо того, чтобы повторно использовать несколько несовпадающее соединение из пула и сбросить некоторые значения (хотя это может быть медленнее во время фразы инициализации пула соединения). Но некоторые приложения могут держать нагрузку сервера меньше и открыть меньше соединений, хотя может быть больше затрат, чтобы исправить несоответствия для правильного поведения. Без объединения соединения с указанием драйвера невозможно эффективно указать такого рода предпочтения, поскольку менеджер драйвера не распознает все атрибуты соединения, характерные для драйвера. Объединение соединений с учетом драйверов позволяет водителю получить пользовательские предпочтения (с атрибутом, характерным для драйвера, s'LSetConnectAttr), чтобы он мог лучше оценить стоимость повторного использования соединения из пула на основе предпочтений пользователя.  
  
 Для получения дополнительной информации об объединении соединения с данными о драйверах, [см.](../../../odbc/reference/develop-driver/developing-connection-pool-awareness-in-an-odbc-driver.md)  
  
## <a name="determining-driver-support"></a>Определение поддержки драйверов  
 Объединение соединений, осведомленных о драйверах, является дополнительной функцией, которую водитель может не поддерживать. Чтобы определить, поддерживает ли его драйвер, используйте SQL_DRIVER_AWARE_POOLING_SUPPORTED *InfoType* [компании S'LGetInfo.](../../../odbc/reference/syntax/sqlgetinfo-function.md)  
  
## <a name="how-to-enable-driver-aware-connection-pooling"></a>Как включить пулинг соединения драйвера к осознаванию  
 Приложение может использовать осведомленность водителя об объединении соединения, установив атрибут SQL_ATTR_CONNECTION_POOLING SQL_CP_DRIVER_AWARE с [s'LSetEnvAttr.](../../../odbc/reference/syntax/sqlsetenvattr-function.md) Если водитель не поддерживает осведомленность о пуле подключения, будет использоваться объединение соединения менеджера драйвера (так же, как если бы SQL_CP_ONE_PER_HENV было указано, а не SQL_CP_DRIVER_AWARE). Приложения ODBC 2.x и 3.x могут включить эту функцию.  
  
## <a name="see-also"></a>См. также:  
 [Разработка драйвера ODBC](../../../odbc/reference/develop-driver/developing-an-odbc-driver.md)
