---
title: Правила обработки диагностических сведений | Документация Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- diagnostic information [ODBC], SqlGetDiagField
- SQLGetDiagField function [ODBC], diagnostic handling rules
- SQLGetDiagRec function [ODBC], diagnostic handling rules
- diagnostic information [ODBC], SqlGetDiagRec
ms.assetid: 74387c3a-d6b3-4c35-b209-b9612602b20a
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: 9f7f9d19a5a369e9da0efbc0d62f8e556b0597c1
ms.sourcegitcommit: e042272a38fb646df05152c676e5cbeae3f9cd13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2020
ms.locfileid: "81305845"
---
# <a name="diagnostic-handling-rules"></a>Правила диагностической обработки
Следующие правила управляют диагностической обработкой в **SQLGetDiagRec** и **SQLGetDiagField**.  
  
 Для всех компонентов ODBC:  
  
-   Не должны заменять, изменять или маскировать ошибки или предупреждения, полученные от другого компонента ODBC.  
  
-   Может добавить дополнительную запись состояния при получении диагностического сообщения от другого компонента ODBC. Добавленная запись должна добавить в исходное сообщение значение реальных данных.  
  
 Для компонента ODBC, который напрямую взаимодействует с источником данных:  
  
-   Должен предшествовать идентификатору поставщика, его идентификатору компонента и идентификатору источника данных диагностического сообщения, полученного от источника данных.  
  
-   Необходимо сохранить собственный код ошибки источника данных.  
  
-   Необходимо сохранить диагностическое сообщение источника данных.  
  
 Для любого компонента ODBC, который создает ошибку или предупреждение независимо от источника данных:  
  
-   Необходимо указать правильный SQLSTATE для ошибки или предупреждения.  
  
-   Должен создавать текст диагностического сообщения.  
  
-   Должен помечать идентификатор поставщика и его идентификатор компонента в диагностическое сообщение.  
  
-   Должен возвращать собственный код ошибки, если он доступен и имеет осмысленное значение.  
  
 Для компонента ODBC, который взаимодействует с диспетчером драйверов:  
  
-   Необходимо инициализировать выходные аргументы **SQLGetDiagRec** и **SQLGetDiagField**.  
  
-   Необходимо форматировать и возвращать диагностические сведения в виде выходных аргументов **SQLGetDiagRec** и **SQLGetDiagField** при вызове этой функции.  
  
 Для одного компонента ODBC, отличного от диспетчера драйверов:  
  
-   Необходимо задать значение SQLSTATE на основе собственной ошибки. Для драйверов на основе файлов и драйверов на основе СУБД, которые не используют шлюз, драйвер должен установить значение SQLSTATE. Для драйверов на основе СУБД, использующих шлюз, драйвер или шлюз, поддерживающий ODBC, могут установить значение SQLSTATE.
