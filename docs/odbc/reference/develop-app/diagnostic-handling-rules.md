---
title: Диагностики, обработка правил | Документация Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- diagnostic information [ODBC], SqlGetDiagField
- SQLGetDiagField function [ODBC], diagnostic handling rules
- SQLGetDiagRec function [ODBC], diagnostic handling rules
- diagnostic information [ODBC], SqlGetDiagRec
ms.assetid: 74387c3a-d6b3-4c35-b209-b9612602b20a
author: MightyPen
ms.author: genemi
manager: craigg
ms.openlocfilehash: 9f59953dee77453bb8b453a40a36d17e865a1fe5
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "63034931"
---
# <a name="diagnostic-handling-rules"></a>Правила диагностической обработки
Следующие правила определяют диагностической обработки в **SQLGetDiagRec** и **SQLGetDiagField**.  
  
 Для всех компонентов ODBC:  
  
-   Не должны заменить, изменять и маскировать ошибки или предупреждения, полученные из другого компонента ODBC.  
  
-   Может добавить запись Дополнительные сведения о состоянии, когда получают соответствующее диагностическое сообщение из другого компонента ODBC. Добавлена запись необходимо добавить значение действительные исходного сообщения.  
  
 Для ODBC компонента, напрямую интерфейсы источника данных:  
  
-   Необходимо добавить его идентификатор поставщика, его идентификатор компонента и идентификатор источника данных для диагностики сообщения, которое поступает из источника данных.  
  
-   Необходимо сохранить источник данных собственное значение кода ошибки.  
  
-   Необходимо сохранить источник данных диагностическое сообщение.  
  
 Для любых компонентов ODBC, формирует ошибку или предупреждение независимо от источника данных:  
  
-   Необходимо указать правильный код SQLSTATE для ошибки или предупреждения.  
  
-   Необходимо создать текст диагностическое сообщение.  
  
-   Необходимо добавить его идентификатор поставщика и его идентификатора компонента диагностическое сообщение.  
  
-   Должен возвращать собственное значение кода ошибки, если он доступен и значимым.  
  
 Для компонента ODBC, который взаимодействует с диспетчером драйверов:  
  
-   Необходимо инициализировать выходные аргументы **SQLGetDiagRec** и **SQLGetDiagField**.  
  
-   Необходимо отформатировать и возвращать диагностических данных в качестве выходных аргументов **SQLGetDiagRec** и **SQLGetDiagField** при вызове этой функции.  
  
 Для одного компонента ODBC отличный от диспетчера драйверов:  
  
-   Необходимо задать значение SQLSTATE, в зависимости от собственной ошибки. Для драйверов на основе файлов и драйверов на основе СУБД, которые не используют шлюз драйвер необходимо задать значение SQLSTATE. Для драйверов на основе СУБД, использующих шлюз драйвер или шлюз, поддерживающий ODBC может задать SQLSTATE.
