---
title: Функциональное картирование в менеджере драйвера (ru) Документы Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- Unicode [ODBC], functions
- driver manager [ODBC], function mapping
- functions [ODBC], Unicode functions
ms.assetid: ff093b29-671a-4fc0-86c9-08a311a98e54
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: db8e525bb7e8f3e167deb8061a4dd5b75073933c
ms.sourcegitcommit: ce94c2ad7a50945481172782c270b5b0206e61de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81305585"
---
# <a name="function-mapping-in-the-driver-manager"></a>Сопоставление функции в диспетчере драйверов
Менеджер драйвера поддерживает две точки входа для функций, которые принимают строки аргументы. Функция неоформленной **(S'LDriverConnect)** является формой функции ANSI. Форма Unicode украшена *W* **(S'LDriverConnectW**.)  
  
 Файл заголовка ODBC также поддерживает функции, украшенные *A,* **(S'LDriverConnectA**) для удобства смешанных приложений ANSI/Unicode. Звонки, сделанные на функции **A,** на самом деле являются вызовами в неукрашенную точку входа **(S'LDriverConnect.)**  
  
 Если приложение компилируется с **#define**_UNICODE, файл заголовка ODBC будет отображать неукрашенные вызовы функций **(S'LDriverConnect)** в версию Unicode **(S'LDriverConnectW**.)  
  
 Менеджер драйвера распознает драйвер Unicode, если **s'LConnectW** поддерживается драйвером.  
  
 Если драйвером драйвера является водитель Unicode, менеджер драйвера выполняет следующие вызовы:  
  
-   Проходит функцию без строки аргументы или параметры непосредственно через водителя.  
  
-   Проходит функции Unicode (с суффиксом *W)* непосредственно через водителя.  
  
-   Преобразует функцию ANSI (с суффиксом *А)* в функцию Unicode (с суффиксом *W),* преобразовывая аргументы строки в символы Unicode и передает функцию Unicode водителю.  
  
 Если водитель является драйвером ANSI, менеджер драйвера выполняет следующие вызовы:  
  
-   Передает функции без строки аргументы или параметры непосредственно через водителя.  
  
-   Преобразует функции Unicode (с помощью суффикса *W)* в вызов функции ANSI и передает его водителю.  
  
-   Передает функцию ANSI непосредственно водителю.  
  
 Менеджер драйвера внутренне включен в unicode. В результате оптимальная производительность становится результатом приложения Unicode, работающего с драйвером Unicode, поскольку менеджер драйвера просто передает функции Unicode водителю. При работе приложения ANSI с драйвером ANSI менеджер драйвера должен конвертировать строки из ANSI в Unicode при обработке некоторых функций, таких как **S'LDriverConnect.** После обработки функции менеджер драйвера должен преобразовать строку Unicode обратно в ANSI, прежде чем отправлять функцию драйверу ANSI.  
  
 Приложение не должно изменять или читать связанные буферы параметров при возврате драйвера SQL_STILL_EXECUTING или SQL_NEED_DATA. Менеджер драйвера оставляет буферы, привязанные к ANSI, пока водитель не вернется SQL_SUCCESS, SQL_SUCCESS_WITH_INFO или SQL_ERROR. Многопоточное приложение не должно получить доступ к каким-либо связанным значениям параметров, на которые выполняется другой поток. Менеджер драйвера преобразует данные из Unicode в ANSI "на месте", а другой поток может видеть данные ANSI в этих буферах, в то время как драйвер все еще обрабатывает выписку s'L. Приложения, связывающие данные Unicode с драйвером ANSI, не должны связывать два разных столбца с тем же адресом.
