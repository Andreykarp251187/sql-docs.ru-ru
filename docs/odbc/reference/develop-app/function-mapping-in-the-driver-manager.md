---
title: Сопоставление функций в диспетчере драйверов | Документация Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- Unicode [ODBC], functions
- driver manager [ODBC], function mapping
- functions [ODBC], Unicode functions
ms.assetid: ff093b29-671a-4fc0-86c9-08a311a98e54
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: db8e525bb7e8f3e167deb8061a4dd5b75073933c
ms.sourcegitcommit: e042272a38fb646df05152c676e5cbeae3f9cd13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2020
ms.locfileid: "81305585"
---
# <a name="function-mapping-in-the-driver-manager"></a>Сопоставление функции в диспетчере драйверов
Диспетчер драйверов поддерживает две точки входа для функций, принимающих строковые аргументы. Недекорированная функция (**SQLDriverConnect**) является ФОРМОЙ функции ANSI. Форма Юникода оформлена с помощью *W* (**SQLDriverConnectW**).  
  
 Заголовочный файл ODBC также поддерживает функции, дополненные *A,* (**SQLDriverConnectA**), для удобства смешанных приложений ANSI/Unicode. Вызовы **функций в** действительности вызывают недекорированную точку входа (**SQLDriverConnect**).  
  
 Если приложение компилируется с _UNICODE **#define**, файл заголовка ODBC будет сопоставлять недекорированные вызовы функций (**SQLDriverConnect**) с версией Юникода (**SQLDriverConnectW**).  
  
 Диспетчер драйверов распознает драйвер как драйвер Unicode, если драйвер поддерживает **склконнектв** .  
  
 Если драйвер является драйвером Юникода, диспетчер драйверов выполняет вызовы функций следующим образом:  
  
-   Передает функцию без строковых аргументов или параметров непосредственно в драйвер.  
  
-   Передает функции Юникода (с суффиксом *W* ) непосредственно в драйвер.  
  
-   Преобразует функцию ANSI (с суффиксом *A* ) в функцию Юникода (с суффиксом *W* ), преобразуя строковые аргументы в символы Юникода и передавая в драйвер функцию Юникода.  
  
 Если драйвер является драйвером ANSI, диспетчер драйверов выполняет вызовы функций следующим образом:  
  
-   Передает функции без строковых аргументов или параметров непосредственно в драйвер.  
  
-   Преобразует функции Юникода (с суффиксом *W* ) в вызов функции ANSI и передает его драйверу.  
  
-   Передает функцию ANSI непосредственно в драйвер.  
  
 Диспетчер драйверов поддерживает внутреннюю поддержку Юникода. В результате, оптимальная производительность достигается приложением Юникода, работающим с драйвером Unicode, поскольку диспетчер драйверов просто передает функции Юникода через драйвер. При работе приложения ANSI с драйвером ANSI диспетчер драйверов должен преобразовать строки из ANSI в Юникод при обработке некоторых функций, таких как **SQLDriverConnect**. После обработки функции Диспетчер драйверов должен преобразовать строку Юникода обратно в ANSI перед отправкой функции в драйвер ANSI.  
  
 Приложение не должно изменять или считывать связанные буферы параметров, когда драйвер возвращает SQL_STILL_EXECUTING или SQL_NEED_DATA. Диспетчер драйверов оставляет буферы привязанными к ANSI до тех пор, пока драйвер не возвратит SQL_SUCCESS, SQL_SUCCESS_WITH_INFO или SQL_ERROR. Многопоточное приложение не должно получать доступ к каким-либо связанным значениям параметров, в которых другой поток исполняет инструкцию SQL. Диспетчер драйверов преобразует данные из Юникода в ANSI «на месте», а другой поток может видеть данные ANSI в этих буферах, пока драйвер все еще обрабатывает инструкцию SQL. Приложения, которые привязывают данные Юникода к драйверу ANSI, не должны привязывать два разных столбца к одному и тому же адресу.
