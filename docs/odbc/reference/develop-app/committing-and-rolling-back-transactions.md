---
title: Фиксация и откат транзакции | Документация Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- rolling back transactions [ODBC]
- committing transactions [ODBC]
- transactions [ODBC], rolling back
- transactions [ODBC], committing
ms.assetid: 800f2c1a-6f79-4ed1-830b-aa1a62ff5165
author: MightyPen
ms.author: genemi
manager: craigg
ms.openlocfilehash: 194a90482946814995ca1963f7c8fc4bce48d223
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/15/2019
ms.locfileid: "63126367"
---
# <a name="committing-and-rolling-back-transactions"></a>Фиксация и откат транзакций
Для фиксации или отката транзакции в режиме ручной фиксации, приложение вызывает **SQLEndTran**. Драйверы для СУБД, которые обычно поддерживают транзакции реализуют эту функцию, выполнив **ЗАФИКСИРОВАТЬ** или **ОТКАТА** инструкции. Диспетчер драйверов не вызывает **SQLEndTran** при подключении в режиме автоматической фиксации; он просто возвращает SQL_SUCCESS, даже если приложение попытается выполнить откат транзакции. Так как драйверы для СУБД, которые не поддерживают транзакции всегда находятся в режиме автоматической фиксации, они могут либо реализовать **SQLEndTran** для возвращения SQL_SUCCESS, не выполняя никаких действий или реализует его вообще.  
  
> [!NOTE]  
>  Приложения не должны фиксации или отката транзакции, выполнив **ФИКСАЦИИ** или **ОТКАТА** инструкции с **SQLExecute** или **SQLExecDirect**. Это влияние не определены. Возможны следующие проблемы драйвера, не зная, когда транзакция является активной и эти инструкции, сбой в источниках данных, которые не поддерживают транзакции. Эти приложения должны вызывать метод **SQLEndTran** вместо этого.  
  
 Если приложение передает дескриптор среды **SQLEndTran** но концептуально вызывает не передавайте дескриптор соединения, диспетчер драйверов не **SQLEndTran** с дескриптором среды для каждого драйвера, имеется один или несколько активных соединений в среде. Затем драйвер фиксирует транзакции для каждого подключения в среде. Тем не менее важно понимать, что драйвер и диспетчера драйверов выполняемое двухфазной фиксации для подключений в среде; Это просто программирования удобство одновременно вызывать **SQLEndTran** для всех подключений в среде.  
  
 (Объект *двухфазной фиксации* обычно используется для фиксации транзакции, распределенные по нескольким источникам данных. На первой стадии его источники данных опрашиваются относительно того, их можно фиксировать их частью транзакции. На втором этапе фактически фиксации транзакции во всех источниках данных. Если все источники данных ответить на первом этапе, что они не удается зафиксировать транзакцию, второй этап не выполняется.)
