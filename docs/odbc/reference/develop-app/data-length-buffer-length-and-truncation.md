---
title: Длина данных, длина буфера и объемы Документы Майкрософт
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
helpviewer_keywords:
- data buffers [ODBC], length
- data length [ODBC]
- truncating data [ODBC]
- length of data buffers [ODBC]
- buffers [ODBC], length
ms.assetid: 2825c6e7-b9ff-42fe-84fc-7fb39728ac5d
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: b2e7b8d1e60cd83594509c2ab5cbc24e04546eca
ms.sourcegitcommit: ce94c2ad7a50945481172782c270b5b0206e61de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81305237"
---
# <a name="data-length-buffer-length-and-truncation"></a>Длина данных, длина буфера и усечение
*Длина данных* — это длина данных, так как она будет храниться в буфере данных приложения, а не так, как она хранится в источнике данных. Это различие важно, поскольку данные часто хранятся в разных типах в буфере данных, чем в источнике данных. Таким образом, для данных, отправляемых в источник данных, это длина данных до преобразования в тип источника данных. Для данных, извлекаемых из источника данных, это длина данных после преобразования в тип буфера данных и до того, как будет выполнена какая-либо усечение.  
  
 Для данных с фиксированной длиной, таких как целый ряд или структура даты, длина данных всегда является размером с тип данных. Как правило, приложения выделяют буфер данных, который представляет собой размер типа данных. Если приложение выделяет меньший буфер, последствия не определены, поскольку драйвер предполагает, что буфер данных является размером типа данных, и не усечение данных, чтобы поместиться в меньший буфер. Если приложение выделяет больший буфер, дополнительное пространство никогда не используется.  
  
 Для данных с переменной длиной, таких как символ или двоичные данные, важно признать, что длина данных отдельно от данных и часто отличается от длины буфера. Связь этих двух длин описана в разделе [Буферы.](../../../odbc/reference/develop-app/buffers.md) Если длина данных превышает длину буфера байт, водитель усечен ные творит полученные данные на длину буфера и возвращает SQL_SUCCESS_WITH_INFO с помощью S'LSTATE 01004 (данные усечены). Тем не менее, возвращенная длина байт — это длина непросеченных данных.  
  
 Например, предположим, что приложение выделяет 50 байтов для буфера двоичных данных. Если водитель имеет 10 байтов двоичных данных, чтобы вернуть, он возвращает эти 10 байтов в буфере. Длина байт данных составляет 10, а длина байт буфера 50. Если водитель имеет 60 байтов двоичных данных для возвращения, он уселяет данные до 50 байтов, возвращает эти байты в буфере и возвращает SQL_SUCCESS_WITH_INFO. Длина байт данных составляет 60 (длина до усечения), а длина байт буфера по-прежнему 50.  
  
 Для каждого усеченного столбца создается диагностическая запись. Поскольку драйверу требуется время для создания этих записей, а для обработки приложения — усечение может ухудшить производительность. Обычно приложение может избежать этой проблемы, выделяя достаточно большие буферы, хотя это может быть невозможно при работе с длинными данными. Когда происходит усечение данных, приложение иногда может выделить больший буфер и восстановить данные; это не верно во всех случаях. Если усечение происходит при получении данных с вызовами на **S'LGetData,** приложение не нужно вызывать **S'LGetData** для данных, которые уже были возвращены; для получения дополнительной [информации, см.](../../../odbc/reference/develop-app/getting-long-data.md)
