---
title: Загрузка с помощью служб Integration Services
description: Содержит справочные сведения и информацию о развертывании для загрузки данных в Параллельное хранилище данных (PDW) с помощью пакетов SQL Server Integration Services (SSIS).
author: mzaman1
ms.prod: sql
ms.technology: data-warehouse
ms.topic: conceptual
ms.date: 04/17/2018
ms.author: murshedz
ms.reviewer: martinle
ms.custom: seo-dt-2019
ms.openlocfilehash: b0bcb5cfe1ec4111aaea7153f35bca084df62b76
ms.sourcegitcommit: e042272a38fb646df05152c676e5cbeae3f9cd13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2020
ms.locfileid: "74401013"
---
# <a name="load-data-with-integration-services-to-parallel-data-warehouse"></a>Загрузка данных с Integration Services в Параллельное хранилище данных
Содержит ссылки и сведения о развертывании для загрузки данных в SQL Server Параллельное хранилище данных с помощью пакетов SQL Server Integration Services (SSIS).  
  
<!-- MISSING LINKS

## <a name="BeforeBegin"></a>Before You Begin  
Before you can start loading data, use the following topics to install the Integration Services Destination Adapters and to create an Integration Services package that connects SQL Server PDW:  


-   [Install Integration Services destination adapters](install-integration-services-destination-adapters.md)  
  
-   [Connect With Integration Services for loading](connect-with-ssis-for-loading.md)  
  
For general information about developing Integration Services packages, see [Designing and Implementing Packages (Integration Services)](https://msdn.microsoft.com/library/ms141091\(v=sql11\).aspx) on MSDN.  

-->
  
## <a name="basics"></a><a name="Basics"></a>Основы  
Integration Services является компонентом SQL Server для высокопроизводительного извлечения, преобразования и загрузки данных (ETL) и обычно используется для заполнения и обновления хранилища данных.  
  
Адаптер назначения PDW — это Integration Services компонент, который позволяет загружать данные в PDW с помощью пакетов Integration Services dtsx. В рабочем процессе пакета для SQL Серверпдв можно загружать и объединять данные из нескольких источников и загружать данные в несколько назначений. Загрузки происходят параллельно как внутри пакета, так и среди нескольких параллельно выполняющихся пакетов; параллельно в одном устройстве может выполняться до 10 загрузок.  
  
В дополнение к задачам, описанным в этом разделе, можно использовать другие функции Integration Services для фильтрации, преобразования, анализа и очистки данных перед их загрузкой в хранилище данных. Кроме того, можно повышать производительность рабочих процессов пакета путем запуска инструкций SQL, запуска дочерних пакетов или отправки почты.  
  
Полную документацию по Integration Services см. в разделе [SQL Server Integration Services](../integration-services/sql-server-integration-services.md).  
  
## <a name="methods-for-running-an-integration-services-package"></a><a name="HowToDeployPackage"></a>Методы для запуска пакета Integration Services  
Используйте один из этих методов для запуска пакета Integration Services.  
  
### <a name="run-from-sql-server-2008-r2-business-intelligence-development-studio-bids"></a>Запуск с SQL Server 2008 R2 Business Intelligence Development Studio (предложения)  
Чтобы запустить пакет из предложения, щелкните правой кнопкой мыши пакет и выберите команду **выполнить пакет**.  
  
По умолчанию при помощи предложений выполняется выполнение пакетов с использованием 64-разрядных двоичных файлов. Это определяется свойством пакета **Run64BitRuntime** . Чтобы задать это свойство, перейдите в **Обозреватель решений**, щелкните проект правой кнопкой мыши и выберите пункт **свойства**. На **страницах свойств Integration Services**перейдите к **свойствам конфигурации** и выберите **Отладка**. Вы увидите свойство **Run64BitRuntime** в **параметрах отладки**. Чтобы использовать 32-разрядные среды выполнения, задайте для этого свойства **значение false**. Чтобы использовать 64-разрядные среды выполнения, задайте для этого параметра **значение true**.  
  
### <a name="run-from-sql-server-2012-sql-server-data-tools"></a>Запуск с SQL Server 2012 SQL Server Data Tools  
Чтобы запустить пакет из SQL Server Data Tools, щелкните пакет правой кнопкой мыши и выберите команду **выполнить пакет**.  
  
### <a name="run-from-powershell"></a>Запуск из PowerShell  
Чтобы запустить пакет из Windows PowerShell с помощью программы **dtexec** :`dtexec /FILE <packagePath>`  
  
Например `dtexec /FILE "C:\Users\User1\Desktop\Package.dtsx"`.  
  
### <a name="run-from-a-windows-command-prompt"></a>Запуск из командной строки Windows 
Чтобы запустить пакет из командной строки Windows, используйте программу **dtexec** :`dtexec /FILE <packagePath>`  
  
Например: `dtexec /FILE "C:\Users\User1\Desktop\Package.dtsx"`  
  
## <a name="data-types"></a><a name="DataTypes"></a>Типы данных  
При использовании Integration Services для загрузки данных из источника данных в SQL Server PDW базу данных сначала сопоставляются с исходными данными с Integration Services типами данных. Это позволяет сопоставлять данные из нескольких источников с общим набором типов данных.  
  
Затем данные сопоставляются из Integration Services с SQL Server PDWными типами данных. Для каждого SQL Server PDW типа данных в следующей таблице перечислены Integration Services типы данных, которые можно преобразовать в тип данных SQL Server PDW.  
  
|Тип данных PDW|Integration Services типы данных, которые сопоставляются с типом данных PDW|  
|---------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------|  
|BIT|DT_BOOL|  
|bigint|DT_I1, DT_I2, DT_I4, DT_I8, DT_UI1, DT_UI2, DT_UI4|  
|CHAR|DT_STR|  
|DATE|DT_DBDATE|  
|DATETIME|DT_DATE, DT_DBDATE, DT_DBTIMESTAMP, DT_DBTIMESTAMP2|  
|DATETIME2|DT_DATE, DT_DBDATE, DT_DBTIMESTAMP, DT_DBTIMESTAMP2|  
|DATETIMEOFFSET|DT_WSTR|  
|DECIMAL|DT_DECIMAL, DT_I1, DT_I2, DT_I4, DT_I4, DT_I8, DT_NUMERIC, DT_UI1, DT_UI2, DT_UI4, DT_UI8|  
|FLOAT|DT_R4, DT_R8|  
|INT|DT_I1, DTI2, DT_I4, DT_UI1, DT_UI2|  
|MONEY|DT_CY|  
|NCHAR|DT_WSTR|  
|NUMERIC|DT_DECIMAL, DT_I1, DT_I2, DT_I4, DT_I8, DT_NUMERIC, DT_UI1, DT_UI2, DT_UI4, DT_UI8|  
|NVARCHAR|DT_WSTR, DT_STR|  
|real|DT_R4|  
|SMALLDATETIME|DT_DBTIMESTAMP2|  
|SMALLINT|DT_I1, DT_I2, DT_UI1|  
|SMALLMONEY|DT_R4|  
|TIME|DT_WSTR|  
|TINYINT|DT_I1|  
|VARBINARY|DT_BYTES|  
|VARCHAR|DT_STR|  
  
**Ограниченная поддержка для точности типов данных**  
  
PDW создает ошибку проверки при сопоставлении DT_NUMERIC или DT_DECIMAL входного столбца, содержащего значение с точностью больше 28.  
  
**Неподдерживаемые типы данных**  
  
SQL Server PDW не поддерживает следующие типы данных Integration Services:  
  
-   DT_DBTIMESTAMPOFFSET  
  
-   DT_DBTIME2  
  
-   DT_GUID  
  
-   DT_IMAGE  
  
-   DT_NTEXT  
  
-   DT_TEXT  
  
Чтобы загрузить столбцы, содержащие данные этих типов, в SQL Server PDW, необходимо добавить преобразование «Конвертация данных» в поток данных для преобразования данных в совместимый тип данных.  
  
## <a name="permissions"></a>Разрешения  
Для запуска пакета Integration Services Load необходимо следующее:  
  
-   Разрешение LOAD для базы данных.  
  
-   Применимые разрешения на вставку, обновление и удаление для целевой таблицы.  
  
-   Если используется промежуточная база данных, создайте разрешение на промежуточную базу данных. Это предназначено для создания временной таблицы.  
  
-   Если промежуточная база данных не используется, создайте разрешение для целевой базы данных. Это предназначено для создания временной таблицы.  
  
## <a name="general-remarks"></a><a name="GenRemarks"></a>Общие замечания  
Если Integration Services пакет содержит несколько назначений SQL Server PDW и одно из подключений завершается, Integration Services прекращает передачу данных во все назначения SQL Server PDW.  
  
## <a name="limitations-and-restrictions"></a><a name="Limits"></a>Ограничения  
Для пакета Integration Services количество назначений SQL Server PDW для одного и того же источника данных ограничено максимальным числом активных нагрузок. Это максимальное значение — стандартное и не предназначено для настройки пользователем. 

<!-- MISSING LINKS
For the maximum number of loads and queued loads per appliance, see [Minimum and maximum values](minimum-and-maximum-values.md).  
-->
  
Каждое назначение пакета Integration Services для одного и того же источника данных считается одной нагрузкой при выполнении пакета. Например, предположим, что максимальное количество активных нагрузок равно 10. Пакет не будет запущен, если попытается открыть 11 или больше назначений для одного источника данных.  
  
Несколько пакетов могут работать параллельно при условии, что каждый пакет использует не больше максимального количества активных нагрузок. Например, если максимальное количество активных нагрузок составляет 10, то можно одновременно запускать два пакета по 10 назначений в каждом. Пока один пакет будет выполняться, второй будет ожидать в очереди нагрузок.  
  
Если количество нагрузок в очереди нагрузок превысит максимальное количество нагрузок в очереди, пакет не запустится. Например, если максимальное количество нагрузок — 10 на устройство, а максимальное количество нагрузок в очереди — 40 на устройство, можно одновременно выполнить пять Integration Services пакетов, каждый из которых открывает 10 назначений. Если произойдет попытка запустить шестой пакет, он не запустится.  

> [!IMPORTANT]
> Использование OLE DB источника данных в службах SSIS с адаптером назначения PDW может привести к повреждению данных, если исходная таблица содержит столбцы типа char и varchar с параметрами сортировки SQL. Рекомендуется использовать источник ADO.NET, если исходная таблица содержит столбцы типа char или varchar с параметрами сортировки SQL. 

  
## <a name="locking-behavior"></a><a name="Locks"></a>Поведение блокировки  
При загрузке данных с Integration Services SQL Серверпдв использует блокировки на уровне строк для обновления данных в целевой таблице. Это означает, что каждая строка будет недоступна для чтения и записи на время обновления. Строки в целевой таблице не блокируются, пока данные загружаются в промежуточную таблицу.  
  
## <a name="examples"></a><a name="Examples"></a>Примеры  
  
### <a name="a-simple-load-from-flat-file"></a><a name="Walkthrough"></a>А. Простая загрузка из неструктурированного файла  
В следующем пошаговом руководстве демонстрируется простая загрузка данных с помощью Integration Services для загрузки данных неструктурированного файла в устройство SQL Server PDW.  В этом примере предполагается, что Integration Services уже установлен на клиентском компьютере, а SQL Server PDW назначение установлено, как описано выше.  
  
В этом примере мы загрузим в `Orders` таблицу, которая имеет следующий DDL. `Orders` Таблица является частью `LoadExampleDB` базы данных.  
  
```sql  
CREATE TABLE LoadExampleDB.dbo.Orders (  
   id INT,  
   city varchar(25),  
   lastUpdateDate DATE,  
   orderDate DATE)  
;  
```  
  
Ниже приведена загрузка данных.  
  
```  
id        city           lastUpdateDate     orderdate  
--------- -------------- ------------------ ----------  
1         Seattle        2010-05-01         2010-01-01  
2         Denver         2002-06-25         1999-01-02  
```  
  
При подготовке к загрузке создайте Неструктурированный файл `exampleLoad.txt`, содержащий данные загрузки:  
  
```  
id,city,lastUpdateDate,orderDate  
1,Seattle,2010-05-01,2010-01-01  
2,Denver,2002-06-25,1999-01-02  
```  
  
Сначала создайте пакет Integration Services, выполнив следующие действия.  
  
1.  В SQL Server Data Tools \(SSDT\)выберите **файл**, **создать**, а затем **проект**. Выберите **Integration Services проект** из списка параметров. Присвойте этому `ExampleLoad`проекту имя и нажмите кнопку **ОК**.  
  
2.  Перейдите на вкладку **поток управления** и перетащите **задачу потока данных** из области **элементов** на панель **поток управления** .  
  
3.  Перейдите на вкладку **поток данных** и перетащите элемент **источник неструктурированного файла** с **панели элементов** на панель **поток данных** . Дважды щелкните только что созданное поле, чтобы открыть **Редактор источника "Неструктурированный файл**".  
  
4.  Щелкните **Диспетчер соединений** и выберите **создать**.  
  
5.  В поле **имя диспетчера соединений** введите понятное имя для соединения. В этом примере — `Example Load Flat File CM`.  
  
6.  Нажмите кнопку **Обзор** и выберите `ExampleLoad.txt` файл с локального компьютера.  
  
7.  Поскольку Неструктурированный файл содержит строку с именами столбцов, щелкните **имена столбцов в первом поле строки данных** .  
  
8.  Щелкните **столбцы** в левом столбце и просмотрите данные, которые будут загружены, чтобы убедиться, что имена столбцов и данные правильно интерпретированы.  
  
9. В левом столбце щелкните **Дополнительно** . Щелкните имя каждого столбца, чтобы проверить тип данных, связанный с данными. Введите изменения в поле, чтобы типы данных загруженных данных были совместимы с типами целевых столбцов.  
  
10. Нажмите кнопку **ОК** , чтобы сохранить диспетчер соединений.  
  
11. Нажмите кнопку **ОК** , чтобы выйти из **редактора источника "Неструктурированный файл**".  
  
Укажите назначение для потока данных.  
  
1.  Перетащите **SQL Server PDW назначение** из области **элементов** в область **потока данных** .  
  
2.  Дважды щелкните только что созданное поле, чтобы загрузить **Редактор назначения SQL Server PDW**.  
  
3.  Щелкните стрелку вниз рядом с пунктом **Диспетчер подключений**.  
  
4.  Выберите **создать новое соединение**.  
  
5.  Введите сведения о сервере, пользователе, пароле и целевой базе данных с информацией, относящейся к устройству. (Примеры показаны ниже). После этого щелкните **OK**.  
  
    Для подключений InfiniBand **имя сервера**: введите <Appliance-Name>-SQLCTL01, 17001.  
  
    Для Ethernet-подключений укажите **имя сервера**: введите IP адрес кластера узлов элемента управления, запятую, порт 17001. Например, 10.192.63.134, 17001.  
  
    **Нажат**`user1`  
  
    **Пароль**`password1`  
  
    **Целевая база данных:**`LoadExampleDB`  
  
6.  Выберите целевую таблицу: `Orders`.  
  
7.  Выберите **Добавить** в качестве режима загрузки и нажмите кнопку **ОК**.  
  
Укажите поток данных от источника к назначению.  
  
1.  На панели **поток данных** перетащите зеленую стрелку из поля **источник неструктурированного файла** в поле **назначения SQL Server PDW** .  
  
2.  Дважды щелкните поле **назначения SQL Server PDW** , чтобы снова увидеть **Редактор назначения SQL Server PDW** . Имена столбцов из неструктурированного файла слева отображаются в разделе **несопоставленные входные столбцы**. Имена столбцов из целевой таблицы должны отображаться справа в разделе **Несопоставленные целевые столбцы**. Сопоставьте столбцы, перетащив или дважды щелкнув совпадающие имена столбцов в списках **несопоставленные входные столбцы** и **Несопоставленные целевые столбцы** в поле **сопоставленные столбцы** . Нажмите кнопку **ОК**, чтобы сохранить параметры.  
  
3.  Сохраните пакет, нажав кнопку **сохранить** в меню **файл** .  
  
Запустите пакет на компьютере Integration Services.  
  
1.  В**обозреватель решений** Integration Services (правый столбец) щелкните `Package.dtsx` правой кнопкой мыши и выберите команду **выполнить**.  
  
2.  Пакет будет запущен, а ход выполнения и все ошибки будут отображаться на панели **ход выполнения** . Используйте клиент SQL для подтверждения нагрузки или мониторинга нагрузки с помощью консоли администрирования SQL Server PDW.  
  
## <a name="see-also"></a>См. также:  
[Создание задачи «Скрипт», использующей адаптер назначения служб SSIS PDW](create-ssis-script-task-using-pdw-destination-adapter.md)  
[SQL Server Integration Services](../integration-services/sql-server-integration-services.md)  
[Проектирование и разработка пакетов (службы Integration Services)](https://msdn.microsoft.com/library/ms141091\(v=sql11\).aspx)  
[Учебник. Создание основного пакета с помощью мастера](https://technet.microsoft.com/library/ms365330\(v=sql11\).aspx)  
[Начало работы (Integration Services)](https://go.microsoft.com/fwlink/?LinkId=202412)  
[Пример динамического создания пакета](https://go.microsoft.com/fwlink/?LinkId=202413)  
[Конструирование пакетов служб SSIS с учетом параллелизма (видеоматериал по SQL Server)](https://msdn.microsoft.com/library/dd795221.aspx)  
[Microsoft SQL Server примеры сообщества: Integration Services](https://go.microsoft.com/fwlink/?LinkId=202415)  
[Повышение эффективности добавочной загрузки с помощью системы отслеживания измененных данных](../integration-services/change-data-capture/change-data-capture-ssis.md)  
[преобразование «Медленно изменяющееся измерение»](../integration-services/data-flow/transformations/slowly-changing-dimension-transformation.md)  
[задача «Массовая вставка»](../integration-services/control-flow/bulk-insert-task.md)  
  
<!-- MISSING LINKS
[Grant permissions to load data](grant-permissions-to-load-data.md)  
[Common metadata query examples](metadata-query-examples.md)
-->
