---
title: Настройка InfiniBand
description: Описание настройки сетевых адаптеров InfiniBand на клиентском сервере без устройства для подключения к управляющему узлу в Parallel Data Warehouse (PDW). Используйте эти инструкции для базовой связи и обеспечения высокого уровня доступности, чтобы загрузка, Архивация и другие процессы автоматически подключались к активной сети InfiniBand.
author: mzaman1
ms.prod: sql
ms.technology: data-warehouse
ms.topic: conceptual
ms.date: 04/17/2018
ms.author: murshedz
ms.reviewer: martinle
ms.custom: seo-dt-2019
ms.openlocfilehash: 583d7617c0620d5d1ec24d60fbf10435a547616d
ms.sourcegitcommit: e042272a38fb646df05152c676e5cbeae3f9cd13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2020
ms.locfileid: "74401292"
---
# <a name="configure-infiniband-network-adapters-for-analytics-platform-system"></a>Настройка сетевых адаптеров InfiniBand для аналитической системы платформы аналитики
Описание настройки сетевых адаптеров InfiniBand на клиентском сервере без устройства для подключения к управляющему узлу в Parallel Data Warehouse (PDW). Используйте эти инструкции для базовой связи и обеспечения высокого уровня доступности, чтобы загрузка, Архивация и другие процессы автоматически подключались к активной сети InfiniBand.  
  
## <a name="description"></a><a name="Basics"></a>Nописание  
В этих инструкциях показано, как найти и установить правильные IP-адреса InfiniBand и маски подсети на сервере, подключенном к серверу InfiniBand. В них также объясняется, как настроить сервер для использования DNS-устройства APS, чтобы ваше подключение разрешилось в активную сеть InfiniBand.  
  
Для обеспечения высокой доступности ТД имеет две сети InfiniBand, одна активная и одна пассивная. Каждая сеть InfiniBand имеет разные IP-адреса для управляющего узла. Если активная сеть InfiniBand выходит из строя, пассивная сеть InfiniBand становится активной сетью. В этом случае сценарий или процесс автоматически подключается к активной сети InfiniBand без изменения параметров сценария.  
  
В частности, в этой статье вы:  
  
1.  Найдите IP-адреса InfiniBand DNS-серверов APS (appliance_domain-AD01 и appliance_domain *-AD02). Для этого войдите на серверы AD01 и AD02 и получите IP-адреса для каждой сети InfiniBand. IP-адреса InfiniBand на узле AD являются IP-адресами DNS.  
  
2.  Настройте каждый сетевой адаптер для использования доступного IP-адреса в сетях APS InfiniBand.  
  
    1.  При наличии двух сетевых адаптеров InfiniBand вы настраиваете один адаптер с доступным IP-адресом в первой сети InfiniBand, которая называется TeamIB1, а другой адаптер с доступным IP-адресом во второй сети InfiniBand, который называется TeamIB2. Используйте IP-адрес appliance_domain AD01 TeamIB1 в качестве предпочитаемого DNS-сервера и appliance_domain-AD02 TeamIB1 IP-адрес в качестве альтернативного DNS-сервера для сетевого адаптера TeamIB1. Используйте IP-адрес appliance_domain AD01 TeamIB2 в качестве предпочитаемого DNS-сервера и appliance_domain-AD02 TeamIB2 IP-адрес в качестве альтернативного DNS-сервера для сетевого адаптера TeamIB2.  
  
    2.  Если у вас только один сетевой адаптер InfiniBand, вы можете настроить адаптер с доступным IP-адресом из одной из сетей InfiniBand. Затем необходимо настроить предпочитаемый и альтернативный DNS-сервер на этом адаптере с помощью appliance_domain-AD01 TeamIB1 и appliance_domain-AD02 TeamIB1 или с помощью appliance_domain-AD01 TeamIB2 и appliance_domain-AD02 TeamIB2 в той же сети, что и настроенный адаптер в качестве предпочитаемого и альтернативного DNS-сервера соответственно.  
  
3.  Настройте сетевой адаптер InfiniBand для использования DNS-серверов APS, чтобы разрешить подключение к активной сети InfiniBand.  
  
    1.  Чтобы настроить этот параметр, используйте дополнительные параметры TCP/IP, чтобы добавить DNS-суффикс домена устройства в начало списка DNS-суффиксов на клиентском сервере. Этот параметр необходимо настроить только на одном из сетевых адаптеров; параметр применяется к обоим адаптерам.  
  
После настройки сетевых адаптеров InfiniBand клиентские процессы могут подключаться к узлу управления в сети InfiniBand, используя `PDW_region-SQLCTL01` для адреса сервера. Сервер добавляет DNS-суффикс системы аналитики или можно ввести полный адрес `PDW_region-SQLCTL01.appliance_domain.pdw.local`.  
  
Например, если имя региона PDW — МИПДВ, а имя устройства — Мяпс, спецификация сервера dwloader для загрузки данных будет одной из следующих:  
  
-   `dwloader -S MYPDW-SQLCTL01.MyAPS.pdw.local`  
  
-   `dwloader -S MYPDW-SQLCTL01`  
  
## <a name="before-you-begin"></a><a name="BeforeBegin"></a>Перед началом  
  
### <a name="requirements"></a>Требования  
Для входа на узел AD01 требуется учетная запись домена устройства APS. Например, F12345 * \Администратор.  
  
На клиентском сервере должна быть установлена учетная запись Windows, имеющая разрешение на настройку сетевых адаптеров.  
  
### <a name="prerequisites"></a>Предварительные требования  
В этих инструкциях предполагается, что клиентский сервер уже установлен в стойку и подключен к сети устройства InfiniBand. Инструкции по установке в стойку и кабель см. [в статье получение и настройка сервера загрузки](acquire-and-configure-loading-server.md).  
  
### <a name="general-remarks"></a>Общие замечания  
С помощью SQLCTL01 служба DNS платформы аналитики подключает ваш клиентский сервер к управляющему узлу, используя активную сеть InfiniBand. Это относится только к подключению; Если сеть InfiniBand выходит из строя во время загрузки или резервного копирования, необходимо перезапустить процесс.  
  
Для удовлетворения собственных бизнес-требований можно также присоединить клиентский сервер к собственной рабочей группе или домену Windows без устройства.  
  
## <a name="step-1-obtain-the-appliance-infiniband-network-settings"></a><a name="Sec1"></a>Шаг 1. получение параметров сети устройства InfiniBand  
*Получение параметров сети устройства InfiniBand*  
  
1.  Войдите в узел AD01 устройства с помощью учетной записи appliance_domain \ администратор.  
  
2.  На узле AD01 устройства откройте панель управления, выберите сеть и Интернет, выберите центр сети и общего доступа *, а затем выберите Изменить параметры адаптера.  
  
3.  В окне Сетевые подключения щелкните правой кнопкой мыши команду Team IB1 и выберите пункт Свойства.  
  
    ![Подключения InfiniBand на узле управления](media/network-teamib.png "Подключения InfiniBand на узле управления")  
  
4.  В окно свойств протокола Интернета версии 4 (TCP/IPv4) запишите значения для **IP-адреса** и **маски подсети**.  IP-адресом узла ** _устройства\_Domain_-AD01** является IP-адрес DNS-сервера системной платформы аналитики.  
  
5.  Повторите шаги 1-5 выше для адаптера TeamIB1 на сервере ** _domain\__-AD02 на устройстве** .  
  
    ![Свойства узла управления PDW InfiniBand 1](media/network-ip1-properties.png "Свойства узла управления PDW InfiniBand 1")  
  
6.  Нажмите Отмена, чтобы закрыть окно.  
  
7.  Найдите неиспользуемый IP-адрес в сети TeamIB1 и запишите его.  
  
    Чтобы найти неиспользуемый IP-адрес, Откройте командное окно и попробуйте проверить связь с IP-адресами в диапазоне адресов для вашего устройства. В этом примере IP-адресом TeamIB1 сети является 172.16.14.30. Найдите IP-адрес, который начинается с 172.16.14, который не используется. Например, в командной строке введите команду ping 172.16.14.254. Если запрос проверки связи завершается неудачно, IP-адрес доступен.  
  
8.  Сделайте то же самое для TeamIB2. В окне "Сетевые подключения" щелкните правой кнопкой мыши команду Team IB2 и выберите пункт Свойства.  
  
9. В окно свойств протокол Интернета версии 4 (TCP/IPv4) запишите значения IP-адреса и маски подсети для TeamIB2.  
  
10. Повторите шаги 8-9 выше для адаптера TeamIB2 на сервере appliance_domain-AD02.  
  
    ![Свойства для TeamIB2](media/network-ip2-properties.png "Свойства для TeamIB2")  
  
11. Найдите неиспользуемый IP-адрес в сети **TeamIB2** и запишите его.  
  
    Чтобы найти неиспользуемый IP-адрес, Откройте командное окно и попробуйте проверить связь с IP-адресами в диапазоне адресов для вашего устройства. В этом примере IP-адресом TeamIB2 сети является 172.16.18.30. Найдите IP-адрес, который начинается с 172.16.18, который не используется. Например, в командной строке введите команду ping 172.16.18.254. Если запрос проверки связи завершается неудачно, IP-адрес доступен.  
  
## <a name="step-2-configure-the-infiniband-network-adapter-settings-on-your-client-server"></a><a name="Sec2"></a>Шаг 2. Настройка параметров сетевого адаптера InfiniBand на клиентском сервере  

### <a name="notes"></a>Примечания  
  
-   Ниже показано, как зарегистрировать сервер на DNS-серверах ТД.  
  
-   Чтобы удовлетворить свои потребности в сети, можно также присоединить клиентский сервер к собственной рабочей группе или домену Windows без устройства.  
  
-   Инструкции по настройке двух сетевых адаптеров на каждом сервере.  Если у вас есть только один сетевой адаптер, выберите одну из сетей для настройки на сетевом адаптере, а затем добавьте второй IP-адрес DNS в качестве альтернативного DNS-сервера.  
  
### <a name="to-configure-the-infiniband-network-adapter-settings-on-your-client-server"></a>Настройка параметров сетевого адаптера InfiniBand на клиентском сервере  
  
1.  Войдите в систему как администратор Windows для загрузки, резервного копирования или другого клиентского сервера в сети устройства InfiniBand.  
  
2.  Откройте панель управления *, выберите центр сети и общего доступа, а затем выберите Изменить параметры адаптера.  
  
### <a name="to-configure-the-first-network-adapter"></a>Настройка первого сетевого адаптера  
  
1.  В окне Сетевые подключения щелкните правой кнопкой мыши один из неопределенных сетевых слотов для адаптера Mellanox и выберите пункт Свойства.  
  
    ![Выберите сети InfiniBand](media/network-connections.png "Выберите сети InfiniBand")  
  
2.  В окно свойств  
  
    1.  На вкладке Общие задайте для IP-адреса IP-адрес, который вы проверили как бесплатный в проверке связи для TeamIB1. Для примеров значений, используемых в этой статье, необходимо ввести 172.16.14.254.  
  
    2.  Задайте маску подсети для маски подсети, записанной для TeamIB1.  
  
    3.  Укажите в качестве предпочитаемого DNS-сервера адрес TeamIB1, который вы написали ранее, с узла appliance_domain *-AD01.  
  
    4.  В качестве альтернативного DNS-сервера необходимо указать TeamIB1, который вы написали ранее, с узла appliance_domain *-AD02.  
  
        ![Свойства сетевого адаптера InfiniBand 1](media/network-ib1-properties.png "SQL_Server_PDW_Network_IB1_properties")  
  
    5.  Нажмите кнопку ОК , чтобы применить изменения.  
  
### <a name="to-configure-the-second-network-adapter"></a>Настройка второго сетевого адаптера  
  
1.  Пропустите этот раздел, если у вас только один сетевой адаптер.  
  
2.  В окне Сетевые подключения щелкните правой кнопкой мыши второй неидентифицированный сетевой слот для адаптера Mellanox и выберите пункт Свойства.  
  
    ![Выберите сети InfiniBand](media/network-connections.png "Выберите сети InfiniBand")  
  
3.  В окно свойств  
  
    1.  На вкладке Общие задайте для IP-адреса IP-адрес, который вы проверили как бесплатный в проверке связи для TeamIB2. Для примеров значений, используемых в этой статье, необходимо ввести 172.16.18.254.  
  
    2.  Задайте маску подсети для маски подсети, записанной для TeamIB2.  
  
    3.  Укажите в качестве предпочитаемого DNS-сервера адрес TeamIB2, который вы написали ранее, с узла appliance_domain *-AD01.  
  
    4.  В качестве альтернативного DNS-сервера необходимо указать TeamIB2, который вы написали ранее, с узла appliance_domain *-AD02.  
  
        > [!NOTE]  
        > Если у вас есть только один сетевой адаптер, настройте предпочитаемый и альтернативный DNS-сервер с помощью устройства AD01 TeamIB1 и устройства AD02 TeamIB1 в качестве предпочитаемого и дополнительного DNS-серверов соответственно или используйте устройство AD01 TeamIB2 и устройство AD02 TeamIB2 в качестве предпочтительных и альтернативных DNS-серверов в зависимости от того, была ли выполнена отработка отказа виртуальной машины Active Directory.  
  
        ![Свойства сетевого адаптера InfiniBand 1](media/network-ib1-properties.png "Свойства сетевого адаптера InfiniBand 1")  
  
    5.  Нажмите кнопку ОК , чтобы применить изменения.  
  
### <a name="to-configure-the-dns-suffix"></a>Настройка DNS-суффикса  
  
1.  В окне Сетевые подключения щелкните правой кнопкой мыши один из сетевых слотов для адаптера Mellanox и выберите пункт Свойства.  
  
2.  Щелкните Дополнительно... переключатель.  
  
3.  В диалоговом окне Дополнительные параметры TCP/IP, если параметр Добавить следующие DNS-суффиксы (по порядку) неактивен, установите флажок Добавить следующие DNS-суффиксы (по порядку):, выберите суффикс домена устройства и нажмите кнопку Добавить.... Суффикс домена устройства`appliance_domain.local`  
  
4.  Если добавить следующие DNS-суффиксы (по порядку): параметр неактивен, можно добавить домен APS на этот сервер, изменив раздел реестра HKEY_LOCAL_MACHINE \Софтваре\полиЦиес\микрософт\виндовс Нт\днсклиент.  
  
    ![Параметры TCP/IP](media/network-tcpip.png "Параметры TCP/IP")  
  
5.  Для ускорения разрешения адресов рекомендуется переместить суффикс устройства в верхнюю часть списка.  
  
6.  Нажмите кнопку "ОК".  
  
7.  Теперь можно подключиться к сети устройства InfiniBand с помощью `PDW_region-SQLCTL01.appliance_domain.local`или просто. `appliance_domain-SQLCTL01` Подключение может быть установлено быстрее при подключении с полным именем и DNS-суффиксом.  
  
    Примеры для устройства с именем Мяпс в регионе МИПДВ PDW:  
  
    -   МИПДВ-SQLCTL01. Мяпс. local  
  
    -   МИПДВ — SQLCTL01  
  
## <a name="see-also"></a>См. также:  
[Получение и настройка сервера загрузки](acquire-and-configure-loading-server.md)  
  
